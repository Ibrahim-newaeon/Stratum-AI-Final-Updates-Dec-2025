import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as d}from"./vendor-react-Dz7uKsMg.js";import{t as l,j as De,c as X,d1 as ee,af as Te,a9 as te,f as $,a7 as se,F as P}from"./index-BQex3859.js";import"./featureFlagsStore-DvEl_DiZ.js";import{u as M,a as m,b as p}from"./vendor-query-BPt-n81V.js";import{F as C}from"./PlusIcon-ByQcgXHI.js";import{F as Ae}from"./PencilSquareIcon-8mqFv-8U.js";import{F as G}from"./TrashIcon-DR9paOX4.js";import{F as ae}from"./PlayIcon-kdWwcgbH.js";import{F as re}from"./XCircleIcon-Dk49lKz_.js";import{F as Ee}from"./PauseIcon-B4wMN419.js";import{F as qe}from"./ArrowDownTrayIcon-BpDtmKr2.js";import{F as $e}from"./EnvelopeIcon-CWLK6IWu.js";import{F as ne}from"./ChatBubbleLeftIcon-DJBD7z8K.js";import{F as oe}from"./GlobeAltIcon-C8EhIKXw.js";import{F as Pe}from"./Cog6ToothIcon-CPfpEQDd.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-motion-CR45sdSp.js";function Me({title:s,titleId:r,...f},_){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:_,"aria-labelledby":r},f),s?d.createElement("title",{id:r},s):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const le=d.forwardRef(Me),c={getTemplates:async s=>(await l.get("/reporting/templates",{params:s})).data.data,getTemplate:async s=>(await l.get(`/reporting/templates/${s}`)).data.data,createTemplate:async s=>(await l.post("/reporting/templates",s)).data.data,updateTemplate:async(s,r)=>(await l.patch(`/reporting/templates/${s}`,r)).data.data,deleteTemplate:async s=>(await l.delete(`/reporting/templates/${s}`)).data,getSchedules:async s=>(await l.get("/reporting/schedules",{params:s})).data.data,getSchedule:async s=>(await l.get(`/reporting/schedules/${s}`)).data.data,createSchedule:async s=>(await l.post("/reporting/schedules",s)).data.data,updateSchedule:async(s,r)=>(await l.patch(`/reporting/schedules/${s}`,r)).data.data,deleteSchedule:async s=>(await l.delete(`/reporting/schedules/${s}`)).data,pauseSchedule:async s=>(await l.post(`/reporting/schedules/${s}/pause`)).data.data,resumeSchedule:async s=>(await l.post(`/reporting/schedules/${s}/resume`)).data.data,runScheduleNow:async s=>(await l.post(`/reporting/schedules/${s}/run-now`)).data.data,getScheduleHistory:async(s,r)=>(await l.get(`/reporting/schedules/${s}/history`,{params:{limit:r}})).data.data,generateReport:async s=>(await l.post("/reporting/generate",s)).data.data,getExecutions:async s=>(await l.get("/reporting/executions",{params:s})).data.data,getExecution:async s=>(await l.get(`/reporting/executions/${s}`)).data.data,downloadReport:async s=>(await l.get(`/reporting/executions/${s}/download`)).data.data,getDeliveryStatus:async s=>(await l.get(`/reporting/executions/${s}/deliveries`)).data.data,retryDelivery:async s=>(await l.post(`/reporting/deliveries/${s}/retry`)).data.data,getDeliveryChannelConfigs:async()=>(await l.get("/reporting/delivery-channels")).data.data,createDeliveryChannelConfig:async s=>(await l.post("/reporting/delivery-channels",s)).data.data,updateDeliveryChannelConfig:async(s,r)=>(await l.patch(`/reporting/delivery-channels/${s}`,r)).data.data,deleteDeliveryChannelConfig:async s=>(await l.delete(`/reporting/delivery-channels/${s}`)).data,verifyDeliveryChannel:async s=>(await l.post(`/reporting/delivery-channels/${s}/verify`)).data.data,getReportTypes:async()=>(await l.get("/reporting/report-types")).data.data};function _e(s){return M({queryKey:["reporting","templates",s],queryFn:()=>c.getTemplates(s)})}function Le(){const s=m();return p({mutationFn:c.createTemplate,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","templates"]})}})}function Oe(){const s=m();return p({mutationFn:({templateId:r,data:f})=>c.updateTemplate(r,f),onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","templates"]})}})}function ze(){const s=m();return p({mutationFn:c.deleteTemplate,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","templates"]})}})}function Ue(s){return M({queryKey:["reporting","schedules",s],queryFn:()=>c.getSchedules(s)})}function We(){const s=m();return p({mutationFn:c.createSchedule,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","schedules"]})}})}function Ke(){const s=m();return p({mutationFn:c.deleteSchedule,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","schedules"]})}})}function Qe(){const s=m();return p({mutationFn:c.pauseSchedule,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","schedules"]})}})}function He(){const s=m();return p({mutationFn:c.resumeSchedule,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","schedules"]})}})}function Ge(){const s=m();return p({mutationFn:c.runScheduleNow,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","executions"]}),s.invalidateQueries({queryKey:["reporting","schedules"]})}})}function Ie(){const s=m();return p({mutationFn:c.generateReport,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","executions"]})}})}function Ve(s){return M({queryKey:["reporting","executions",s],queryFn:()=>c.getExecutions(s)})}function Ze(){return M({queryKey:["reporting","delivery-channels"],queryFn:c.getDeliveryChannelConfigs})}function Be(){const s=m();return p({mutationFn:c.createDeliveryChannelConfig,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","delivery-channels"]})}})}function Ye(){const s=m();return p({mutationFn:c.deleteDeliveryChannelConfig,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","delivery-channels"]})}})}function Je(){const s=m();return p({mutationFn:c.verifyDeliveryChannel,onSuccess:()=>{s.invalidateQueries({queryKey:["reporting","delivery-channels"]})}})}const Xe=[{value:"campaign_performance",label:"Campaign Performance"},{value:"attribution_summary",label:"Attribution Summary"},{value:"pacing_status",label:"Pacing Status"},{value:"profit_roas",label:"Profit & ROAS"},{value:"pipeline_metrics",label:"Pipeline Metrics"},{value:"executive_summary",label:"Executive Summary"},{value:"custom",label:"Custom Report"}],ie=[{value:"pdf",label:"PDF"},{value:"csv",label:"CSV"},{value:"excel",label:"Excel"},{value:"json",label:"JSON"},{value:"html",label:"HTML"}],et=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"}],tt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],I=[{value:"email",label:"Email",icon:$e,color:"blue"},{value:"slack",label:"Slack",icon:ne,color:"purple"},{value:"teams",label:"Microsoft Teams",icon:ne,color:"indigo"},{value:"webhook",label:"Webhook",icon:oe,color:"orange"}];function jt(){var Y,J;const{toast:s}=De(),[r,f]=d.useState("templates"),[_,F]=d.useState(!1),[R,V]=d.useState(null),[x,y]=d.useState({name:"",description:"",reportType:"campaign_performance",defaultFormat:"pdf",sections:""}),[de,D]=d.useState(!1),[n,u]=d.useState({name:"",templateId:"",frequency:"weekly",dayOfWeek:1,dayOfMonth:1,hour:8,minute:0,timezone:"UTC",deliveryChannels:[],emailRecipients:"",slackChannel:""}),[ce,T]=d.useState(!1),[L,ue]=d.useState(""),[v,A]=d.useState({startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],format:"pdf"}),[me,k]=d.useState(!1),[o,h]=d.useState({channel:"email",name:"",config:{}}),[b,E]=d.useState(null),{data:i,isLoading:pe}=_e(),{data:j,isLoading:xe}=Ue(),{data:N,isLoading:he}=Ve({limit:20}),{data:w,isLoading:ge}=Ze(),O=Ie(),fe=Qe(),ye=He(),z=Le(),U=Oe(),W=ze(),K=We(),Q=Ke(),be=Ge(),H=Be(),ve=Ye(),Z=Je(),je=[{id:"templates",label:"Templates",count:i==null?void 0:i.length},{id:"schedules",label:"Schedules",count:j==null?void 0:j.length},{id:"history",label:"History",count:N==null?void 0:N.length},{id:"delivery",label:"Delivery Settings",count:w==null?void 0:w.length}],q=t=>{var a;t?(V(t),y({name:t.name,description:t.description||"",reportType:t.reportType,defaultFormat:t.defaultFormat,sections:(((a=t.config)==null?void 0:a.sections)||[]).join(", ")})):(V(null),y({name:"",description:"",reportType:"campaign_performance",defaultFormat:"pdf",sections:""})),F(!0)},Ne=async()=>{const t={name:x.name,description:x.description||void 0,reportType:x.reportType,defaultFormat:x.defaultFormat,config:{sections:x.sections.split(",").map(a=>a.trim()).filter(Boolean)}};try{R?(await U.mutateAsync({templateId:R.id,data:t}),s({title:"Template Updated",description:`"${t.name}" has been updated.`})):(await z.mutateAsync(t),s({title:"Template Created",description:`"${t.name}" is ready to use.`})),F(!1)}catch{s({title:"Error",description:"Failed to save template.",variant:"destructive"})}},B=()=>{var t;u({name:"",templateId:((t=i==null?void 0:i[0])==null?void 0:t.id)||"",frequency:"weekly",dayOfWeek:1,dayOfMonth:1,hour:8,minute:0,timezone:"UTC",deliveryChannels:[],emailRecipients:"",slackChannel:""}),D(!0)},we=async()=>{const t={};n.deliveryChannels.includes("email")&&n.emailRecipients&&(t.email={recipients:n.emailRecipients.split(",").map(a=>a.trim()).filter(Boolean)}),n.deliveryChannels.includes("slack")&&n.slackChannel&&(t.slack={channel:n.slackChannel});try{await K.mutateAsync({name:n.name,templateId:n.templateId,frequency:n.frequency,dayOfWeek:n.frequency==="weekly"?n.dayOfWeek:void 0,dayOfMonth:n.frequency==="monthly"?n.dayOfMonth:void 0,hour:n.hour,minute:n.minute,timezone:n.timezone,deliveryChannels:n.deliveryChannels,deliveryConfig:t}),s({title:"Schedule Created",description:`"${n.name}" has been scheduled.`}),D(!1)}catch{s({title:"Error",description:"Failed to create schedule.",variant:"destructive"})}},Ce=t=>{ue(t),A({startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],format:"pdf"}),T(!0)},ke=async()=>{try{await O.mutateAsync({templateId:L,startDate:v.startDate,endDate:v.endDate,format:v.format}),s({title:"Report Generated",description:"Your report is being processed."}),T(!1),f("history")}catch{s({title:"Error",description:"Failed to generate report.",variant:"destructive"})}},Se=async()=>{try{await H.mutateAsync({channel:o.channel,name:o.name,config:o.config}),s({title:"Channel Added",description:`${o.name} delivery configured.`}),k(!1)}catch{s({title:"Error",description:"Failed to add delivery channel.",variant:"destructive"})}},Fe=async()=>{if(b)try{b.type==="template"?(await W.mutateAsync(b.id),s({title:"Deleted",description:"Template has been removed."})):(await Q.mutateAsync(b.id),s({title:"Deleted",description:"Schedule has been removed."})),E(null)}catch{s({title:"Error",description:"Failed to delete.",variant:"destructive"})}},Re=async t=>{try{await be.mutateAsync(t.id),s({title:"Running",description:`"${t.name}" is generating now.`})}catch{s({title:"Error",description:"Failed to trigger report.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Automated Reporting"}),e.jsx("p",{className:"text-muted-foreground",children:"Create, schedule, and deliver automated performance reports"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r==="schedules"&&e.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-primary/30 text-primary hover:bg-primary/10 transition-colors",children:[e.jsx(le,{className:"h-4 w-4"}),"New Schedule"]}),r==="delivery"&&e.jsxs("button",{onClick:()=>{h({channel:"email",name:"",config:{}}),k(!0)},className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-primary/30 text-primary hover:bg-primary/10 transition-colors",children:[e.jsx(C,{className:"h-4 w-4"}),"Add Channel"]}),e.jsxs("button",{onClick:()=>q(),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(C,{className:"h-4 w-4"}),"New Template"]})]})]}),e.jsx("div",{className:"border-b",children:e.jsx("nav",{className:"flex gap-4",children:je.map(t=>e.jsxs("button",{onClick:()=>f(t.id),className:X("px-4 py-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2",r===t.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[t.label,t.count!==void 0&&t.count>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-xs bg-muted",children:t.count})]},t.id))})}),r==="templates"&&e.jsx(e.Fragment,{children:pe?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full"})}):!i||i.length===0?e.jsxs("div",{className:"rounded-xl border bg-card p-12 text-center",children:[e.jsx(ee,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"No report templates yet"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mb-6",children:"Templates define what data to include in your reports."}),e.jsxs("button",{onClick:()=>q(),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(C,{className:"h-4 w-4"}),"Create your first template"]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.map(t=>{var a;return e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(Te,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t.reportType.replace(/_/g," ")})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>q(t),className:"p-1 rounded hover:bg-muted",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("button",{onClick:()=>E({type:"template",id:t.id}),className:"p-1 rounded hover:bg-muted",title:"Delete",children:e.jsx(G,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})]})]}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:t.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(((a=t.config)==null?void 0:a.sections)??[]).map((g,S)=>e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-muted",children:g},S))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Format: ",t.defaultFormat.toUpperCase()]}),e.jsxs("button",{onClick:()=>Ce(t.id),className:"flex items-center gap-1 text-sm text-primary hover:underline",children:[e.jsx(ae,{className:"h-4 w-4"}),"Generate"]})]})]},t.id)}),e.jsxs("button",{onClick:()=>q(),className:"rounded-xl border-2 border-dashed bg-card p-6 flex flex-col items-center justify-center gap-3 text-muted-foreground hover:text-foreground hover:border-primary transition-colors min-h-[200px]",children:[e.jsx(C,{className:"h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Create Template"})]})]})}),r==="schedules"&&e.jsx(e.Fragment,{children:xe?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full"})}):!j||j.length===0?e.jsxs("div",{className:"rounded-xl border bg-card p-12 text-center",children:[e.jsx(le,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"No scheduled reports"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mb-6",children:"Automate report delivery on a recurring schedule."}),e.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(C,{className:"h-4 w-4"}),"Schedule your first report"]})]}):e.jsx("div",{className:"rounded-xl border bg-card shadow-card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Schedule"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Template"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Frequency"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Next Run"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Last Run"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:j.map(t=>{var a;return e.jsxs("tr",{className:"hover:bg-muted/30 group",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.runCount," runs · ",t.failureCount," failures"]})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:((a=i==null?void 0:i.find(g=>g.id===t.templateId))==null?void 0:a.name)||"Unknown"}),e.jsx("td",{className:"px-4 py-3 text-sm capitalize",children:t.frequency}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),t.nextRunAt?new Date(t.nextRunAt).toLocaleString():"-"]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.lastRunAt?e.jsxs("div",{className:"flex items-center gap-1",children:[t.lastRunStatus==="completed"?e.jsx($,{className:"h-4 w-4 text-emerald-500"}):t.lastRunStatus==="failed"?e.jsx(re,{className:"h-4 w-4 text-destructive"}):e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),new Date(t.lastRunAt).toLocaleDateString()]}):e.jsx("span",{className:"text-muted-foreground",children:"Never"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:t.isActive?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300",children:"Active"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300",children:"Paused"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.isActive?e.jsx("button",{onClick:()=>fe.mutate(t.id),className:"p-1.5 rounded hover:bg-muted",title:"Pause",children:e.jsx(Ee,{className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>ye.mutate(t.id),className:"p-1.5 rounded hover:bg-muted",title:"Resume",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Re(t),className:"p-1.5 rounded hover:bg-muted",title:"Run Now",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E({type:"schedule",id:t.id}),className:"p-1.5 rounded hover:bg-muted opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete",children:e.jsx(G,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})]})})]},t.id)})})]})})}),r==="history"&&e.jsx(e.Fragment,{children:he?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full"})}):!N||N.length===0?e.jsxs("div",{className:"rounded-xl border bg-card p-12 text-center",children:[e.jsx(ee,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"No reports generated yet"}),e.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Generate a report from a template to see it here."})]}):e.jsx("div",{className:"rounded-xl border bg-card shadow-card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Report"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Generated"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Format"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:N.map(t=>{var a;return e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium",children:((a=i==null?void 0:i.find(g=>g.id===t.templateId))==null?void 0:a.name)||t.reportType.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:t.executionType})]}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[new Date(t.startedAt).toLocaleString(),t.durationSeconds&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.durationSeconds,"s"]})]}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[new Date(t.dateRangeStart).toLocaleDateString()," –"," ",new Date(t.dateRangeEnd).toLocaleDateString()]}),e.jsx("td",{className:"px-4 py-3 text-sm uppercase",children:t.format}),e.jsx("td",{className:"px-4 py-3 text-center",children:t.status==="completed"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300",children:[e.jsx($,{className:"h-3 w-3"}),"Completed"]}):t.status==="failed"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300",children:[e.jsx(re,{className:"h-3 w-3"}),"Failed"]}):t.status==="running"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:[e.jsx(se,{className:"h-3 w-3 animate-spin"}),"Running"]}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-muted capitalize",children:t.status})}),e.jsx("td",{className:"px-4 py-3 text-center",children:t.fileUrl||t.filePath?e.jsxs("a",{href:t.fileUrl||t.filePath,className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(qe,{className:"h-4 w-4"}),"Download"]}):t.status==="failed"&&t.errorMessage?e.jsxs("span",{className:"text-xs text-destructive",title:t.errorMessage,children:[t.errorMessage.substring(0,30),"..."]}):null})]},t.id)})})]})})}),r==="delivery"&&e.jsx(e.Fragment,{children:ge?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full"})}):e.jsx("div",{className:"space-y-4",children:w&&w.length>0?w.map(t=>{const a=I.find(S=>S.value===t.channel),g=(a==null?void 0:a.icon)||oe;return e.jsx("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${(a==null?void 0:a.color)||"gray"}-100 dark:bg-${(a==null?void 0:a.color)||"gray"}-900/20`,children:e.jsx(g,{className:`h-5 w-5 text-${(a==null?void 0:a.color)||"gray"}-600`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[t.channel," delivery"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.isVerified&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-emerald-600",children:[e.jsx($,{className:"h-3 w-3"}),"Verified"]}),e.jsx("span",{className:X("px-2 py-1 rounded-full text-xs",t.isActive?"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300":"bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300"),children:t.isActive?"Enabled":"Disabled"}),e.jsx("button",{onClick:()=>Z.mutate(t.id),disabled:Z.isPending,className:"p-1.5 rounded hover:bg-muted text-muted-foreground hover:text-foreground",title:"Verify channel",children:e.jsx($,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ve.mutate(t.id),className:"p-1.5 rounded hover:bg-muted text-muted-foreground hover:text-destructive",title:"Remove channel",children:e.jsx(G,{className:"h-4 w-4"})})]})]})},t.id)}):e.jsxs("div",{className:"rounded-xl border bg-card p-12 text-center",children:[e.jsx(Pe,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"No delivery channels configured"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mb-6",children:"Add a channel to enable automated report delivery."}),e.jsxs("button",{onClick:()=>{h({channel:"email",name:"",config:{}}),k(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(C,{className:"h-4 w-4"}),"Add delivery channel"]})]})})}),_&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-card border rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-card z-10",children:[e.jsx("h3",{className:"text-lg font-semibold",children:R?"Edit Template":"New Report Template"}),e.jsx("button",{onClick:()=>F(!1),className:"p-2 text-muted-foreground hover:text-foreground",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Name *"}),e.jsx("input",{type:"text",value:x.name,onChange:t=>y(a=>({...a,name:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"e.g. Weekly Performance Report"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:t=>y(a=>({...a,description:t.target.value})),rows:2,className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none",placeholder:"What does this report cover?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Report Type"}),e.jsx("select",{value:x.reportType,onChange:t=>y(a=>({...a,reportType:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:Xe.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Default Format"}),e.jsx("select",{value:x.defaultFormat,onChange:t=>y(a=>({...a,defaultFormat:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:ie.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Sections"}),e.jsx("input",{type:"text",value:x.sections,onChange:t=>y(a=>({...a,sections:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"overview, metrics, charts, recommendations (comma-separated)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Comma-separated section names"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t sticky bottom-0 bg-card",children:[e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-muted-foreground hover:text-foreground",children:"Cancel"}),e.jsx("button",{onClick:Ne,disabled:!x.name||z.isPending||U.isPending,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium disabled:opacity-50 hover:bg-primary/90 transition-colors",children:z.isPending||U.isPending?"Saving...":R?"Update Template":"Create Template"})]})]})}),de&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-card border rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-card z-10",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"New Report Schedule"}),e.jsx("button",{onClick:()=>D(!1),className:"p-2 text-muted-foreground hover:text-foreground",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Schedule Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:t=>u(a=>({...a,name:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"e.g. Weekly Monday Report"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Template *"}),e.jsxs("select",{value:n.templateId,onChange:t=>u(a=>({...a,templateId:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"",children:"Select template..."}),i==null?void 0:i.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Frequency"}),e.jsx("select",{value:n.frequency,onChange:t=>u(a=>({...a,frequency:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:et.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Timezone"}),e.jsxs("select",{value:n.timezone,onChange:t=>u(a=>({...a,timezone:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern (US)"}),e.jsx("option",{value:"America/Chicago",children:"Central (US)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific (US)"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Asia/Dubai",children:"Dubai"})]})]})]}),n.frequency==="weekly"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Day of Week"}),e.jsx("select",{value:n.dayOfWeek,onChange:t=>u(a=>({...a,dayOfWeek:Number(t.target.value)})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:tt.map((t,a)=>e.jsx("option",{value:a,children:t},a))})]}),n.frequency==="monthly"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Day of Month"}),e.jsx("input",{type:"number",min:1,max:28,value:n.dayOfMonth,onChange:t=>u(a=>({...a,dayOfMonth:Number(t.target.value)})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Hour (0-23)"}),e.jsx("input",{type:"number",min:0,max:23,value:n.hour,onChange:t=>u(a=>({...a,hour:Number(t.target.value)})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Minute (0-59)"}),e.jsx("input",{type:"number",min:0,max:59,value:n.minute,onChange:t=>u(a=>({...a,minute:Number(t.target.value)})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Delivery Channels"}),e.jsx("div",{className:"space-y-2",children:I.map(t=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.deliveryChannels.includes(t.value),onChange:a=>{u(g=>({...g,deliveryChannels:a.target.checked?[...g.deliveryChannels,t.value]:g.deliveryChannels.filter(S=>S!==t.value)}))},className:"rounded"}),e.jsx(t.icon,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.label})]},t.value))})]}),n.deliveryChannels.includes("email")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Email Recipients"}),e.jsx("input",{type:"text",value:n.emailRecipients,onChange:t=>u(a=>({...a,emailRecipients:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"email1@example.com, email2@example.com"})]}),n.deliveryChannels.includes("slack")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Slack Channel"}),e.jsx("input",{type:"text",value:n.slackChannel,onChange:t=>u(a=>({...a,slackChannel:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"#reports"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t sticky bottom-0 bg-card",children:[e.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-muted-foreground hover:text-foreground",children:"Cancel"}),e.jsx("button",{onClick:we,disabled:!n.name||!n.templateId||K.isPending,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium disabled:opacity-50 hover:bg-primary/90 transition-colors",children:K.isPending?"Creating...":"Create Schedule"})]})]})}),ce&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-card border rounded-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Generate Report"}),e.jsx("button",{onClick:()=>T(!1),className:"p-2 text-muted-foreground hover:text-foreground",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium",children:((Y=i==null?void 0:i.find(t=>t.id===L))==null?void 0:Y.name)||"Unknown"}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:(J=i==null?void 0:i.find(t=>t.id===L))==null?void 0:J.reportType.replace(/_/g," ")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Start Date"}),e.jsx("input",{type:"date",value:v.startDate,onChange:t=>A(a=>({...a,startDate:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"End Date"}),e.jsx("input",{type:"date",value:v.endDate,onChange:t=>A(a=>({...a,endDate:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Format"}),e.jsx("select",{value:v.format,onChange:t=>A(a=>({...a,format:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:ie.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-muted-foreground hover:text-foreground",children:"Cancel"}),e.jsx("button",{onClick:ke,disabled:O.isPending,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium disabled:opacity-50 hover:bg-primary/90 transition-colors",children:O.isPending?"Generating...":"Generate Report"})]})]})}),me&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-card border rounded-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add Delivery Channel"}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 text-muted-foreground hover:text-foreground",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Channel Type"}),e.jsx("select",{value:o.channel,onChange:t=>h(a=>({...a,channel:t.target.value,config:{}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:I.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Name *"}),e.jsx("input",{type:"text",value:o.name,onChange:t=>h(a=>({...a,name:t.target.value})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:`e.g. ${o.channel==="email"?"Team Email":o.channel==="slack"?"#reports channel":"Webhook endpoint"}`})]}),o.channel==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"SMTP Host"}),e.jsx("input",{type:"text",value:o.config.smtp_host||"",onChange:t=>h(a=>({...a,config:{...a.config,smtp_host:t.target.value}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"smtp.gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Default Recipients"}),e.jsx("input",{type:"text",value:o.config.recipients||"",onChange:t=>h(a=>({...a,config:{...a.config,recipients:t.target.value}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"user@example.com, team@example.com"})]})]}),o.channel==="slack"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Webhook URL *"}),e.jsx("input",{type:"text",value:o.config.webhook_url||"",onChange:t=>h(a=>({...a,config:{...a.config,webhook_url:t.target.value}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"https://hooks.slack.com/services/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Channel"}),e.jsx("input",{type:"text",value:o.config.channel||"",onChange:t=>h(a=>({...a,config:{...a.config,channel:t.target.value}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"#reports"})]})]}),o.channel==="teams"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Webhook URL *"}),e.jsx("input",{type:"text",value:o.config.webhook_url||"",onChange:t=>h(a=>({...a,config:{...a.config,webhook_url:t.target.value}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"https://outlook.office.com/webhook/..."})]}),o.channel==="webhook"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Webhook URL *"}),e.jsx("input",{type:"text",value:o.config.webhook_url||"",onChange:t=>h(a=>({...a,config:{...a.config,webhook_url:t.target.value}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"https://your-api.com/reports/webhook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Auth Header (optional)"}),e.jsx("input",{type:"text",value:o.config.auth_header||"",onChange:t=>h(a=>({...a,config:{...a.config,auth_header:t.target.value}})),className:"w-full px-4 py-2.5 bg-muted/50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Bearer your-token"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-muted-foreground hover:text-foreground",children:"Cancel"}),e.jsx("button",{onClick:Se,disabled:!o.name||H.isPending,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium disabled:opacity-50 hover:bg-primary/90 transition-colors",children:H.isPending?"Adding...":"Add Channel"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-card border rounded-xl p-6 max-w-md w-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Delete ",b.type==="template"?"Template":"Schedule"]}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure? This action cannot be undone.",b.type==="template"&&" Any schedules using this template will also be affected."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 text-muted-foreground hover:text-foreground",children:"Cancel"}),e.jsx("button",{onClick:Fe,disabled:W.isPending||Q.isPending,className:"px-4 py-2 bg-destructive text-destructive-foreground rounded-lg font-medium disabled:opacity-50 hover:bg-destructive/90 transition-colors",children:W.isPending||Q.isPending?"Deleting...":"Delete"})]})]})})]})}export{jt as default};
//# sourceMappingURL=Reporting-UIIC1mT-.js.map
