{"version":3,"file":"CMSPostEditor-DqWWrS-W.js","sources":["../../src/views/cms/CMSPostEditor.tsx"],"sourcesContent":["/**\r\n * CMS Post Editor View\r\n * Wrapper view for creating/editing posts using the PostEditor component\r\n */\r\n\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { ArrowLeftIcon } from '@heroicons/react/24/outline';\r\nimport { PostEditor } from '@/components/cms/PostEditor';\r\nimport {\r\n  useAdminPost,\r\n  useAdminCategories,\r\n  useAdminAuthors,\r\n  useAdminTags,\r\n  useCreatePost,\r\n  useUpdatePost,\r\n  PostCreate,\r\n  PostUpdate,\r\n} from '@/api/cms';\r\n\r\nexport default function CMSPostEditor() {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const isEditing = !!id;\r\n\r\n  const { data: post, isLoading: postLoading } = useAdminPost(id || '');\r\n  const { data: categoriesData } = useAdminCategories();\r\n  const { data: authorsData } = useAdminAuthors();\r\n  const { data: tagsData } = useAdminTags();\r\n\r\n  const createMutation = useCreatePost();\r\n  const updateMutation = useUpdatePost();\r\n\r\n  const categories = categoriesData?.categories || [];\r\n  const authors = authorsData?.authors || [];\r\n  const tags = tagsData?.tags || [];\r\n\r\n  const handleSave = (data: PostCreate | PostUpdate) => {\r\n    if (isEditing && id) {\r\n      updateMutation.mutate(\r\n        { id, data: data as PostUpdate },\r\n        { onSuccess: () => navigate('/cms/posts') }\r\n      );\r\n    } else {\r\n      createMutation.mutate(data as PostCreate, {\r\n        onSuccess: () => navigate('/cms/posts'),\r\n      });\r\n    }\r\n  };\r\n\r\n  if (isEditing && postLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-20\">\r\n        <div className=\"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Back Link */}\r\n      <button\r\n        onClick={() => navigate('/cms/posts')}\r\n        className=\"flex items-center gap-2 text-white/60 hover:text-white transition-colors\"\r\n      >\r\n        <ArrowLeftIcon className=\"w-4 h-4\" />\r\n        Back to Posts\r\n      </button>\r\n\r\n      <PostEditor\r\n        post={isEditing ? post : undefined}\r\n        categories={categories}\r\n        authors={authors}\r\n        tags={tags}\r\n        onSave={handleSave}\r\n        onCancel={() => navigate('/cms/posts')}\r\n        isLoading={createMutation.isPending || updateMutation.isPending}\r\n        inline\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CMSPostEditor","id","useParams","navigate","useNavigate","isEditing","post","postLoading","useAdminPost","categoriesData","useAdminCategories","authorsData","useAdminAuthors","tagsData","useAdminTags","createMutation","useCreatePost","updateMutation","useUpdatePost","categories","authors","tags","handleSave","data","jsx","jsxs","ArrowLeftIcon","PostEditor"],"mappings":"geAmBA,SAAwBA,GAAgB,CACtC,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACTC,EAAWC,EAAA,EACXC,EAAY,CAAC,CAACJ,EAEd,CAAE,KAAMK,EAAM,UAAWC,GAAgBC,EAAaP,GAAM,EAAE,EAC9D,CAAE,KAAMQ,CAAA,EAAmBC,EAAA,EAC3B,CAAE,KAAMC,CAAA,EAAgBC,EAAA,EACxB,CAAE,KAAMC,CAAA,EAAaC,EAAA,EAErBC,EAAiBC,EAAA,EACjBC,EAAiBC,EAAA,EAEjBC,GAAaV,GAAA,YAAAA,EAAgB,aAAc,CAAA,EAC3CW,GAAUT,GAAA,YAAAA,EAAa,UAAW,CAAA,EAClCU,GAAOR,GAAA,YAAAA,EAAU,OAAQ,CAAA,EAEzBS,EAAcC,GAAkC,CAChDlB,GAAaJ,EACfgB,EAAe,OACb,CAAE,GAAAhB,EAAI,KAAAsB,CAAA,EACN,CAAE,UAAW,IAAMpB,EAAS,YAAY,CAAA,CAAE,EAG5CY,EAAe,OAAOQ,EAAoB,CACxC,UAAW,IAAMpB,EAAS,YAAY,CAAA,CACvC,CAEL,EAEA,OAAIE,GAAaE,EAEbiB,MAAC,OAAI,UAAU,yCACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAKFC,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,YAAY,EACpC,UAAU,2EAEV,SAAA,CAAAqB,EAAAA,IAACE,EAAA,CAAc,UAAU,SAAA,CAAU,EAAE,eAAA,CAAA,CAAA,EAIvCF,EAAAA,IAACG,EAAA,CACC,KAAMtB,EAAYC,EAAO,OACzB,WAAAa,EACA,QAAAC,EACA,KAAAC,EACA,OAAQC,EACR,SAAU,IAAMnB,EAAS,YAAY,EACrC,UAAWY,EAAe,WAAaE,EAAe,UACtD,OAAM,EAAA,CAAA,CACR,EACF,CAEJ"}