import{j as e}from"./vendor-ui-B0DL0VNC.js";import{f as S,u as C,r as g}from"./vendor-react-Dz7uKsMg.js";import{t as h,Y as A,j as R,de as T,a8 as P,df as E,d5 as D,ag as b,c as i}from"./index-BQex3859.js";import"./featureFlagsStore-DvEl_DiZ.js";import{a as q,b as v}from"./vendor-query-BPt-n81V.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-motion-CR45sdSp.js";const c={all:["tenant"],overview:(a,n)=>[...c.all,"overview",a,n],recommendations:(a,n)=>[...c.all,"recommendations",a,n],alerts:(a,n)=>[...c.all,"alerts",a,n],settings:a=>[...c.all,"settings",a],commandCenter:(a,n)=>[...c.all,"commandCenter",a,n]},U=async(a,n)=>(await h.put(`/tenant/${a}/settings`,n)).data.data;function F(a){const n=q();return v({mutationFn:o=>U(a,o),onSuccess:()=>{n.invalidateQueries({queryKey:c.settings(a)})}})}function M(){return v({mutationFn:async({webhookUrl:a})=>(await h.post("/integrations/slack/test",{webhook_url:a})).data.data})}const f=[{id:"general",name:"General",icon:T},{id:"budget",name:"Budget Guardrails",icon:P},{id:"notifications",name:"Notifications",icon:E},{id:"permissions",name:"Permissions",icon:D},{id:"team",name:"Team Access",icon:b}];function _(){var x;const{tenantId:a}=S(),n=C(),{tenant:o}=A(),{toast:l}=R(),[u,j]=g.useState("general"),[s,r]=g.useState({name:(o==null?void 0:o.name)||"",timezone:"Asia/Riyadh",currency:"SAR",maxDailyBudget:5e3,requireApprovalOver:1e3,autoPublish:!1,emailNotifications:!0,slackNotifications:!1,slackWebhook:"",approvalRequired:!0}),p=a?parseInt(a,10):0,d=F(p),m=M(),y=async()=>{if(!s.slackWebhook){l({title:"Error",description:"Please enter a Slack webhook URL first",variant:"destructive"});return}try{await m.mutateAsync({webhookUrl:s.slackWebhook}),l({title:"Success",description:"Test message sent to Slack successfully!"})}catch(t){l({title:"Error",description:t instanceof Error?t.message:"Failed to send test message",variant:"destructive"})}},N=async()=>{if(!p){l({title:"Error",description:"Invalid tenant ID",variant:"destructive"});return}try{await d.mutateAsync({timezone:s.timezone,currency:s.currency,email_notifications:s.emailNotifications,slack_notifications:s.slackNotifications}),l({title:"Success",description:"Settings saved successfully"})}catch(t){l({title:"Error",description:t instanceof Error?t.message:"Failed to save settings",variant:"destructive"})}},k=()=>{switch(u){case"general":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tenant Name"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>r({...s,name:t.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Timezone"}),e.jsxs("select",{value:s.timezone,onChange:t=>r({...s,timezone:t.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"Asia/Riyadh",children:"Asia/Riyadh (GMT+3)"}),e.jsx("option",{value:"Asia/Dubai",children:"Asia/Dubai (GMT+4)"}),e.jsx("option",{value:"Africa/Cairo",children:"Africa/Cairo (GMT+2)"}),e.jsx("option",{value:"UTC",children:"UTC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Currency"}),e.jsxs("select",{value:s.currency,onChange:t=>r({...s,currency:t.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"SAR",children:"SAR - Saudi Riyal"}),e.jsx("option",{value:"AED",children:"AED - UAE Dirham"}),e.jsx("option",{value:"EGP",children:"EGP - Egyptian Pound"}),e.jsx("option",{value:"USD",children:"USD - US Dollar"})]})]})]});case"budget":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Maximum Daily Budget (",s.currency,")"]}),e.jsx("input",{type:"number",value:s.maxDailyBudget,onChange:t=>r({...s,maxDailyBudget:Number(t.target.value)}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Campaigns cannot exceed this daily budget limit"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Require Approval Over (",s.currency,")"]}),e.jsx("input",{type:"number",value:s.requireApprovalOver,onChange:t=>r({...s,requireApprovalOver:Number(t.target.value)}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Campaigns with daily budgets above this amount require approval"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-Publish Approved Campaigns"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically publish campaigns once approved"})]}),e.jsx("button",{onClick:()=>r({...s,autoPublish:!s.autoPublish}),className:i("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.autoPublish?"bg-primary":"bg-muted"),children:e.jsx("span",{className:i("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.autoPublish?"translate-x-6":"translate-x-1")})})]})]});case"notifications":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive email alerts for important events"})]}),e.jsx("button",{onClick:()=>r({...s,emailNotifications:!s.emailNotifications}),className:i("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.emailNotifications?"bg-primary":"bg-muted"),children:e.jsx("span",{className:i("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.emailNotifications?"translate-x-6":"translate-x-1")})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Slack Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send alerts to a Slack channel"})]}),e.jsx("button",{onClick:()=>r({...s,slackNotifications:!s.slackNotifications}),className:i("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.slackNotifications?"bg-primary":"bg-muted"),children:e.jsx("span",{className:i("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.slackNotifications?"translate-x-6":"translate-x-1")})})]}),s.slackNotifications&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Slack Webhook URL"}),e.jsx("input",{type:"text",value:s.slackWebhook,onChange:t=>r({...s,slackWebhook:t.target.value}),placeholder:"https://hooks.slack.com/services/...",className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsx("button",{type:"button",onClick:y,disabled:m.isPending||!s.slackWebhook,className:i("px-4 py-2 rounded-lg text-sm font-medium transition-all",s.slackWebhook?"bg-green-600 text-white hover:bg-green-700":"bg-muted text-muted-foreground cursor-not-allowed"),children:m.isPending?"Sending...":"Test Connection"})]})]});case"permissions":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Require Approval for Publishing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All campaigns must be approved before publishing"})]}),e.jsx("button",{onClick:()=>r({...s,approvalRequired:!s.approvalRequired}),className:i("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.approvalRequired?"bg-primary":"bg-muted"),children:e.jsx("span",{className:i("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.approvalRequired?"translate-x-6":"translate-x-1")})})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Additional permission settings can be configured in the main dashboard under Settings â†’ Permissions."})})]});case"team":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 rounded-lg border text-center",children:[e.jsx(b,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"mt-4 font-semibold",children:"Team Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Invite team members and manage their access to this tenant."}),e.jsx("button",{onClick:()=>n(`/app/${a}/team`),className:"mt-4 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity",children:"Manage Team"})]})});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tenant Settings"}),e.jsxs("p",{className:"text-muted-foreground",children:["Configure settings for ",(o==null?void 0:o.name)||`Tenant ${a}`]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"md:w-64 space-y-1",children:f.map(t=>{const w=t.icon;return e.jsxs("button",{onClick:()=>j(t.id),className:i("w-full flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors",u===t.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-foreground"),children:[e.jsx(w,{className:"h-5 w-5"}),t.name]},t.id)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:(x=f.find(t=>t.id===u))==null?void 0:x.name}),k()]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:N,disabled:d.isPending,className:i("px-6 py-2 rounded-lg bg-primary text-primary-foreground transition-opacity",d.isPending?"opacity-50 cursor-not-allowed":"hover:opacity-90"),children:d.isPending?"Saving...":"Save Changes"})})]})]})]})}export{_ as default};
//# sourceMappingURL=TenantSettings-BTSOgMgg.js.map
