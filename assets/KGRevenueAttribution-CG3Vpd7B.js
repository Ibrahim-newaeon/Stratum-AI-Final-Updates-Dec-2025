import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as b}from"./vendor-react-Dz7uKsMg.js";import{a8 as g,a9 as f,cU as j,c as n}from"./index-BQex3859.js";import{b as y,c as N}from"./knowledgeGraph-DUv4fHvx.js";import{F as v}from"./MapPinIcon-3DVUCee6.js";import{F as w}from"./ArrowsRightLeftIcon-DNIBo-OC.js";import{m as s}from"./vendor-motion-CR45sdSp.js";import{R as k,B as C,C as R,X as F,Y as L,T as A,a as S,d as T}from"./vendor-charts-Cj11RBfc.js";import"./vendor-query-BPt-n81V.js";import"./vendor-utils-L2YjCnAZ.js";const i={initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3}},$=[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"}];function W(){const[a,d]=b.useState("30d"),{data:r,isLoading:c}=y(a),{data:o,isLoading:m}=N(a),x=c||m,l=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),h=t=>t>=1e3?`${(t/1e3).toFixed(1)}k`:t.toString(),u=[{label:"Attributed Revenue",value:l((r==null?void 0:r.attributedRevenue)??0),icon:g,color:"text-green-500"},{label:"Touchpoints Tracked",value:h((r==null?void 0:r.touchpointsTracked)??0),icon:v,color:"text-blue-500"},{label:"Avg Path Length",value:`${(r==null?void 0:r.avgPathLength)??0} steps`,icon:w,color:"text-purple-500"},{label:"Conversion Window",value:(r==null?void 0:r.conversionWindow)??"-",icon:f,color:"text-amber-500"}];return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(j,{children:e.jsx("title",{children:"Revenue Attribution - Knowledge Graph | Stratum AI"})}),e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsxs(s.div,{className:"flex items-center justify-between",...i,children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Revenue Attribution"}),e.jsx("p",{className:"text-muted-foreground",children:"Multi-touch attribution across all channels"})]}),e.jsx("div",{className:"flex items-center gap-1 p-1 rounded-lg bg-white/5 border border-white/10",children:$.map(t=>e.jsx("button",{onClick:()=>d(t.value),className:n("px-3 py-1.5 text-sm rounded-md transition-colors",a===t.value?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"),children:t.label},t.value))})]}),e.jsx(s.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",...i,transition:{delay:.1},children:u.map(t=>e.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/5",children:e.jsx(t.icon,{className:n("h-5 w-5",t.color)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t.label}),e.jsx("p",{className:"text-lg font-bold",children:t.value})]})]})},t.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(s.div,{className:"rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-6",...i,transition:{delay:.15},children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Channel Breakdown"}),e.jsx(k,{width:"100%",height:300,children:e.jsxs(C,{data:o||[],layout:"vertical",margin:{top:0,right:20,bottom:0,left:80},children:[e.jsx(R,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)",horizontal:!1}),e.jsx(F,{type:"number",tick:{fontSize:11,fill:"rgba(245,245,247,0.4)"},axisLine:!1,tickLine:!1,tickFormatter:t=>`$${(t/1e3).toFixed(0)}k`}),e.jsx(L,{type:"category",dataKey:"channel",tick:{fontSize:12,fill:"rgba(245,245,247,0.7)"},axisLine:!1,tickLine:!1,width:80}),e.jsx(A,{contentStyle:{background:"rgba(11, 18, 21, 0.95)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:12,color:"rgba(245,245,247,0.92)"},formatter:t=>[l(Number(t)),"Revenue"]}),e.jsx(S,{dataKey:"revenue",radius:[0,4,4,0],children:(o||[]).map((t,p)=>e.jsx(T,{fill:t.color,fillOpacity:.8},p))})]})})]}),e.jsxs(s.div,{className:"rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-6",...i,transition:{delay:.2},children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Attribution Model Comparison"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-muted-foreground",children:"Channel"}),e.jsx("th",{className:"text-right py-2 px-3 text-sm font-medium text-muted-foreground",children:"First Touch"}),e.jsx("th",{className:"text-right py-2 px-3 text-sm font-medium text-muted-foreground",children:"Last Touch"}),e.jsx("th",{className:"text-right py-2 px-3 text-sm font-medium text-muted-foreground",children:"Linear"}),e.jsx("th",{className:"text-right py-2 px-3 text-sm font-medium text-primary",children:"Data-Driven"})]})}),e.jsx("tbody",{children:((r==null?void 0:r.modelComparison)||[]).map(t=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[e.jsx("td",{className:"py-3 px-3 text-sm font-medium",children:t.channel}),e.jsxs("td",{className:"py-3 px-3 text-sm text-right text-muted-foreground",children:[t.firstTouch,"%"]}),e.jsxs("td",{className:"py-3 px-3 text-sm text-right text-muted-foreground",children:[t.lastTouch,"%"]}),e.jsxs("td",{className:"py-3 px-3 text-sm text-right text-muted-foreground",children:[t.linear,"%"]}),e.jsxs("td",{className:"py-3 px-3 text-sm text-right font-medium text-primary",children:[t.dataDriven,"%"]})]},t.channel))})]})})]})]})]})]})}export{W as default};
//# sourceMappingURL=KGRevenueAttribution-CG3Vpd7B.js.map
