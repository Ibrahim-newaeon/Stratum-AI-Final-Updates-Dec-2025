{"version":3,"file":"CDPRfm-CTNYZiSr.js","sources":["../../node_modules/lucide-react/dist/esm/icons/frown.js","../../node_modules/lucide-react/dist/esm/icons/heart.js","../../node_modules/lucide-react/dist/esm/icons/moon.js","../../src/components/cdp/RFMDashboard.tsx","../../src/views/cdp/CDPRfm.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M16 16s-1.5-2-4-2-4 2-4 2\", key: \"epbg0q\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n];\nconst Frown = createLucideIcon(\"frown\", __iconNode);\n\nexport { __iconNode, Frown as default };\n//# sourceMappingURL=frown.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5\",\n      key: \"mvr1a0\"\n    }\n  ]\n];\nconst Heart = createLucideIcon(\"heart\", __iconNode);\n\nexport { __iconNode, Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401\",\n      key: \"kfwtm\"\n    }\n  ]\n];\nconst Moon = createLucideIcon(\"moon\", __iconNode);\n\nexport { __iconNode, Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\r\n * CDP RFM Dashboard Component\r\n * Visualize RFM (Recency, Frequency, Monetary) analysis and customer segmentation\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n  Activity,\r\n  AlertTriangle,\r\n  BarChart3,\r\n  Calendar,\r\n  ChevronRight,\r\n  Clock,\r\n  Crown,\r\n  DollarSign,\r\n  Frown,\r\n  Heart,\r\n  Loader2,\r\n  Moon,\r\n  PieChart,\r\n  RefreshCw,\r\n  Search,\r\n  Star,\r\n  Target,\r\n  TrendingUp,\r\n  Users,\r\n  Zap,\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  RFMSegment,\r\n  useCDPProfile,\r\n  useComputeRFMBatch,\r\n  useProfileRFM,\r\n  useRFMSummary,\r\n} from '@/api/cdp';\r\n\r\n// RFM Segment configuration\r\nconst RFM_SEGMENTS: Record<\r\n  RFMSegment,\r\n  {\r\n    label: string;\r\n    description: string;\r\n    icon: React.ReactNode;\r\n    color: string;\r\n    bgColor: string;\r\n    actionTip: string;\r\n  }\r\n> = {\r\n  champions: {\r\n    label: 'Champions',\r\n    description: 'Best customers who bought recently, buy often and spend the most',\r\n    icon: <Crown className=\"w-5 h-5\" />,\r\n    color: 'text-amber-500',\r\n    bgColor: 'bg-amber-500/10',\r\n    actionTip: 'Reward them, make them brand ambassadors',\r\n  },\r\n  loyal_customers: {\r\n    label: 'Loyal Customers',\r\n    description: 'Customers who buy often and spend good money',\r\n    icon: <Heart className=\"w-5 h-5\" />,\r\n    color: 'text-red-500',\r\n    bgColor: 'bg-red-500/10',\r\n    actionTip: 'Upsell higher value products, ask for reviews',\r\n  },\r\n  potential_loyalists: {\r\n    label: 'Potential Loyalists',\r\n    description: 'Recent customers with average frequency',\r\n    icon: <Star className=\"w-5 h-5\" />,\r\n    color: 'text-purple-500',\r\n    bgColor: 'bg-purple-500/10',\r\n    actionTip: 'Offer membership/loyalty program, recommend products',\r\n  },\r\n  new_customers: {\r\n    label: 'New Customers',\r\n    description: 'Bought recently but not often',\r\n    icon: <Zap className=\"w-5 h-5\" />,\r\n    color: 'text-green-500',\r\n    bgColor: 'bg-green-500/10',\r\n    actionTip: 'Provide onboarding support, special offers',\r\n  },\r\n  promising: {\r\n    label: 'Promising',\r\n    description: 'Recent shoppers but not much spent',\r\n    icon: <TrendingUp className=\"w-5 h-5\" />,\r\n    color: 'text-blue-500',\r\n    bgColor: 'bg-blue-500/10',\r\n    actionTip: 'Create brand awareness, offer free trials',\r\n  },\r\n  need_attention: {\r\n    label: 'Need Attention',\r\n    description: 'Above average recency, frequency and monetary',\r\n    icon: <AlertTriangle className=\"w-5 h-5\" />,\r\n    color: 'text-orange-500',\r\n    bgColor: 'bg-orange-500/10',\r\n    actionTip: 'Make limited-time offers, recommend based on past',\r\n  },\r\n  about_to_sleep: {\r\n    label: 'About to Sleep',\r\n    description: 'Below average recency, frequency and monetary',\r\n    icon: <Moon className=\"w-5 h-5\" />,\r\n    color: 'text-indigo-500',\r\n    bgColor: 'bg-indigo-500/10',\r\n    actionTip: 'Share valuable resources, recommend popular products',\r\n  },\r\n  at_risk: {\r\n    label: 'At Risk',\r\n    description: 'Spent big money, purchased often but long time ago',\r\n    icon: <AlertTriangle className=\"w-5 h-5\" />,\r\n    color: 'text-red-600',\r\n    bgColor: 'bg-red-600/10',\r\n    actionTip: 'Send personalized emails, offer renewals',\r\n  },\r\n  cannot_lose: {\r\n    label: \"Can't Lose\",\r\n    description: 'Made biggest purchases and often, but long time ago',\r\n    icon: <Heart className=\"w-5 h-5\" />,\r\n    color: 'text-pink-500',\r\n    bgColor: 'bg-pink-500/10',\r\n    actionTip: 'Win them back via renewals, newer products',\r\n  },\r\n  hibernating: {\r\n    label: 'Hibernating',\r\n    description: 'Last purchase was long ago, low spenders',\r\n    icon: <Moon className=\"w-5 h-5\" />,\r\n    color: 'text-gray-500',\r\n    bgColor: 'bg-gray-500/10',\r\n    actionTip: 'Offer relevant products, special discounts',\r\n  },\r\n  lost: {\r\n    label: 'Lost',\r\n    description: 'Lowest recency, frequency and monetary',\r\n    icon: <Frown className=\"w-5 h-5\" />,\r\n    color: 'text-gray-400',\r\n    bgColor: 'bg-gray-400/10',\r\n    actionTip: 'Revive interest with reach out, ignore otherwise',\r\n  },\r\n  other: {\r\n    label: 'Other',\r\n    description: 'Customers that do not fit other segments',\r\n    icon: <Users className=\"w-5 h-5\" />,\r\n    color: 'text-slate-500',\r\n    bgColor: 'bg-slate-500/10',\r\n    actionTip: 'Analyze individually for better targeting',\r\n  },\r\n};\r\n\r\n// RFM Score visualization\r\ninterface RFMScoreBarProps {\r\n  label: string;\r\n  score: number;\r\n  rawValue: string;\r\n}\r\n\r\nfunction RFMScoreBar({ label, score, rawValue }: RFMScoreBarProps) {\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <div className=\"flex items-center justify-between text-sm\">\r\n        <span className=\"font-medium\">{label}</span>\r\n        <span className=\"text-muted-foreground\">{rawValue}</span>\r\n      </div>\r\n      <div className=\"flex items-center gap-1\">\r\n        {[1, 2, 3, 4, 5].map((n) => (\r\n          <div\r\n            key={n}\r\n            className={cn(\r\n              'flex-1 h-2 rounded-full transition-colors',\r\n              n <= score ? 'bg-primary' : 'bg-muted'\r\n            )}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"text-xs text-muted-foreground text-right\">Score: {score}/5</div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Segment card component\r\ninterface SegmentCardProps {\r\n  segment: RFMSegment;\r\n  count: number;\r\n  totalProfiles: number;\r\n  isSelected: boolean;\r\n  onClick: () => void;\r\n}\r\n\r\nfunction SegmentCard({ segment, count, totalProfiles, isSelected, onClick }: SegmentCardProps) {\r\n  const config = RFM_SEGMENTS[segment];\r\n  const percentage = totalProfiles > 0 ? (count / totalProfiles) * 100 : 0;\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'p-4 rounded-xl border cursor-pointer transition-all hover:shadow-md',\r\n        isSelected ? 'border-primary ring-2 ring-primary/20' : 'hover:border-primary/50'\r\n      )}\r\n      onClick={onClick}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div className={cn('p-2 rounded-lg', config.bgColor, config.color)}>{config.icon}</div>\r\n        <span className=\"text-2xl font-bold\">{count.toLocaleString()}</span>\r\n      </div>\r\n      <h4 className=\"font-semibold mb-1\">{config.label}</h4>\r\n      <p className=\"text-xs text-muted-foreground mb-3 line-clamp-2\">{config.description}</p>\r\n      <div className=\"h-1.5 bg-muted rounded-full overflow-hidden\">\r\n        <div\r\n          className={cn('h-full transition-all', config.bgColor.replace('/10', ''))}\r\n          style={{ width: `${percentage}%` }}\r\n        />\r\n      </div>\r\n      <div className=\"text-xs text-muted-foreground mt-1\">{percentage.toFixed(1)}% of profiles</div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Profile RFM details view\r\ninterface ProfileRFMViewProps {\r\n  profileId: string;\r\n  onBack: () => void;\r\n}\r\n\r\nfunction ProfileRFMView({ profileId, onBack }: ProfileRFMViewProps) {\r\n  const { data: profile, isLoading: profileLoading } = useCDPProfile(profileId);\r\n  const { data: rfm, isLoading: rfmLoading } = useProfileRFM(profileId);\r\n\r\n  const isLoading = profileLoading || rfmLoading;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!rfm || !profile) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <AlertTriangle className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\r\n        <h3 className=\"font-semibold mb-2\">RFM Data Not Available</h3>\r\n        <p className=\"text-sm text-muted-foreground mb-4\">\r\n          This profile doesn't have RFM scores yet\r\n        </p>\r\n        <button onClick={onBack} className=\"text-primary hover:underline\">\r\n          Back to Dashboard\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const segmentConfig = RFM_SEGMENTS[rfm.rfm_segment];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <button onClick={onBack} className=\"p-2 rounded-lg hover:bg-muted transition-colors\">\r\n          <ChevronRight className=\"w-5 h-5 rotate-180\" />\r\n        </button>\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold\">Profile RFM Analysis</h2>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            {profile.external_id || profile.id.slice(0, 12) + '...'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Segment badge */}\r\n      <div className={cn('p-6 rounded-xl border', segmentConfig.bgColor)}>\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className={cn('p-3 rounded-xl bg-background', segmentConfig.color)}>\r\n            {segmentConfig.icon}\r\n          </div>\r\n          <div>\r\n            <div className=\"text-sm text-muted-foreground\">RFM Segment</div>\r\n            <div className=\"text-2xl font-bold\">{segmentConfig.label}</div>\r\n            <p className=\"text-sm text-muted-foreground mt-1\">{segmentConfig.description}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-4 p-3 rounded-lg bg-background/80\">\r\n          <div className=\"text-xs font-medium text-muted-foreground mb-1\">Recommended Action</div>\r\n          <p className=\"text-sm\">{segmentConfig.actionTip}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* RFM Scores */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <RFMScoreBar\r\n            label=\"Recency\"\r\n            score={rfm.recency_score}\r\n            rawValue={`${rfm.recency_days} days ago`}\r\n          />\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <RFMScoreBar\r\n            label=\"Frequency\"\r\n            score={rfm.frequency_score}\r\n            rawValue={`${rfm.frequency} purchases`}\r\n          />\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <RFMScoreBar\r\n            label=\"Monetary\"\r\n            score={rfm.monetary_score}\r\n            rawValue={`$${rfm.monetary.toLocaleString()}`}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Combined RFM Score */}\r\n      <div className=\"p-6 rounded-xl border bg-card\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"font-semibold\">Combined RFM Score</h3>\r\n          <span className=\"text-3xl font-bold text-primary\">{rfm.rfm_score}</span>\r\n        </div>\r\n        <div className=\"h-3 bg-muted rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-primary transition-all\"\r\n            style={{ width: `${(rfm.rfm_score / 15) * 100}%` }}\r\n          />\r\n        </div>\r\n        <div className=\"flex items-center justify-between text-xs text-muted-foreground mt-2\">\r\n          <span>3 (Low)</span>\r\n          <span>9 (Average)</span>\r\n          <span>15 (High)</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Profile stats */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <div className=\"text-sm text-muted-foreground\">Lifecycle</div>\r\n          <div className=\"text-lg font-semibold capitalize\">{profile.lifecycle_stage}</div>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <div className=\"text-sm text-muted-foreground\">Total Events</div>\r\n          <div className=\"text-lg font-semibold\">{profile.total_events.toLocaleString()}</div>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <div className=\"text-sm text-muted-foreground\">Purchases</div>\r\n          <div className=\"text-lg font-semibold\">{profile.total_purchases.toLocaleString()}</div>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <div className=\"text-sm text-muted-foreground\">Total Revenue</div>\r\n          <div className=\"text-lg font-semibold\">${profile.total_revenue.toLocaleString()}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"text-xs text-muted-foreground flex items-center gap-2\">\r\n        <Clock className=\"w-3 h-3\" />\r\n        Analysis window: {rfm.analysis_window_days} days Â· Calculated:{' '}\r\n        {new Date(rfm.calculated_at).toLocaleString()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function RFMDashboard() {\r\n  const [selectedSegment, setSelectedSegment] = useState<RFMSegment | null>(null);\r\n  const [searchProfileId, setSearchProfileId] = useState('');\r\n  const [viewingProfileId, setViewingProfileId] = useState<string | null>(null);\r\n\r\n  const { data: summary, isLoading, refetch } = useRFMSummary();\r\n  const computeMutation = useComputeRFMBatch();\r\n\r\n  const handleCompute = async () => {\r\n    await computeMutation.mutateAsync(undefined);\r\n    refetch();\r\n  };\r\n\r\n  if (viewingProfileId) {\r\n    return <ProfileRFMView profileId={viewingProfileId} onBack={() => setViewingProfileId(null)} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold flex items-center gap-2\">\r\n            <Target className=\"w-6 h-6 text-primary\" />\r\n            RFM Analysis\r\n          </h2>\r\n          <p className=\"text-sm text-muted-foreground mt-1\">\r\n            Customer segmentation based on Recency, Frequency, and Monetary value\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={handleCompute}\r\n          disabled={computeMutation.isPending}\r\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors\"\r\n        >\r\n          {computeMutation.isPending ? (\r\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n          ) : (\r\n            <RefreshCw className=\"w-4 h-4\" />\r\n          )}\r\n          Recalculate RFM\r\n        </button>\r\n      </div>\r\n\r\n      {/* Profile lookup */}\r\n      <div className=\"relative\">\r\n        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n        <input\r\n          type=\"text\"\r\n          value={searchProfileId}\r\n          onChange={(e) => setSearchProfileId(e.target.value)}\r\n          placeholder=\"Enter Profile ID to view individual RFM analysis...\"\r\n          className=\"w-full pl-10 pr-24 py-3 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20\"\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter' && searchProfileId) {\r\n              setViewingProfileId(searchProfileId);\r\n            }\r\n          }}\r\n        />\r\n        {searchProfileId && (\r\n          <button\r\n            onClick={() => setViewingProfileId(searchProfileId)}\r\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 px-3 py-1.5 rounded-md bg-primary text-primary-foreground text-sm hover:bg-primary/90 transition-colors\"\r\n          >\r\n            View RFM\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Summary stats */}\r\n      {isLoading ? (\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n        </div>\r\n      ) : summary ? (\r\n        <>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div className=\"p-4 rounded-xl border bg-card\">\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\r\n                <Users className=\"w-4 h-4\" />\r\n                Total Profiles\r\n              </div>\r\n              <div className=\"text-2xl font-bold\">{summary.total_profiles.toLocaleString()}</div>\r\n            </div>\r\n            <div className=\"p-4 rounded-xl border bg-card\">\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\r\n                <Activity className=\"w-4 h-4\" />\r\n                With RFM Data\r\n              </div>\r\n              <div className=\"text-2xl font-bold\">{summary.profiles_with_rfm.toLocaleString()}</div>\r\n            </div>\r\n            <div className=\"p-4 rounded-xl border bg-card\">\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\r\n                <PieChart className=\"w-4 h-4\" />\r\n                Coverage\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-green-500\">\r\n                {summary.coverage_pct.toFixed(1)}%\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 rounded-xl border bg-card\">\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\r\n                <BarChart3 className=\"w-4 h-4\" />\r\n                Segments\r\n              </div>\r\n              <div className=\"text-2xl font-bold\">\r\n                {Object.values(summary.segment_distribution).filter((v) => v > 0).length}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Segment distribution */}\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"font-semibold\">Customer Segments</h3>\r\n              {selectedSegment && (\r\n                <button\r\n                  onClick={() => setSelectedSegment(null)}\r\n                  className=\"text-sm text-primary hover:underline\"\r\n                >\r\n                  Clear selection\r\n                </button>\r\n              )}\r\n            </div>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n              {(Object.entries(summary.segment_distribution) as [RFMSegment, number][])\r\n                .sort((a, b) => b[1] - a[1])\r\n                .map(([segment, count]) => (\r\n                  <SegmentCard\r\n                    key={segment}\r\n                    segment={segment}\r\n                    count={count}\r\n                    totalProfiles={summary.profiles_with_rfm}\r\n                    isSelected={selectedSegment === segment}\r\n                    onClick={() => setSelectedSegment(selectedSegment === segment ? null : segment)}\r\n                  />\r\n                ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Selected segment details */}\r\n          {selectedSegment && (\r\n            <div className=\"p-6 rounded-xl border bg-card\">\r\n              <div className=\"flex items-start gap-4\">\r\n                <div\r\n                  className={cn(\r\n                    'p-3 rounded-xl',\r\n                    RFM_SEGMENTS[selectedSegment].bgColor,\r\n                    RFM_SEGMENTS[selectedSegment].color\r\n                  )}\r\n                >\r\n                  {RFM_SEGMENTS[selectedSegment].icon}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-lg font-semibold\">{RFM_SEGMENTS[selectedSegment].label}</h3>\r\n                  <p className=\"text-muted-foreground mt-1\">\r\n                    {RFM_SEGMENTS[selectedSegment].description}\r\n                  </p>\r\n                  <div className=\"mt-4 p-3 rounded-lg bg-primary/5 border border-primary/20\">\r\n                    <div className=\"text-sm font-medium text-primary mb-1\">Recommended Action</div>\r\n                    <p className=\"text-sm\">{RFM_SEGMENTS[selectedSegment].actionTip}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"text-3xl font-bold\">\r\n                    {summary.segment_distribution[selectedSegment].toLocaleString()}\r\n                  </div>\r\n                  <div className=\"text-sm text-muted-foreground\">profiles</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* RFM Explanation */}\r\n          <div className=\"p-4 rounded-xl border bg-muted/30\">\r\n            <h3 className=\"font-semibold mb-3\">Understanding RFM Scores</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n              <div>\r\n                <div className=\"font-medium flex items-center gap-2 mb-1\">\r\n                  <Calendar className=\"w-4 h-4 text-primary\" />\r\n                  Recency (R)\r\n                </div>\r\n                <p className=\"text-muted-foreground\">\r\n                  How recently did the customer make a purchase? Lower is better.\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <div className=\"font-medium flex items-center gap-2 mb-1\">\r\n                  <RefreshCw className=\"w-4 h-4 text-primary\" />\r\n                  Frequency (F)\r\n                </div>\r\n                <p className=\"text-muted-foreground\">\r\n                  How often does the customer make purchases? Higher is better.\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <div className=\"font-medium flex items-center gap-2 mb-1\">\r\n                  <DollarSign className=\"w-4 h-4 text-primary\" />\r\n                  Monetary (M)\r\n                </div>\r\n                <p className=\"text-muted-foreground\">\r\n                  How much does the customer spend? Higher is better.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-12 bg-card border rounded-xl\">\r\n          <Target className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"font-semibold mb-2\">No RFM Data Available</h3>\r\n          <p className=\"text-sm text-muted-foreground mb-4\">\r\n            Calculate RFM scores to segment your customers\r\n          </p>\r\n          <button\r\n            onClick={handleCompute}\r\n            disabled={computeMutation.isPending}\r\n            className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n          >\r\n            {computeMutation.isPending ? (\r\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n            ) : (\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n            )}\r\n            Calculate RFM\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RFMDashboard;\r\n","/**\r\n * CDP RFM Analysis View\r\n * Page for RFM (Recency, Frequency, Monetary) customer segmentation\r\n */\r\n\r\nimport { RFMDashboard } from '@/components/cdp/RFMDashboard';\r\n\r\nexport default function CDPRfm() {\r\n  return (\r\n    <div className=\"p-6\">\r\n      <RFMDashboard />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["__iconNode","Frown","createLucideIcon","Heart","Moon","RFM_SEGMENTS","jsx","Crown","Star","Zap","TrendingUp","AlertTriangle","Users","RFMScoreBar","label","score","rawValue","jsxs","cn","SegmentCard","segment","count","totalProfiles","isSelected","onClick","config","percentage","ProfileRFMView","profileId","onBack","profile","profileLoading","useCDPProfile","rfm","rfmLoading","useProfileRFM","Loader2","segmentConfig","ChevronRight","Clock","RFMDashboard","selectedSegment","setSelectedSegment","useState","searchProfileId","setSearchProfileId","viewingProfileId","setViewingProfileId","summary","isLoading","refetch","useRFMSummary","computeMutation","useComputeRFMBatch","handleCompute","Target","RefreshCw","Search","e","Fragment","Activity","PieChart","BarChart3","v","b","Calendar","DollarSign","CDPRfm"],"mappings":"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","x_google_ignoreList":[0,1,2]}