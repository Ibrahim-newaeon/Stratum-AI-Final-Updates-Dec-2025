import{j as e}from"./vendor-ui-B0DL0VNC.js";import{f as w,r as c}from"./vendor-react-Dz7uKsMg.js";import{a7 as S,c as r,dc as h,f as v}from"./index-BQex3859.js";import{u as d,e as k,f as C}from"./campaignBuilder-B-MzQ-hf.js";import{F}from"./MagnifyingGlassIcon-3MUvqIvj.js";import{F as R}from"./XCircleIcon-Dk49lKz_.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";const I=[{id:"1",platformAccountId:"act_123456789",name:"Main Business Account",platform:"meta",currency:"SAR",timezone:"Asia/Riyadh",enabled:!0,spendCap:5e4,lastSyncAt:"2024-01-20T10:30:00Z"},{id:"2",platformAccountId:"act_987654321",name:"E-commerce Store",platform:"meta",currency:"SAR",timezone:"Asia/Riyadh",enabled:!0,lastSyncAt:"2024-01-20T10:30:00Z"},{id:"3",platformAccountId:"123-456-7890",name:"Company Google Ads",platform:"google",currency:"SAR",timezone:"Asia/Riyadh",enabled:!1,lastSyncAt:"2024-01-19T14:00:00Z"}],_={meta:"Meta Ads",google:"Google Ads",tiktok:"TikTok Ads",snapchat:"Snapchat Ads"};function G(){const{tenantId:f}=w(),a=parseInt(f||"1",10),[o,b]=c.useState("");c.useState("meta");const{data:i}=d(a,"meta"),{data:m}=d(a,"google"),{data:u}=d(a,"tiktok"),{data:p}=d(a,"snapchat"),n=k(a),y=C(a),l=c.useMemo(()=>{const t=[...i||[],...m||[],...u||[],...p||[]].map(s=>({id:s.id,platformAccountId:s.platform_account_id,name:s.name,platform:s.platform,currency:s.currency,timezone:s.timezone,enabled:s.is_enabled,spendCap:s.daily_budget_cap,lastSyncAt:s.last_synced_at||new Date().toISOString()}));return t.length>0?t:I},[i,m,u,p]),A=async t=>{try{await y.mutateAsync({platform:t.platform,accountId:t.id,data:{is_enabled:!t.enabled}})}catch(s){console.error("Failed to toggle account:",s)}},j=async()=>{try{await Promise.all([n.mutateAsync("meta"),n.mutateAsync("google"),n.mutateAsync("tiktok"),n.mutateAsync("snapchat")])}catch(t){console.error("Failed to sync accounts:",t)}},x=l.filter(t=>t.name.toLowerCase().includes(o.toLowerCase())||t.platformAccountId.toLowerCase().includes(o.toLowerCase())),N=l.filter(t=>t.enabled).length,g=n.isPending;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Ad Accounts"}),e.jsxs("p",{className:"text-muted-foreground",children:[N," of ",l.length," accounts enabled for publishing"]})]}),e.jsxs("button",{onClick:j,disabled:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-accent transition-colors disabled:opacity-50",children:[e.jsx(S,{className:r("h-5 w-5",g&&"animate-spin")}),"Sync Accounts"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search accounts...",value:o,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsx("div",{className:"space-y-4",children:x.map(t=>e.jsxs("div",{className:r("rounded-xl border p-6 transition-all",t.enabled?"bg-card shadow-card":"bg-muted/30"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:r("h-12 w-12 rounded-lg flex items-center justify-center",t.enabled?"bg-primary/10":"bg-muted"),children:e.jsx(h,{className:r("h-6 w-6",t.enabled?"text-primary":"text-muted-foreground")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[_[t.platform]," - ",t.platformAccountId]})]})]}),e.jsx("button",{onClick:()=>A(t),className:r("flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",t.enabled?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"),children:t.enabled?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-4 w-4"}),"Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4"}),"Disabled"]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currency"}),e.jsx("p",{className:"font-medium",children:t.currency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Timezone"}),e.jsx("p",{className:"font-medium",children:t.timezone})]}),t.spendCap&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Spend Cap"}),e.jsxs("p",{className:"font-medium",children:[t.currency," ",t.spendCap.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last Synced"}),e.jsx("p",{className:"font-medium",children:new Date(t.lastSyncAt).toLocaleDateString()})]})]})]},t.id))}),x.length===0&&e.jsxs("div",{className:"rounded-xl border bg-muted/30 p-12 text-center",children:[e.jsx(h,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"mt-4 font-semibold",children:"No Ad Accounts Found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Connect a platform first to see available ad accounts"})]}),e.jsxs("div",{className:"rounded-xl border bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800 p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"About Ad Account Management"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("li",{children:"- Only enabled accounts can be selected for campaign publishing"}),e.jsx("li",{children:"- Accounts are synced automatically every 6 hours"}),e.jsx("li",{children:"- Spend caps are pulled from platform settings"}),e.jsx("li",{children:"- Budget guardrails will respect account spend caps"})]})]})]})}export{G as default};
//# sourceMappingURL=AdAccounts-CrKGuZGk.js.map
