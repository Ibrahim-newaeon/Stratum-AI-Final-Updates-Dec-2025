{"version":3,"file":"CMSLandingFeatures-BE67nXt_.js","sources":["../../src/views/cms/CMSLandingFeatures.tsx"],"sourcesContent":["/**\r\n * CMS Landing Features Editor\r\n * Manage feature layers and items for the landing page\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n  PlusIcon,\r\n  SparklesIcon,\r\n  PencilSquareIcon,\r\n  TrashIcon,\r\n  XMarkIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport {\r\n  useFeatureLayers,\r\n  FeatureItem,\r\n  useCreatePost,\r\n  useUpdatePost,\r\n  useDeletePost,\r\n} from '@/api/cms';\r\n\r\nexport default function CMSLandingFeatures() {\r\n  const { data: layers, isLoading } = useFeatureLayers();\r\n  const createMutation = useCreatePost();\r\n  const updateMutation = useUpdatePost();\r\n  const deleteMutation = useDeletePost();\r\n\r\n  const [showEditor, setShowEditor] = useState(false);\r\n  const [editingFeature, setEditingFeature] = useState<FeatureItem | null>(null);\r\n  const [, setEditingLayerId] = useState<string>('');\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    iconName: 'ChartBarIcon',\r\n    layerId: '',\r\n    layerName: '',\r\n    displayOrder: 0,\r\n  });\r\n\r\n  const openEditor = (feature?: FeatureItem, layerId?: string) => {\r\n    if (feature) {\r\n      setEditingFeature(feature);\r\n      setEditingLayerId(layerId || '');\r\n      setFormData({\r\n        title: feature.title,\r\n        description: feature.description,\r\n        iconName: feature.iconName,\r\n        layerId: layerId || '',\r\n        layerName: '',\r\n        displayOrder: feature.displayOrder,\r\n      });\r\n    } else {\r\n      setEditingFeature(null);\r\n      setEditingLayerId('');\r\n      setFormData({\r\n        title: '',\r\n        description: '',\r\n        iconName: 'ChartBarIcon',\r\n        layerId: '',\r\n        layerName: '',\r\n        displayOrder: 0,\r\n      });\r\n    }\r\n    setShowEditor(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const postData = {\r\n      title: formData.title,\r\n      excerpt: formData.description,\r\n      status: 'published' as const,\r\n      content_type: 'blog_post' as const,\r\n      meta_title: JSON.stringify({\r\n        layerId: formData.layerId || 'default',\r\n        layerName: formData.layerName,\r\n        featureIcon: formData.iconName,\r\n        displayOrder: formData.displayOrder,\r\n      }),\r\n    };\r\n\r\n    if (editingFeature) {\r\n      updateMutation.mutate(\r\n        { id: editingFeature.id, data: postData },\r\n        { onSuccess: () => setShowEditor(false) }\r\n      );\r\n    } else {\r\n      createMutation.mutate(postData, {\r\n        onSuccess: () => setShowEditor(false),\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-white\">Landing Features</h1>\r\n          <p className=\"text-white/60 mt-1\">Manage feature sections on the landing page</p>\r\n        </div>\r\n        <button\r\n          onClick={() => openEditor()}\r\n          className=\"flex items-center gap-2 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors\"\r\n        >\r\n          <PlusIcon className=\"w-5 h-5\" />\r\n          Add Feature\r\n        </button>\r\n      </div>\r\n\r\n      {/* Feature Layers */}\r\n      {isLoading ? (\r\n        <div className=\"flex items-center justify-center py-20\">\r\n          <div className=\"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full\" />\r\n        </div>\r\n      ) : !layers || layers.length === 0 ? (\r\n        <div className=\"rounded-2xl bg-white/5 border border-white/10 text-center py-20\">\r\n          <SparklesIcon className=\"w-12 h-12 text-white/20 mx-auto mb-4\" />\r\n          <p className=\"text-white/60 mb-2\">No feature layers configured</p>\r\n          <p className=\"text-white/40 text-sm mb-6\">\r\n            Create feature posts with the &quot;landing-features&quot; category to populate this section.\r\n          </p>\r\n          <button\r\n            onClick={() => openEditor()}\r\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\r\n          >\r\n            <PlusIcon className=\"w-4 h-4\" />\r\n            Add first feature\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-8\">\r\n          {layers.map((layer) => (\r\n            <div key={layer.id} className=\"rounded-2xl bg-white/5 border border-white/10 overflow-hidden\">\r\n              {/* Layer Header */}\r\n              <div className=\"flex items-center justify-between px-6 py-4 border-b border-white/10\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className={`w-10 h-10 rounded-lg ${layer.bgColor} flex items-center justify-center`}>\r\n                    <SparklesIcon className=\"w-5 h-5 text-purple-400\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-white font-semibold\">{layer.name}</h3>\r\n                    <p className=\"text-sm text-white/50\">{layer.description}</p>\r\n                  </div>\r\n                </div>\r\n                <span className=\"text-xs text-white/40\">\r\n                  {layer.features.length} feature{layer.features.length !== 1 ? 's' : ''}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Features in Layer */}\r\n              <div className=\"divide-y divide-white/5\">\r\n                {layer.features.map((feature) => (\r\n                  <div\r\n                    key={feature.id}\r\n                    className=\"flex items-center justify-between px-6 py-3 hover:bg-white/5 transition-colors group\"\r\n                  >\r\n                    <div className=\"min-w-0\">\r\n                      <p className=\"text-white font-medium truncate\">{feature.title}</p>\r\n                      <p className=\"text-sm text-white/40 truncate\">{feature.description}</p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                      <button\r\n                        onClick={() => openEditor(feature, layer.id)}\r\n                        className=\"p-1.5 text-white/40 hover:text-white\"\r\n                      >\r\n                        <PencilSquareIcon className=\"w-4 h-4\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => deleteMutation.mutate(feature.id)}\r\n                        className=\"p-1.5 text-white/40 hover:text-red-400\"\r\n                      >\r\n                        <TrashIcon className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Add Feature to Layer */}\r\n              <button\r\n                onClick={() => {\r\n                  setFormData((f) => ({ ...f, layerId: layer.id, layerName: layer.name }));\r\n                  openEditor();\r\n                }}\r\n                className=\"flex items-center gap-2 w-full px-6 py-3 text-sm text-white/40 hover:text-white hover:bg-white/5 transition-colors\"\r\n              >\r\n                <PlusIcon className=\"w-4 h-4\" />\r\n                Add feature to this layer\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Editor Modal */}\r\n      {showEditor && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4\">\r\n          <div className=\"bg-neutral-900 border border-white/10 rounded-xl w-full max-w-lg\">\r\n            <div className=\"flex items-center justify-between p-4 border-b border-white/10\">\r\n              <h2 className=\"text-lg font-semibold text-white\">\r\n                {editingFeature ? 'Edit Feature' : 'Add Feature'}\r\n              </h2>\r\n              <button\r\n                onClick={() => setShowEditor(false)}\r\n                className=\"p-2 text-white/40 hover:text-white\"\r\n              >\r\n                <XMarkIcon className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-white/70 mb-1.5\">Title *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.title}\r\n                  onChange={(e) => setFormData((f) => ({ ...f, title: e.target.value }))}\r\n                  className=\"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/30 focus:outline-none focus:border-purple-500/50\"\r\n                  placeholder=\"Feature title\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-white/70 mb-1.5\">\r\n                  Description\r\n                </label>\r\n                <textarea\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData((f) => ({ ...f, description: e.target.value }))}\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/30 focus:outline-none focus:border-purple-500/50 resize-none\"\r\n                  placeholder=\"Feature description...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white/70 mb-1.5\">Layer</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.layerId}\r\n                    onChange={(e) => setFormData((f) => ({ ...f, layerId: e.target.value }))}\r\n                    className=\"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/30 focus:outline-none focus:border-purple-500/50\"\r\n                    placeholder=\"Layer ID\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-white/70 mb-1.5\">Order</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.displayOrder}\r\n                    onChange={(e) =>\r\n                      setFormData((f) => ({ ...f, displayOrder: Number(e.target.value) }))\r\n                    }\r\n                    className=\"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500/50\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-3 p-4 border-t border-white/10\">\r\n              <button\r\n                onClick={() => setShowEditor(false)}\r\n                className=\"px-4 py-2 text-white/60 hover:text-white\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleSave}\r\n                disabled={!formData.title || createMutation.isPending || updateMutation.isPending}\r\n                className=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium disabled:opacity-50\"\r\n              >\r\n                {createMutation.isPending || updateMutation.isPending ? 'Saving...' : 'Save'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CMSLandingFeatures","layers","isLoading","useFeatureLayers","createMutation","useCreatePost","updateMutation","useUpdatePost","deleteMutation","useDeletePost","showEditor","setShowEditor","useState","editingFeature","setEditingFeature","setEditingLayerId","formData","setFormData","openEditor","feature","layerId","handleSave","postData","jsxs","jsx","PlusIcon","SparklesIcon","layer","PencilSquareIcon","TrashIcon","f","XMarkIcon","e"],"mappings":"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"}