import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as l}from"./vendor-react-Dz7uKsMg.js";import{d1 as z,c as h,a5 as j,a9 as L,e as V,F as S,dh as I,b as B}from"./index-BQex3859.js";import{F}from"./PlusIcon-ByQcgXHI.js";import{F as D}from"./TableCellsIcon-1JGN94TS.js";import{F as $}from"./PencilIcon-BPYwcoex.js";import{F as O}from"./TrashIcon-DR9paOX4.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";function H({title:r,titleId:c,...u},g){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":c},u),r?l.createElement("title",{id:c},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const q=l.forwardRef(H);function G({title:r,titleId:c,...u},g){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":c},u),r?l.createElement("title",{id:c},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const Z=l.forwardRef(G),M=[{id:"campaigns",name:"Campaign Performance",type:"campaigns",description:"Ad spend, impressions, clicks, conversions across all platforms"},{id:"cdp",name:"CDP Profiles & Events",type:"cdp",description:"Customer profiles, events, segments, and lifecycle data"},{id:"trust_engine",name:"Trust Engine",type:"trust_engine",description:"Signal health, gate decisions, automation logs"},{id:"pacing",name:"Pacing & Forecasting",type:"pacing",description:"Budget pacing, spend forecasts, alerts"},{id:"attribution",name:"Attribution",type:"attribution",description:"Multi-touch attribution, conversion paths, channel performance"}],W={campaigns:[{id:"spend",name:"Ad Spend",field:"spend",aggregation:"sum",format:"currency"},{id:"impressions",name:"Impressions",field:"impressions",aggregation:"sum",format:"number"},{id:"clicks",name:"Clicks",field:"clicks",aggregation:"sum",format:"number"},{id:"conversions",name:"Conversions",field:"conversions",aggregation:"sum",format:"number"},{id:"ctr",name:"CTR",field:"ctr",aggregation:"avg",format:"percentage"},{id:"cpc",name:"CPC",field:"cpc",aggregation:"avg",format:"currency"},{id:"roas",name:"ROAS",field:"roas",aggregation:"avg",format:"decimal"},{id:"cpa",name:"CPA",field:"cpa",aggregation:"avg",format:"currency"}],cdp:[{id:"total_profiles",name:"Total Profiles",field:"total_profiles",aggregation:"count",format:"number"},{id:"new_profiles",name:"New Profiles",field:"new_profiles",aggregation:"sum",format:"number"},{id:"total_events",name:"Total Events",field:"total_events",aggregation:"sum",format:"number"},{id:"avg_events_per_profile",name:"Avg Events/Profile",field:"avg_events",aggregation:"avg",format:"decimal"},{id:"segment_size",name:"Segment Size",field:"segment_size",aggregation:"sum",format:"number"},{id:"ltv",name:"Customer LTV",field:"ltv",aggregation:"avg",format:"currency"}],trust_engine:[{id:"signal_health",name:"Signal Health",field:"signal_health",aggregation:"avg",format:"percentage"},{id:"gate_passes",name:"Gate Passes",field:"gate_passes",aggregation:"sum",format:"number"},{id:"gate_holds",name:"Gate Holds",field:"gate_holds",aggregation:"sum",format:"number"},{id:"gate_blocks",name:"Gate Blocks",field:"gate_blocks",aggregation:"sum",format:"number"},{id:"automation_runs",name:"Automation Runs",field:"automation_runs",aggregation:"sum",format:"number"}],pacing:[{id:"budget",name:"Budget",field:"budget",aggregation:"sum",format:"currency"},{id:"spent",name:"Amount Spent",field:"spent",aggregation:"sum",format:"currency"},{id:"pacing_rate",name:"Pacing Rate",field:"pacing_rate",aggregation:"avg",format:"percentage"},{id:"forecast_spend",name:"Forecasted Spend",field:"forecast_spend",aggregation:"sum",format:"currency"}],attribution:[{id:"attributed_conversions",name:"Attributed Conversions",field:"attributed_conversions",aggregation:"sum",format:"number"},{id:"attributed_revenue",name:"Attributed Revenue",field:"attributed_revenue",aggregation:"sum",format:"currency"},{id:"attribution_weight",name:"Attribution Weight",field:"attribution_weight",aggregation:"avg",format:"percentage"},{id:"path_length",name:"Avg Path Length",field:"path_length",aggregation:"avg",format:"decimal"}]},U={campaigns:[{id:"platform",name:"Platform",field:"platform",type:"string"},{id:"campaign",name:"Campaign",field:"campaign_name",type:"string"},{id:"ad_group",name:"Ad Group",field:"ad_group",type:"string"},{id:"date",name:"Date",field:"date",type:"date"},{id:"device",name:"Device",field:"device",type:"string"},{id:"country",name:"Country",field:"country",type:"string"}],cdp:[{id:"lifecycle_stage",name:"Lifecycle Stage",field:"lifecycle_stage",type:"string"},{id:"segment",name:"Segment",field:"segment",type:"string"},{id:"source",name:"Source",field:"source",type:"string"},{id:"date",name:"Date",field:"date",type:"date"},{id:"event_type",name:"Event Type",field:"event_type",type:"string"}],trust_engine:[{id:"signal_type",name:"Signal Type",field:"signal_type",type:"string"},{id:"gate_status",name:"Gate Status",field:"gate_status",type:"string"},{id:"automation",name:"Automation",field:"automation_name",type:"string"},{id:"date",name:"Date",field:"date",type:"date"}],pacing:[{id:"campaign",name:"Campaign",field:"campaign_name",type:"string"},{id:"platform",name:"Platform",field:"platform",type:"string"},{id:"date",name:"Date",field:"date",type:"date"},{id:"alert_type",name:"Alert Type",field:"alert_type",type:"string"}],attribution:[{id:"channel",name:"Channel",field:"channel",type:"string"},{id:"campaign",name:"Campaign",field:"campaign_name",type:"string"},{id:"touchpoint",name:"Touchpoint",field:"touchpoint",type:"string"},{id:"date",name:"Date",field:"date",type:"date"},{id:"model",name:"Attribution Model",field:"model",type:"string"}]},T=[{id:"bar",name:"Bar Chart",icon:j},{id:"line",name:"Line Chart",icon:q},{id:"pie",name:"Pie Chart",icon:I},{id:"table",name:"Table",icon:D},{id:"metric",name:"Metric Card",icon:B}],K=[{id:"1",name:"Weekly Performance Summary",description:"Overview of campaign performance across all platforms",dataSource:"campaigns",metrics:[{id:"spend",name:"Ad Spend",field:"spend",aggregation:"sum",format:"currency"},{id:"conversions",name:"Conversions",field:"conversions",aggregation:"sum",format:"number"},{id:"roas",name:"ROAS",field:"roas",aggregation:"avg",format:"decimal"}],dimensions:[{id:"platform",name:"Platform",field:"platform",type:"string"},{id:"date",name:"Date",field:"date",type:"date"}],filters:[],visualizations:[{id:"v1",type:"line",title:"Spend Over Time",metrics:["spend"],dimensions:["date"],config:{}},{id:"v2",type:"bar",title:"ROAS by Platform",metrics:["roas"],dimensions:["platform"],config:{}}],schedule:{enabled:!0,frequency:"weekly",time:"09:00",recipients:["team@company.com"],format:"pdf"},dateRange:{type:"last_7_days"},createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-15T14:30:00Z",status:"published"},{id:"2",name:"CDP Health Report",description:"Customer data platform metrics and segment analysis",dataSource:"cdp",metrics:[{id:"total_profiles",name:"Total Profiles",field:"total_profiles",aggregation:"count",format:"number"},{id:"new_profiles",name:"New Profiles",field:"new_profiles",aggregation:"sum",format:"number"}],dimensions:[{id:"lifecycle_stage",name:"Lifecycle Stage",field:"lifecycle_stage",type:"string"}],filters:[],visualizations:[{id:"v1",type:"pie",title:"Profiles by Stage",metrics:["total_profiles"],dimensions:["lifecycle_stage"],config:{}}],schedule:{enabled:!1,frequency:"monthly",time:"08:00",recipients:[],format:"csv"},dateRange:{type:"last_30_days"},createdAt:"2024-01-08T09:00:00Z",updatedAt:"2024-01-12T16:00:00Z",status:"draft"},{id:"3",name:"Trust Engine Audit",description:"Signal health and automation decision tracking",dataSource:"trust_engine",metrics:[{id:"signal_health",name:"Signal Health",field:"signal_health",aggregation:"avg",format:"percentage"},{id:"gate_passes",name:"Gate Passes",field:"gate_passes",aggregation:"sum",format:"number"}],dimensions:[{id:"signal_type",name:"Signal Type",field:"signal_type",type:"string"}],filters:[],visualizations:[{id:"v1",type:"metric",title:"Avg Signal Health",metrics:["signal_health"],dimensions:[],config:{}},{id:"v2",type:"bar",title:"Gate Decisions",metrics:["gate_passes"],dimensions:["signal_type"],config:{}}],schedule:{enabled:!0,frequency:"daily",time:"07:00",recipients:["ops@company.com"],format:"pdf"},dateRange:{type:"last_7_days"},createdAt:"2024-01-05T11:00:00Z",updatedAt:"2024-01-14T10:00:00Z",status:"published"}];function Q({report:r,isOpen:c,onClose:u,onSave:g}){const[f,x]=l.useState("data"),[a,i]=l.useState(()=>r||{id:Date.now().toString(),name:"",description:"",dataSource:"",metrics:[],dimensions:[],filters:[],visualizations:[],schedule:{enabled:!1,frequency:"weekly",time:"09:00",recipients:[],format:"pdf"},dateRange:{type:"last_7_days"},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"draft"}),[m,N]=l.useState("");if(!c)return null;const w=W[a.dataSource]||[],_=U[a.dataSource]||[],C=t=>{a.metrics.find(n=>n.id===t.id)||i({...a,metrics:[...a.metrics,t]})},k=t=>{i({...a,metrics:a.metrics.filter(n=>n.id!==t)})},R=t=>{a.dimensions.find(n=>n.id===t.id)||i({...a,dimensions:[...a.dimensions,t]})},A=t=>{i({...a,dimensions:a.dimensions.filter(n=>n.id!==t)})},b=t=>{const n={id:Date.now().toString(),type:t,title:`New ${t} chart`,metrics:a.metrics.slice(0,1).map(y=>y.id),dimensions:a.dimensions.slice(0,1).map(y=>y.id),config:{}};i({...a,visualizations:[...a.visualizations,n]})},s=t=>{i({...a,visualizations:a.visualizations.filter(n=>n.id!==t)})},d=()=>{m&&!a.schedule.recipients.includes(m)&&(i({...a,schedule:{...a.schedule,recipients:[...a.schedule.recipients,m]}}),N(""))},v=t=>{i({...a,schedule:{...a.schedule,recipients:a.schedule.recipients.filter(n=>n!==t)}})},P=()=>{g({...a,updatedAt:new Date().toISOString()}),u()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-card rounded-xl shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:r?"Edit Report":"Create Custom Report"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Build a custom report with your chosen metrics and visualizations"})]}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-muted rounded-lg",children:e.jsx(S,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex border-b",children:[{id:"data",label:"Data Source & Metrics",icon:D},{id:"visualizations",label:"Visualizations",icon:j},{id:"schedule",label:"Schedule",icon:L}].map(t=>e.jsxs("button",{onClick:()=>x(t.id),className:h("flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors",f===t.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[e.jsx(t.icon,{className:"w-4 h-4"}),t.label]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[f==="data"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Report Name"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>i({...a,name:t.target.value}),className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary",placeholder:"Enter report name..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date Range"}),e.jsxs("select",{value:a.dateRange.type,onChange:t=>i({...a,dateRange:{...a.dateRange,type:t.target.value}}),className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_90_days",children:"Last 90 Days"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>i({...a,description:t.target.value}),className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary",rows:2,placeholder:"Describe what this report shows..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",children:"Data Source"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:M.map(t=>e.jsxs("button",{onClick:()=>i({...a,dataSource:t.id,metrics:[],dimensions:[]}),className:h("p-4 rounded-lg border text-left transition-all",a.dataSource===t.id?"border-primary bg-primary/5":"hover:border-muted-foreground/50"),children:[e.jsx("div",{className:"font-medium text-sm",children:t.name}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.description})]},t.id))})]}),a.dataSource&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",children:"Select Metrics"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.metrics.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-primary/10 text-primary text-sm",children:[t.name,e.jsx("button",{onClick:()=>k(t.id),className:"hover:bg-primary/20 rounded-full p-0.5",children:e.jsx(S,{className:"w-3 h-3"})})]},t.id))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.filter(t=>!a.metrics.find(n=>n.id===t.id)).map(t=>e.jsxs("button",{onClick:()=>C(t),className:"px-3 py-1 rounded-full border text-sm hover:border-primary hover:text-primary transition-colors",children:["+ ",t.name]},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",children:"Select Dimensions"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.dimensions.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-blue-500/10 text-blue-500 text-sm",children:[t.name,e.jsx("button",{onClick:()=>A(t.id),className:"hover:bg-blue-500/20 rounded-full p-0.5",children:e.jsx(S,{className:"w-3 h-3"})})]},t.id))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_.filter(t=>!a.dimensions.find(n=>n.id===t.id)).map(t=>e.jsxs("button",{onClick:()=>R(t),className:"px-3 py-1 rounded-full border text-sm hover:border-blue-500 hover:text-blue-500 transition-colors",children:["+ ",t.name]},t.id))})]})]})]}),f==="visualizations"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",children:"Add Visualization"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:T.map(t=>e.jsxs("button",{onClick:()=>b(t.id),disabled:a.metrics.length===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg border hover:border-primary hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(t.icon,{className:"w-4 h-4"}),t.name]},t.id))}),a.metrics.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Select at least one metric in the Data tab to add visualizations"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-3",children:["Report Visualizations (",a.visualizations.length,")"]}),a.visualizations.length===0?e.jsxs("div",{className:"text-center py-8 border rounded-lg border-dashed",children:[e.jsx(j,{className:"w-10 h-10 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No visualizations added yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click a chart type above to add one"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.visualizations.map((t,n)=>{var E;const y=((E=T.find(o=>o.id===t.type))==null?void 0:E.icon)||j;return e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-primary"}),e.jsx("input",{type:"text",value:t.title,onChange:o=>{const p=[...a.visualizations];p[n]={...t,title:o.target.value},i({...a,visualizations:p})},className:"font-medium bg-transparent border-b border-transparent focus:border-primary outline-none"})]}),e.jsx("button",{onClick:()=>s(t.id),className:"p-1 hover:bg-destructive/10 hover:text-destructive rounded",children:e.jsx(O,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Metrics: "}),e.jsx("select",{value:t.metrics[0]||"",onChange:o=>{const p=[...a.visualizations];p[n]={...t,metrics:[o.target.value]},i({...a,visualizations:p})},className:"px-2 py-1 rounded border bg-background text-xs",children:a.metrics.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))})]}),t.type!=="metric"&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Group by: "}),e.jsxs("select",{value:t.dimensions[0]||"",onChange:o=>{const p=[...a.visualizations];p[n]={...t,dimensions:[o.target.value]},i({...a,visualizations:p})},className:"px-2 py-1 rounded border bg-background text-xs",children:[e.jsx("option",{value:"",children:"None"}),a.dimensions.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]})]})]},t.id)})})]})]}),f==="schedule"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Scheduled Delivery"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Automatically send this report on a regular schedule"})]}),e.jsx("button",{onClick:()=>i({...a,schedule:{...a.schedule,enabled:!a.schedule.enabled}}),className:h("relative w-12 h-6 rounded-full transition-colors",a.schedule.enabled?"bg-primary":"bg-muted"),children:e.jsx("span",{className:h("absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white shadow transition-transform",a.schedule.enabled?"translate-x-6":"")})})]}),a.schedule.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frequency"}),e.jsxs("select",{value:a.schedule.frequency,onChange:t=>i({...a,schedule:{...a.schedule,frequency:t.target.value}}),className:"w-full px-3 py-2 rounded-lg border bg-background",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),e.jsx("input",{type:"time",value:a.schedule.time,onChange:t=>i({...a,schedule:{...a.schedule,time:t.target.value}}),className:"w-full px-3 py-2 rounded-lg border bg-background"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Format"}),e.jsxs("select",{value:a.schedule.format,onChange:t=>i({...a,schedule:{...a.schedule,format:t.target.value}}),className:"w-full px-3 py-2 rounded-lg border bg-background",children:[e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"csv",children:"CSV"}),e.jsx("option",{value:"excel",children:"Excel"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Recipients"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"email",value:m,onChange:t=>N(t.target.value),onKeyPress:t=>t.key==="Enter"&&d(),className:"flex-1 px-3 py-2 rounded-lg border bg-background",placeholder:"Enter email address..."}),e.jsx("button",{onClick:d,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.schedule.recipients.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-muted text-sm",children:[t,e.jsx("button",{onClick:()=>v(t),className:"hover:bg-muted-foreground/20 rounded-full p-0.5",children:e.jsx(S,{className:"w-3 h-3"})})]},t))})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t bg-muted/30",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 rounded-lg border hover:bg-muted transition-colors",children:"Cancel"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{i({...a,status:"draft"}),P()},className:"px-4 py-2 rounded-lg border hover:bg-muted transition-colors",children:"Save as Draft"}),e.jsx("button",{onClick:()=>{i({...a,status:"published"}),P()},disabled:!a.name||!a.dataSource||a.metrics.length===0,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Publish Report"})]})]})]})})}function de(){const[r,c]=l.useState(K),[u,g]=l.useState(!1),[f,x]=l.useState(null),[a,i]=l.useState("all"),[m,N]=l.useState(""),w=r.filter(s=>{const d=a==="all"||s.status===a,v=s.name.toLowerCase().includes(m.toLowerCase())||s.description.toLowerCase().includes(m.toLowerCase());return d&&v}),_=()=>{x(null),g(!0)},C=s=>{x(s),g(!0)},k=s=>{c(f?r.map(d=>d.id===s.id?s:d):[...r,s])},R=s=>{c(r.filter(d=>d.id!==s))},A=s=>{const d={...s,id:Date.now().toString(),name:`${s.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"draft"};c([...r,d])},b={total:r.length,published:r.filter(s=>s.status==="published").length,scheduled:r.filter(s=>s.schedule.enabled).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(z,{className:"w-8 h-8 text-primary"}),"Custom Report Builder"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create custom reports with your own metrics, dimensions, and visualizations"})]}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(F,{className:"w-5 h-5"}),"Create Report"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-card border",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Reports"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:b.total})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-card border",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Published"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-500",children:b.published})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-card border",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Scheduled"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-500",children:b.scheduled})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search reports...",value:m,onChange:s=>N(s.target.value),className:"w-full max-w-md px-4 py-2 rounded-lg border bg-background"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),["all","published","draft"].map(s=>e.jsx("button",{onClick:()=>i(s),className:h("px-3 py-1.5 rounded-lg text-sm capitalize transition-colors",a===s?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:s},s))]})]}),w.length===0?e.jsxs("div",{className:"text-center py-12 bg-card rounded-xl border",children:[e.jsx(z,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No reports found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:m?"Try a different search term":"Create your first custom report to get started"}),!m&&e.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(F,{className:"w-5 h-5"}),"Create Report"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(s=>{const d=M.find(v=>v.id===s.dataSource);return e.jsxs("div",{className:"bg-card rounded-xl border p-5 hover:border-primary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:s.description})]}),e.jsx("span",{className:h("px-2 py-1 rounded-full text-xs font-medium",s.status==="published"?"bg-green-500/10 text-green-500":"bg-yellow-500/10 text-yellow-500"),children:s.status})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:(d==null?void 0:d.name)||"Unknown source"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.metrics.length," metrics, ",s.visualizations.length," charts"]})]}),s.schedule.enabled&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-500",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsxs("span",{className:"capitalize",children:[s.schedule.frequency," at ",s.schedule.time]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[e.jsxs("button",{onClick:()=>C(s),className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg bg-muted hover:bg-muted/80 text-sm",children:[e.jsx($,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{className:"flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 text-sm",children:[e.jsx(V,{className:"w-4 h-4"}),"View"]}),e.jsx("button",{onClick:()=>A(s),className:"p-1.5 rounded-lg hover:bg-muted",title:"Duplicate",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(s.id),className:"p-1.5 rounded-lg hover:bg-destructive/10 hover:text-destructive",title:"Delete",children:e.jsx(O,{className:"w-4 h-4"})})]})]},s.id)})}),e.jsx(Q,{report:f,isOpen:u,onClose:()=>{g(!1),x(null)},onSave:k})]})}export{de as default};
//# sourceMappingURL=CustomReportBuilder-BZUaMerK.js.map
