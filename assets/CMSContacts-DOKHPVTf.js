import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as l}from"./vendor-react-Dz7uKsMg.js";import{e as f,r as v,I as y,s as k}from"./cms-Bf3FZYRT.js";import{ai as _,h as p,F as S}from"./index-BQex3859.js";import{F as u}from"./EnvelopeIcon-CWLK6IWu.js";import{F as C}from"./ChatBubbleLeftIcon-DJBD7z8K.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";function R({title:a,titleId:i,...t},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},t),a?l.createElement("title",{id:i},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"}))}const M=l.forwardRef(R);function B(){const[a,i]=l.useState({page:1,page_size:20,exclude_spam:!0}),[t,r]=l.useState(null),[c,m]=l.useState(""),{data:n,isLoading:w}=f(a),b=v(),d=y(),j=k(),h=(n==null?void 0:n.contacts)||[],o=(n==null?void 0:n.total)||0,x=Math.ceil(o/(a.page_size||20)),g=s=>{r(s),m(s.response_notes||""),s.is_read||b.mutate({id:s.id,isRead:!0})},N=()=>{t&&d.mutate({id:t.id,isResponded:!0,responseNotes:c},{onSuccess:()=>{r(null)}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Contact Submissions"}),e.jsxs("p",{className:"text-white/60 mt-1",children:[o," message",o!==1?"s":""]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>i(s=>({...s,unread_only:!s.unread_only,page:1})),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a.unread_only?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"bg-white/5 border border-white/10 text-white/60 hover:text-white"}`,children:[e.jsx(_,{className:"w-4 h-4"}),"Unread Only"]}),e.jsxs("button",{onClick:()=>i(s=>({...s,exclude_spam:!s.exclude_spam,page:1})),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a.exclude_spam?"bg-white/5 border border-white/10 text-white/60 hover:text-white":"bg-orange-500/20 text-orange-400 border border-orange-500/30"}`,children:[e.jsx(p,{className:"w-4 h-4"}),a.exclude_spam?"Show Spam":"Showing Spam"]})]}),e.jsx("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:w?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full"})}):h.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(u,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"No messages found"})]}):e.jsx("div",{className:"divide-y divide-white/5",children:h.map(s=>e.jsx("button",{onClick:()=>g(s),className:`w-full text-left px-6 py-4 hover:bg-white/5 transition-colors ${s.is_read?"":"bg-purple-500/5"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("div",{className:"mt-0.5",children:s.is_read?e.jsx(M,{className:"w-5 h-5 text-white/30"}):e.jsx(u,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${s.is_read?"text-white/80":"text-white"}`,children:s.name}),s.is_spam&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded-full",children:"Spam"}),s.is_responded&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded-full",children:"Responded"})]}),e.jsxs("p",{className:"text-sm text-white/50",children:[s.email,s.company&&` â€¢ ${s.company}`]}),s.subject&&e.jsx("p",{className:"text-sm text-white/70 mt-1 font-medium",children:s.subject}),e.jsx("p",{className:"text-sm text-white/40 mt-1 line-clamp-2",children:s.message})]})]}),e.jsx("span",{className:"text-xs text-white/30 whitespace-nowrap flex-shrink-0",children:new Date(s.created_at).toLocaleDateString()})]})},s.id))})}),x>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-white/50",children:["Page ",a.page," of ",x]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i(s=>({...s,page:(s.page||1)-1})),disabled:a.page===1,className:"px-3 py-1.5 text-sm bg-white/5 border border-white/10 rounded-lg text-white/60 hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>i(s=>({...s,page:(s.page||1)+1})),disabled:a.page===x,className:"px-3 py-1.5 text-sm bg-white/5 border border-white/10 rounded-lg text-white/60 hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed",children:"Next"})]})]}),t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-neutral-900 border border-white/10 rounded-xl w-full max-w-2xl max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Message from ",t.name]}),e.jsx("button",{onClick:()=>r(null),className:"p-2 text-white/40 hover:text-white",children:e.jsx(S,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-white/5 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Name"}),e.jsx("p",{className:"text-white font-medium",children:t.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Email"}),e.jsx("p",{className:"text-white",children:t.email})]}),t.company&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Company"}),e.jsx("p",{className:"text-white",children:t.company})]}),t.phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Phone"}),e.jsx("p",{className:"text-white",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Received"}),e.jsx("p",{className:"text-white",children:new Date(t.created_at).toLocaleString()})]}),t.source_page&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Source Page"}),e.jsx("p",{className:"text-white",children:t.source_page})]})]}),t.subject&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Subject"}),e.jsx("p",{className:"text-white font-medium",children:t.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Message"}),e.jsx("div",{className:"p-4 bg-white/5 rounded-xl text-white/80 whitespace-pre-wrap",children:t.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/40 mb-2",children:"Response Notes"}),e.jsx("textarea",{value:c,onChange:s=>m(s.target.value),rows:3,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/30 focus:outline-none focus:border-purple-500/50 resize-none",placeholder:"Add notes about your response..."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-white/10",children:[e.jsxs("button",{onClick:()=>j.mutate({id:t.id,isSpam:!t.is_spam},{onSuccess:()=>r(null)}),className:"flex items-center gap-2 px-3 py-2 text-sm text-orange-400 hover:bg-orange-500/10 rounded-lg transition-colors",children:[e.jsx(p,{className:"w-4 h-4"}),t.is_spam?"Not Spam":"Mark as Spam"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 text-white/60 hover:text-white",children:"Close"}),!t.is_responded&&e.jsxs("button",{onClick:N,disabled:d.isPending,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[e.jsx(C,{className:"w-4 h-4"}),d.isPending?"Saving...":"Mark Responded"]})]})]})]})})]})}export{B as default};
//# sourceMappingURL=CMSContacts-DOKHPVTf.js.map
