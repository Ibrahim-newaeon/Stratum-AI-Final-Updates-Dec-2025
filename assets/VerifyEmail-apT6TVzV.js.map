{"version":3,"file":"VerifyEmail-apT6TVzV.js","sources":["../../src/views/VerifyEmail.tsx"],"sourcesContent":["/**\r\n * Verify Email Page - APPLE STYLE LIGHT EDITION\r\n * Clean white + blue accent + professional\r\n */\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Link, useSearchParams } from 'react-router-dom';\r\nimport {\r\n  CheckCircleIcon,\r\n  EnvelopeIcon,\r\n  ExclamationTriangleIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { useResendVerification, useVerifyEmail } from '@/api/auth';\r\n\r\n// Apple Style Theme\r\nconst theme = {\r\n  blue: '#007AFF',\r\n  blueHover: '#0056CC',\r\n  blueLight: '#E8F4FF',\r\n  bgBase: '#FFFFFF',\r\n  bgElevated: '#F5F5F7',\r\n  bgSurface: '#FFFFFF',\r\n  textPrimary: '#1D1D1F',\r\n  textSecondary: '#424245',\r\n  textMuted: '#86868B',\r\n  border: 'rgba(0, 0, 0, 0.08)',\r\n  success: '#34C759',\r\n  danger: '#FF3B30',\r\n};\r\n\r\nexport default function VerifyEmail() {\r\n  const [searchParams] = useSearchParams();\r\n  const token = searchParams.get('token');\r\n  const emailParam = searchParams.get('email');\r\n\r\n  const [resendEmail, setResendEmail] = useState(emailParam || '');\r\n  const [resendSuccess, setResendSuccess] = useState(false);\r\n\r\n  const verifyMutation = useVerifyEmail();\r\n  const resendMutation = useResendVerification();\r\n\r\n  const isLoading = verifyMutation.isPending;\r\n  const isSuccess = verifyMutation.isSuccess;\r\n  const error =\r\n    verifyMutation.error?.message || (verifyMutation.isError ? 'Verification failed' : '');\r\n\r\n  const handleResend = () => {\r\n    if (!resendEmail) return;\r\n    resendMutation.mutate({ email: resendEmail }, { onSuccess: () => setResendSuccess(true) });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (\r\n      token &&\r\n      !verifyMutation.isPending &&\r\n      !verifyMutation.isSuccess &&\r\n      !verifyMutation.isError\r\n    ) {\r\n      verifyMutation.mutate({ token });\r\n    }\r\n  }, [token]);\r\n\r\n  // No token\r\n  if (!token) {\r\n    return (\r\n      <div\r\n        className=\"min-h-screen flex items-center justify-center p-6\"\r\n        style={{ background: theme.bgElevated }}\r\n      >\r\n        <div className=\"max-w-md w-full text-center\">\r\n          <div\r\n            className=\"p-8 rounded-2xl\"\r\n            style={{\r\n              background: theme.bgSurface,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',\r\n            }}\r\n          >\r\n            <div\r\n              className=\"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6\"\r\n              style={{ background: '#FEF2F2' }}\r\n            >\r\n              <ExclamationTriangleIcon className=\"w-8 h-8\" style={{ color: theme.danger }} />\r\n            </div>\r\n            <h1 className=\"text-2xl font-semibold mb-3\" style={{ color: theme.textPrimary }}>\r\n              Invalid verification link\r\n            </h1>\r\n            <p className=\"mb-6\" style={{ color: theme.textMuted }}>\r\n              The verification link is missing or invalid.\r\n            </p>\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"block w-full py-3 rounded-xl text-white font-semibold text-center transition-all duration-200\"\r\n              style={{ background: theme.blue }}\r\n            >\r\n              Back to login\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Loading\r\n  if (isLoading) {\r\n    return (\r\n      <div\r\n        className=\"min-h-screen flex items-center justify-center p-6\"\r\n        style={{ background: theme.bgElevated }}\r\n      >\r\n        <div className=\"max-w-md w-full text-center\">\r\n          <div\r\n            className=\"p-8 rounded-2xl\"\r\n            style={{\r\n              background: theme.bgSurface,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',\r\n            }}\r\n          >\r\n            <div className=\"flex items-center justify-center gap-3 mb-8\">\r\n              <div\r\n                className=\"h-10 w-10 rounded-xl flex items-center justify-center\"\r\n                style={{ background: theme.blue }}\r\n              >\r\n                <span className=\"text-white font-semibold text-lg\">S</span>\r\n              </div>\r\n              <span className=\"text-xl font-semibold\" style={{ color: theme.textPrimary }}>\r\n                Stratum AI\r\n              </span>\r\n            </div>\r\n            <div\r\n              className=\"w-12 h-12 rounded-full mx-auto mb-6 animate-spin\"\r\n              style={{\r\n                border: `3px solid ${theme.blueLight}`,\r\n                borderTopColor: theme.blue,\r\n              }}\r\n            />\r\n            <h1 className=\"text-xl font-semibold mb-2\" style={{ color: theme.textPrimary }}>\r\n              Verifying your email\r\n            </h1>\r\n            <p style={{ color: theme.textMuted }}>Please wait...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Success\r\n  if (isSuccess) {\r\n    return (\r\n      <div\r\n        className=\"min-h-screen flex items-center justify-center p-6\"\r\n        style={{ background: theme.bgElevated }}\r\n      >\r\n        <div className=\"max-w-md w-full text-center\">\r\n          <div\r\n            className=\"p-8 rounded-2xl\"\r\n            style={{\r\n              background: theme.bgSurface,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',\r\n            }}\r\n          >\r\n            <div\r\n              className=\"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6\"\r\n              style={{ background: `${theme.success}15` }}\r\n            >\r\n              <CheckCircleIcon className=\"w-8 h-8\" style={{ color: theme.success }} />\r\n            </div>\r\n            <h1 className=\"text-2xl font-semibold mb-3\" style={{ color: theme.textPrimary }}>\r\n              Email verified!\r\n            </h1>\r\n            <p className=\"mb-6\" style={{ color: theme.textMuted }}>\r\n              Your email has been verified. You can now sign in.\r\n            </p>\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"block w-full py-3 rounded-xl text-white font-semibold text-center transition-all duration-200\"\r\n              style={{ background: theme.blue }}\r\n              onMouseEnter={(e) => (e.currentTarget.style.background = theme.blueHover)}\r\n              onMouseLeave={(e) => (e.currentTarget.style.background = theme.blue)}\r\n            >\r\n              Sign in to your account\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error\r\n  return (\r\n    <div\r\n      className=\"min-h-screen flex items-center justify-center p-6\"\r\n      style={{ background: theme.bgElevated }}\r\n    >\r\n      <div className=\"max-w-md w-full text-center\">\r\n        <div\r\n          className=\"p-8 rounded-2xl\"\r\n          style={{\r\n            background: theme.bgSurface,\r\n            border: `1px solid ${theme.border}`,\r\n            boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',\r\n          }}\r\n        >\r\n          <div\r\n            className=\"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6\"\r\n            style={{ background: '#FEF2F2' }}\r\n          >\r\n            <ExclamationTriangleIcon className=\"w-8 h-8\" style={{ color: theme.danger }} />\r\n          </div>\r\n          <h1 className=\"text-2xl font-semibold mb-3\" style={{ color: theme.textPrimary }}>\r\n            Verification failed\r\n          </h1>\r\n          <p className=\"mb-6\" style={{ color: theme.textMuted }}>\r\n            {error || 'The verification link is invalid or has expired.'}\r\n          </p>\r\n\r\n          {!resendSuccess ? (\r\n            <div className=\"space-y-4\">\r\n              <p className=\"text-sm\" style={{ color: theme.textMuted }}>\r\n                Enter your email to get a new link:\r\n              </p>\r\n              <div className=\"relative\">\r\n                <EnvelopeIcon\r\n                  className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5\"\r\n                  style={{ color: theme.textMuted }}\r\n                />\r\n                <input\r\n                  type=\"email\"\r\n                  value={resendEmail}\r\n                  onChange={(e) => setResendEmail(e.target.value)}\r\n                  placeholder=\"name@company.com\"\r\n                  className=\"w-full pl-12 pr-4 py-3 rounded-xl outline-none transition-all duration-200\"\r\n                  style={{\r\n                    background: theme.bgElevated,\r\n                    border: `1px solid ${theme.border}`,\r\n                    color: theme.textPrimary,\r\n                  }}\r\n                  onFocus={(e) => {\r\n                    e.target.style.borderColor = theme.blue;\r\n                    e.target.style.boxShadow = `0 0 0 3px ${theme.blueLight}`;\r\n                  }}\r\n                  onBlur={(e) => {\r\n                    e.target.style.borderColor = theme.border;\r\n                    e.target.style.boxShadow = 'none';\r\n                  }}\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleResend}\r\n                disabled={!resendEmail || resendMutation.isPending}\r\n                className=\"w-full py-3 rounded-xl text-white font-semibold disabled:opacity-50 transition-all duration-200\"\r\n                style={{ background: theme.blue }}\r\n                onMouseEnter={(e) => {\r\n                  if (!resendMutation.isPending) e.currentTarget.style.background = theme.blueHover;\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.background = theme.blue;\r\n                }}\r\n              >\r\n                {resendMutation.isPending ? 'Sending...' : 'Resend verification email'}\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-4 rounded-xl\" style={{ background: `${theme.success}15` }}>\r\n              <CheckCircleIcon className=\"w-6 h-6 mx-auto mb-2\" style={{ color: theme.success }} />\r\n              <p style={{ color: theme.success }}>Verification email sent!</p>\r\n            </div>\r\n          )}\r\n\r\n          <Link\r\n            to=\"/login\"\r\n            className=\"inline-block mt-6 text-sm font-medium transition-colors hover:underline\"\r\n            style={{ color: theme.blue }}\r\n          >\r\n            Back to login\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["theme","VerifyEmail","searchParams","useSearchParams","token","emailParam","resendEmail","setResendEmail","useState","resendSuccess","setResendSuccess","verifyMutation","useVerifyEmail","resendMutation","useResendVerification","isLoading","isSuccess","error","_a","handleResend","useEffect","jsx","jsxs","CheckCircleIcon","Link","e","ExclamationTriangleIcon","EnvelopeIcon"],"mappings":"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"}