import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as x}from"./vendor-react-Dz7uKsMg.js";import{S as h,c as g,x as j,$ as C,U as k}from"./index-BQex3859.js";import{u as N}from"./vendor-query-BPt-n81V.js";import{R as M}from"./refresh-cw-DLOeozaH.js";import{D as A}from"./download-BBUAq3KN.js";import{C as f}from"./circle-check-big-CIbPdEH4.js";import{F as E}from"./funnel-BvijHT_k.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-motion-CR45sdSp.js";const o=[{value:"analytics",label:"Analytics",description:"Website analytics and tracking"},{value:"ads",label:"Advertising",description:"Personalized advertising"},{value:"email",label:"Email Marketing",description:"Marketing emails"},{value:"sms",label:"SMS Marketing",description:"Marketing text messages"}];function T(a){return N({queryKey:["cdp-consent-stats",a],queryFn:async()=>o.map(n=>({consent_type:n.value,total_profiles:Math.floor(Math.random()*1e4)+1e3,granted:Math.floor(Math.random()*8e3)+500,revoked:Math.floor(Math.random()*2e3)+100,grant_rate:Math.random()*40+50})),staleTime:60*1e3})}function D(a,r){return N({queryKey:["cdp-consent-profiles",a,r],queryFn:async()=>({profiles:Array.from({length:20},(p,l)=>({profile_id:`profile-${l+1}`,email:`user${l+1}@example.com`,consent_type:r.consent_type||o[l%4].value,granted:r.granted!==void 0?r.granted:Math.random()>.3,granted_at:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),source:["web_form","api","import","preference_center"][l%4]})),total:150}),staleTime:30*1e3})}function P(){const[a,r]=x.useState(void 0),[n,p]=x.useState(void 0),[l,v]=x.useState(""),u=1,{data:i,isLoading:y,refetch:b}=T(u),{data:d,isLoading:w}=D(u,{consent_type:a,granted:n}),m=(d==null?void 0:d.profiles)||[],_=async s=>{console.log("Exporting consent data for:","all"),alert("Export started. Check your email for the download link.")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(h,{className:"w-6 h-6 text-primary"}),"Consent Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"GDPR/CCPA compliant consent tracking and management"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b(),className:"px-3 py-2 rounded-lg border hover:bg-muted transition-colors",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>_(),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Export All"]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:y?Array.from({length:4}).map((s,t)=>e.jsxs("div",{className:"p-4 rounded-xl border bg-card animate-pulse",children:[e.jsx("div",{className:"h-4 w-24 bg-muted rounded mb-2"}),e.jsx("div",{className:"h-8 w-16 bg-muted rounded"})]},t)):i==null?void 0:i.map(s=>{const t=o.find(c=>c.value===s.consent_type);return e.jsxs("div",{className:g("p-4 rounded-xl border bg-card cursor-pointer hover:border-primary/50 transition-colors",a===s.consent_type&&"border-primary"),onClick:()=>r(a===s.consent_type?void 0:s.consent_type),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:(t==null?void 0:t.label)||s.consent_type}),e.jsxs("span",{className:g("text-xs px-2 py-0.5 rounded-full",s.grant_rate>=70?"bg-green-500/10 text-green-600":s.grant_rate>=50?"bg-yellow-500/10 text-yellow-600":"bg-red-500/10 text-red-600"),children:[s.grant_rate.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-2xl font-bold",children:s.granted.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["of ",s.total_profiles.toLocaleString()," profiles"]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(f,{className:"w-3 h-3"}),s.granted]}),e.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(j,{className:"w-3 h-3"}),s.revoked]})]})]},s.consent_type)})}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl border bg-card",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",value:l,onChange:s=>v(s.target.value),placeholder:"Search by email or profile ID...",className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("select",{value:a||"",onChange:s=>r(s.target.value||void 0),className:"px-3 py-2 rounded-lg border bg-background",children:[e.jsx("option",{value:"",children:"All Types"}),o.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsxs("select",{value:n===void 0?"":n.toString(),onChange:s=>p(s.target.value===""?void 0:s.target.value==="true"),className:"px-3 py-2 rounded-lg border bg-background",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"true",children:"Granted"}),e.jsx("option",{value:"false",children:"Revoked"})]})]})]}),e.jsxs("div",{className:"rounded-xl border bg-card overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Profile"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Consent Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Source"})]})}),e.jsx("tbody",{className:"divide-y",children:w?Array.from({length:5}).map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 w-20 bg-muted rounded animate-pulse"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 w-16 bg-muted rounded animate-pulse"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 w-24 bg-muted rounded animate-pulse"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 w-16 bg-muted rounded animate-pulse"})})]},t)):m.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-4 py-12 text-center text-muted-foreground",children:[e.jsx(k,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"No consent records found."]})}):m.map(s=>{var c;const t=o.find(S=>S.value===s.consent_type);return e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.email||"Anonymous"}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:s.profile_id})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-muted",children:(t==null?void 0:t.label)||s.consent_type})}),e.jsx("td",{className:"px-4 py-3",children:s.granted?e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(f,{className:"w-4 h-4"}),"Granted"]}):e.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(j,{className:"w-4 h-4"}),"Revoked"]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:s.granted_at?new Date(s.granted_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:((c=s.source)==null?void 0:c.replace("_"," "))||"-"})})]},`${s.profile_id}-${s.consent_type}`)})})]})}),e.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",m.length," of ",(d==null?void 0:d.total)||0," records"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 rounded border hover:bg-muted text-sm",disabled:!0,children:"Previous"}),e.jsx("button",{className:"px-3 py-1 rounded border hover:bg-muted text-sm",children:"Next"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-muted/50",children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"Compliance Information"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Data Retention:"}),e.jsx("span",{className:"ml-2 font-medium",children:"365 days"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Audit Trail:"}),e.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"Enabled"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Auto-Expiry:"}),e.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"Enabled (24 months)"})]})]})]})]})}function U(){return e.jsx("div",{className:"p-6",children:e.jsx(P,{})})}export{U as default};
//# sourceMappingURL=CDPConsent-BBh65xFd.js.map
