{"version":3,"file":"CampaignBuilder-B245eh0D.js","sources":["../../src/views/tenant/CampaignBuilder.tsx"],"sourcesContent":["/**\r\n * Stratum AI - Campaign Builder Wizard\r\n *\r\n * Multi-step wizard for creating and editing campaign drafts.\r\n * Supports Meta, Google, TikTok, and Snapchat platforms.\r\n */\r\n\r\nimport { useCallback, useMemo, useRef, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n  CheckIcon,\r\n  ChevronLeftIcon,\r\n  ChevronRightIcon,\r\n  CloudArrowUpIcon,\r\n  ExclamationTriangleIcon,\r\n  PhotoIcon,\r\n  SparklesIcon,\r\n  VideoCameraIcon,\r\n  XMarkIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  useAdAccounts,\r\n  useCampaignDraft,\r\n  useCreateCampaignDraft,\r\n  useSubmitDraft,\r\n} from '@/api/campaignBuilder';\r\n\r\ntype Platform = 'meta' | 'google' | 'tiktok' | 'snapchat';\r\ntype BudgetType = 'daily' | 'lifetime';\r\ntype Objective = 'sales' | 'leads' | 'traffic' | 'awareness' | 'engagement';\r\ntype AssetType = 'image' | 'video' | 'carousel';\r\n\r\ninterface CreativeAsset {\r\n  id: string;\r\n  file: File;\r\n  name: string;\r\n  type: AssetType;\r\n  preview: string;\r\n  size: number;\r\n  status: 'uploading' | 'ready' | 'error';\r\n  headline?: string;\r\n  description?: string;\r\n  callToAction?: string;\r\n}\r\n\r\ninterface CampaignDraft {\r\n  platform: Platform | null;\r\n  adAccountId: string;\r\n  name: string;\r\n  objective: Objective | null;\r\n  budget: {\r\n    type: BudgetType;\r\n    amount: number;\r\n    currency: string;\r\n  };\r\n  schedule: {\r\n    start: string;\r\n    end: string | null;\r\n  };\r\n  targeting: {\r\n    locations: string[];\r\n    ageMin: number;\r\n    ageMax: number;\r\n    genders: string[];\r\n  };\r\n  creatives: CreativeAsset[];\r\n}\r\n\r\nconst steps = [\r\n  { id: 'platform', name: 'Platform & Account' },\r\n  { id: 'basics', name: 'Campaign Basics' },\r\n  { id: 'budget', name: 'Budget & Schedule' },\r\n  { id: 'targeting', name: 'Targeting' },\r\n  { id: 'creatives', name: 'Ad Creatives' },\r\n  { id: 'review', name: 'Review & Submit' },\r\n];\r\n\r\nconst callToActionOptions = [\r\n  { value: 'shop_now', label: 'Shop Now' },\r\n  { value: 'learn_more', label: 'Learn More' },\r\n  { value: 'sign_up', label: 'Sign Up' },\r\n  { value: 'contact_us', label: 'Contact Us' },\r\n  { value: 'get_offer', label: 'Get Offer' },\r\n  { value: 'download', label: 'Download' },\r\n  { value: 'book_now', label: 'Book Now' },\r\n];\r\n\r\nconst ACCEPTED_IMAGE_TYPES = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\nconst ACCEPTED_VIDEO_TYPES = ['video/mp4', 'video/quicktime', 'video/webm'];\r\nconst MAX_FILE_SIZE = 100 * 1024 * 1024; // 100MB\r\n\r\nconst objectives: { value: Objective; label: string; description: string }[] = [\r\n  { value: 'sales', label: 'Sales', description: 'Drive purchases and conversions' },\r\n  { value: 'leads', label: 'Leads', description: 'Generate leads and signups' },\r\n  { value: 'traffic', label: 'Traffic', description: 'Send people to your website' },\r\n  { value: 'awareness', label: 'Awareness', description: 'Reach new audiences' },\r\n  { value: 'engagement', label: 'Engagement', description: 'Get more interactions' },\r\n];\r\n\r\nconst mockAdAccounts = [\r\n  { id: 'act_123', name: 'Main Business Account', platform: 'meta' as Platform },\r\n  { id: 'act_456', name: 'E-commerce Store', platform: 'meta' as Platform },\r\n  { id: 'gads_789', name: 'Company Google Ads', platform: 'google' as Platform },\r\n];\r\n\r\nexport default function CampaignBuilder() {\r\n  const { tenantId, draftId } = useParams<{ tenantId: string; draftId?: string }>();\r\n  const tid = parseInt(tenantId || '1', 10);\r\n  const navigate = useNavigate();\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [draft, setDraft] = useState<CampaignDraft>({\r\n    platform: null,\r\n    adAccountId: '',\r\n    name: '',\r\n    objective: null,\r\n    budget: {\r\n      type: 'daily',\r\n      amount: 100,\r\n      currency: 'SAR',\r\n    },\r\n    schedule: {\r\n      start: new Date().toISOString().split('T')[0],\r\n      end: null,\r\n    },\r\n    targeting: {\r\n      locations: [],\r\n      ageMin: 18,\r\n      ageMax: 65,\r\n      genders: ['all'],\r\n    },\r\n    creatives: [],\r\n  });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [editingAsset, setEditingAsset] = useState<string | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const isEditing = !!draftId;\r\n\r\n  // API hooks for ad accounts per platform\r\n  const { data: metaAccounts } = useAdAccounts(tid, 'meta', true);\r\n  const { data: googleAccounts } = useAdAccounts(tid, 'google', true);\r\n  const { data: tiktokAccounts } = useAdAccounts(tid, 'tiktok', true);\r\n  const { data: snapchatAccounts } = useAdAccounts(tid, 'snapchat', true);\r\n\r\n  // API mutation hooks\r\n  const createDraft = useCreateCampaignDraft(tid);\r\n  const submitDraft = useSubmitDraft(tid);\r\n  useCampaignDraft(tid, draftId || ''); // Prefetch existing draft\r\n\r\n  // Combine ad accounts with fallback to mock\r\n  const adAccounts = useMemo(() => {\r\n    const apiAccounts = [\r\n      ...(metaAccounts || []).map((acc) => ({\r\n        id: acc.id,\r\n        name: acc.name,\r\n        platform: 'meta' as Platform,\r\n      })),\r\n      ...(googleAccounts || []).map((acc) => ({\r\n        id: acc.id,\r\n        name: acc.name,\r\n        platform: 'google' as Platform,\r\n      })),\r\n      ...(tiktokAccounts || []).map((acc) => ({\r\n        id: acc.id,\r\n        name: acc.name,\r\n        platform: 'tiktok' as Platform,\r\n      })),\r\n      ...(snapchatAccounts || []).map((acc) => ({\r\n        id: acc.id,\r\n        name: acc.name,\r\n        platform: 'snapchat' as Platform,\r\n      })),\r\n    ];\r\n    return apiAccounts.length > 0 ? apiAccounts : mockAdAccounts;\r\n  }, [metaAccounts, googleAccounts, tiktokAccounts, snapchatAccounts]);\r\n\r\n  const updateDraft = <K extends keyof CampaignDraft>(field: K, value: CampaignDraft[K]) => {\r\n    setDraft((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  // File upload handlers\r\n  const getAssetType = (file: File): AssetType => {\r\n    if (ACCEPTED_VIDEO_TYPES.includes(file.type)) return 'video';\r\n    return 'image';\r\n  };\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    if (bytes < 1024) return `${bytes} B`;\r\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\r\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\r\n  };\r\n\r\n  const processFiles = useCallback((files: FileList | File[]) => {\r\n    const fileArray = Array.from(files);\r\n    const validFiles = fileArray.filter((file) => {\r\n      const isValidType = [...ACCEPTED_IMAGE_TYPES, ...ACCEPTED_VIDEO_TYPES].includes(file.type);\r\n      const isValidSize = file.size <= MAX_FILE_SIZE;\r\n      return isValidType && isValidSize;\r\n    });\r\n\r\n    const newAssets: CreativeAsset[] = validFiles.map((file) => ({\r\n      id: `asset_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      file,\r\n      name: file.name,\r\n      type: getAssetType(file),\r\n      preview: URL.createObjectURL(file),\r\n      size: file.size,\r\n      status: 'ready' as const,\r\n      headline: '',\r\n      description: '',\r\n      callToAction: 'learn_more',\r\n    }));\r\n\r\n    setDraft((prev) => ({\r\n      ...prev,\r\n      creatives: [...prev.creatives, ...newAssets],\r\n    }));\r\n  }, []);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback(\r\n    (e: React.DragEvent) => {\r\n      e.preventDefault();\r\n      setIsDragging(false);\r\n      if (e.dataTransfer.files.length) {\r\n        processFiles(e.dataTransfer.files);\r\n      }\r\n    },\r\n    [processFiles]\r\n  );\r\n\r\n  const handleFileSelect = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (e.target.files?.length) {\r\n        processFiles(e.target.files);\r\n      }\r\n      // Reset input value to allow selecting the same file again\r\n      e.target.value = '';\r\n    },\r\n    [processFiles]\r\n  );\r\n\r\n  const removeAsset = useCallback((id: string) => {\r\n    setDraft((prev) => {\r\n      const asset = prev.creatives.find((a) => a.id === id);\r\n      if (asset) {\r\n        URL.revokeObjectURL(asset.preview);\r\n      }\r\n      return {\r\n        ...prev,\r\n        creatives: prev.creatives.filter((a) => a.id !== id),\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const updateAsset = useCallback((id: string, updates: Partial<CreativeAsset>) => {\r\n    setDraft((prev) => ({\r\n      ...prev,\r\n      creatives: prev.creatives.map((asset) =>\r\n        asset.id === id ? { ...asset, ...updates } : asset\r\n      ),\r\n    }));\r\n  }, []);\r\n\r\n  const handleNext = () => {\r\n    if (currentStep < steps.length - 1) {\r\n      setCurrentStep(currentStep + 1);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep(currentStep - 1);\r\n    }\r\n  };\r\n\r\n  const handleSaveDraft = async () => {\r\n    try {\r\n      await createDraft.mutateAsync({\r\n        platform: draft.platform || 'meta',\r\n        ad_account_id: draft.adAccountId,\r\n        name: draft.name,\r\n        description: `${draft.objective} campaign`,\r\n        draft_json: {\r\n          objective: draft.objective,\r\n          budget: draft.budget,\r\n          schedule: draft.schedule,\r\n          targeting: draft.targeting,\r\n          creatives: draft.creatives.map((c) => ({\r\n            id: c.id,\r\n            name: c.name,\r\n            type: c.type,\r\n            headline: c.headline,\r\n            description: c.description,\r\n            callToAction: c.callToAction,\r\n          })),\r\n        },\r\n      });\r\n      alert('Draft saved!');\r\n      navigate(`/app/${tenantId}/campaigns/drafts`);\r\n    } catch (error) {\r\n      console.error('Failed to save draft:', error);\r\n      // Fallback for demo mode\r\n      alert('Draft saved (demo mode)!');\r\n      navigate(`/app/${tenantId}/campaigns/drafts`);\r\n    }\r\n  };\r\n\r\n  const handleSubmitForApproval = async () => {\r\n    try {\r\n      if (draftId) {\r\n        await submitDraft.mutateAsync(draftId);\r\n        alert('Submitted for approval!');\r\n      } else {\r\n        // Save first then submit\r\n        const newDraft = await createDraft.mutateAsync({\r\n          platform: draft.platform || 'meta',\r\n          ad_account_id: draft.adAccountId,\r\n          name: draft.name,\r\n          description: `${draft.objective} campaign`,\r\n          draft_json: {\r\n            objective: draft.objective,\r\n            budget: draft.budget,\r\n            schedule: draft.schedule,\r\n            targeting: draft.targeting,\r\n            creatives: draft.creatives.map((c) => ({\r\n              id: c.id,\r\n              name: c.name,\r\n              type: c.type,\r\n              headline: c.headline,\r\n              description: c.description,\r\n              callToAction: c.callToAction,\r\n            })),\r\n          },\r\n        });\r\n        await submitDraft.mutateAsync(newDraft.id);\r\n        alert('Submitted for approval!');\r\n      }\r\n      navigate(`/app/${tenantId}/campaigns/drafts`);\r\n    } catch (error) {\r\n      console.error('Failed to submit:', error);\r\n      // Fallback for demo mode\r\n      alert('Submitted for approval (demo mode)!');\r\n      navigate(`/app/${tenantId}/campaigns/drafts`);\r\n    }\r\n  };\r\n\r\n  const renderStepContent = () => {\r\n    switch (steps[currentStep].id) {\r\n      case 'platform':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold mb-4\">Select Platform</h3>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                {(['meta', 'google', 'tiktok', 'snapchat'] as Platform[]).map((p) => (\r\n                  <button\r\n                    key={p}\r\n                    onClick={() => updateDraft('platform', p)}\r\n                    className={cn(\r\n                      'p-4 rounded-xl border-2 transition-all text-center',\r\n                      draft.platform === p\r\n                        ? 'border-primary bg-primary/5'\r\n                        : 'border-border hover:border-primary/50'\r\n                    )}\r\n                  >\r\n                    <div className=\"h-12 w-12 mx-auto rounded-lg bg-muted flex items-center justify-center mb-2\">\r\n                      <span className=\"text-xl font-bold\">{p.charAt(0).toUpperCase()}</span>\r\n                    </div>\r\n                    <span className=\"font-medium capitalize\">{p}</span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {draft.platform && (\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold mb-4\">Select Ad Account</h3>\r\n                <div className=\"space-y-2\">\r\n                  {adAccounts\r\n                    .filter((acc) => acc.platform === draft.platform)\r\n                    .map((acc) => (\r\n                      <button\r\n                        key={acc.id}\r\n                        onClick={() => updateDraft('adAccountId', acc.id)}\r\n                        className={cn(\r\n                          'w-full p-4 rounded-lg border-2 text-left transition-all',\r\n                          draft.adAccountId === acc.id\r\n                            ? 'border-primary bg-primary/5'\r\n                            : 'border-border hover:border-primary/50'\r\n                        )}\r\n                      >\r\n                        <p className=\"font-medium\">{acc.name}</p>\r\n                        <p className=\"text-sm text-muted-foreground\">{acc.id}</p>\r\n                      </button>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'basics':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Campaign Name</label>\r\n              <input\r\n                type=\"text\"\r\n                value={draft.name}\r\n                onChange={(e) => updateDraft('name', e.target.value)}\r\n                placeholder=\"Enter campaign name...\"\r\n                className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-4\">Campaign Objective</label>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {objectives.map((obj) => (\r\n                  <button\r\n                    key={obj.value}\r\n                    onClick={() => updateDraft('objective', obj.value)}\r\n                    className={cn(\r\n                      'p-4 rounded-lg border-2 text-left transition-all',\r\n                      draft.objective === obj.value\r\n                        ? 'border-primary bg-primary/5'\r\n                        : 'border-border hover:border-primary/50'\r\n                    )}\r\n                  >\r\n                    <p className=\"font-medium\">{obj.label}</p>\r\n                    <p className=\"text-sm text-muted-foreground\">{obj.description}</p>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'budget':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-4\">Budget Type</label>\r\n              <div className=\"flex gap-4\">\r\n                {(['daily', 'lifetime'] as BudgetType[]).map((type) => (\r\n                  <button\r\n                    key={type}\r\n                    onClick={() => updateDraft('budget', { ...draft.budget, type })}\r\n                    className={cn(\r\n                      'flex-1 p-4 rounded-lg border-2 transition-all',\r\n                      draft.budget.type === type\r\n                        ? 'border-primary bg-primary/5'\r\n                        : 'border-border hover:border-primary/50'\r\n                    )}\r\n                  >\r\n                    <p className=\"font-medium capitalize\">{type} Budget</p>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">\r\n                {draft.budget.type === 'daily' ? 'Daily Budget' : 'Total Budget'} (\r\n                {draft.budget.currency})\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={draft.budget.amount}\r\n                onChange={(e) =>\r\n                  updateDraft('budget', { ...draft.budget, amount: Number(e.target.value) })\r\n                }\r\n                min={1}\r\n                className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Start Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={draft.schedule.start}\r\n                  onChange={(e) =>\r\n                    updateDraft('schedule', { ...draft.schedule, start: e.target.value })\r\n                  }\r\n                  className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">End Date (Optional)</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={draft.schedule.end || ''}\r\n                  onChange={(e) =>\r\n                    updateDraft('schedule', { ...draft.schedule, end: e.target.value || null })\r\n                  }\r\n                  className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Budget guardrail warning */}\r\n            {draft.budget.amount > 1000 && (\r\n              <div className=\"flex items-start gap-3 p-4 rounded-lg bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800\">\r\n                <ExclamationTriangleIcon className=\"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5\" />\r\n                <div>\r\n                  <p className=\"font-medium text-amber-800 dark:text-amber-200\">Budget Guardrail</p>\r\n                  <p className=\"text-sm text-amber-700 dark:text-amber-300\">\r\n                    This campaign requires approval for budgets over SAR 1,000/day\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'targeting':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Target Locations</label>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"e.g., Saudi Arabia, UAE, Egypt...\"\r\n                className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n              />\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                Separate multiple locations with commas\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Minimum Age</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={draft.targeting.ageMin}\r\n                  onChange={(e) =>\r\n                    updateDraft('targeting', { ...draft.targeting, ageMin: Number(e.target.value) })\r\n                  }\r\n                  min={13}\r\n                  max={65}\r\n                  className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Maximum Age</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={draft.targeting.ageMax}\r\n                  onChange={(e) =>\r\n                    updateDraft('targeting', { ...draft.targeting, ageMax: Number(e.target.value) })\r\n                  }\r\n                  min={13}\r\n                  max={65}\r\n                  className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-4\">Gender Targeting</label>\r\n              <div className=\"flex gap-4\">\r\n                {[\r\n                  { value: 'all', label: 'All' },\r\n                  { value: 'male', label: 'Male' },\r\n                  { value: 'female', label: 'Female' },\r\n                ].map((gender) => (\r\n                  <button\r\n                    key={gender.value}\r\n                    onClick={() =>\r\n                      updateDraft('targeting', { ...draft.targeting, genders: [gender.value] })\r\n                    }\r\n                    className={cn(\r\n                      'px-4 py-2 rounded-lg border-2 transition-all',\r\n                      draft.targeting.genders.includes(gender.value)\r\n                        ? 'border-primary bg-primary/5'\r\n                        : 'border-border hover:border-primary/50'\r\n                    )}\r\n                  >\r\n                    {gender.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'creatives':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold mb-2\">Upload Ad Creatives</h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Upload images or videos for your ad. Supported formats: JPEG, PNG, GIF, WebP, MP4,\r\n                WebM.\r\n              </p>\r\n\r\n              {/* Drag & Drop Zone */}\r\n              <div\r\n                onDragOver={handleDragOver}\r\n                onDragLeave={handleDragLeave}\r\n                onDrop={handleDrop}\r\n                onClick={() => fileInputRef.current?.click()}\r\n                className={cn(\r\n                  'border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all',\r\n                  isDragging\r\n                    ? 'border-primary bg-primary/5'\r\n                    : 'border-border hover:border-primary/50 hover:bg-muted/50'\r\n                )}\r\n              >\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept={[...ACCEPTED_IMAGE_TYPES, ...ACCEPTED_VIDEO_TYPES].join(',')}\r\n                  onChange={handleFileSelect}\r\n                  className=\"hidden\"\r\n                />\r\n                <CloudArrowUpIcon className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n                <p className=\"font-medium\">Drag and drop files here</p>\r\n                <p className=\"text-sm text-muted-foreground mt-1\">or click to browse</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">Max file size: 100MB</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Uploaded Assets */}\r\n            {draft.creatives.length > 0 && (\r\n              <div>\r\n                <h4 className=\"font-medium mb-3\">Uploaded Assets ({draft.creatives.length})</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  {draft.creatives.map((asset) => (\r\n                    <div key={asset.id} className=\"rounded-xl border bg-card overflow-hidden\">\r\n                      {/* Asset Preview */}\r\n                      <div className=\"relative aspect-video bg-muted\">\r\n                        {asset.type === 'video' ? (\r\n                          <video\r\n                            src={asset.preview}\r\n                            className=\"w-full h-full object-cover\"\r\n                            controls\r\n                          />\r\n                        ) : (\r\n                          <img\r\n                            src={asset.preview}\r\n                            alt={asset.name}\r\n                            className=\"w-full h-full object-cover\"\r\n                          />\r\n                        )}\r\n                        <button\r\n                          onClick={() => removeAsset(asset.id)}\r\n                          className=\"absolute top-2 right-2 p-1.5 rounded-full bg-black/60 text-white hover:bg-black/80 transition-colors\"\r\n                        >\r\n                          <XMarkIcon className=\"h-4 w-4\" />\r\n                        </button>\r\n                        <div className=\"absolute bottom-2 left-2 flex items-center gap-1.5\">\r\n                          <span className=\"px-2 py-0.5 rounded-full bg-black/60 text-white text-xs flex items-center gap-1\">\r\n                            {asset.type === 'video' ? (\r\n                              <VideoCameraIcon className=\"h-3 w-3\" />\r\n                            ) : (\r\n                              <PhotoIcon className=\"h-3 w-3\" />\r\n                            )}\r\n                            {asset.type}\r\n                          </span>\r\n                          <span className=\"px-2 py-0.5 rounded-full bg-black/60 text-white text-xs\">\r\n                            {formatFileSize(asset.size)}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Asset Details */}\r\n                      <div className=\"p-4 space-y-3\">\r\n                        <p className=\"text-sm font-medium truncate\" title={asset.name}>\r\n                          {asset.name}\r\n                        </p>\r\n\r\n                        {editingAsset === asset.id ? (\r\n                          <div className=\"space-y-3\">\r\n                            <div>\r\n                              <label className=\"block text-xs font-medium mb-1\">Headline</label>\r\n                              <input\r\n                                type=\"text\"\r\n                                value={asset.headline || ''}\r\n                                onChange={(e) =>\r\n                                  updateAsset(asset.id, { headline: e.target.value })\r\n                                }\r\n                                placeholder=\"Enter headline...\"\r\n                                maxLength={40}\r\n                                className=\"w-full px-3 py-1.5 text-sm rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                              />\r\n                              <p className=\"text-xs text-muted-foreground mt-0.5\">\r\n                                {(asset.headline || '').length}/40 characters\r\n                              </p>\r\n                            </div>\r\n                            <div>\r\n                              <label className=\"block text-xs font-medium mb-1\">Description</label>\r\n                              <textarea\r\n                                value={asset.description || ''}\r\n                                onChange={(e) =>\r\n                                  updateAsset(asset.id, { description: e.target.value })\r\n                                }\r\n                                placeholder=\"Enter description...\"\r\n                                maxLength={125}\r\n                                rows={2}\r\n                                className=\"w-full px-3 py-1.5 text-sm rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none\"\r\n                              />\r\n                              <p className=\"text-xs text-muted-foreground mt-0.5\">\r\n                                {(asset.description || '').length}/125 characters\r\n                              </p>\r\n                            </div>\r\n                            <div>\r\n                              <label className=\"block text-xs font-medium mb-1\">\r\n                                Call to Action\r\n                              </label>\r\n                              <select\r\n                                value={asset.callToAction || 'learn_more'}\r\n                                onChange={(e) =>\r\n                                  updateAsset(asset.id, { callToAction: e.target.value })\r\n                                }\r\n                                className=\"w-full px-3 py-1.5 text-sm rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                              >\r\n                                {callToActionOptions.map((cta) => (\r\n                                  <option key={cta.value} value={cta.value}>\r\n                                    {cta.label}\r\n                                  </option>\r\n                                ))}\r\n                              </select>\r\n                            </div>\r\n                            <button\r\n                              onClick={() => setEditingAsset(null)}\r\n                              className=\"w-full py-1.5 text-sm font-medium rounded-lg bg-primary text-primary-foreground hover:opacity-90\"\r\n                            >\r\n                              Done\r\n                            </button>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"space-y-2\">\r\n                            {asset.headline && (\r\n                              <p className=\"text-sm text-muted-foreground\">\r\n                                <span className=\"font-medium\">Headline:</span> {asset.headline}\r\n                              </p>\r\n                            )}\r\n                            {asset.callToAction && (\r\n                              <p className=\"text-xs text-muted-foreground\">\r\n                                CTA:{' '}\r\n                                {callToActionOptions.find((c) => c.value === asset.callToAction)\r\n                                  ?.label || asset.callToAction}\r\n                              </p>\r\n                            )}\r\n                            <button\r\n                              onClick={() => setEditingAsset(asset.id)}\r\n                              className=\"text-xs text-primary hover:underline\"\r\n                            >\r\n                              Edit ad copy\r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Platform-specific Tips */}\r\n            <div className=\"rounded-lg border bg-muted/30 p-4\">\r\n              <h4 className=\"font-medium mb-2 flex items-center gap-2\">\r\n                <SparklesIcon className=\"h-4 w-4 text-primary\" />\r\n                Platform Recommendations for{' '}\r\n                {draft.platform\r\n                  ? draft.platform.charAt(0).toUpperCase() + draft.platform.slice(1)\r\n                  : 'Ads'}\r\n              </h4>\r\n              <ul className=\"text-sm text-muted-foreground space-y-1\">\r\n                {draft.platform === 'meta' && (\r\n                  <>\r\n                    <li>- Image: 1080x1080px (1:1) or 1200x628px (1.91:1)</li>\r\n                    <li>- Video: 15-60 seconds, vertical (9:16) performs best</li>\r\n                    <li>- Keep text overlay under 20% of image area</li>\r\n                  </>\r\n                )}\r\n                {draft.platform === 'google' && (\r\n                  <>\r\n                    <li>- Responsive display: 1200x628px, 300x250px, 728x90px</li>\r\n                    <li>- Video: 15-30 seconds, horizontal (16:9)</li>\r\n                    <li>- Include clear branding and call-to-action</li>\r\n                  </>\r\n                )}\r\n                {draft.platform === 'tiktok' && (\r\n                  <>\r\n                    <li>- Video: 9:16 aspect ratio, 9-15 seconds optimal</li>\r\n                    <li>- Use native-looking content for better engagement</li>\r\n                    <li>- Add captions as 80% of users watch without sound</li>\r\n                  </>\r\n                )}\r\n                {draft.platform === 'snapchat' && (\r\n                  <>\r\n                    <li>- Full screen vertical: 1080x1920px (9:16)</li>\r\n                    <li>- Video: 3-10 seconds for Story Ads</li>\r\n                    <li>- Keep branding subtle and authentic</li>\r\n                  </>\r\n                )}\r\n                {!draft.platform && <li>- Select a platform to see specific recommendations</li>}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'review':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"rounded-xl border bg-card p-6\">\r\n              <h3 className=\"text-lg font-semibold mb-4\">Campaign Summary</h3>\r\n              <dl className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <dt className=\"text-sm text-muted-foreground\">Platform</dt>\r\n                  <dd className=\"font-medium capitalize\">{draft.platform || 'Not selected'}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm text-muted-foreground\">Ad Account</dt>\r\n                  <dd className=\"font-medium\">{draft.adAccountId || 'Not selected'}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm text-muted-foreground\">Campaign Name</dt>\r\n                  <dd className=\"font-medium\">{draft.name || 'Not set'}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm text-muted-foreground\">Objective</dt>\r\n                  <dd className=\"font-medium capitalize\">{draft.objective || 'Not selected'}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm text-muted-foreground\">Budget</dt>\r\n                  <dd className=\"font-medium\">\r\n                    {draft.budget.currency} {draft.budget.amount} / {draft.budget.type}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm text-muted-foreground\">Schedule</dt>\r\n                  <dd className=\"font-medium\">\r\n                    {draft.schedule.start} - {draft.schedule.end || 'Ongoing'}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm text-muted-foreground\">Ad Creatives</dt>\r\n                  <dd className=\"font-medium\">\r\n                    {draft.creatives.length} asset{draft.creatives.length !== 1 ? 's' : ''} uploaded\r\n                  </dd>\r\n                </div>\r\n              </dl>\r\n            </div>\r\n\r\n            {/* Creative Assets Preview */}\r\n            {draft.creatives.length > 0 && (\r\n              <div className=\"rounded-xl border bg-card p-6\">\r\n                <h3 className=\"text-lg font-semibold mb-4\">Ad Creatives Preview</h3>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                  {draft.creatives.map((asset) => (\r\n                    <div\r\n                      key={asset.id}\r\n                      className=\"relative aspect-square rounded-lg overflow-hidden bg-muted\"\r\n                    >\r\n                      {asset.type === 'video' ? (\r\n                        <div className=\"w-full h-full flex items-center justify-center\">\r\n                          <VideoCameraIcon className=\"h-8 w-8 text-muted-foreground\" />\r\n                        </div>\r\n                      ) : (\r\n                        <img\r\n                          src={asset.preview}\r\n                          alt={asset.name}\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      )}\r\n                      <div className=\"absolute inset-0 bg-black/0 hover:bg-black/20 transition-colors\" />\r\n                      {asset.headline && (\r\n                        <div className=\"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/80 to-transparent\">\r\n                          <p className=\"text-xs text-white truncate\">{asset.headline}</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* AI Insights */}\r\n            <div className=\"rounded-xl border bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-950/20 dark:to-indigo-950/20 p-6\">\r\n              <div className=\"flex items-center gap-2 mb-4\">\r\n                <SparklesIcon className=\"h-5 w-5 text-purple-600\" />\r\n                <h3 className=\"font-semibold text-purple-900 dark:text-purple-100\">AI Insights</h3>\r\n              </div>\r\n              <ul className=\"space-y-2 text-sm text-purple-800 dark:text-purple-200\">\r\n                <li>- Budget is within normal range for {draft.objective} campaigns</li>\r\n                <li>- Consider adding lookalike audiences for better reach</li>\r\n                <li>- Estimated ROAS based on similar campaigns: 3.5x - 4.2x</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <h1 className=\"text-2xl font-bold\">\r\n          {isEditing ? 'Edit Campaign Draft' : 'Create New Campaign'}\r\n        </h1>\r\n        <p className=\"text-muted-foreground\">\r\n          Step {currentStep + 1} of {steps.length}: {steps[currentStep].name}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Progress Steps */}\r\n      <nav className=\"flex items-center justify-between\">\r\n        {steps.map((step, index) => (\r\n          <div\r\n            key={step.id}\r\n            className={cn('flex items-center', index < steps.length - 1 && 'flex-1')}\r\n          >\r\n            <div\r\n              className={cn(\r\n                'flex items-center justify-center h-10 w-10 rounded-full border-2 transition-colors',\r\n                index < currentStep && 'bg-primary border-primary text-primary-foreground',\r\n                index === currentStep && 'border-primary text-primary',\r\n                index > currentStep && 'border-muted-foreground text-muted-foreground'\r\n              )}\r\n            >\r\n              {index < currentStep ? (\r\n                <CheckIcon className=\"h-5 w-5\" />\r\n              ) : (\r\n                <span className=\"text-sm font-medium\">{index + 1}</span>\r\n              )}\r\n            </div>\r\n            {index < steps.length - 1 && (\r\n              <div\r\n                className={cn('flex-1 h-0.5 mx-2', index < currentStep ? 'bg-primary' : 'bg-muted')}\r\n              />\r\n            )}\r\n          </div>\r\n        ))}\r\n      </nav>\r\n\r\n      {/* Step Content */}\r\n      <div className=\"rounded-xl border bg-card p-6 shadow-card min-h-[400px]\">\r\n        {renderStepContent()}\r\n      </div>\r\n\r\n      {/* Navigation Buttons */}\r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={handleBack}\r\n          disabled={currentStep === 0}\r\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-accent transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          <ChevronLeftIcon className=\"h-5 w-5\" />\r\n          Back\r\n        </button>\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={handleSaveDraft}\r\n            className=\"px-4 py-2 rounded-lg border hover:bg-accent transition-colors\"\r\n          >\r\n            Save Draft\r\n          </button>\r\n\r\n          {currentStep === steps.length - 1 ? (\r\n            <button\r\n              onClick={handleSubmitForApproval}\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity\"\r\n            >\r\n              Submit for Approval\r\n            </button>\r\n          ) : (\r\n            <button\r\n              onClick={handleNext}\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity\"\r\n            >\r\n              Next\r\n              <ChevronRightIcon className=\"h-5 w-5\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["steps","callToActionOptions","ACCEPTED_IMAGE_TYPES","ACCEPTED_VIDEO_TYPES","MAX_FILE_SIZE","objectives","mockAdAccounts","CampaignBuilder","tenantId","draftId","useParams","tid","navigate","useNavigate","currentStep","setCurrentStep","useState","draft","setDraft","isDragging","setIsDragging","editingAsset","setEditingAsset","fileInputRef","useRef","isEditing","metaAccounts","useAdAccounts","googleAccounts","tiktokAccounts","snapchatAccounts","createDraft","useCreateCampaignDraft","submitDraft","useSubmitDraft","useCampaignDraft","adAccounts","useMemo","apiAccounts","acc","updateDraft","field","value","prev","getAssetType","file","formatFileSize","bytes","processFiles","useCallback","files","newAssets","isValidType","isValidSize","handleDragOver","e","handleDragLeave","handleDrop","handleFileSelect","_a","removeAsset","id","asset","a","updateAsset","updates","handleNext","handleBack","handleSaveDraft","c","error","handleSubmitForApproval","newDraft","renderStepContent","jsxs","jsx","p","cn","obj","type","ExclamationTriangleIcon","gender","CloudArrowUpIcon","XMarkIcon","VideoCameraIcon","PhotoIcon","cta","SparklesIcon","Fragment","step","index","CheckIcon","ChevronLeftIcon","ChevronRightIcon"],"mappings":"0iBAqEA,MAAMA,EAAQ,CACZ,CAAE,GAAI,WAAY,KAAM,oBAAA,EACxB,CAAE,GAAI,SAAU,KAAM,iBAAA,EACtB,CAAE,GAAI,SAAU,KAAM,mBAAA,EACtB,CAAE,GAAI,YAAa,KAAM,WAAA,EACzB,CAAE,GAAI,YAAa,KAAM,cAAA,EACzB,CAAE,GAAI,SAAU,KAAM,iBAAA,CACxB,EAEMC,EAAsB,CAC1B,CAAE,MAAO,WAAY,MAAO,UAAA,EAC5B,CAAE,MAAO,aAAc,MAAO,YAAA,EAC9B,CAAE,MAAO,UAAW,MAAO,SAAA,EAC3B,CAAE,MAAO,aAAc,MAAO,YAAA,EAC9B,CAAE,MAAO,YAAa,MAAO,WAAA,EAC7B,CAAE,MAAO,WAAY,MAAO,UAAA,EAC5B,CAAE,MAAO,WAAY,MAAO,UAAA,CAC9B,EAEMC,EAAuB,CAAC,aAAc,YAAa,YAAa,YAAY,EAC5EC,EAAuB,CAAC,YAAa,kBAAmB,YAAY,EACpEC,GAAgB,IAAM,KAAO,KAE7BC,GAAyE,CAC7E,CAAE,MAAO,QAAS,MAAO,QAAS,YAAa,iCAAA,EAC/C,CAAE,MAAO,QAAS,MAAO,QAAS,YAAa,4BAAA,EAC/C,CAAE,MAAO,UAAW,MAAO,UAAW,YAAa,6BAAA,EACnD,CAAE,MAAO,YAAa,MAAO,YAAa,YAAa,qBAAA,EACvD,CAAE,MAAO,aAAc,MAAO,aAAc,YAAa,uBAAA,CAC3D,EAEMC,GAAiB,CACrB,CAAE,GAAI,UAAW,KAAM,wBAAyB,SAAU,MAAA,EAC1D,CAAE,GAAI,UAAW,KAAM,mBAAoB,SAAU,MAAA,EACrD,CAAE,GAAI,WAAY,KAAM,qBAAsB,SAAU,QAAA,CAC1D,EAEA,SAAwBC,IAAkB,CACxC,KAAM,CAAE,SAAAC,EAAU,QAAAC,CAAA,EAAYC,EAAA,EACxBC,EAAM,SAASH,GAAY,IAAK,EAAE,EAClCI,EAAWC,GAAA,EACX,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAS,CAAC,EAC1C,CAACC,EAAOC,CAAQ,EAAIF,WAAwB,CAChD,SAAU,KACV,YAAa,GACb,KAAM,GACN,UAAW,KACX,OAAQ,CACN,KAAM,QACN,OAAQ,IACR,SAAU,KAAA,EAEZ,SAAU,CACR,UAAW,OAAO,cAAc,MAAM,GAAG,EAAE,CAAC,EAC5C,IAAK,IAAA,EAEP,UAAW,CACT,UAAW,CAAA,EACX,OAAQ,GACR,OAAQ,GACR,QAAS,CAAC,KAAK,CAAA,EAEjB,UAAW,CAAA,CAAC,CACb,EACK,CAACG,EAAYC,CAAa,EAAIJ,EAAAA,SAAS,EAAK,EAC5C,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAwB,IAAI,EAC9DO,EAAeC,EAAAA,OAAyB,IAAI,EAE5CC,EAAY,CAAC,CAAChB,EAGd,CAAE,KAAMiB,CAAA,EAAiBC,EAAchB,EAAK,OAAQ,EAAI,EACxD,CAAE,KAAMiB,CAAA,EAAmBD,EAAchB,EAAK,SAAU,EAAI,EAC5D,CAAE,KAAMkB,CAAA,EAAmBF,EAAchB,EAAK,SAAU,EAAI,EAC5D,CAAE,KAAMmB,CAAA,EAAqBH,EAAchB,EAAK,WAAY,EAAI,EAGhEoB,EAAcC,GAAuBrB,CAAG,EACxCsB,EAAcC,GAAevB,CAAG,EACtCwB,GAAiBxB,EAAKF,GAAW,EAAE,EAGnC,MAAM2B,EAAaC,EAAAA,QAAQ,IAAM,CAC/B,MAAMC,EAAc,CAClB,IAAIZ,GAAgB,CAAA,GAAI,IAAKa,IAAS,CACpC,GAAIA,EAAI,GACR,KAAMA,EAAI,KACV,SAAU,MAAA,EACV,EACF,IAAIX,GAAkB,CAAA,GAAI,IAAKW,IAAS,CACtC,GAAIA,EAAI,GACR,KAAMA,EAAI,KACV,SAAU,QAAA,EACV,EACF,IAAIV,GAAkB,CAAA,GAAI,IAAKU,IAAS,CACtC,GAAIA,EAAI,GACR,KAAMA,EAAI,KACV,SAAU,QAAA,EACV,EACF,IAAIT,GAAoB,CAAA,GAAI,IAAKS,IAAS,CACxC,GAAIA,EAAI,GACR,KAAMA,EAAI,KACV,SAAU,UAAA,EACV,CAAA,EAEJ,OAAOD,EAAY,OAAS,EAAIA,EAAchC,EAChD,EAAG,CAACoB,EAAcE,EAAgBC,EAAgBC,CAAgB,CAAC,EAE7DU,EAAc,CAAgCC,EAAUC,IAA4B,CACxFxB,EAAUyB,IAAU,CAAE,GAAGA,EAAM,CAACF,CAAK,EAAGC,CAAA,EAAQ,CAClD,EAGME,EAAgBC,GAChB1C,EAAqB,SAAS0C,EAAK,IAAI,EAAU,QAC9C,QAGHC,EAAkBC,GAClBA,EAAQ,KAAa,GAAGA,CAAK,KAC7BA,EAAQ,KAAO,KAAa,IAAIA,EAAQ,MAAM,QAAQ,CAAC,CAAC,MACrD,IAAIA,GAAS,KAAO,OAAO,QAAQ,CAAC,CAAC,MAGxCC,EAAeC,cAAaC,GAA6B,CAQ7D,MAAMC,EAPY,MAAM,KAAKD,CAAK,EACL,OAAQL,GAAS,CAC5C,MAAMO,EAAc,CAAC,GAAGlD,EAAsB,GAAGC,CAAoB,EAAE,SAAS0C,EAAK,IAAI,EACnFQ,EAAcR,EAAK,MAAQzC,GACjC,OAAOgD,GAAeC,CACxB,CAAC,EAE6C,IAAKR,IAAU,CAC3D,GAAI,SAAS,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CAAC,GAClE,KAAAA,EACA,KAAMA,EAAK,KACX,KAAMD,EAAaC,CAAI,EACvB,QAAS,IAAI,gBAAgBA,CAAI,EACjC,KAAMA,EAAK,KACX,OAAQ,QACR,SAAU,GACV,YAAa,GACb,aAAc,YAAA,EACd,EAEF3B,EAAUyB,IAAU,CAClB,GAAGA,EACH,UAAW,CAAC,GAAGA,EAAK,UAAW,GAAGQ,CAAS,CAAA,EAC3C,CACJ,EAAG,CAAA,CAAE,EAECG,EAAiBL,cAAaM,GAAuB,CACzDA,EAAE,eAAA,EACFnC,EAAc,EAAI,CACpB,EAAG,CAAA,CAAE,EAECoC,EAAkBP,cAAaM,GAAuB,CAC1DA,EAAE,eAAA,EACFnC,EAAc,EAAK,CACrB,EAAG,CAAA,CAAE,EAECqC,EAAaR,EAAAA,YAChBM,GAAuB,CACtBA,EAAE,eAAA,EACFnC,EAAc,EAAK,EACfmC,EAAE,aAAa,MAAM,QACvBP,EAAaO,EAAE,aAAa,KAAK,CAErC,EACA,CAACP,CAAY,CAAA,EAGTU,EAAmBT,EAAAA,YACtBM,GAA2C,QACtCI,EAAAJ,EAAE,OAAO,QAAT,MAAAI,EAAgB,QAClBX,EAAaO,EAAE,OAAO,KAAK,EAG7BA,EAAE,OAAO,MAAQ,EACnB,EACA,CAACP,CAAY,CAAA,EAGTY,EAAcX,cAAaY,GAAe,CAC9C3C,EAAUyB,GAAS,CACjB,MAAMmB,EAAQnB,EAAK,UAAU,KAAMoB,GAAMA,EAAE,KAAOF,CAAE,EACpD,OAAIC,GACF,IAAI,gBAAgBA,EAAM,OAAO,EAE5B,CACL,GAAGnB,EACH,UAAWA,EAAK,UAAU,OAAQoB,GAAMA,EAAE,KAAOF,CAAE,CAAA,CAEvD,CAAC,CACH,EAAG,CAAA,CAAE,EAECG,EAAcf,EAAAA,YAAY,CAACY,EAAYI,IAAoC,CAC/E/C,EAAUyB,IAAU,CAClB,GAAGA,EACH,UAAWA,EAAK,UAAU,IAAKmB,GAC7BA,EAAM,KAAOD,EAAK,CAAE,GAAGC,EAAO,GAAGG,GAAYH,CAAA,CAC/C,EACA,CACJ,EAAG,CAAA,CAAE,EAECI,EAAa,IAAM,CACnBpD,EAAcd,EAAM,OAAS,GAC/Be,EAAeD,EAAc,CAAC,CAElC,EAEMqD,EAAa,IAAM,CACnBrD,EAAc,GAChBC,EAAeD,EAAc,CAAC,CAElC,EAEMsD,EAAkB,SAAY,CAClC,GAAI,CACF,MAAMrC,EAAY,YAAY,CAC5B,SAAUd,EAAM,UAAY,OAC5B,cAAeA,EAAM,YACrB,KAAMA,EAAM,KACZ,YAAa,GAAGA,EAAM,SAAS,YAC/B,WAAY,CACV,UAAWA,EAAM,UACjB,OAAQA,EAAM,OACd,SAAUA,EAAM,SAChB,UAAWA,EAAM,UACjB,UAAWA,EAAM,UAAU,IAAKoD,IAAO,CACrC,GAAIA,EAAE,GACN,KAAMA,EAAE,KACR,KAAMA,EAAE,KACR,SAAUA,EAAE,SACZ,YAAaA,EAAE,YACf,aAAcA,EAAE,YAAA,EAChB,CAAA,CACJ,CACD,EACD,MAAM,cAAc,EACpBzD,EAAS,QAAQJ,CAAQ,mBAAmB,CAC9C,OAAS8D,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAE5C,MAAM,0BAA0B,EAChC1D,EAAS,QAAQJ,CAAQ,mBAAmB,CAC9C,CACF,EAEM+D,EAA0B,SAAY,CAC1C,GAAI,CACF,GAAI9D,EACF,MAAMwB,EAAY,YAAYxB,CAAO,EACrC,MAAM,yBAAyB,MAC1B,CAEL,MAAM+D,EAAW,MAAMzC,EAAY,YAAY,CAC7C,SAAUd,EAAM,UAAY,OAC5B,cAAeA,EAAM,YACrB,KAAMA,EAAM,KACZ,YAAa,GAAGA,EAAM,SAAS,YAC/B,WAAY,CACV,UAAWA,EAAM,UACjB,OAAQA,EAAM,OACd,SAAUA,EAAM,SAChB,UAAWA,EAAM,UACjB,UAAWA,EAAM,UAAU,IAAKoD,IAAO,CACrC,GAAIA,EAAE,GACN,KAAMA,EAAE,KACR,KAAMA,EAAE,KACR,SAAUA,EAAE,SACZ,YAAaA,EAAE,YACf,aAAcA,EAAE,YAAA,EAChB,CAAA,CACJ,CACD,EACD,MAAMpC,EAAY,YAAYuC,EAAS,EAAE,EACzC,MAAM,yBAAyB,CACjC,CACA5D,EAAS,QAAQJ,CAAQ,mBAAmB,CAC9C,OAAS8D,EAAO,CACd,QAAQ,MAAM,oBAAqBA,CAAK,EAExC,MAAM,qCAAqC,EAC3C1D,EAAS,QAAQJ,CAAQ,mBAAmB,CAC9C,CACF,EAEMiE,EAAoB,IAAM,CAC9B,OAAQzE,EAAMc,CAAW,EAAE,GAAA,CACzB,IAAK,WACH,OACE4D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,kBAAe,EAC1DA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACX,SAAA,CAAC,OAAQ,SAAU,SAAU,UAAU,EAAiB,IAAKC,GAC7DF,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMlC,EAAY,WAAYoC,CAAC,EACxC,UAAWC,EACT,qDACA5D,EAAM,WAAa2D,EACf,8BACA,uCAAA,EAGN,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,8EACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,oBAAqB,SAAAC,EAAE,OAAO,CAAC,EAAE,YAAA,EAAc,EACjE,EACAD,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,SAAAC,CAAA,CAAE,CAAA,CAAA,EAZvCA,CAAA,CAcR,CAAA,CACH,CAAA,EACF,EAEC3D,EAAM,UACLyD,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,oBAAiB,EAC5DA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,WACE,OAAQpC,GAAQA,EAAI,WAAatB,EAAM,QAAQ,EAC/C,IAAKsB,GACJmC,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMlC,EAAY,cAAeD,EAAI,EAAE,EAChD,UAAWsC,EACT,0DACA5D,EAAM,cAAgBsB,EAAI,GACtB,8BACA,uCAAA,EAGN,SAAA,CAAAoC,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAApC,EAAI,KAAK,EACrCoC,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAI,EAAA,CAAG,CAAA,CAAA,EAVhDpC,EAAI,EAAA,CAYZ,CAAA,CACL,CAAA,CAAA,CACF,CAAA,EAEJ,EAGJ,IAAK,SACH,OACEmC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,gBAAa,EAC/DA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO1D,EAAM,KACb,SAAWsC,GAAMf,EAAY,OAAQe,EAAE,OAAO,KAAK,EACnD,YAAY,yBACZ,UAAU,wGAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAoB,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,qBAAkB,QACnE,MAAA,CAAI,UAAU,wCACZ,SAAAtE,GAAW,IAAKyE,GACfJ,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMlC,EAAY,YAAasC,EAAI,KAAK,EACjD,UAAWD,EACT,mDACA5D,EAAM,YAAc6D,EAAI,MACpB,8BACA,uCAAA,EAGN,SAAA,CAAAH,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAAG,EAAI,MAAM,EACtCH,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAI,WAAA,CAAY,CAAA,CAAA,EAVzDG,EAAI,KAAA,CAYZ,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EACF,EAGJ,IAAK,SACH,OACEJ,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,cAAW,EAC7DA,EAAAA,IAAC,MAAA,CAAI,UAAU,aACX,SAAA,CAAC,QAAS,UAAU,EAAmB,IAAKI,GAC5CJ,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMnC,EAAY,SAAU,CAAE,GAAGvB,EAAM,OAAQ,KAAA8D,EAAM,EAC9D,UAAWF,EACT,gDACA5D,EAAM,OAAO,OAAS8D,EAClB,8BACA,uCAAA,EAGN,SAAAL,EAAAA,KAAC,IAAA,CAAE,UAAU,yBAA0B,SAAA,CAAAK,EAAK,SAAA,CAAA,CAAO,CAAA,EAT9CA,CAAA,CAWR,CAAA,CACH,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAL,EAAAA,KAAC,QAAA,CAAM,UAAU,iCACd,SAAA,CAAAzD,EAAM,OAAO,OAAS,QAAU,eAAiB,eAAe,KAChEA,EAAM,OAAO,SAAS,GAAA,EACzB,EACA0D,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO1D,EAAM,OAAO,OACpB,SAAWsC,GACTf,EAAY,SAAU,CAAE,GAAGvB,EAAM,OAAQ,OAAQ,OAAOsC,EAAE,OAAO,KAAK,EAAG,EAE3E,IAAK,EACL,UAAU,wGAAA,CAAA,CACZ,EACF,EAEAmB,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,aAAU,EAC5DA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO1D,EAAM,SAAS,MACtB,SAAWsC,GACTf,EAAY,WAAY,CAAE,GAAGvB,EAAM,SAAU,MAAOsC,EAAE,OAAO,MAAO,EAEtE,UAAU,wGAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAAoB,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,sBAAmB,EACrEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO1D,EAAM,SAAS,KAAO,GAC7B,SAAWsC,GACTf,EAAY,WAAY,CAAE,GAAGvB,EAAM,SAAU,IAAKsC,EAAE,OAAO,OAAS,KAAM,EAE5E,UAAU,wGAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EAGCtC,EAAM,OAAO,OAAS,KACrByD,EAAAA,KAAC,MAAA,CAAI,UAAU,uHACb,SAAA,CAAAC,EAAAA,IAACK,GAAA,CAAwB,UAAU,6CAAA,CAA8C,SAChF,MAAA,CACC,SAAA,CAAAL,EAAAA,IAAC,IAAA,CAAE,UAAU,iDAAiD,SAAA,mBAAgB,EAC9EA,EAAAA,IAAC,IAAA,CAAE,UAAU,6CAA6C,SAAA,gEAAA,CAE1D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAGJ,IAAK,YACH,OACED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,mBAAgB,EAClEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,oCACZ,UAAU,wGAAA,CAAA,EAEZA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,yCAAA,CAElD,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,cAAW,EAC7DA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO1D,EAAM,UAAU,OACvB,SAAWsC,GACTf,EAAY,YAAa,CAAE,GAAGvB,EAAM,UAAW,OAAQ,OAAOsC,EAAE,OAAO,KAAK,EAAG,EAEjF,IAAK,GACL,IAAK,GACL,UAAU,wGAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAAoB,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,cAAW,EAC7DA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO1D,EAAM,UAAU,OACvB,SAAWsC,GACTf,EAAY,YAAa,CAAE,GAAGvB,EAAM,UAAW,OAAQ,OAAOsC,EAAE,OAAO,KAAK,EAAG,EAEjF,IAAK,GACL,IAAK,GACL,UAAU,wGAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAoB,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,mBAAgB,EAClEA,EAAAA,IAAC,MAAA,CAAI,UAAU,aACZ,SAAA,CACC,CAAE,MAAO,MAAO,MAAO,KAAA,EACvB,CAAE,MAAO,OAAQ,MAAO,MAAA,EACxB,CAAE,MAAO,SAAU,MAAO,QAAA,CAAS,EACnC,IAAKM,GACLN,EAAAA,IAAC,SAAA,CAEC,QAAS,IACPnC,EAAY,YAAa,CAAE,GAAGvB,EAAM,UAAW,QAAS,CAACgE,EAAO,KAAK,EAAG,EAE1E,UAAWJ,EACT,+CACA5D,EAAM,UAAU,QAAQ,SAASgE,EAAO,KAAK,EACzC,8BACA,uCAAA,EAGL,SAAAA,EAAO,KAAA,EAXHA,EAAO,KAAA,CAaf,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EACF,EAGJ,IAAK,YACH,OACEP,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,sBAAmB,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,2FAGlD,EAGAD,EAAAA,KAAC,MAAA,CACC,WAAYpB,EACZ,YAAaE,EACb,OAAQC,EACR,QAAS,IAAA,OAAM,OAAAE,EAAApC,EAAa,UAAb,YAAAoC,EAAsB,SACrC,UAAWkB,EACT,kFACA1D,EACI,8BACA,yDAAA,EAGN,SAAA,CAAAwD,EAAAA,IAAC,QAAA,CACC,IAAKpD,EACL,KAAK,OACL,SAAQ,GACR,OAAQ,CAAC,GAAGrB,EAAsB,GAAGC,CAAoB,EAAE,KAAK,GAAG,EACnE,SAAUuD,EACV,UAAU,QAAA,CAAA,EAEZiB,EAAAA,IAACO,GAAA,CAAiB,UAAU,8CAAA,CAA+C,EAC3EP,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAc,SAAA,2BAAwB,EACnDA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,qBAAkB,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,CACxE,EACF,EAGC1D,EAAM,UAAU,OAAS,UACvB,MAAA,CACC,SAAA,CAAAyD,EAAAA,KAAC,KAAA,CAAG,UAAU,mBAAmB,SAAA,CAAA,oBAAkBzD,EAAM,UAAU,OAAO,GAAA,EAAC,EAC3E0D,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAA1D,EAAM,UAAU,IAAK6C,GAAA,OACpBY,OAAAA,EAAAA,KAAC,MAAA,CAAmB,UAAU,4CAE5B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACZ,SAAA,CAAAZ,EAAM,OAAS,QACda,EAAAA,IAAC,QAAA,CACC,IAAKb,EAAM,QACX,UAAU,6BACV,SAAQ,EAAA,CAAA,EAGVa,EAAAA,IAAC,MAAA,CACC,IAAKb,EAAM,QACX,IAAKA,EAAM,KACX,UAAU,4BAAA,CAAA,EAGda,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMf,EAAYE,EAAM,EAAE,EACnC,UAAU,uGAEV,SAAAa,EAAAA,IAACQ,GAAA,CAAU,UAAU,SAAA,CAAU,CAAA,CAAA,EAEjCT,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,kFACb,SAAA,CAAAZ,EAAM,OAAS,QACda,EAAAA,IAACS,EAAA,CAAgB,UAAU,UAAU,EAErCT,EAAAA,IAACU,GAAA,CAAU,UAAU,SAAA,CAAU,EAEhCvB,EAAM,IAAA,EACT,QACC,OAAA,CAAK,UAAU,0DACb,SAAAhB,EAAegB,EAAM,IAAI,CAAA,CAC5B,CAAA,CAAA,CACF,CAAA,EACF,EAGAY,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAE,UAAU,+BAA+B,MAAOb,EAAM,KACtD,WAAM,IAAA,CACT,EAECzC,IAAiByC,EAAM,GACtBY,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,WAAQ,EAC1DA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOb,EAAM,UAAY,GACzB,SAAWP,GACTS,EAAYF,EAAM,GAAI,CAAE,SAAUP,EAAE,OAAO,MAAO,EAEpD,YAAY,oBACZ,UAAW,GACX,UAAU,kHAAA,CAAA,EAEZmB,EAAAA,KAAC,IAAA,CAAE,UAAU,uCACT,SAAA,EAAAZ,EAAM,UAAY,IAAI,OAAO,gBAAA,CAAA,CACjC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAa,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,cAAW,EAC7DA,EAAAA,IAAC,WAAA,CACC,MAAOb,EAAM,aAAe,GAC5B,SAAWP,GACTS,EAAYF,EAAM,GAAI,CAAE,YAAaP,EAAE,OAAO,MAAO,EAEvD,YAAY,uBACZ,UAAW,IACX,KAAM,EACN,UAAU,8HAAA,CAAA,EAEZmB,EAAAA,KAAC,IAAA,CAAE,UAAU,uCACT,SAAA,EAAAZ,EAAM,aAAe,IAAI,OAAO,iBAAA,CAAA,CACpC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAa,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,iBAElD,EACAA,EAAAA,IAAC,SAAA,CACC,MAAOb,EAAM,cAAgB,aAC7B,SAAWP,GACTS,EAAYF,EAAM,GAAI,CAAE,aAAcP,EAAE,OAAO,MAAO,EAExD,UAAU,mHAET,SAAAtD,EAAoB,IAAKqF,GACxBX,EAAAA,IAAC,SAAA,CAAuB,MAAOW,EAAI,MAChC,SAAAA,EAAI,KAAA,EADMA,EAAI,KAEjB,CACD,CAAA,CAAA,CACH,EACF,EACAX,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMrD,EAAgB,IAAI,EACnC,UAAU,mGACX,SAAA,MAAA,CAAA,CAED,CAAA,CACF,EAEAoD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAZ,EAAM,UACLY,OAAC,IAAA,CAAE,UAAU,gCACX,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,YAAS,EAAO,IAAEb,EAAM,QAAA,EACxD,EAEDA,EAAM,cACLY,OAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,CAAA,OACtC,MACJf,EAAA1D,EAAoB,KAAMoE,GAAMA,EAAE,QAAUP,EAAM,YAAY,IAA9D,YAAAH,EACG,QAASG,EAAM,YAAA,EACrB,EAEFa,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMrD,EAAgBwC,EAAM,EAAE,EACvC,UAAU,uCACX,SAAA,cAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,GA5HQA,EAAM,EA6HhB,EACD,CAAA,CACH,CAAA,EACF,EAIFY,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,2CACZ,SAAA,CAAAC,EAAAA,IAACY,EAAA,CAAa,UAAU,sBAAA,CAAuB,EAAE,+BACpB,IAC5BtE,EAAM,SACHA,EAAM,SAAS,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAM,SAAS,MAAM,CAAC,EAC/D,KAAA,EACN,EACAyD,EAAAA,KAAC,KAAA,CAAG,UAAU,0CACX,SAAA,CAAAzD,EAAM,WAAa,QAClByD,EAAAA,KAAAc,EAAAA,SAAA,CACE,SAAA,CAAAb,EAAAA,IAAC,MAAG,SAAA,mDAAA,CAAiD,EACrDA,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,EACzDA,EAAAA,IAAC,MAAG,SAAA,6CAAA,CAA2C,CAAA,EACjD,EAED1D,EAAM,WAAa,UAClByD,EAAAA,KAAAc,EAAAA,SAAA,CACE,SAAA,CAAAb,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,EACzDA,EAAAA,IAAC,MAAG,SAAA,2CAAA,CAAyC,EAC7CA,EAAAA,IAAC,MAAG,SAAA,6CAAA,CAA2C,CAAA,EACjD,EAED1D,EAAM,WAAa,UAClByD,EAAAA,KAAAc,EAAAA,SAAA,CACE,SAAA,CAAAb,EAAAA,IAAC,MAAG,SAAA,kDAAA,CAAgD,EACpDA,EAAAA,IAAC,MAAG,SAAA,oDAAA,CAAkD,EACtDA,EAAAA,IAAC,MAAG,SAAA,oDAAA,CAAkD,CAAA,EACxD,EAED1D,EAAM,WAAa,YAClByD,EAAAA,KAAAc,EAAAA,SAAA,CACE,SAAA,CAAAb,EAAAA,IAAC,MAAG,SAAA,4CAAA,CAA0C,EAC9CA,EAAAA,IAAC,MAAG,SAAA,qCAAA,CAAmC,EACvCA,EAAAA,IAAC,MAAG,SAAA,sCAAA,CAAoC,CAAA,EAC1C,EAED,CAAC1D,EAAM,UAAY0D,EAAAA,IAAC,MAAG,SAAA,qDAAA,CAAmD,CAAA,CAAA,CAC7E,CAAA,CAAA,CACF,CAAA,EACF,EAGJ,IAAK,SACH,OACED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,mBAAgB,EAC3DD,EAAAA,KAAC,KAAA,CAAG,UAAU,wCACZ,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,WAAQ,QACrD,KAAA,CAAG,UAAU,yBAA0B,SAAA1D,EAAM,UAAY,cAAA,CAAe,CAAA,EAC3E,SACC,MAAA,CACC,SAAA,CAAA0D,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,aAAU,QACvD,KAAA,CAAG,UAAU,cAAe,SAAA1D,EAAM,aAAe,cAAA,CAAe,CAAA,EACnE,SACC,MAAA,CACC,SAAA,CAAA0D,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,gBAAa,QAC1D,KAAA,CAAG,UAAU,cAAe,SAAA1D,EAAM,MAAQ,SAAA,CAAU,CAAA,EACvD,SACC,MAAA,CACC,SAAA,CAAA0D,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,YAAS,QACtD,KAAA,CAAG,UAAU,yBAA0B,SAAA1D,EAAM,WAAa,cAAA,CAAe,CAAA,EAC5E,SACC,MAAA,CACC,SAAA,CAAA0D,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,SAAM,EACpDD,EAAAA,KAAC,KAAA,CAAG,UAAU,cACX,SAAA,CAAAzD,EAAM,OAAO,SAAS,IAAEA,EAAM,OAAO,OAAO,MAAIA,EAAM,OAAO,IAAA,CAAA,CAChE,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAA0D,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,WAAQ,EACtDD,EAAAA,KAAC,KAAA,CAAG,UAAU,cACX,SAAA,CAAAzD,EAAM,SAAS,MAAM,MAAIA,EAAM,SAAS,KAAO,SAAA,CAAA,CAClD,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAA0D,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,eAAY,EAC1DD,EAAAA,KAAC,KAAA,CAAG,UAAU,cACX,SAAA,CAAAzD,EAAM,UAAU,OAAO,SAAOA,EAAM,UAAU,SAAW,EAAI,IAAM,GAAG,WAAA,CAAA,CACzE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGCA,EAAM,UAAU,OAAS,GACxByD,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,uBAAoB,EAC/DA,EAAAA,IAAC,OAAI,UAAU,wCACZ,WAAM,UAAU,IAAKb,GACpBY,EAAAA,KAAC,MAAA,CAEC,UAAU,6DAET,SAAA,CAAAZ,EAAM,OAAS,QACda,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,SAAAA,EAAAA,IAACS,EAAA,CAAgB,UAAU,+BAAA,CAAgC,CAAA,CAC7D,EAEAT,EAAAA,IAAC,MAAA,CACC,IAAKb,EAAM,QACX,IAAKA,EAAM,KACX,UAAU,4BAAA,CAAA,EAGda,EAAAA,IAAC,MAAA,CAAI,UAAU,iEAAA,CAAkE,EAChFb,EAAM,UACLa,EAAAA,IAAC,MAAA,CAAI,UAAU,qFACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA+B,SAAAb,EAAM,QAAA,CAAS,CAAA,CAC7D,CAAA,CAAA,EAlBGA,EAAM,EAAA,CAqBd,CAAA,CACH,CAAA,EACF,EAIFY,EAAAA,KAAC,MAAA,CAAI,UAAU,oHACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAACY,EAAA,CAAa,UAAU,yBAAA,CAA0B,EAClDZ,EAAAA,IAAC,KAAA,CAAG,UAAU,qDAAqD,SAAA,aAAA,CAAW,CAAA,EAChF,EACAD,EAAAA,KAAC,KAAA,CAAG,UAAU,yDACZ,SAAA,CAAAA,OAAC,KAAA,CAAG,SAAA,CAAA,uCAAqCzD,EAAM,UAAU,YAAA,EAAU,EACnE0D,EAAAA,IAAC,MAAG,SAAA,wDAAA,CAAsD,EAC1DA,EAAAA,IAAC,MAAG,SAAA,0DAAA,CAAwD,CAAA,CAAA,CAC9D,CAAA,CAAA,CACF,CAAA,EACF,CAAA,CAGR,EAEA,OACED,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,qBACX,SAAAlD,EAAY,sBAAwB,sBACvC,EACAiD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,QAC7B5D,EAAc,EAAE,OAAKd,EAAM,OAAO,KAAGA,EAAMc,CAAW,EAAE,IAAA,CAAA,CAChE,CAAA,EACF,EAGA6D,EAAAA,IAAC,OAAI,UAAU,oCACZ,WAAM,IAAI,CAACc,EAAMC,IAChBhB,EAAAA,KAAC,MAAA,CAEC,UAAWG,EAAG,oBAAqBa,EAAQ1F,EAAM,OAAS,GAAK,QAAQ,EAEvE,SAAA,CAAA2E,EAAAA,IAAC,MAAA,CACC,UAAWE,EACT,qFACAa,EAAQ5E,GAAe,oDACvB4E,IAAU5E,GAAe,8BACzB4E,EAAQ5E,GAAe,+CAAA,EAGxB,SAAA4E,EAAQ5E,EACP6D,EAAAA,IAACgB,GAAA,CAAU,UAAU,SAAA,CAAU,EAE/BhB,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAuB,SAAAe,EAAQ,CAAA,CAAE,CAAA,CAAA,EAGpDA,EAAQ1F,EAAM,OAAS,GACtB2E,EAAAA,IAAC,MAAA,CACC,UAAWE,EAAG,oBAAqBa,EAAQ5E,EAAc,aAAe,UAAU,CAAA,CAAA,CACpF,CAAA,EApBG2E,EAAK,EAAA,CAuBb,EACH,EAGAd,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACZ,aACH,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAASP,EACT,SAAUrD,IAAgB,EAC1B,UAAU,wIAEV,SAAA,CAAA6D,EAAAA,IAACiB,GAAA,CAAgB,UAAU,SAAA,CAAU,EAAE,MAAA,CAAA,CAAA,EAIzClB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASP,EACT,UAAU,gEACX,SAAA,YAAA,CAAA,EAIAtD,IAAgBd,EAAM,OAAS,EAC9B2E,EAAAA,IAAC,SAAA,CACC,QAASJ,EACT,UAAU,sHACX,SAAA,qBAAA,CAAA,EAIDG,EAAAA,KAAC,SAAA,CACC,QAASR,EACT,UAAU,sHACX,SAAA,CAAA,OAECS,EAAAA,IAACkB,GAAA,CAAiB,UAAU,SAAA,CAAU,CAAA,CAAA,CAAA,CACxC,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}