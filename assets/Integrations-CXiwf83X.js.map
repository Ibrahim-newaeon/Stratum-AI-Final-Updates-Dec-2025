{"version":3,"file":"Integrations-CXiwf83X.js","sources":["../../src/api/crm.ts","../../src/views/tenant/Integrations.tsx"],"sourcesContent":["/**\r\n * Stratum AI - CRM Integration API\r\n *\r\n * Handles HubSpot integration, contacts, deals, and sync operations.\r\n */\r\n\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient, ApiResponse, PaginatedResponse } from './client';\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\nexport type CRMProvider = 'hubspot' | 'salesforce' | 'zoho';\r\nexport type CRMConnectionStatus = 'connected' | 'disconnected' | 'error' | 'syncing';\r\nexport type DealStage = 'lead' | 'qualified' | 'proposal' | 'negotiation' | 'won' | 'lost';\r\nexport type WritebackStatus = 'pending' | 'synced' | 'failed' | 'skipped';\r\n\r\nexport interface CRMConnection {\r\n  id: string;\r\n  tenantId: number;\r\n  provider: CRMProvider;\r\n  status: CRMConnectionStatus;\r\n  portalId?: string;\r\n  portalName?: string;\r\n  lastSyncAt?: string;\r\n  syncEnabled: boolean;\r\n  syncFrequencyMinutes: number;\r\n  objectsToSync: string[];\r\n  totalContacts: number;\r\n  totalDeals: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface CRMContact {\r\n  id: string;\r\n  tenantId: number;\r\n  crmProvider: CRMProvider;\r\n  externalId: string;\r\n  email?: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  company?: string;\r\n  phone?: string;\r\n  lifecycleStage?: string;\r\n  leadSource?: string;\r\n  firstTouchChannel?: string;\r\n  lastTouchChannel?: string;\r\n  touchpointCount: number;\r\n  totalDealValue: number;\r\n  properties: Record<string, any>;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface CRMDeal {\r\n  id: string;\r\n  tenantId: number;\r\n  contactId: string;\r\n  crmProvider: CRMProvider;\r\n  externalId: string;\r\n  dealName: string;\r\n  amount: number;\r\n  currency: string;\r\n  stage: DealStage;\r\n  pipeline?: string;\r\n  closeDate?: string;\r\n  closedWonDate?: string;\r\n  probability: number;\r\n  touchpointCount: number;\r\n  attributedRevenue: Record<string, number>;\r\n  properties: Record<string, any>;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface Touchpoint {\r\n  id: string;\r\n  tenantId: number;\r\n  contactId: string;\r\n  dealId?: string;\r\n  channel: string;\r\n  source: string;\r\n  medium?: string;\r\n  campaign?: string;\r\n  content?: string;\r\n  platform?: string;\r\n  adId?: string;\r\n  timestamp: string;\r\n  isConverting: boolean;\r\n  properties: Record<string, any>;\r\n}\r\n\r\nexport interface PipelineMetrics {\r\n  date: string;\r\n  dealsCreated: number;\r\n  dealsWon: number;\r\n  dealsLost: number;\r\n  revenueCreated: number;\r\n  revenueWon: number;\r\n  avgDealSize: number;\r\n  avgCycleTime: number;\r\n  conversionRate: number;\r\n  pipelineValue: number;\r\n}\r\n\r\nexport interface WritebackConfig {\r\n  id: string;\r\n  tenantId: number;\r\n  enabled: boolean;\r\n  propertyMappings: Record<string, string>;\r\n  syncTriggers: string[];\r\n  lastSyncAt?: string;\r\n  errorCount: number;\r\n}\r\n\r\nexport interface WritebackSync {\r\n  id: string;\r\n  entityType: string;\r\n  entityId: string;\r\n  status: WritebackStatus;\r\n  syncedAt?: string;\r\n  errorMessage?: string;\r\n  dataSnapshot: Record<string, any>;\r\n}\r\n\r\n// =============================================================================\r\n// API Functions\r\n// =============================================================================\r\n\r\nexport const crmApi = {\r\n  // Connections\r\n  getConnections: async () => {\r\n    const response = await apiClient.get<ApiResponse<CRMConnection[]>>(\r\n      '/integrations/crm/connections'\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getConnection: async (connectionId: string) => {\r\n    const response = await apiClient.get<ApiResponse<CRMConnection>>(\r\n      `/integrations/crm/connections/${connectionId}`\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  connectHubSpot: async (authCode: string) => {\r\n    const response = await apiClient.post<ApiResponse<CRMConnection>>(\r\n      '/integrations/crm/hubspot/connect',\r\n      {\r\n        auth_code: authCode,\r\n      }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  disconnectCRM: async (connectionId: string) => {\r\n    const response = await apiClient.delete<ApiResponse<void>>(\r\n      `/integrations/crm/connections/${connectionId}`\r\n    );\r\n    return response.data;\r\n  },\r\n\r\n  updateConnectionSettings: async (connectionId: string, settings: Partial<CRMConnection>) => {\r\n    const response = await apiClient.patch<ApiResponse<CRMConnection>>(\r\n      `/integrations/crm/connections/${connectionId}`,\r\n      settings\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Sync\r\n  triggerSync: async (connectionId: string) => {\r\n    const response = await apiClient.post<ApiResponse<{ syncId: string }>>(\r\n      `/integrations/crm/connections/${connectionId}/sync`\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getSyncStatus: async (connectionId: string) => {\r\n    const response = await apiClient.get<\r\n      ApiResponse<{ status: string; progress: number; lastSync: string }>\r\n    >(`/integrations/crm/connections/${connectionId}/sync-status`);\r\n    return response.data.data;\r\n  },\r\n\r\n  // Contacts\r\n  getContacts: async (params?: { page?: number; limit?: number; search?: string }) => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<CRMContact>>>(\r\n      '/integrations/crm/contacts',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getContact: async (contactId: string) => {\r\n    const response = await apiClient.get<ApiResponse<CRMContact>>(\r\n      `/integrations/crm/contacts/${contactId}`\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getContactJourney: async (contactId: string) => {\r\n    const response = await apiClient.get<\r\n      ApiResponse<{ contact: CRMContact; touchpoints: Touchpoint[]; deals: CRMDeal[] }>\r\n    >(`/integrations/crm/contacts/${contactId}/journey`);\r\n    return response.data.data;\r\n  },\r\n\r\n  // Deals\r\n  getDeals: async (params?: {\r\n    page?: number;\r\n    limit?: number;\r\n    stage?: DealStage;\r\n    search?: string;\r\n  }) => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<CRMDeal>>>(\r\n      '/integrations/crm/deals',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getDeal: async (dealId: string) => {\r\n    const response = await apiClient.get<ApiResponse<CRMDeal>>(`/integrations/crm/deals/${dealId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  // Pipeline Metrics\r\n  getPipelineMetrics: async (params: { startDate: string; endDate: string }) => {\r\n    const response = await apiClient.get<ApiResponse<PipelineMetrics[]>>(\r\n      '/integrations/crm/pipeline/metrics',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getPipelineSummary: async () => {\r\n    const response = await apiClient.get<\r\n      ApiResponse<{\r\n        totalDeals: number;\r\n        totalValue: number;\r\n        avgDealSize: number;\r\n        conversionRate: number;\r\n        byStage: Record<DealStage, { count: number; value: number }>;\r\n      }>\r\n    >('/integrations/crm/pipeline/summary');\r\n    return response.data.data;\r\n  },\r\n\r\n  // Writeback\r\n  getWritebackConfig: async () => {\r\n    const response = await apiClient.get<ApiResponse<WritebackConfig>>(\r\n      '/integrations/crm/writeback/config'\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  updateWritebackConfig: async (config: Partial<WritebackConfig>) => {\r\n    const response = await apiClient.put<ApiResponse<WritebackConfig>>(\r\n      '/integrations/crm/writeback/config',\r\n      config\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getWritebackHistory: async (params?: {\r\n    page?: number;\r\n    limit?: number;\r\n    status?: WritebackStatus;\r\n  }) => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<WritebackSync>>>(\r\n      '/integrations/crm/writeback/history',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  retryWriteback: async (syncId: string) => {\r\n    const response = await apiClient.post<ApiResponse<WritebackSync>>(\r\n      `/integrations/crm/writeback/${syncId}/retry`\r\n    );\r\n    return response.data.data;\r\n  },\r\n};\r\n\r\n// =============================================================================\r\n// React Query Hooks\r\n// =============================================================================\r\n\r\n// Connections\r\nexport function useCRMConnections() {\r\n  return useQuery({\r\n    queryKey: ['crm', 'connections'],\r\n    queryFn: crmApi.getConnections,\r\n  });\r\n}\r\n\r\nexport function useCRMConnection(connectionId: string) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'connections', connectionId],\r\n    queryFn: () => crmApi.getConnection(connectionId),\r\n    enabled: !!connectionId,\r\n  });\r\n}\r\n\r\nexport function useConnectHubSpot() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: crmApi.connectHubSpot,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['crm', 'connections'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useDisconnectCRM() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: crmApi.disconnectCRM,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['crm', 'connections'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useTriggerCRMSync() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: crmApi.triggerSync,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['crm'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Contacts\r\nexport function useCRMContacts(params?: { page?: number; limit?: number; search?: string }) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'contacts', params],\r\n    queryFn: () => crmApi.getContacts(params),\r\n  });\r\n}\r\n\r\nexport function useCRMContact(contactId: string) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'contacts', contactId],\r\n    queryFn: () => crmApi.getContact(contactId),\r\n    enabled: !!contactId,\r\n  });\r\n}\r\n\r\nexport function useContactJourney(contactId: string) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'contacts', contactId, 'journey'],\r\n    queryFn: () => crmApi.getContactJourney(contactId),\r\n    enabled: !!contactId,\r\n  });\r\n}\r\n\r\n// Deals\r\nexport function useCRMDeals(params?: {\r\n  page?: number;\r\n  limit?: number;\r\n  stage?: DealStage;\r\n  search?: string;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'deals', params],\r\n    queryFn: () => crmApi.getDeals(params),\r\n  });\r\n}\r\n\r\nexport function useCRMDeal(dealId: string) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'deals', dealId],\r\n    queryFn: () => crmApi.getDeal(dealId),\r\n    enabled: !!dealId,\r\n  });\r\n}\r\n\r\n// Pipeline\r\nexport function usePipelineMetrics(startDate: string, endDate: string) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'pipeline', 'metrics', startDate, endDate],\r\n    queryFn: () => crmApi.getPipelineMetrics({ startDate, endDate }),\r\n    enabled: !!startDate && !!endDate,\r\n  });\r\n}\r\n\r\nexport function usePipelineSummary() {\r\n  return useQuery({\r\n    queryKey: ['crm', 'pipeline', 'summary'],\r\n    queryFn: crmApi.getPipelineSummary,\r\n  });\r\n}\r\n\r\n// Writeback\r\nexport function useWritebackConfig() {\r\n  return useQuery({\r\n    queryKey: ['crm', 'writeback', 'config'],\r\n    queryFn: crmApi.getWritebackConfig,\r\n  });\r\n}\r\n\r\nexport function useUpdateWritebackConfig() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: crmApi.updateWritebackConfig,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['crm', 'writeback'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useWritebackHistory(params?: {\r\n  page?: number;\r\n  limit?: number;\r\n  status?: WritebackStatus;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['crm', 'writeback', 'history', params],\r\n    queryFn: () => crmApi.getWritebackHistory(params),\r\n  });\r\n}\r\n\r\nexport function useRetryWriteback() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: crmApi.retryWriteback,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['crm', 'writeback'] });\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Stratum AI - CRM Integrations Page\r\n *\r\n * Manages HubSpot and other CRM connections, contacts, deals, and writeback settings.\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n  useCRMConnections,\r\n  useCRMContacts,\r\n  useCRMDeals,\r\n  usePipelineSummary,\r\n  useTriggerCRMSync,\r\n  useUpdateWritebackConfig,\r\n  useWritebackConfig,\r\n} from '@/api/hooks';\r\nimport {\r\n  ArrowPathIcon,\r\n  CheckCircleIcon,\r\n  CurrencyDollarIcon,\r\n  ExclamationTriangleIcon,\r\n  LinkIcon,\r\n  UserGroupIcon,\r\n  XCircleIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype TabType = 'overview' | 'contacts' | 'deals' | 'writeback';\r\n\r\nexport default function Integrations() {\r\n  useParams<{ tenantId: string }>();\r\n  const [activeTab, setActiveTab] = useState<TabType>('overview');\r\n\r\n  const { data: connections, isLoading: loadingConnections } = useCRMConnections();\r\n  const { data: pipelineSummary } = usePipelineSummary();\r\n  const { data: contacts } = useCRMContacts({ limit: 10 });\r\n  const { data: deals } = useCRMDeals({ limit: 10 });\r\n  const { data: writebackConfig } = useWritebackConfig();\r\n  const triggerSync = useTriggerCRMSync();\r\n  const updateWriteback = useUpdateWritebackConfig();\r\n\r\n  const hubspotConnection = connections?.find((c) => c.provider === 'hubspot');\r\n\r\n  const tabs = [\r\n    { id: 'overview' as TabType, label: 'Overview' },\r\n    { id: 'contacts' as TabType, label: 'Contacts' },\r\n    { id: 'deals' as TabType, label: 'Deals' },\r\n    { id: 'writeback' as TabType, label: 'Writeback' },\r\n  ];\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'connected':\r\n        return <CheckCircleIcon className=\"h-5 w-5 text-emerald-500\" />;\r\n      case 'error':\r\n        return <XCircleIcon className=\"h-5 w-5 text-red-500\" />;\r\n      case 'syncing':\r\n        return <ArrowPathIcon className=\"h-5 w-5 text-blue-500 animate-spin\" />;\r\n      default:\r\n        return <ExclamationTriangleIcon className=\"h-5 w-5 text-amber-500\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">CRM Integrations</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            Connect and manage your CRM platforms for enhanced attribution and data sync\r\n          </p>\r\n        </div>\r\n        {hubspotConnection && (\r\n          <button\r\n            onClick={() => triggerSync.mutate(hubspotConnection.id)}\r\n            disabled={triggerSync.isPending}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50\"\r\n          >\r\n            <ArrowPathIcon className={cn('h-4 w-4', triggerSync.isPending && 'animate-spin')} />\r\n            Sync Now\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"border-b\">\r\n        <nav className=\"flex gap-4\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={cn(\r\n                'px-4 py-2 border-b-2 font-medium text-sm transition-colors',\r\n                activeTab === tab.id\r\n                  ? 'border-primary text-primary'\r\n                  : 'border-transparent text-muted-foreground hover:text-foreground'\r\n              )}\r\n            >\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Overview Tab */}\r\n      {activeTab === 'overview' && (\r\n        <div className=\"space-y-6\">\r\n          {/* Connection Status */}\r\n          <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n            <h2 className=\"text-lg font-semibold mb-4\">Connection Status</h2>\r\n            {loadingConnections ? (\r\n              <div className=\"animate-pulse h-20 bg-muted rounded-lg\" />\r\n            ) : hubspotConnection ? (\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"p-3 rounded-lg bg-orange-100 dark:bg-orange-900/20\">\r\n                    <LinkIcon className=\"h-6 w-6 text-orange-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-medium\">HubSpot</p>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      Portal: {hubspotConnection.portalName || hubspotConnection.portalId}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  {getStatusIcon(hubspotConnection.status)}\r\n                  <span className=\"text-sm capitalize\">{hubspotConnection.status}</span>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-8\">\r\n                <LinkIcon className=\"h-12 w-12 mx-auto text-muted-foreground mb-3\" />\r\n                <p className=\"text-muted-foreground\">No CRM connected</p>\r\n                <button className=\"mt-4 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90\">\r\n                  Connect HubSpot\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Summary Cards */}\r\n          {hubspotConnection && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/20\">\r\n                    <UserGroupIcon className=\"h-5 w-5 text-blue-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Total Contacts</p>\r\n                    <p className=\"text-2xl font-bold\">\r\n                      {hubspotConnection.totalContacts.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/20\">\r\n                    <CurrencyDollarIcon className=\"h-5 w-5 text-emerald-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Total Deals</p>\r\n                    <p className=\"text-2xl font-bold\">\r\n                      {hubspotConnection.totalDeals.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/20\">\r\n                    <ArrowPathIcon className=\"h-5 w-5 text-purple-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Last Sync</p>\r\n                    <p className=\"text-lg font-medium\">\r\n                      {hubspotConnection.lastSyncAt\r\n                        ? new Date(hubspotConnection.lastSyncAt).toLocaleString()\r\n                        : 'Never'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Pipeline Summary */}\r\n          {pipelineSummary && (\r\n            <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n              <h2 className=\"text-lg font-semibold mb-4\">Pipeline Overview</h2>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <div>\r\n                  <p className=\"text-sm text-muted-foreground\">Total Value</p>\r\n                  <p className=\"text-xl font-bold\">\r\n                    ${pipelineSummary.totalValue.toLocaleString()}\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-muted-foreground\">Avg Deal Size</p>\r\n                  <p className=\"text-xl font-bold\">\r\n                    ${pipelineSummary.avgDealSize.toLocaleString()}\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-muted-foreground\">Conversion Rate</p>\r\n                  <p className=\"text-xl font-bold\">\r\n                    {(pipelineSummary.conversionRate * 100).toFixed(1)}%\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-muted-foreground\">Total Deals</p>\r\n                  <p className=\"text-xl font-bold\">{pipelineSummary.totalDeals}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Contacts Tab */}\r\n      {activeTab === 'contacts' && (\r\n        <div className=\"rounded-xl border bg-card shadow-card overflow-hidden\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-muted/50\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Contact</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Company</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Stage</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Touchpoints</th>\r\n                <th className=\"px-4 py-3 text-right text-sm font-medium\">Deal Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {contacts?.items.map((contact) => (\r\n                <tr key={contact.id} className=\"hover:bg-muted/30\">\r\n                  <td className=\"px-4 py-3\">\r\n                    <div>\r\n                      <p className=\"font-medium\">\r\n                        {contact.firstName} {contact.lastName}\r\n                      </p>\r\n                      <p className=\"text-sm text-muted-foreground\">{contact.email}</p>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-sm\">{contact.company || '-'}</td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <span className=\"px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300\">\r\n                      {contact.lifecycleStage || 'Lead'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-sm\">{contact.touchpointCount}</td>\r\n                  <td className=\"px-4 py-3 text-right text-sm font-medium\">\r\n                    ${contact.totalDealValue.toLocaleString()}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {/* Deals Tab */}\r\n      {activeTab === 'deals' && (\r\n        <div className=\"rounded-xl border bg-card shadow-card overflow-hidden\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-muted/50\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Deal</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Stage</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Close Date</th>\r\n                <th className=\"px-4 py-3 text-right text-sm font-medium\">Amount</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {deals?.items.map((deal) => (\r\n                <tr key={deal.id} className=\"hover:bg-muted/30\">\r\n                  <td className=\"px-4 py-3\">\r\n                    <p className=\"font-medium\">{deal.dealName}</p>\r\n                    <p className=\"text-sm text-muted-foreground\">{deal.pipeline}</p>\r\n                  </td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <span\r\n                      className={cn(\r\n                        'px-2 py-1 rounded-full text-xs',\r\n                        deal.stage === 'won' &&\r\n                          'bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300',\r\n                        deal.stage === 'lost' &&\r\n                          'bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300',\r\n                        !['won', 'lost'].includes(deal.stage) &&\r\n                          'bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300'\r\n                      )}\r\n                    >\r\n                      {deal.stage}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-sm\">\r\n                    {deal.closeDate ? new Date(deal.closeDate).toLocaleDateString() : '-'}\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right font-medium\">\r\n                    {deal.currency} {deal.amount.toLocaleString()}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {/* Writeback Tab */}\r\n      {activeTab === 'writeback' && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div>\r\n                <h2 className=\"text-lg font-semibold\">HubSpot Writeback</h2>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Automatically sync attribution data back to HubSpot properties\r\n                </p>\r\n              </div>\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={writebackConfig?.enabled || false}\r\n                  onChange={(e) => updateWriteback.mutate({ enabled: e.target.checked })}\r\n                  className=\"w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary\"\r\n                />\r\n                <span className=\"text-sm font-medium\">Enable Writeback</span>\r\n              </label>\r\n            </div>\r\n\r\n            {writebackConfig?.enabled && (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"p-4 rounded-lg bg-muted/50\">\r\n                  <h3 className=\"font-medium mb-2\">Property Mappings</h3>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-muted-foreground\">First Touch Channel</span>\r\n                      <span>stratum_first_touch_channel</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-muted-foreground\">Last Touch Channel</span>\r\n                      <span>stratum_last_touch_channel</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-muted-foreground\">Attributed Revenue</span>\r\n                      <span>stratum_attributed_revenue</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-4 rounded-lg bg-muted/50\">\r\n                  <h3 className=\"font-medium mb-2\">Sync Status</h3>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <CheckCircleIcon className=\"h-5 w-5 text-emerald-500\" />\r\n                    <span className=\"text-sm\">\r\n                      Last synced:{' '}\r\n                      {writebackConfig.lastSyncAt\r\n                        ? new Date(writebackConfig.lastSyncAt).toLocaleString()\r\n                        : 'Never'}\r\n                    </span>\r\n                  </div>\r\n                  {writebackConfig.errorCount > 0 && (\r\n                    <p className=\"text-sm text-amber-600 mt-2\">\r\n                      {writebackConfig.errorCount} sync errors\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["crmApi","apiClient","connectionId","authCode","settings","params","contactId","dealId","config","syncId","useCRMConnections","useQuery","useTriggerCRMSync","queryClient","useQueryClient","useMutation","useCRMContacts","useCRMDeals","usePipelineSummary","useWritebackConfig","useUpdateWritebackConfig","Integrations","useParams","activeTab","setActiveTab","useState","connections","loadingConnections","pipelineSummary","contacts","deals","writebackConfig","triggerSync","updateWriteback","hubspotConnection","c","tabs","getStatusIcon","status","jsx","CheckCircleIcon","XCircleIcon","ArrowPathIcon","ExclamationTriangleIcon","jsxs","cn","tab","LinkIcon","UserGroupIcon","CurrencyDollarIcon","contact","deal","e"],"mappings":"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"}