{"version":3,"file":"CDPComputedTraits-BY6TcIdn.js","sources":["../../src/components/cdp/ComputedTraitBuilder.tsx","../../src/views/cdp/CDPComputedTraits.tsx"],"sourcesContent":["/**\r\n * CDP Computed Trait Builder Component\r\n * UI for creating and managing computed traits\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { Activity, Calculator, Clock, Hash, Plus, RefreshCw, Trash2 } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  CDPComputedTrait,\r\n  ComputedTraitCreate,\r\n  TraitType,\r\n  useComputedTraits,\r\n  useCreateComputedTrait,\r\n  useDeleteComputedTrait,\r\n} from '@/api/cdp';\r\n\r\nconst TRAIT_TYPES = [\r\n  { value: 'count', label: 'Count', icon: Hash, description: 'Count of events' },\r\n  { value: 'sum', label: 'Sum', icon: Calculator, description: 'Sum of property values' },\r\n  { value: 'average', label: 'Average', icon: Activity, description: 'Average of values' },\r\n  { value: 'min', label: 'Minimum', icon: Activity, description: 'Minimum value' },\r\n  { value: 'max', label: 'Maximum', icon: Activity, description: 'Maximum value' },\r\n  { value: 'first', label: 'First', icon: Clock, description: 'First occurrence' },\r\n  { value: 'last', label: 'Last', icon: Clock, description: 'Most recent occurrence' },\r\n  { value: 'unique_count', label: 'Unique Count', icon: Hash, description: 'Count unique values' },\r\n  { value: 'exists', label: 'Exists', icon: Activity, description: 'Boolean if exists' },\r\n];\r\n\r\nconst OUTPUT_TYPES = [\r\n  { value: 'number', label: 'Number' },\r\n  { value: 'string', label: 'Text' },\r\n  { value: 'boolean', label: 'Boolean' },\r\n  { value: 'date', label: 'Date' },\r\n];\r\n\r\ninterface TraitFormData {\r\n  name: string;\r\n  display_name: string;\r\n  description: string;\r\n  trait_type: string;\r\n  output_type: string;\r\n  event_name: string;\r\n  property: string;\r\n  time_window_days: number | null;\r\n  default_value: string;\r\n}\r\n\r\nconst initialFormData: TraitFormData = {\r\n  name: '',\r\n  display_name: '',\r\n  description: '',\r\n  trait_type: 'count',\r\n  output_type: 'number',\r\n  event_name: '',\r\n  property: '',\r\n  time_window_days: null,\r\n  default_value: '',\r\n};\r\n\r\nexport function ComputedTraitBuilder() {\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [formData, setFormData] = useState<TraitFormData>(initialFormData);\r\n  const [deletingId, setDeletingId] = useState<string | null>(null);\r\n\r\n  const { data: traitsData, isLoading, refetch } = useComputedTraits({ active_only: false });\r\n  const createMutation = useCreateComputedTrait();\r\n  const deleteMutation = useDeleteComputedTrait();\r\n\r\n  const traits = traitsData?.traits || [];\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    const traitCreate: ComputedTraitCreate = {\r\n      name: formData.name.toLowerCase().replace(/\\s+/g, '_'),\r\n      display_name: formData.display_name,\r\n      description: formData.description || undefined,\r\n      trait_type: formData.trait_type as TraitType,\r\n      output_type: formData.output_type,\r\n      source_config: {\r\n        event_name: formData.event_name || undefined,\r\n        property: formData.property || undefined,\r\n        time_window_days: formData.time_window_days || undefined,\r\n      },\r\n      default_value: formData.default_value || undefined,\r\n    };\r\n\r\n    try {\r\n      await createMutation.mutateAsync(traitCreate);\r\n      setFormData(initialFormData);\r\n      setShowForm(false);\r\n    } catch (error) {\r\n      console.error('Failed to create trait:', error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (traitId: string) => {\r\n    setDeletingId(traitId);\r\n    try {\r\n      await deleteMutation.mutateAsync(traitId);\r\n    } catch (error) {\r\n      console.error('Failed to delete trait:', error);\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const getTraitTypeInfo = (type: string) => {\r\n    return TRAIT_TYPES.find((t) => t.value === type) || TRAIT_TYPES[0];\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold\">Computed Traits</h2>\r\n          <p className=\"text-muted-foreground\">\r\n            Define derived values calculated from profile events\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => refetch()}\r\n            className=\"px-3 py-2 rounded-lg border hover:bg-muted transition-colors\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => setShowForm(!showForm)}\r\n            className=\"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 flex items-center gap-2\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            New Trait\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Form */}\r\n      {showForm && (\r\n        <div className=\"p-6 rounded-xl border bg-card\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Create Computed Trait</h3>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Display Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.display_name}\r\n                  onChange={(e) =>\r\n                    setFormData({\r\n                      ...formData,\r\n                      display_name: e.target.value,\r\n                      name: e.target.value.toLowerCase().replace(/\\s+/g, '_'),\r\n                    })\r\n                  }\r\n                  placeholder=\"e.g., Total Purchases\"\r\n                  className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Internal Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.name}\r\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                  placeholder=\"e.g., total_purchases\"\r\n                  className=\"w-full px-3 py-2 rounded-lg border bg-background font-mono text-sm\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1\">Description</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                placeholder=\"Optional description\"\r\n                className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Trait Type</label>\r\n                <select\r\n                  value={formData.trait_type}\r\n                  onChange={(e) => setFormData({ ...formData, trait_type: e.target.value })}\r\n                  className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n                >\r\n                  {TRAIT_TYPES.map((type) => (\r\n                    <option key={type.value} value={type.value}>\r\n                      {type.label} - {type.description}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Output Type</label>\r\n                <select\r\n                  value={formData.output_type}\r\n                  onChange={(e) => setFormData({ ...formData, output_type: e.target.value })}\r\n                  className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n                >\r\n                  {OUTPUT_TYPES.map((type) => (\r\n                    <option key={type.value} value={type.value}>\r\n                      {type.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-4 rounded-lg bg-muted/50 space-y-4\">\r\n              <h4 className=\"font-medium\">Source Configuration</h4>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Event Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.event_name}\r\n                    onChange={(e) => setFormData({ ...formData, event_name: e.target.value })}\r\n                    placeholder=\"e.g., Purchase, PageView\"\r\n                    className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">\r\n                    Property (for aggregations)\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.property}\r\n                    onChange={(e) => setFormData({ ...formData, property: e.target.value })}\r\n                    placeholder=\"e.g., total, price\"\r\n                    className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Time Window (days)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.time_window_days || ''}\r\n                    onChange={(e) =>\r\n                      setFormData({\r\n                        ...formData,\r\n                        time_window_days: e.target.value ? parseInt(e.target.value) : null,\r\n                      })\r\n                    }\r\n                    placeholder=\"Leave empty for all time\"\r\n                    className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n                    min={1}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Default Value</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.default_value}\r\n                    onChange={(e) => setFormData({ ...formData, default_value: e.target.value })}\r\n                    placeholder=\"Value when no data\"\r\n                    className=\"w-full px-3 py-2 rounded-lg border bg-background\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setShowForm(false);\r\n                  setFormData(initialFormData);\r\n                }}\r\n                className=\"px-4 py-2 rounded-lg border hover:bg-muted\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={createMutation.isPending}\r\n                className=\"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50\"\r\n              >\r\n                {createMutation.isPending ? 'Creating...' : 'Create Trait'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Traits List */}\r\n      {isLoading ? (\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <RefreshCw className=\"w-6 h-6 animate-spin text-muted-foreground\" />\r\n        </div>\r\n      ) : traits.length === 0 ? (\r\n        <div className=\"text-center py-12 text-muted-foreground\">\r\n          <Calculator className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\r\n          <p>No computed traits defined yet.</p>\r\n          <p className=\"text-sm\">Create your first trait to start enriching profiles.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid gap-4\">\r\n          {traits.map((trait: CDPComputedTrait) => {\r\n            const typeInfo = getTraitTypeInfo(trait.trait_type);\r\n            const TypeIcon = typeInfo.icon;\r\n\r\n            return (\r\n              <div\r\n                key={trait.id}\r\n                className=\"p-4 rounded-xl border bg-card hover:border-primary/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                      <TypeIcon className=\"w-5 h-5 text-primary\" />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-semibold\">{trait.display_name}</h3>\r\n                      <p className=\"text-sm text-muted-foreground font-mono\">{trait.name}</p>\r\n                      {trait.description && (\r\n                        <p className=\"text-sm text-muted-foreground mt-1\">{trait.description}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => handleDelete(trait.id)}\r\n                    disabled={deletingId === trait.id}\r\n                    className=\"p-2 rounded-lg hover:bg-destructive/10 hover:text-destructive transition-colors\"\r\n                  >\r\n                    {deletingId === trait.id ? (\r\n                      <RefreshCw className=\"w-4 h-4 animate-spin\" />\r\n                    ) : (\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                    )}\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"mt-4 flex flex-wrap gap-2\">\r\n                  <span className=\"px-2 py-1 rounded-full text-xs bg-primary/10 text-primary\">\r\n                    {typeInfo.label}\r\n                  </span>\r\n                  <span className=\"px-2 py-1 rounded-full text-xs bg-muted\">\r\n                    Output: {trait.output_type}\r\n                  </span>\r\n                  {!!trait.source_config?.event_name && (\r\n                    <span className=\"px-2 py-1 rounded-full text-xs bg-muted\">\r\n                      Event: {String(trait.source_config.event_name)}\r\n                    </span>\r\n                  )}\r\n                  {!!trait.source_config?.time_window_days && (\r\n                    <span className=\"px-2 py-1 rounded-full text-xs bg-muted\">\r\n                      Window: {String(trait.source_config.time_window_days)}d\r\n                    </span>\r\n                  )}\r\n                  <span\r\n                    className={cn(\r\n                      'px-2 py-1 rounded-full text-xs',\r\n                      trait.is_active\r\n                        ? 'bg-green-500/10 text-green-600'\r\n                        : 'bg-muted text-muted-foreground'\r\n                    )}\r\n                  >\r\n                    {trait.is_active ? 'Active' : 'Inactive'}\r\n                  </span>\r\n                </div>\r\n\r\n                {trait.last_computed_at && (\r\n                  <p className=\"text-xs text-muted-foreground mt-3\">\r\n                    Last computed: {new Date(trait.last_computed_at).toLocaleString()}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * CDP Computed Traits View\r\n * Page for managing computed traits\r\n */\r\n\r\nimport { ComputedTraitBuilder } from '@/components/cdp/ComputedTraitBuilder';\r\n\r\nexport default function CDPComputedTraits() {\r\n  return (\r\n    <div className=\"p-6\">\r\n      <ComputedTraitBuilder />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["TRAIT_TYPES","Hash","Calculator","Activity","Clock","OUTPUT_TYPES","initialFormData","ComputedTraitBuilder","showForm","setShowForm","useState","formData","setFormData","deletingId","setDeletingId","traitsData","isLoading","refetch","useComputedTraits","createMutation","useCreateComputedTrait","deleteMutation","useDeleteComputedTrait","traits","handleSubmit","e","traitCreate","error","handleDelete","traitId","getTraitTypeInfo","type","t","jsxs","jsx","RefreshCw","Plus","trait","typeInfo","TypeIcon","Trash2","_a","_b","cn","CDPComputedTraits"],"mappings":"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"}