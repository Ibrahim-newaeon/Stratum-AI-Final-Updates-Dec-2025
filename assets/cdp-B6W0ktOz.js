import{u as o,b as i,a as u}from"./vendor-query-BPt-n81V.js";import{t as s}from"./index-BQex3859.js";const r={ingestEvents:async(e,t)=>{const a=t?{source_key:t}:{};return(await s.post("/cdp/events",{events:e},{params:a})).data.data},ingestEvent:async(e,t)=>(await r.ingestEvents([e],t)).results[0],getProfile:async e=>(await s.get(`/cdp/profiles/${e}`)).data.data,lookupProfile:async(e,t)=>(await s.get("/cdp/profiles",{params:{identifier_type:e,identifier_value:t}})).data.data,listSources:async()=>(await s.get("/cdp/sources")).data.data,createSource:async e=>(await s.post("/cdp/sources",e)).data.data,health:async()=>(await s.get("/cdp/health")).data,listWebhooks:async()=>(await s.get("/cdp/webhooks")).data.data,createWebhook:async e=>(await s.post("/cdp/webhooks",e)).data.data,getWebhook:async e=>(await s.get(`/cdp/webhooks/${e}`)).data.data,updateWebhook:async(e,t)=>(await s.patch(`/cdp/webhooks/${e}`,t)).data.data,deleteWebhook:async e=>{await s.delete(`/cdp/webhooks/${e}`)},testWebhook:async e=>(await s.post(`/cdp/webhooks/${e}/test`)).data.data,rotateWebhookSecret:async e=>(await s.post(`/cdp/webhooks/${e}/rotate-secret`)).data.data,detectEventAnomalies:async e=>(await s.get("/cdp/anomalies/events",{params:e})).data,getAnomalySummary:async()=>(await s.get("/cdp/anomalies/summary")).data,exportProfiles:async e=>((e==null?void 0:e.format)||"json")==="csv"?(await s.get("/cdp/export/profiles",{params:{...e,format:"csv"},responseType:"blob"})).data:(await s.get("/cdp/export/profiles",{params:e})).data,exportEvents:async e=>((e==null?void 0:e.format)||"json")==="csv"?(await s.get("/cdp/export/events",{params:{...e,format:"csv"},responseType:"blob"})).data:(await s.get("/cdp/export/events",{params:e})).data,getIdentityGraph:async e=>(await s.get(`/cdp/profiles/${e}/identity-graph`)).data.data,getCanonicalIdentity:async e=>(await s.get(`/cdp/profiles/${e}/canonical-identity`)).data.data,getProfileMergeHistory:async e=>(await s.get(`/cdp/profiles/${e}/merge-history`)).data.data,mergeProfiles:async e=>(await s.post("/cdp/profiles/merge",e)).data.data,listMergeHistory:async e=>(await s.get("/cdp/merge-history",{params:e})).data.data,listIdentityLinks:async e=>(await s.get("/cdp/identity-links",{params:e})).data,createSegment:async e=>(await s.post("/cdp/segments",e)).data.data,listSegments:async e=>(await s.get("/cdp/segments",{params:e})).data.data,getSegment:async e=>(await s.get(`/cdp/segments/${e}`)).data.data,updateSegment:async(e,t)=>(await s.patch(`/cdp/segments/${e}`,t)).data.data,deleteSegment:async e=>{await s.delete(`/cdp/segments/${e}`)},computeSegment:async e=>(await s.post(`/cdp/segments/${e}/compute`)).data.data,previewSegment:async e=>(await s.post("/cdp/segments/preview",e)).data.data,getSegmentProfiles:async(e,t)=>(await s.get(`/cdp/segments/${e}/profiles`,{params:t})).data.data,getProfileSegments:async e=>(await s.get(`/cdp/profiles/${e}/segments`)).data.data,deleteProfile:async(e,t)=>(await s.delete(`/cdp/profiles/${e}`,{params:t})).data.data,createTrait:async e=>(await s.post("/cdp/traits",e)).data.data,listTraits:async e=>(await s.get("/cdp/traits",{params:e})).data.data,getTrait:async e=>(await s.get(`/cdp/traits/${e}`)).data.data,deleteTrait:async e=>{await s.delete(`/cdp/traits/${e}`)},computeAllTraits:async()=>(await s.post("/cdp/traits/compute")).data.data,computeProfileTraits:async e=>(await s.post(`/cdp/profiles/${e}/compute-traits`)).data.data,getProfileRFM:async(e,t)=>(await s.get(`/cdp/profiles/${e}/rfm`,{params:t})).data.data,computeRFMBatch:async e=>(await s.post("/cdp/rfm/compute",e)).data.data,getRFMSummary:async()=>(await s.get("/cdp/rfm/summary")).data.data,createFunnel:async e=>(await s.post("/cdp/funnels",e)).data.data,listFunnels:async e=>(await s.get("/cdp/funnels",{params:e})).data.data,getFunnel:async e=>(await s.get(`/cdp/funnels/${e}`)).data.data,updateFunnel:async(e,t)=>(await s.patch(`/cdp/funnels/${e}`,t)).data.data,deleteFunnel:async e=>{await s.delete(`/cdp/funnels/${e}`)},computeFunnel:async e=>(await s.post(`/cdp/funnels/${e}/compute`)).data.data,analyzeFunnel:async(e,t)=>(await s.post(`/cdp/funnels/${e}/analyze`,t)).data.data,getFunnelDropOffs:async(e,t,a)=>(await s.get(`/cdp/funnels/${e}/drop-offs/${t}`,{params:a})).data.data,getProfileFunnelJourneys:async(e,t)=>(await s.get(`/cdp/profiles/${e}/funnels`,{params:t?{funnel_id:t}:void 0})).data.data,getEventStatistics:async e=>(await s.get("/cdp/events/statistics",{params:e?{period_days:e}:void 0})).data,getEventTrends:async e=>(await s.get("/cdp/events/trends",{params:e?{period_days:e}:void 0})).data,getProfileStatistics:async()=>(await s.get("/cdp/profiles/statistics")).data,searchProfiles:async e=>(await s.post("/cdp/profiles/search",null,{params:e})).data,exportAudience:async e=>((e==null?void 0:e.format)||"json")==="csv"?(await s.post("/cdp/audiences/export",null,{params:{...e,format:"csv"},responseType:"blob"})).data:(await s.post("/cdp/audiences/export",null,{params:e})).data},n={all:["cdp"],profiles:()=>[...n.all,"profiles"],profile:e=>[...n.profiles(),e],profileByIdentifier:(e,t)=>[...n.profiles(),"lookup",e,t],sources:()=>[...n.all,"sources"],health:()=>[...n.all,"health"],webhooks:()=>[...n.all,"webhooks"],webhook:e=>[...n.webhooks(),e],anomalies:()=>[...n.all,"anomalies"],anomalySummary:()=>[...n.anomalies(),"summary"],identityGraph:e=>[...n.profiles(),e,"identity-graph"],canonicalIdentity:e=>[...n.profiles(),e,"canonical"],profileMergeHistory:e=>[...n.profiles(),e,"merge-history"],mergeHistory:()=>[...n.all,"merge-history"],identityLinks:()=>[...n.all,"identity-links"],segments:()=>[...n.all,"segments"],segment:e=>[...n.segments(),e],segmentProfiles:e=>[...n.segments(),e,"profiles"],profileSegments:e=>[...n.profiles(),e,"segments"],traits:()=>[...n.all,"traits"],trait:e=>[...n.traits(),e],profileRFM:e=>[...n.profiles(),e,"rfm"],rfmSummary:()=>[...n.all,"rfm-summary"],funnels:()=>[...n.all,"funnels"],funnel:e=>[...n.funnels(),e],funnelDropOffs:(e,t)=>[...n.funnels(),e,"drop-offs",t],profileFunnels:e=>[...n.profiles(),e,"funnels"],profileSearch:()=>[...n.profiles(),"search"],eventStatistics:e=>[...n.all,"event-statistics",e],eventTrends:e=>[...n.all,"event-trends",e],profileStatistics:()=>[...n.all,"profile-statistics"]};function y(e,t){return o({queryKey:n.profile(e),queryFn:()=>r.getProfile(e),staleTime:30*1e3,enabled:(t==null?void 0:t.enabled)??!!e})}function f(){return o({queryKey:n.health(),queryFn:()=>r.health(),staleTime:60*1e3,refetchInterval:5*60*1e3})}function m(e){return o({queryKey:[...n.anomalies(),e],queryFn:()=>r.detectEventAnomalies(e),staleTime:5*60*1e3})}function g(){return o({queryKey:n.anomalySummary(),queryFn:()=>r.getAnomalySummary(),staleTime:60*1e3,refetchInterval:5*60*1e3})}function w(e,t){return o({queryKey:n.identityGraph(e),queryFn:()=>r.getIdentityGraph(e),staleTime:30*1e3,enabled:(t==null?void 0:t.enabled)??!!e})}function q(e,t){return o({queryKey:n.profileMergeHistory(e),queryFn:()=>r.getProfileMergeHistory(e),staleTime:60*1e3,enabled:!!e})}function F(e){return o({queryKey:[...n.segments(),e],queryFn:()=>r.listSegments(e),staleTime:60*1e3})}function S(){const e=u();return i({mutationFn:t=>r.createSegment(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.segments()})}})}function v(){const e=u();return i({mutationFn:({segmentId:t,update:a})=>r.updateSegment(t,a),onSuccess:(t,{segmentId:a})=>{e.invalidateQueries({queryKey:n.segments()}),e.invalidateQueries({queryKey:n.segment(a)})}})}function h(){const e=u();return i({mutationFn:t=>r.deleteSegment(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.segments()})}})}function P(){const e=u();return i({mutationFn:t=>r.computeSegment(t),onSuccess:(t,a)=>{e.invalidateQueries({queryKey:n.segment(a)}),e.invalidateQueries({queryKey:n.segmentProfiles(a)})}})}function K(){return i({mutationFn:e=>r.previewSegment(e)})}function b(e){return o({queryKey:[...n.traits(),e],queryFn:()=>r.listTraits(e),staleTime:60*1e3})}function T(){const e=u();return i({mutationFn:t=>r.createTrait(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.traits()})}})}function $(){const e=u();return i({mutationFn:t=>r.deleteTrait(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.traits()})}})}function C(e,t,a){return o({queryKey:[...n.profileRFM(e),t],queryFn:()=>r.getProfileRFM(e,t),staleTime:5*60*1e3,enabled:!!e})}function k(){const e=u();return i({mutationFn:t=>r.computeRFMBatch(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.profiles()}),e.invalidateQueries({queryKey:n.rfmSummary()})}})}function A(){return o({queryKey:n.rfmSummary(),queryFn:()=>r.getRFMSummary(),staleTime:5*60*1e3})}function Q(e){return o({queryKey:[...n.funnels(),e],queryFn:()=>r.listFunnels(e),staleTime:60*1e3})}function M(){const e=u();return i({mutationFn:t=>r.createFunnel(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.funnels()})}})}function E(){const e=u();return i({mutationFn:({funnelId:t,update:a})=>r.updateFunnel(t,a),onSuccess:(t,{funnelId:a})=>{e.invalidateQueries({queryKey:n.funnels()}),e.invalidateQueries({queryKey:n.funnel(a)})}})}function x(){const e=u();return i({mutationFn:t=>r.deleteFunnel(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.funnels()})}})}function H(){const e=u();return i({mutationFn:t=>r.computeFunnel(t),onSuccess:(t,a)=>{e.invalidateQueries({queryKey:n.funnel(a)})}})}function R(){return i({mutationFn:({funnelId:e,params:t})=>r.analyzeFunnel(e,t)})}function D(e,t,a,c){return o({queryKey:[...n.funnelDropOffs(e,t),a],queryFn:()=>r.getFunnelDropOffs(e,t,a),staleTime:60*1e3,enabled:(c==null?void 0:c.enabled)??(!!e&&t>0)})}function _(e,t){return o({queryKey:[...n.profileSearch(),e],queryFn:()=>r.searchProfiles(e),staleTime:30*1e3,enabled:!0})}function W(){return i({mutationFn:e=>r.exportAudience(e)})}function G(e,t){return o({queryKey:n.eventStatistics(e),queryFn:()=>r.getEventStatistics(e),staleTime:5*60*1e3,enabled:!0})}function z(e,t){return o({queryKey:n.eventTrends(e),queryFn:()=>r.getEventTrends(e),staleTime:5*60*1e3,enabled:!0})}function B(e){return o({queryKey:n.profileStatistics(),queryFn:()=>r.getProfileStatistics(),staleTime:5*60*1e3,enabled:!0})}const l={getConnectedPlatforms:async()=>(await s.get("/cdp/audience-sync/platforms")).data.data,listPlatformAudiences:async e=>(await s.get("/cdp/audience-sync/audiences",{params:e})).data.data,createPlatformAudience:async e=>(await s.post("/cdp/audience-sync/audiences",e)).data.data,getPlatformAudience:async e=>(await s.get(`/cdp/audience-sync/audiences/${e}`)).data.data,triggerSync:async(e,t="update")=>(await s.post(`/cdp/audience-sync/audiences/${e}/sync`,{operation:t})).data.data,getSyncHistory:async(e,t)=>(await s.get(`/cdp/audience-sync/audiences/${e}/history`,{params:{limit:t}})).data.data,deletePlatformAudience:async(e,t=!0)=>{await s.delete(`/cdp/audience-sync/audiences/${e}`,{params:{delete_from_platform:t}})},getSegmentAudiences:async e=>(await s.get(`/cdp/audience-sync/segments/${e}/audiences`)).data.data,syncSegmentToAllPlatforms:async(e,t="update")=>(await s.post(`/cdp/audience-sync/segments/${e}/sync-all`,null,{params:{operation:t}})).data.data};function O(){return o({queryKey:[...n.all,"connected-platforms"],queryFn:()=>l.getConnectedPlatforms()})}function j(e){return o({queryKey:[...n.all,"platform-audiences",e],queryFn:()=>l.listPlatformAudiences(e)})}function J(e,t){return o({queryKey:[...n.all,"sync-history",e,t],queryFn:()=>l.getSyncHistory(e,t),enabled:!!e})}function L(){const e=u();return i({mutationFn:t=>l.createPlatformAudience(t),onSuccess:()=>{e.invalidateQueries({queryKey:[...n.all,"platform-audiences"]}),e.invalidateQueries({queryKey:[...n.all,"segment-audiences"]})}})}function U(){const e=u();return i({mutationFn:({audienceId:t,operation:a})=>l.triggerSync(t,a),onSuccess:(t,{audienceId:a})=>{e.invalidateQueries({queryKey:[...n.all,"sync-history",a]}),e.invalidateQueries({queryKey:[...n.all,"platform-audiences"]})}})}function N(){const e=u();return i({mutationFn:({audienceId:t,deleteFromPlatform:a})=>l.deletePlatformAudience(t,a),onSuccess:()=>{e.invalidateQueries({queryKey:[...n.all,"platform-audiences"]}),e.invalidateQueries({queryKey:[...n.all,"segment-audiences"]})}})}export{Q as A,x as B,H as C,R as D,D as E,M as F,E as G,b as H,T as I,$ as J,B as a,G as b,F as c,g as d,_ as e,W as f,y as g,S as h,v as i,h as j,P as k,K as l,z as m,m as n,w as o,q as p,O as q,j as r,U as s,N as t,f as u,L as v,J as w,A as x,k as y,C as z};
//# sourceMappingURL=cdp-B6W0ktOz.js.map
