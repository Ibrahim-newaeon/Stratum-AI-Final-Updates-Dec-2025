{"version":3,"file":"hooks-B2vGXtE6.js","sources":["../../src/api/hooks.ts"],"sourcesContent":["/**\r\n * Stratum AI - API Hooks\r\n *\r\n * Centralized barrel file that re-exports all API hooks\r\n * and adds new hooks for superadmin endpoints.\r\n */\r\n\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient, ApiResponse, PaginatedResponse } from './client';\r\n\r\n// =============================================================================\r\n// Re-exports from other API files\r\n// =============================================================================\r\n\r\n// EMQ V2 hooks\r\nexport {\r\n  useEmqScore,\r\n  useConfidence,\r\n  useEmqPlaybook,\r\n  useUpdatePlaybookItem,\r\n  useEmqIncidents,\r\n  useEmqImpact,\r\n  useEmqVolatility,\r\n  useAutopilotState,\r\n  useUpdateAutopilotMode,\r\n  useEmqBenchmarks,\r\n  useEmqPortfolio,\r\n} from './emqV2';\r\n\r\n// Admin hooks\r\nexport {\r\n  useUsers,\r\n  useUser,\r\n  useCreateUser,\r\n  useUpdateUser,\r\n  useDeleteUser,\r\n  useResetUserPassword,\r\n  useTenants,\r\n  useTenant,\r\n  useCreateTenant,\r\n  useUpdateTenant,\r\n  useDeleteTenant,\r\n  useSuspendTenant,\r\n  useReactivateTenant,\r\n  useTenantUsers,\r\n} from './admin';\r\n\r\n// Superadmin Analytics hooks\r\nexport {\r\n  usePlatformOverview,\r\n  useTenantProfitability,\r\n  useSignalHealthTrends,\r\n  useActionsAnalytics,\r\n} from './superadminAnalytics';\r\n\r\n// Competitors hooks\r\nexport {\r\n  useCompetitors,\r\n  useCompetitor,\r\n  useCreateCompetitor,\r\n  useUpdateCompetitor,\r\n  useDeleteCompetitor,\r\n  useShareOfVoice,\r\n  useCompetitorKeywords,\r\n  useCompetitorMetrics,\r\n  useRefreshCompetitor,\r\n} from './competitors';\r\n\r\n// Predictions hooks\r\nexport {\r\n  useLivePredictions,\r\n  useCampaignPredictions,\r\n  usePredictionAlerts,\r\n  useMarkAlertRead,\r\n  useRefreshPredictions,\r\n  useBudgetOptimization,\r\n  useApplyBudgetOptimization,\r\n  useScenarios,\r\n  useScenario,\r\n  useCreateScenario,\r\n  useDeleteScenario,\r\n} from './predictions';\r\n\r\n// Insights hooks\r\nexport { useInsights, useRecommendations, useAnomalies, useKPIs } from './insights';\r\n\r\n// Trust Layer hooks\r\nexport {\r\n  useSignalHealth,\r\n  useSignalHealthHistory,\r\n  useSignalHealthHistoryDetailed,\r\n  useAttributionVariance,\r\n  useTrustStatus,\r\n  useTrustGateAuditLogs,\r\n} from './trustLayer';\r\n\r\n// Autopilot hooks\r\nexport {\r\n  useAutopilotStatus,\r\n  useAutopilotActions,\r\n  useActionsSummary,\r\n  useAutopilotAction,\r\n  useQueueAction,\r\n  useApproveAction,\r\n  useApproveAllActions,\r\n  useDismissAction,\r\n  useDryRunAction,\r\n} from './autopilot';\r\n\r\n// Campaigns hooks\r\nexport {\r\n  useCampaigns,\r\n  useCampaign,\r\n  useCreateCampaign,\r\n  useUpdateCampaign,\r\n  useDeleteCampaign,\r\n  useCampaignMetrics,\r\n  useSyncCampaign,\r\n  useBulkUpdateCampaignStatus,\r\n  usePauseCampaign,\r\n  useActivateCampaign,\r\n} from './campaigns';\r\n\r\n// Assets hooks\r\nexport {\r\n  useAssets,\r\n  useAsset,\r\n  useCreateAsset,\r\n  useUploadAsset,\r\n  useUpdateAsset,\r\n  useDeleteAsset,\r\n  useAssetFolders,\r\n  useCreateFolder,\r\n  useFatiguedAssets,\r\n  useCalculateFatigue,\r\n  useBulkArchiveAssets,\r\n} from './assets';\r\n\r\n// Rules hooks\r\nexport {\r\n  useRules,\r\n  useRule,\r\n  useCreateRule,\r\n  useUpdateRule,\r\n  useDeleteRule,\r\n  useToggleRule,\r\n  useExecuteRule,\r\n  useRuleExecutions,\r\n  useRuleTemplates,\r\n  useValidateConditions,\r\n} from './rules';\r\n\r\n// Feature flags hooks\r\nexport {\r\n  useFeatureFlags,\r\n  useUpdateFeatureFlags,\r\n  useSuperadminFeatureFlags,\r\n  useSuperadminUpdateFeatureFlags,\r\n  useSuperadminResetFeatureFlags,\r\n} from './featureFlags';\r\n\r\n// GDPR hooks (exclude useAuditLogs since we have our own)\r\nexport {\r\n  useExportData,\r\n  useExportStatus,\r\n  useExportHistory,\r\n  useAnonymizeData,\r\n  useAnonymizationStatus,\r\n  useConsentRecords,\r\n  useUpdateConsent,\r\n  useDataCategories,\r\n  useRequestDeletion,\r\n  useCancelDeletion,\r\n} from './gdpr';\r\n\r\n// CRM/HubSpot Integration hooks\r\nexport {\r\n  useCRMConnections,\r\n  useCRMConnection,\r\n  useConnectHubSpot,\r\n  useDisconnectCRM,\r\n  useTriggerCRMSync,\r\n  useCRMContacts,\r\n  useCRMContact,\r\n  useContactJourney,\r\n  useCRMDeals,\r\n  useCRMDeal,\r\n  usePipelineMetrics,\r\n  usePipelineSummary,\r\n  useWritebackConfig,\r\n  useUpdateWritebackConfig,\r\n  useWritebackHistory,\r\n  useRetryWriteback,\r\n} from './crm';\r\n\r\n// Pacing & Forecasting hooks\r\nexport {\r\n  useTargets,\r\n  useTarget,\r\n  useCreateTarget,\r\n  useUpdateTarget,\r\n  useDeleteTarget,\r\n  usePacingStatus,\r\n  useAllPacingStatus,\r\n  usePacingSummary,\r\n  useDailyKPIs,\r\n  useForecast,\r\n  useMetricForecast,\r\n  useGenerateForecast,\r\n  usePacingAlerts,\r\n  usePacingAlert,\r\n  useAcknowledgeAlert,\r\n  useResolveAlert,\r\n  useDismissAlert,\r\n  useAlertStats,\r\n} from './pacing';\r\n\r\n// Profit ROAS hooks\r\nexport {\r\n  useProducts,\r\n  useProduct,\r\n  useCreateProduct,\r\n  useUpdateProduct,\r\n  useDeleteProduct,\r\n  useImportProducts,\r\n  useProductMargins,\r\n  useSetProductMargin,\r\n  useMarginRules,\r\n  useMarginRule,\r\n  useCreateMarginRule,\r\n  useUpdateMarginRule,\r\n  useDeleteMarginRule,\r\n  useUploadCOGS,\r\n  useCOGSUploads,\r\n  useCOGSUpload,\r\n  useDailyProfitMetrics,\r\n  useProfitSummary,\r\n  useGenerateProfitReport,\r\n  useProfitReports,\r\n  useProfitReport,\r\n  useTrueROAS,\r\n} from './profit';\r\n\r\n// Attribution hooks\r\nexport {\r\n  useAttributionSummary,\r\n  useDailyAttributedRevenue,\r\n  useChannelTransitions,\r\n  useTopConversionPaths,\r\n  useAssistedConversions,\r\n  useTimeLagReport,\r\n  useTrainedModels,\r\n  useTrainedModel,\r\n  useTrainMarkovModel,\r\n  useTrainShapleyModel,\r\n  useCompareModels,\r\n  useArchiveModel,\r\n  useActivateModel,\r\n} from './attribution';\r\n\r\n// Reporting hooks\r\nexport {\r\n  useReportTemplates,\r\n  useReportTemplate,\r\n  useCreateReportTemplate,\r\n  useUpdateReportTemplate,\r\n  useDeleteReportTemplate,\r\n  useReportSchedules,\r\n  useReportSchedule,\r\n  useCreateReportSchedule,\r\n  useUpdateReportSchedule,\r\n  useDeleteReportSchedule,\r\n  usePauseReportSchedule,\r\n  useResumeReportSchedule,\r\n  useGenerateReport,\r\n  useReportExecutions,\r\n  useReportExecution,\r\n  useDeliveryStatus,\r\n  useDeliveryChannelConfigs,\r\n  useUpdateDeliveryChannelConfig,\r\n  useVerifyDeliveryChannel,\r\n} from './reporting';\r\n\r\n// Tenant Dashboard hooks\r\nexport { useUpdateTenantSettings, useTestSlackWebhook } from './hooks/useTenantDashboard';\r\n\r\n// Onboarding hooks\r\nexport {\r\n  useOnboardingStatus,\r\n  useOnboardingCheck,\r\n  useSubmitBusinessProfile,\r\n  useSubmitPlatformSelection,\r\n  useSubmitGoalsSetup,\r\n  useSubmitAutomationPreferences,\r\n  useSubmitTrustGateConfig,\r\n  useSkipOnboarding,\r\n  useResetOnboarding,\r\n} from './onboarding';\r\n\r\n// Dashboard hooks\r\nexport {\r\n  useDashboardOverview,\r\n  useDashboardCampaigns,\r\n  useDashboardRecommendations,\r\n  useApproveRecommendation,\r\n  useRejectRecommendation,\r\n  useDashboardActivity,\r\n  useDashboardQuickActions,\r\n  useDashboardSignalHealth,\r\n} from './dashboard';\r\n\r\n// CDP (Customer Data Platform) hooks\r\nexport {\r\n  // API client and types\r\n  cdpApi,\r\n  cdpQueryKeys,\r\n  createTracker,\r\n  // Profile hooks\r\n  useCDPProfile,\r\n  useCDPProfileLookup,\r\n  useDeleteProfile,\r\n  useSearchProfiles,\r\n  useSearchProfilesMutation,\r\n  useProfileStatistics,\r\n  // Source hooks\r\n  useCDPSources,\r\n  useCreateSource,\r\n  // Event hooks\r\n  useIngestEvents,\r\n  useIngestEvent,\r\n  useEventStatistics,\r\n  useEventTrends,\r\n  // Health hook\r\n  useCDPHealth,\r\n  // Webhook hooks\r\n  useCDPWebhooks,\r\n  useCDPWebhook,\r\n  useCreateWebhook,\r\n  useUpdateWebhook,\r\n  useDeleteWebhook,\r\n  useTestWebhook,\r\n  useRotateWebhookSecret,\r\n  // Anomaly hooks\r\n  useEventAnomalies,\r\n  useAnomalySummary,\r\n  // Identity Graph hooks\r\n  useIdentityGraph,\r\n  useCanonicalIdentity,\r\n  useProfileMergeHistory,\r\n  useMergeHistory,\r\n  useIdentityLinks,\r\n  useMergeProfiles,\r\n  // Segment hooks\r\n  useSegments,\r\n  useSegment,\r\n  useCreateSegment,\r\n  useUpdateSegment,\r\n  useDeleteSegment,\r\n  useComputeSegment,\r\n  usePreviewSegment,\r\n  useSegmentProfiles,\r\n  useProfileSegments,\r\n  // Computed Traits hooks\r\n  useComputedTraits,\r\n  useComputedTrait,\r\n  useCreateComputedTrait,\r\n  useDeleteComputedTrait,\r\n  useComputeAllTraits,\r\n  // RFM hooks\r\n  useProfileRFM,\r\n  useComputeRFMBatch,\r\n  useRFMSummary,\r\n  // Funnel hooks\r\n  useFunnels,\r\n  useFunnel,\r\n  useCreateFunnel,\r\n  useUpdateFunnel,\r\n  useDeleteFunnel,\r\n  useComputeFunnel,\r\n  useAnalyzeFunnel,\r\n  useFunnelDropOffs,\r\n  useProfileFunnelJourneys,\r\n  // Export hooks\r\n  useExportAudience,\r\n  // Type exports\r\n  type IdentifierType,\r\n  type IdentifierInput,\r\n  type Identifier,\r\n  type EventInput,\r\n  type EventBatchInput,\r\n  type EventBatchResponse,\r\n  type CDPEvent,\r\n  type CDPProfile,\r\n  type ProfileListResponse,\r\n  type CDPSource,\r\n  type SourceCreate,\r\n  type SourceListResponse,\r\n  type CDPWebhook,\r\n  type WebhookCreate,\r\n  type WebhookUpdate,\r\n  type CDPSegment,\r\n  type SegmentCreate,\r\n  type SegmentUpdate,\r\n  type SegmentRules,\r\n  type CDPComputedTrait,\r\n  type ComputedTraitCreate,\r\n  type RFMScores,\r\n  type RFMSegment,\r\n  type CDPFunnel,\r\n  type FunnelCreate,\r\n  type FunnelUpdate,\r\n  type FunnelStep,\r\n  type ProfileSearchParams,\r\n  type AudienceExportParams,\r\n} from './cdp';\r\n\r\n// =============================================================================\r\n// Tenant Overview Hooks (for tenant dashboard)\r\n// =============================================================================\r\n\r\n/**\r\n * Get tenant overview data (wraps insights for common use case)\r\n */\r\nexport function useTenantOverview(tenantId: number) {\r\n  return useQuery({\r\n    queryKey: ['tenant', 'overview', tenantId],\r\n    queryFn: async () => {\r\n      const response = await apiClient.get<\r\n        ApiResponse<{\r\n          kpis: { total_spend: number; total_revenue: number; roas: number; cpa: number };\r\n          signal_health_status: string;\r\n          autopilot_status: string;\r\n          recent_actions: number;\r\n        }>\r\n      >(`/analytics/tenant-overview`);\r\n      return response.data.data;\r\n    },\r\n    staleTime: 60 * 1000,\r\n    refetchInterval: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get tenant recommendations\r\n */\r\nexport function useTenantRecommendations(tenantId: number, options?: { limit?: number }) {\r\n  return useQuery({\r\n    queryKey: ['tenant', 'recommendations', tenantId, options],\r\n    queryFn: async () => {\r\n      const params = options?.limit ? `?limit=${options.limit}` : '';\r\n      const response = await apiClient.get<\r\n        ApiResponse<{\r\n          recommendations: Array<{\r\n            id: string;\r\n            type: string;\r\n            priority: string;\r\n            title: string;\r\n            description: string;\r\n            expected_impact: number;\r\n          }>;\r\n          total: number;\r\n        }>\r\n      >(`/insights/tenant/${tenantId}/recommendations${params}`);\r\n      return response.data.data;\r\n    },\r\n    staleTime: 60 * 1000,\r\n  });\r\n}\r\n\r\n// =============================================================================\r\n// Superadmin Dashboard Types\r\n// =============================================================================\r\n\r\nexport interface RevenueMetrics {\r\n  mrr: number;\r\n  arr: number;\r\n  nrr: number;\r\n  mrrGrowth: number;\r\n  arrGrowth: number;\r\n  churnRate: number;\r\n}\r\n\r\nexport interface RevenueBreakdown {\r\n  plan: string;\r\n  tenantCount: number;\r\n  mrr: number;\r\n  percentage: number;\r\n}\r\n\r\nexport interface TenantPortfolioItem {\r\n  id: number;\r\n  name: string;\r\n  plan: string;\r\n  status: string;\r\n  emqScore: number | null;\r\n  budgetAtRisk: number;\r\n  activeIncidents: number;\r\n  monthlySpend: number;\r\n  churnRisk: number;\r\n  lastActivityAt: string | null;\r\n}\r\n\r\nexport interface SystemHealthMetrics {\r\n  overallStatus: 'healthy' | 'degraded' | 'down';\r\n  services: Array<{\r\n    name: string;\r\n    status: 'healthy' | 'degraded' | 'down';\r\n    uptime: number;\r\n    latency: number;\r\n    version: string;\r\n  }>;\r\n  connectors: Array<{\r\n    platform: string;\r\n    status: 'healthy' | 'degraded' | 'down';\r\n    lastSync: string;\r\n    errors: number;\r\n    recordsProcessed: number;\r\n  }>;\r\n  queues: Array<{\r\n    name: string;\r\n    status: 'running' | 'paused' | 'stalled';\r\n    pending: number;\r\n    processing: number;\r\n    completed: number;\r\n    failed: number;\r\n    avgProcessTime: number;\r\n  }>;\r\n  metrics: {\r\n    cpu: number;\r\n    memory: number;\r\n    disk: number;\r\n    network: number;\r\n    activeConnections: number;\r\n    requestsPerMinute: number;\r\n    errorRate: number;\r\n  };\r\n}\r\n\r\nexport interface ChurnRisk {\r\n  tenantId: number;\r\n  tenantName: string;\r\n  riskScore: number;\r\n  riskLevel: 'low' | 'medium' | 'high' | 'critical';\r\n  factors: string[];\r\n  lastActivityAt: string | null;\r\n  monthlySpend: number;\r\n}\r\n\r\nexport interface AuditLogEntry {\r\n  id: string;\r\n  timestamp: string;\r\n  action: string;\r\n  details: string;\r\n  userId: string;\r\n  userName: string | null;\r\n  tenantId: number | null;\r\n  tenantName: string | null;\r\n  ipAddress: string | null;\r\n  userAgent: string | null;\r\n  severity: 'info' | 'warning' | 'error' | 'critical';\r\n  metadata: Record<string, unknown>;\r\n}\r\n\r\nexport interface BillingPlan {\r\n  id: string;\r\n  name: string;\r\n  price: number;\r\n  features: string[];\r\n  subscriberCount: number;\r\n  mrr: number;\r\n}\r\n\r\nexport interface BillingInvoice {\r\n  id: string;\r\n  tenantId: number;\r\n  tenantName: string;\r\n  amount: number;\r\n  status: 'paid' | 'pending' | 'overdue' | 'failed';\r\n  dueDate: string;\r\n  paidAt: string | null;\r\n}\r\n\r\nexport interface BillingSubscription {\r\n  id: string;\r\n  tenantId: number;\r\n  tenantName: string;\r\n  plan: string;\r\n  status: 'active' | 'past_due' | 'canceled' | 'trialing';\r\n  mrr: number;\r\n  startDate: string;\r\n  nextBillingDate: string;\r\n  paymentMethod: string;\r\n  failedPayments: number;\r\n}\r\n\r\nexport interface SuperadminDashboard {\r\n  totalRevenue: number;\r\n  mrrGrowth: number;\r\n  activeTenants: number;\r\n  atRiskTenants: number;\r\n  totalBudgetAtRisk: number;\r\n  systemStatus: 'healthy' | 'degraded' | 'down';\r\n}\r\n\r\n// =============================================================================\r\n// Superadmin API Functions\r\n// =============================================================================\r\n\r\nexport const superadminApi = {\r\n  // Dashboard\r\n  getDashboard: async (): Promise<SuperadminDashboard> => {\r\n    const response = await apiClient.get<ApiResponse<SuperadminDashboard>>('/superadmin/dashboard');\r\n    return response.data.data;\r\n  },\r\n\r\n  // Revenue\r\n  getRevenue: async (): Promise<RevenueMetrics> => {\r\n    const response = await apiClient.get<ApiResponse<RevenueMetrics>>('/superadmin/revenue');\r\n    return response.data.data;\r\n  },\r\n\r\n  getRevenueBreakdown: async (): Promise<RevenueBreakdown[]> => {\r\n    const response = await apiClient.get<ApiResponse<RevenueBreakdown[]>>(\r\n      '/superadmin/revenue/breakdown'\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Tenants Portfolio\r\n  getTenantsPortfolio: async (params?: {\r\n    status?: string;\r\n    plan?: string;\r\n    sortBy?: string;\r\n    sortOrder?: string;\r\n    skip?: number;\r\n    limit?: number;\r\n  }): Promise<PaginatedResponse<TenantPortfolioItem>> => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<TenantPortfolioItem>>>(\r\n      '/superadmin/tenants/portfolio',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // System Health\r\n  getSystemHealth: async (): Promise<SystemHealthMetrics> => {\r\n    const response = await apiClient.get<ApiResponse<SystemHealthMetrics>>(\r\n      '/superadmin/system/health'\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Churn Risks\r\n  getChurnRisks: async (params?: { minRisk?: number; limit?: number }): Promise<ChurnRisk[]> => {\r\n    const response = await apiClient.get<ApiResponse<ChurnRisk[]>>('/superadmin/churn/risks', {\r\n      params,\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  // Audit Logs\r\n  getAuditLogs: async (params?: {\r\n    startDate?: string;\r\n    endDate?: string;\r\n    action?: string;\r\n    userId?: string;\r\n    tenantId?: number;\r\n    severity?: string;\r\n    skip?: number;\r\n    limit?: number;\r\n  }): Promise<PaginatedResponse<AuditLogEntry>> => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<AuditLogEntry>>>(\r\n      '/superadmin/audit',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Billing - Plans\r\n  getBillingPlans: async (): Promise<BillingPlan[]> => {\r\n    const response = await apiClient.get<ApiResponse<BillingPlan[]>>('/superadmin/billing/plans');\r\n    return response.data.data;\r\n  },\r\n\r\n  // Billing - Invoices\r\n  getBillingInvoices: async (params?: {\r\n    status?: string;\r\n    tenantId?: number;\r\n    skip?: number;\r\n    limit?: number;\r\n  }): Promise<PaginatedResponse<BillingInvoice>> => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<BillingInvoice>>>(\r\n      '/superadmin/billing/invoices',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Billing - Subscriptions\r\n  getBillingSubscriptions: async (params?: {\r\n    status?: string;\r\n    plan?: string;\r\n    skip?: number;\r\n    limit?: number;\r\n  }): Promise<PaginatedResponse<BillingSubscription>> => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<BillingSubscription>>>(\r\n      '/superadmin/billing/subscriptions',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Retry failed payment\r\n  retryPayment: async (subscriptionId: string): Promise<{ success: boolean }> => {\r\n    const response = await apiClient.post<ApiResponse<{ success: boolean }>>(\r\n      `/superadmin/billing/subscriptions/${subscriptionId}/retry-payment`\r\n    );\r\n    return response.data.data;\r\n  },\r\n};\r\n\r\n// =============================================================================\r\n// Superadmin React Query Hooks\r\n// =============================================================================\r\n\r\n/**\r\n * Get superadmin dashboard overview\r\n */\r\nexport function useSuperAdminOverview() {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'dashboard'],\r\n    queryFn: superadminApi.getDashboard,\r\n    staleTime: 60 * 1000, // 1 minute\r\n    refetchInterval: 5 * 60 * 1000, // Refetch every 5 minutes\r\n  });\r\n}\r\n\r\n/**\r\n * Get superadmin tenant portfolio\r\n */\r\nexport function useSuperAdminTenants(params?: {\r\n  status?: string;\r\n  plan?: string;\r\n  sortBy?: string;\r\n  sortOrder?: string;\r\n  skip?: number;\r\n  limit?: number;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'tenants', params],\r\n    queryFn: () => superadminApi.getTenantsPortfolio(params),\r\n    staleTime: 30 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get revenue metrics\r\n */\r\nexport function useRevenue() {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'revenue'],\r\n    queryFn: superadminApi.getRevenue,\r\n    staleTime: 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get revenue breakdown by plan\r\n */\r\nexport function useRevenueBreakdown() {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'revenue', 'breakdown'],\r\n    queryFn: superadminApi.getRevenueBreakdown,\r\n    staleTime: 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get system health metrics\r\n */\r\nexport function useSystemHealth() {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'system', 'health'],\r\n    queryFn: superadminApi.getSystemHealth,\r\n    staleTime: 30 * 1000,\r\n    refetchInterval: 30 * 1000, // Refresh every 30 seconds\r\n  });\r\n}\r\n\r\n/**\r\n * Get churn risk tenants\r\n */\r\nexport function useChurnRisks(params?: { minRisk?: number; limit?: number }) {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'churn', 'risks', params],\r\n    queryFn: () => superadminApi.getChurnRisks(params),\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get audit logs\r\n */\r\nexport function useAuditLogs(params?: {\r\n  startDate?: string;\r\n  endDate?: string;\r\n  action?: string;\r\n  userId?: string;\r\n  tenantId?: number;\r\n  severity?: string;\r\n  skip?: number;\r\n  limit?: number;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'audit', params],\r\n    queryFn: () => superadminApi.getAuditLogs(params),\r\n    staleTime: 30 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get billing plans\r\n */\r\nexport function useBillingPlans() {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'billing', 'plans'],\r\n    queryFn: superadminApi.getBillingPlans,\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get billing invoices\r\n */\r\nexport function useBillingInvoices(params?: {\r\n  status?: string;\r\n  tenantId?: number;\r\n  skip?: number;\r\n  limit?: number;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'billing', 'invoices', params],\r\n    queryFn: () => superadminApi.getBillingInvoices(params),\r\n    staleTime: 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Get billing subscriptions\r\n */\r\nexport function useBillingSubscriptions(params?: {\r\n  status?: string;\r\n  plan?: string;\r\n  skip?: number;\r\n  limit?: number;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['superadmin', 'billing', 'subscriptions', params],\r\n    queryFn: () => superadminApi.getBillingSubscriptions(params),\r\n    staleTime: 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Retry failed payment\r\n */\r\nexport function useRetryPayment() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: superadminApi.retryPayment,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['superadmin', 'billing', 'subscriptions'] });\r\n      queryClient.invalidateQueries({ queryKey: ['superadmin', 'billing', 'invoices'] });\r\n    },\r\n  });\r\n}\r\n"],"names":["useTenantOverview","tenantId","useQuery","apiClient","useTenantRecommendations","options","superadminApi","params","subscriptionId","useSuperAdminOverview","useSuperAdminTenants","useRevenue","useSystemHealth","useChurnRisks","useAuditLogs","useBillingPlans","useBillingInvoices","useBillingSubscriptions","useRetryPayment","queryClient","useQueryClient","useMutation"],"mappings":"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"}