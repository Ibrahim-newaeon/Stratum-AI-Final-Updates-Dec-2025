import{j as e}from"./vendor-ui-B0DL0VNC.js";import{u as R,r as u,L as h}from"./vendor-react-Dz7uKsMg.js";import{u as k,h as A,z as _,A as $,B as D,t as M,W as T}from"./cms-Bf3FZYRT.js";import{F as w}from"./PlusIcon-ByQcgXHI.js";import{F as L}from"./MagnifyingGlassIcon-3MUvqIvj.js";import{ai as U,af as v}from"./index-BQex3859.js";import{F as z}from"./PencilSquareIcon-8mqFv-8U.js";import{F as E}from"./TrashIcon-DR9paOX4.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";const I=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"in_review",label:"In Review"},{value:"changes_requested",label:"Changes Requested"},{value:"approved",label:"Approved"},{value:"scheduled",label:"Scheduled"},{value:"published",label:"Published"},{value:"unpublished",label:"Unpublished"},{value:"archived",label:"Archived"},{value:"rejected",label:"Rejected"}];function Z(){const g=R(),[l,i]=u.useState({page:1,page_size:20}),[x,f]=u.useState(""),[m,r]=u.useState(null),{data:a,isLoading:j}=k({...l,search:x||void 0}),n=A(),N=_(),y=$(),C=D(),F=M(),p=(a==null?void 0:a.posts)||[],o=(a==null?void 0:a.total)||0,c=Math.ceil(o/(l.page_size||20)),S=t=>{n.mutate(t,{onSuccess:()=>r(null)})},P=t=>{switch(t.status){case"draft":return{label:"Submit for Review",action:()=>F.mutate({postId:t.id})};case"approved":return{label:"Publish",action:()=>N.mutate(t.id)};case"published":return{label:"Unpublish",action:()=>y.mutate(t.id)};case"unpublished":return{label:"Archive",action:()=>C.mutate(t.id)};default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Posts"}),e.jsxs("p",{className:"text-white/60 mt-1",children:[o," post",o!==1?"s":""," total"]})]}),e.jsxs(h,{to:"/cms/posts/new",className:"flex items-center gap-2 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(w,{className:"w-5 h-5"}),"New Post"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",value:x,onChange:t=>{f(t.target.value),i(s=>({...s,page:1}))},placeholder:"Search posts...",className:"w-full pl-10 pr-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-purple-500/50"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),e.jsx("select",{value:l.status_filter||"",onChange:t=>i(s=>({...s,status_filter:t.target.value||void 0,page:1})),className:"pl-9 pr-8 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white appearance-none focus:outline-none focus:border-purple-500/50",children:I.map(t=>e.jsx("option",{value:t.value,className:"bg-neutral-900",children:t.label},t.value))})]})]}),e.jsx("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:j?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full"})}):p.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(v,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60 mb-4",children:"No posts found"}),e.jsxs(h,{to:"/cms/posts/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(w,{className:"w-4 h-4"}),"Create your first post"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-3 border-b border-white/10 text-xs font-medium text-white/50 uppercase tracking-wider",children:[e.jsx("div",{className:"col-span-5",children:"Title"}),e.jsx("div",{className:"col-span-2",children:"Status"}),e.jsx("div",{className:"col-span-2",children:"Author"}),e.jsx("div",{className:"col-span-1",children:"Views"}),e.jsx("div",{className:"col-span-2 text-right",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-white/5",children:p.map(t=>{var b;const s=T[t.status],d=P(t);return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 px-6 py-4 hover:bg-white/5 transition-colors items-center",children:[e.jsxs("div",{className:"col-span-5 flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500/20 to-cyan-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(v,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(h,{to:`/cms/posts/${t.id}`,className:"text-white font-medium hover:text-purple-400 transition-colors truncate block",children:t.title}),e.jsxs("p",{className:"text-xs text-white/40 truncate",children:["/",t.slug," · ",t.content_type.replace("_"," "),t.is_featured&&" • Featured"]})]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${s.bgColor} ${s.color}`,children:s.label})}),e.jsx("div",{className:"col-span-2 text-sm text-white/60 truncate",children:((b=t.author)==null?void 0:b.name)||"Unassigned"}),e.jsx("div",{className:"col-span-1 text-sm text-white/60",children:t.view_count.toLocaleString()}),e.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[d&&e.jsx("button",{onClick:d.action,className:"px-3 py-1.5 text-xs font-medium bg-purple-500/20 text-purple-400 rounded-lg hover:bg-purple-500/30 transition-colors",children:d.label}),e.jsx("button",{onClick:()=>g(`/cms/posts/${t.id}`),className:"p-1.5 text-white/40 hover:text-white transition-colors",title:"Edit",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 text-white/40 hover:text-red-400 transition-colors",title:"Delete",children:e.jsx(E,{className:"w-4 h-4"})})]})]},t.id)})})]})}),c>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-white/50",children:["Page ",l.page," of ",c]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i(t=>({...t,page:(t.page||1)-1})),disabled:l.page===1,className:"px-3 py-1.5 text-sm bg-white/5 border border-white/10 rounded-lg text-white/60 hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>i(t=>({...t,page:(t.page||1)+1})),disabled:l.page===c,className:"px-3 py-1.5 text-sm bg-white/5 border border-white/10 rounded-lg text-white/60 hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed",children:"Next"})]})]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:e.jsxs("div",{className:"bg-neutral-900 border border-white/10 rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Delete Post"}),e.jsx("p",{className:"text-white/60 mb-6",children:"Are you sure you want to delete this post? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 text-white/60 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>S(m),disabled:n.isPending,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:n.isPending?"Deleting...":"Delete"})]})]})})]})}export{Z as default};
//# sourceMappingURL=CMSPosts-CBi5NQq_.js.map
