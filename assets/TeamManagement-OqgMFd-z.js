import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as a,f as $,u as P}from"./vendor-react-Dz7uKsMg.js";import{b as D,c as z,d as V,e as B}from"./admin-C8dTloZG.js";import{j as O,g as Q,c,f as W,d5 as Z}from"./index-BQex3859.js";import{F as q}from"./MagnifyingGlassIcon-3MUvqIvj.js";import{F as J}from"./XCircleIcon-Dk49lKz_.js";import{F as G}from"./PencilIcon-BPYwcoex.js";import{F as H}from"./TrashIcon-DR9paOX4.js";import{F as K}from"./EnvelopeIcon-CWLK6IWu.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";function X({title:i,titleId:m,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":m},r),i?a.createElement("title",{id:m},i):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Y=a.forwardRef(X),f=[{value:"admin",label:"Admin",description:"Full access to all features"},{value:"manager",label:"Manager",description:"Manage campaigns and team"},{value:"analyst",label:"Analyst",description:"View reports and analytics"},{value:"viewer",label:"Viewer",description:"Read-only access"}];function pe(){const{tenantId:i}=$(),m=P(),{toast:r}=O(),[n,u]=a.useState("members"),w=i?parseInt(i,10):0,{data:F,isLoading:M,refetch:v}=D(w),j=z(),y=V(),S=B(),[p,E]=a.useState(""),[A,g]=a.useState(!1),[U,b]=a.useState(!1),[o,N]=a.useState(null),[t,h]=a.useState({email:"",name:"",role:"viewer"}),C=(F||[]).filter(s=>{var l;return s.email.toLowerCase().includes(p.toLowerCase())||((l=s.name)==null?void 0:l.toLowerCase().includes(p.toLowerCase()))}),I=async()=>{if(!t.email){r({title:"Error",description:"Email is required",variant:"destructive"});return}try{const s=`Temp${Math.random().toString(36).slice(-8)}!`;await j.mutateAsync({tenantId:w,email:t.email,name:t.name||t.email.split("@")[0],password:s,role:t.role}),r({title:"Success",description:"Team member invited successfully"}),g(!1),h({email:"",name:"",role:"viewer"}),v()}catch(s){r({title:"Error",description:s instanceof Error?s.message:"Failed to invite team member",variant:"destructive"})}},k=async(s,l)=>{try{await y.mutateAsync({id:s,data:{role:l}}),r({title:"Success",description:"Role updated successfully"}),v()}catch(d){r({title:"Error",description:d instanceof Error?d.message:"Failed to update role",variant:"destructive"})}},L=async(s,l)=>{if(confirm(`Are you sure you want to remove ${l} from the team?`))try{await S.mutateAsync(s),r({title:"Success",description:"Team member removed successfully"}),v()}catch(d){r({title:"Error",description:d instanceof Error?d.message:"Failed to remove team member",variant:"destructive"})}},R=s=>{switch(s){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"manager":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"analyst":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}},T=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never";return M?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m(`/app/${i}/settings`),className:"p-2 rounded-lg hover:bg-accent transition-colors",children:e.jsx(Q,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage team members and their access permissions"})]})]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity",children:[e.jsx(Y,{className:"h-5 w-5"}),"Invite Member"]})]}),e.jsxs("div",{className:"flex items-center gap-1 p-1 rounded-lg bg-white/5 border border-white/10 w-fit",children:[e.jsx("button",{onClick:()=>u("members"),className:c("px-4 py-2 text-sm rounded-md transition-colors",n==="members"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"),children:"Team Members"}),e.jsx("button",{onClick:()=>u("roles"),className:c("px-4 py-2 text-sm rounded-md transition-colors",n==="roles"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"),children:"Roles & Permissions"})]}),n==="roles"&&e.jsx(_,{}),n==="members"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search team members...",value:p,onChange:s=>E(s.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsx("div",{className:"rounded-xl border bg-card shadow-card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-sm font-medium text-muted-foreground",children:"Member"}),e.jsx("th",{className:"text-left px-6 py-3 text-sm font-medium text-muted-foreground",children:"Role"}),e.jsx("th",{className:"text-left px-6 py-3 text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-sm font-medium text-muted-foreground",children:"Last Login"}),e.jsx("th",{className:"text-right px-6 py-3 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-muted-foreground",children:p?"No team members found matching your search.":"No team members yet. Invite your first team member!"})}):C.map(s=>{var l,d;return e.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:((d=(l=s.name)==null?void 0:l[0])==null?void 0:d.toUpperCase())||s.email[0].toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name||"No name"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:s.role,onChange:x=>k(s.id,x.target.value),className:c("px-3 py-1 rounded-full text-xs font-medium border-0 cursor-pointer",R(s.role)),children:f.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center gap-2",children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Active"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Inactive"})]})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:T(s.lastLoginAt)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{N(s),b(!0)},className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"Edit member",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>L(s.id,s.name||s.email),className:"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 transition-colors",title:"Remove member",children:e.jsx(H,{className:"h-4 w-4"})})]})})]},s.id)})})]})}),e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Role Permissions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map(s=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsx("span",{className:c("px-2 py-1 rounded-full text-xs font-medium",R(s.value)),children:s.label}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s.description})]},s.value))})]})]}),A&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>g(!1)}),e.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-xl bg-card p-6 shadow-xl",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Invite Team Member"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>h({...t,email:s.target.value}),placeholder:"email@example.com",className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>h({...t,name:s.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Role"}),e.jsx("select",{value:t.role,onChange:s=>h({...t,role:s.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:f.map(s=>e.jsxs("option",{value:s.value,children:[s.label," - ",s.description]},s.value))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 rounded-lg border hover:bg-accent transition-colors",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:j.isPending,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity disabled:opacity-50",children:j.isPending?"Inviting...":"Send Invite"})]})]})]}),U&&o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>b(!1)}),e.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-xl bg-card p-6 shadow-xl",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Edit Team Member"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:o.email,disabled:!0,className:"w-full px-4 py-2 rounded-lg border bg-muted cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:o.name||"",onChange:s=>N({...o,name:s.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Role"}),e.jsx("select",{value:o.role,onChange:s=>N({...o,role:s.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:f.map(s=>e.jsxs("option",{value:s.value,children:[s.label," - ",s.description]},s.value))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-lg border hover:bg-accent transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{await k(o.id,o.role),b(!1)},disabled:y.isPending,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity disabled:opacity-50",children:y.isPending?"Saving...":"Save Changes"})]})]})]})]})}function _(){const i=[{name:"Administrator",description:"Full platform access including billing and team management",userCount:2,permissions:["read","write","delete","admin"],color:"border-red-500/30 bg-red-500/5",badgeColor:"bg-red-500/10 text-red-400"},{name:"Manager",description:"Manage campaigns, budgets, and view all reports",userCount:3,permissions:["read","write","delete"],color:"border-blue-500/30 bg-blue-500/5",badgeColor:"bg-blue-500/10 text-blue-400"},{name:"Analyst",description:"View reports, analytics, and export data",userCount:4,permissions:["read","write"],color:"border-green-500/30 bg-green-500/5",badgeColor:"bg-green-500/10 text-green-400"},{name:"Viewer",description:"Read-only access to dashboards and reports",userCount:6,permissions:["read"],color:"border-gray-500/30 bg-gray-500/5",badgeColor:"bg-gray-500/10 text-gray-400"}],m={read:{label:"Read",color:"bg-green-500/10 text-green-400 border-green-500/20"},write:{label:"Write",color:"bg-blue-500/10 text-blue-400 border-blue-500/20"},delete:{label:"Delete",color:"bg-red-500/10 text-red-400 border-red-500/20"},admin:{label:"Admin",color:"bg-purple-500/10 text-purple-400 border-purple-500/20"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define what each role can do within your organization. Assign roles to team members in the Members tab."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(r=>e.jsxs("div",{className:c("rounded-xl border p-5 transition-all",r.color),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.description})]}),e.jsxs("span",{className:c("px-2.5 py-1 rounded-full text-xs font-medium",r.badgeColor),children:[r.userCount," user",r.userCount!==1?"s":""]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:r.permissions.map(n=>{const u=m[n];return e.jsx("span",{className:c("px-2.5 py-1 rounded-full text-xs font-medium border",u.color),children:u.label},n)})})]},r.name))})]})}export{pe as default};
//# sourceMappingURL=TeamManagement-OqgMFd-z.js.map
