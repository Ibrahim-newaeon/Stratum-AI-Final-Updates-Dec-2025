var Im=Object.defineProperty;var xm=(e,t,n)=>t in e?Im(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fr=(e,t,n)=>xm(e,typeof t!="symbol"?t+"":t,n);import{j as _}from"./vendor-ui-B0DL0VNC.js";import{r as De,L as ni}from"./vendor-react-Dz7uKsMg.js";import{i as km,an as L,ao as y,ap as Gt,aq as K,ar as be,as as we,at as Ee,au as ri,av as Rr,aw as Sr,ax as pd,ay as Br,az as Qt,aA as hd,aB as It,aC as $,aD as Ci,aE as So,aF as Ur,aG as jr,aH as ye,aI as pe,aJ as q,aK as Rm,aL as Er,aM as ae,aN as Cm,aO as Am,aP as Qn,aQ as pa,aR as P,aS as Bc,aT as Y,aU as vr,aV as Uc,aW as Nm,aX as ha,aY as it,aZ as Cr,a_ as ma,a$ as ga,b0 as Mm,b1 as Pm,b2 as ft,b3 as _a,b4 as vs,b5 as _t,b6 as md,b7 as Om,b8 as ya,b9 as Vt,ba as gd,bb as _d,bc as Ar,bd as yd,be as Lm,bf as Dm,bg as bd,bh as ba,bi as Sd,bj as Sa,bk as Hr,bl as Ed,bm as Ea,bn as vd,bo as va,bp as Eo,bq as Fm,br as Td,bs as at,bt as jc,bu as Hc,bv as wd,bw as Id,bx as Jt,by as $m,bz as Et,bA as Ft,bB as Bm,bC as Ws,bD as xd,bE as kd,bF as Um,bG as jm,bH as Hm,bI as Wm,bJ as zm,bK as Rd,bL as rn,bM as ct,bN as zs,bO as Ta,bP as ke,bQ as Wc,bR as pn,bS as qs,bT as ge,bU as Ai,bV as Ve,bW as Cd,bX as Nr,bY as qm,bZ as wa,b_ as Gm,b$ as Zn,c0 as $n,c1 as O,c2 as Ad,c3 as zc,c4 as Vm,c5 as qc,c6 as Ia,c7 as Jm,c8 as Ym,c9 as Ne,ca as Je,cb as Nd,cc as dn,cd as I,ce as Km,cf as xt,cg as Mr,ch as Ni,ci as Mi,cj as Md,ck as er,cl as xa,cm as Xm,cn as Pd,co as Qm,cp as Zm,cq as eg,cr as Od,cs as ka,ct as tg,cu as ng,cv as rg,cw as Ra,cx as Fe,cy as sg,cz as og,cA as ig,cB as ag,cC as cg,cD as ug,cE as lg,cF as dg,cG as fg,cH as pg,cI as hg,cJ as mg,cK as gg,cL as _g,cM as yg,cN as bg,cO as Sg,cP as Eg,cQ as vg,cR as Tg,M as wg,c as mr,U as Pi,E as Ld,r as Ig,v as xg,w as Dd,a1 as kg,H as Rg,aj as Cg,S as Ag}from"./index-BQex3859.js";import{C as Ng}from"./calculator-BW8tZQIw.js";import{D as Mg}from"./dollar-sign-Dosx4kzY.js";import{R as Fd}from"./refresh-cw-DLOeozaH.js";import{C as Pg}from"./copy-CekHEH52.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Lg=km("arrow-left",Og),Ts={},Gc={};function Zt(e,t){Ts[e]=Ts[e]||[],Ts[e].push(t)}function en(e,t){if(!Gc[e]){Gc[e]=!0;try{t()}catch(n){L&&y.error(`Error while instrumenting ${e}`,n)}}}function et(e,t){const n=e&&Ts[e];if(n)for(const r of n)try{r(t)}catch(s){L&&y.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Gt(r)}
Error:`,s)}}let si=null;function $d(e){const t="error";Zt(t,e),en(t,Dg)}function Dg(){si=K.onerror,K.onerror=function(e,t,n,r,s){return et("error",{column:r,error:s,line:n,msg:e,url:t}),si?si.apply(this,arguments):!1},K.onerror.__SENTRY_INSTRUMENTED__=!0}let oi=null;function Bd(e){const t="unhandledrejection";Zt(t,e),en(t,Fg)}function Fg(){oi=K.onunhandledrejection,K.onunhandledrejection=function(e){return et("unhandledrejection",e),oi?oi.apply(this,arguments):!0},K.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let Vc=!1;function Ud(){if(Vc)return;function e(){const t=be(),n=t&&we(t);if(n){const r="internal_error";L&&y.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:Ee,message:r})}}e.tag="sentry_tracingErrorCallback",Vc=!0,$d(e),Bd(e)}function Jc(e){y.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Gs(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const n of t){if(Bg(n)){if(ri(e.description,n))return L&&Jc(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?ri(e.description,n.name):!0,s=n.op?e.op&&ri(e.op,n.op):!0;if(r&&s)return L&&Jc(e),!0}return!1}function $g(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const s of e)s.parent_span_id===r&&(s.parent_span_id=n)}function Bg(e){return typeof e=="string"||e instanceof RegExp}class kt{constructor(t={}){this._traceId=t.traceId||Rr(),this._spanId=t.spanId||Sr()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:pd}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function pt(e,t=[]){return[e,t]}function Ug(e,t){const[n,r]=e;return[n,[...r,t]]}function hn(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function Oi(e,t){return hn(e,(n,r)=>t.includes(r))}function Vs(e){const t=hd(K);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function jg(e){const t=hd(K);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Js(e){const[t,n]=e;let r=JSON.stringify(t);function s(o){typeof r=="string"?r=typeof o=="string"?r+o:[Vs(r),o]:r.push(typeof o=="string"?Vs(o):o)}for(const o of n){const[i,a]=o;if(s(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Br(a))}s(c)}}return typeof r=="string"?r:Hg(r)}function Hg(e){const t=e.reduce((s,o)=>s+o.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Wg(e){let t=typeof e=="string"?Vs(e):e;function n(i){const a=t.subarray(0,i);return t=t.subarray(i+1),a}function r(){let i=t.indexOf(10);return i<0&&(i=t.length),JSON.parse(jg(n(i)))}const s=r(),o=[];for(;t.length;){const i=r(),a=typeof i.length=="number"?i.length:void 0;o.push([i,a?n(a):r()])}return[s,o]}function zg(e){return[{type:"span"},e]}function qg(e){const t=typeof e.data=="string"?Vs(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Gg={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Yc(e){return Gg[e]}function vo(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function jd(e,t,n,r){var o;const s=(o=e.sdkProcessingMetadata)==null?void 0:o.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Qt(r)},...s&&{trace:s}}}function Vg(e,t){var r,s,o,i;if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...((r=e.sdk)==null?void 0:r.integrations)||[],...t.integrations||[]],packages:[...((s=e.sdk)==null?void 0:s.packages)||[],...t.packages||[]],settings:(o=e.sdk)!=null&&o.settings||t.settings?{...(i=e.sdk)==null?void 0:i.settings,...t.settings}:void 0},e}function Jg(e,t,n,r){const s=vo(n),o={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Qt(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return pt(o,[i])}function Yg(e,t,n,r){const s=vo(n),o=e.type&&e.type!=="replay_event"?e.type:"event";Vg(e,n==null?void 0:n.sdk);const i=jd(e,s,r,t);return delete e.sdkProcessingMetadata,pt(i,[[{type:o},e]])}function Kg(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=It(e[0]),s=t==null?void 0:t.getDsn(),o=t==null?void 0:t.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!o&&s&&{dsn:Qt(s)}},{beforeSendSpan:a,ignoreSpans:c}=(t==null?void 0:t.getOptions())||{},u=c!=null&&c.length?e.filter(p=>!Gs($(p),c)):e,d=e.length-u.length;d&&(t==null||t.recordDroppedEvent("before_send","span",d));const l=a?p=>{const h=$(p),m=a(h);return m||(Ci(),h)}:$,f=[];for(const p of u){const h=l(p);h&&f.push(zg(h))}return pt(i,f)}function Xg(e){if(!L)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=$(e),{spanId:s}=e.spanContext(),o=So(e),i=we(e),a=i===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=$(i);u.push(`root ID: ${i.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}y.log(`${c}
  ${u.join(`
  `)}`)}function Qg(e){if(!L)return;const{description:t="< unknown name >",op:n="< unknown op >"}=$(e),{spanId:r}=e.spanContext(),o=we(e)===e,i=`[Tracing] Finishing "${n}" ${o?"root ":""}span "${t}" with ID ${r}`;y.log(i)}function Hd(e,t,n,r=be()){const s=r&&we(r);s&&(L&&y.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[jr]:t,[Ur]:n}))}function Kc(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Ur],o=r[jr];typeof s=="string"&&typeof o=="number"&&(t[n.name]={value:o,unit:s})}),t}const Xc=1e3;class To{constructor(t={}){this._traceId=t.traceId||Rr(),this._spanId=t.spanId||Sr(),this._startTime=t.startTimestamp||ye(),this._links=t.links,this._attributes={},this.setAttributes({[q]:"manual",[pe]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Rm:pd}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Er(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ae,"custom"),this}end(t){this._endTime||(this._endTime=Er(t),Qg(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[pe],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Am(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[q],profile_id:this._attributes[pa],exclusive_time:this._attributes[Qn],measurements:Kc(this._events),is_segment:this._isStandaloneSpan&&we(this)===this||void 0,segment_id:this._isStandaloneSpan?we(this).spanContext().spanId:void 0,links:Cm(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){L&&y.log("[Tracing] Adding an event to span:",t);const s=Qc(n)?n:r||ye(),o=Qc(n)?{}:n||{},i={name:t,time:Er(s),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=P();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===we(this)))return;if(this._isStandaloneSpan){this._sampled?e_(Kg([this],t)):(L&&y.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Bc(this).scope||Y()).captureEvent(r)}_convertSpanToTransaction(){var d;if(!Zc($(this)))return;this._name||(L&&y.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Bc(this),r=(d=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:d.normalizedRequest;if(this._sampled!==!0)return;const o=vr(this).filter(l=>l!==this&&!Zg(l)).map(l=>$(l)).filter(Zc),i=this._attributes[ae];delete this._attributes[Uc],o.forEach(l=>{delete l.data[Uc]});const a={contexts:{trace:Nm(this)},spans:o.length>Xc?o.sort((l,f)=>l.start_timestamp-f.start_timestamp).slice(0,Xc):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:It(this)},request:r,...i&&{transaction_info:{source:i}}},c=Kc(this._events);return c&&Object.keys(c).length&&(L&&y.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Qc(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Zc(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Zg(e){return e instanceof To&&e.isStandaloneSpan()}function e_(e){const t=P();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function wo(e,t,n=()=>{},r=()=>{}){let s;try{s=e()}catch(o){throw t(o),n(),o}return t_(s,t,n,r)}function t_(e,t,n,r){return ha(e)?e.then(s=>(n(),r(s),s),s=>{throw t(s),n(),s}):(n(),r(e),e)}function n_(e,t,n){if(!it(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const o=Cr(s);if(o===void 0)return L&&y.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!o)return L&&y.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,r];const i=n<o;return i||L&&y.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[i,o,r]}const Ys="__SENTRY_SUPPRESS_TRACING__";function Ct(e,t){const n=Wr();if(n.startSpan)return n.startSpan(e,t);const r=Aa(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i==null?void 0:i.clone();return ft(a,()=>qd(o)(()=>{const u=Y(),d=Na(u,o),f=e.onlyIfParent&&!d?new kt:Ca({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return Vt(u,f),wo(()=>t(f),()=>{const{status:p}=$(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Ee,message:"internal_error"})},()=>{f.end()})}))}function vt(e,t){const n=Wr();if(n.startSpanManual)return n.startSpanManual(e,t);const r=Aa(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i==null?void 0:i.clone();return ft(a,()=>qd(o)(()=>{const u=Y(),d=Na(u,o),f=e.onlyIfParent&&!d?new kt:Ca({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return Vt(u,f),wo(()=>t(f,()=>f.end()),()=>{const{status:p}=$(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Ee,message:"internal_error"})})}))}function tt(e){const t=Wr();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=Aa(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?i=>ft(e.scope,i):s!==void 0?i=>mn(s,i):i=>i())(()=>{const i=Y(),a=Na(i,s);return e.onlyIfParent&&!a?new kt:Ca({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}const r_=(e,t)=>{const n=ma(),r=ga(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:o}=e,i=P(),a=Mm(o);return i&&!Pm(i,a==null?void 0:a.org_id)?zd(t):ft(c=>{const u=gd(s,o);return c.setPropagationContext(u),Vt(c,void 0),t()})};function mn(e,t){const n=Wr();return n.withActiveSpan?n.withActiveSpan(e,t):ft(r=>(Vt(r,e||void 0),t(r)))}function Wd(e){const t=Wr();return t.suppressTracing?t.suppressTracing(e):ft(n=>{n.setSDKProcessingMetadata({[Ys]:!0});const r=e();return n.setSDKProcessingMetadata({[Ys]:void 0}),r})}function zd(e){return ft(t=>(t.setPropagationContext({traceId:Rr(),sampleRand:_d()}),L&&y.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),mn(null,e)))}function Ca({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!it()){const i=new kt;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...It(i)};vs(i,a)}return i}const s=_t();let o;if(e&&!n)o=s_(e,r,t),md(e,o);else if(e){const i=It(e),{traceId:a,spanId:c}=e.spanContext(),u=So(e);o=eu({traceId:a,parentSpanId:c,...t},r,u),vs(o,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};o=eu({traceId:i,parentSpanId:c,...t},r,u),a&&vs(o,a)}return Xg(o),Om(o,r,s),o}function Aa(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=Er(e.startTime),delete r.startTime,r}return n}function Wr(){const e=ma();return ga(e)}function eu(e,t,n){var h;const r=P(),s=(r==null?void 0:r.getOptions())||{},{name:o=""}=e,i={spanAttributes:{...e.attributes},spanName:o,parentSampled:n};r==null||r.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??n,c=i.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[Ys]?[!1]:n_(s,{name:o,parentSampled:a,attributes:c,parentSampleRate:Cr((h=u.dsc)==null?void 0:h.sample_rate)},u.sampleRand),p=new To({...e,attributes:{[ae]:"custom",[ya]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(L&&y.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function s_(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[Ys]?!1:So(e),i=o?new To({...n,parentSpanId:r,traceId:s,sampled:o}):new kt({traceId:s});md(e,i);const a=P();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function Na(e,t){if(t)return t;if(t===null)return;const n=_a(e);if(!n)return;const r=P();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?we(n):n}function qd(e){return e!==void 0?t=>mn(e,t):t=>t()}const ws={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},o_="heartbeatFailed",i_="idleTimeout",a_="finalTimeout",c_="externalFinish";function Gd(e,t={}){const n=new Map;let r=!1,s,o=c_,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=ws.idleTimeout,finalTimeout:u=ws.finalTimeout,childSpanTimeout:d=ws.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=P();if(!p||!it()){const E=new kt,C={sample_rate:"0",sampled:"false",...It(E)};return vs(E,C),E}const h=Y(),m=be(),g=u_(e);g.end=new Proxy(g.end,{apply(E,C,B){if(l&&l(g),C instanceof kt)return;const[v,...M]=B,k=v||ye(),A=Er(k),F=vr(g).filter(x=>x!==g),X=$(g);if(!F.length||!f)return N(A),Reflect.apply(E,C,[A,...M]);const Q=p.getOptions().ignoreSpans,te=F==null?void 0:F.reduce((x,G)=>{const oe=$(G);return!oe.timestamp||Q&&Gs(oe,Q)?x:x?Math.max(x,oe.timestamp):oe.timestamp},void 0),T=X.start_timestamp,W=Math.min(T?T+u/1e3:1/0,Math.max(T||-1/0,Math.min(A,te||1/0)));return N(W),Reflect.apply(E,C,[W,...M])}});function b(){s&&(clearTimeout(s),s=void 0)}function S(E){b(),s=setTimeout(()=>{!r&&n.size===0&&i&&(o=i_,g.end(E))},c)}function R(E){s=setTimeout(()=>{!r&&i&&(o=o_,g.end(E))},d)}function w(E){b(),n.set(E,!0);const C=ye();R(C+d/1e3)}function D(E){if(n.has(E)&&n.delete(E),n.size===0){const C=ye();S(C+c/1e3)}}function N(E){r=!0,n.clear(),a.forEach(F=>F()),Vt(h,m);const C=$(g),{start_timestamp:B}=C;if(!B)return;C.data[Ar]||g.setAttribute(Ar,o);const M=C.status;(!M||M==="unknown")&&g.setStatus({code:yd}),y.log(`[Tracing] Idle span "${C.op}" finished`);const k=vr(g).filter(F=>F!==g);let A=0;k.forEach(F=>{F.isRecording()&&(F.setStatus({code:Ee,message:"cancelled"}),F.end(E),L&&y.log("[Tracing] Cancelling span since span ended early",JSON.stringify(F,void 0,2)));const X=$(F),{timestamp:Q=0,start_timestamp:te=0}=X,T=te<=E,W=(u+c)/1e3,x=Q-te<=W;if(L){const G=JSON.stringify(F,void 0,2);T?x||y.log("[Tracing] Discarding span since it finished after idle span final timeout",G):y.log("[Tracing] Discarding span since it happened after idle span was finished",G)}(!x||!T)&&(Lm(g,F),A++)}),A>0&&g.setAttribute("sentry.idle_span_discarded_spans",A)}return a.push(p.on("spanStart",E=>{if(r||E===g||$(E).timestamp||E instanceof To&&E.isStandaloneSpan())return;vr(g).includes(E)&&w(E.spanContext().spanId)})),a.push(p.on("spanEnd",E=>{r||D(E.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",E=>{E===g&&(i=!0,S(),n.size&&R())})),t.disableAutoFinish||S(),setTimeout(()=>{r||(g.setStatus({code:Ee,message:"deadline_exceeded"}),o=a_,g.end())},u),g}function u_(e){const t=tt(e);return Vt(Y(),t),L&&y.log("[Tracing] Started span is an idle span"),t}const tu=[];function l_(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function d_(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return l_(r)}function f_(e,t){const n={};return t.forEach(r=>{r&&Vd(e,r,n)}),n}function nu(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function Vd(e,t,n){if(n[t.name]){L&&y.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!tu.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),tu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,o)=>r(s,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((o,i)=>r(o,i,e),{id:t.name});e.addEventProcessor(s)}L&&y.log(`Integration installed: ${t.name}`)}function Li(e){const t=P();if(!t){L&&y.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function p_(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function h_(e,t){const{value:n,unit:r}=p_(e)?e:{value:e,unit:void 0},s=m_(n),o=r&&typeof r=="string"?{unit:r}:{};if(s)return{...s,...o};if(!t||t==="skip-undefined"&&n===void 0)return;let i="";try{i=JSON.stringify(n)??""}catch{}return{value:i,type:"string",...o}}function Ks(e,t=!1){const n={};for(const[r,s]of Object.entries(e??{})){const o=h_(s,t);o&&(n[r]=o)}return n}function m_(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function Jd(e,t){return t?ft(t,()=>{const n=be(),r=n?Dm(n):bd(t);return[n?It(n):ba(e,t),r]}):[void 0,void 0]}const g_={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function __(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function y_(e,t,n,r){const s={};return t!=null&&t.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Qt(r)),pt(s,[__(e)])}const b_=100;function mt(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function S_(e,t){const n=Pa(),r=Yd(e);r===void 0?n.set(e,[t]):r.length>=b_?(Ma(e,r),n.set(e,[t])):n.set(e,[...r,t])}function Xs(e,t=Y(),n=S_){var M;const r=(t==null?void 0:t.getClient())??P();if(!r){L&&y.warn("No client available to capture log.");return}const{release:s,environment:o,enableLogs:i=!1,beforeSendLog:a}=r.getOptions();if(!i){L&&y.warn("logging option not enabled, log will not be captured.");return}const[,c]=Jd(r,t),u={...e.attributes},{user:{id:d,email:l,username:f},attributes:p={}}=Sd(_t(),t);mt(u,"user.id",d,!1),mt(u,"user.email",l,!1),mt(u,"user.name",f,!1),mt(u,"sentry.release",s),mt(u,"sentry.environment",o);const{name:h,version:m}=((M=r.getSdkMetadata())==null?void 0:M.sdk)??{};mt(u,"sentry.sdk.name",h),mt(u,"sentry.sdk.version",m);const g=r.getIntegrationByName("Replay"),b=g==null?void 0:g.getReplayId(!0);mt(u,"sentry.replay_id",b),b&&(g==null?void 0:g.getRecordingMode())==="buffer"&&mt(u,"sentry._internal.replay_is_buffering",!0);const S=e.message;if(Sa(S)){const{__sentry_template_string__:k,__sentry_template_values__:A=[]}=S;A!=null&&A.length&&(u["sentry.message.template"]=k),A.forEach((F,X)=>{u[`sentry.message.parameter.${X}`]=F})}const R=_a(t);mt(u,"sentry.trace.parent_span_id",R==null?void 0:R.spanContext().spanId);const w={...e,attributes:u};r.emit("beforeCaptureLog",w);const D=a?Hr(()=>a(w)):w;if(!D){r.recordDroppedEvent("before_send","log_item",1),L&&y.warn("beforeSendLog returned null, log will not be captured.");return}const{level:N,message:E,attributes:C={},severityNumber:B}=D,v={timestamp:ye(),level:N,body:E,trace_id:c==null?void 0:c.trace_id,severity_number:B??g_[N],attributes:{...Ks(p),...Ks(C,!0)}};n(r,v),r.emit("afterCaptureLog",D)}function Ma(e,t){const n=t??Yd(e)??[];if(n.length===0)return;const r=e.getOptions(),s=y_(n,r._metadata,r.tunnel,e.getDsn());Pa().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function Yd(e){return Pa().get(e)}function Pa(){return Ed("clientToLogBufferMap",()=>new WeakMap)}function E_(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function v_(e,t,n,r){const s={};return t!=null&&t.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Qt(r)),pt(s,[E_(e)])}const T_=1e3;function bt(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function w_(e,t){const n=La(),r=Kd(e);r===void 0?n.set(e,[t]):r.length>=T_?(Oa(e,r),n.set(e,[t])):n.set(e,[...r,t])}function I_(e,t,n){var d;const{release:r,environment:s}=t.getOptions(),o={...e.attributes};bt(o,"user.id",n.id,!1),bt(o,"user.email",n.email,!1),bt(o,"user.name",n.username,!1),bt(o,"sentry.release",r),bt(o,"sentry.environment",s);const{name:i,version:a}=((d=t.getSdkMetadata())==null?void 0:d.sdk)??{};bt(o,"sentry.sdk.name",i),bt(o,"sentry.sdk.version",a);const c=t.getIntegrationByName("Replay"),u=c==null?void 0:c.getReplayId(!0);return bt(o,"sentry.replay_id",u),u&&(c==null?void 0:c.getRecordingMode())==="buffer"&&bt(o,"sentry._internal.replay_is_buffering",!0),{...e,attributes:o}}function x_(e,t,n,r){const[,s]=Jd(t,n),o=_a(n),i=o?o.spanContext().traceId:s==null?void 0:s.trace_id,a=o?o.spanContext().spanId:void 0;return{timestamp:ye(),trace_id:i??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:{...Ks(r),...Ks(e.attributes,"skip-undefined")}}}function k_(e,t){const n=(t==null?void 0:t.scope)??Y(),r=(t==null?void 0:t.captureSerializedMetric)??w_,s=(n==null?void 0:n.getClient())??P();if(!s){L&&y.warn("No client available to capture metric.");return}const{_experiments:o,enableMetrics:i,beforeSendMetric:a}=s.getOptions();if(!(i??(o==null?void 0:o.enableMetrics)??!0)){L&&y.warn("metrics option not enabled, metric will not be captured.");return}const{user:u,attributes:d}=Sd(_t(),n),l=I_(e,s,u);s.emit("processMetric",l);const f=a||(o==null?void 0:o.beforeSendMetric),p=f?f(l):l;if(!p){L&&y.log("`beforeSendMetric` returned `null`, will not send metric.");return}const h=x_(p,s,n,d);L&&y.log("[Metric]",h),r(s,h),s.emit("afterCaptureMetric",p)}function Oa(e,t){const n=t??Kd(e)??[];if(n.length===0)return;const r=e.getOptions(),s=v_(n,r._metadata,r.tunnel,e.getDsn());La().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(s)}function Kd(e){return La().get(e)}function La(){return Ed("clientToMetricBufferMap",()=>new WeakMap)}const Da=Symbol.for("SentryBufferFullError");function Fa(e=100){const t=new Set;function n(){return t.size<e}function r(i){t.delete(i)}function s(i){if(!n())return vd(Da);const a=i();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function o(i){if(!t.size)return Ea(!0);const a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!i)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),i))];return Promise.race(c)}return{get $(){return Array.from(t)},add:s,drain:o}}const R_=60*1e3;function Xd(e,t=va()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?R_:r-t}function C_(e,t){return e[t]||e.all||0}function Qd(e,t,n=va()){return C_(e,t)>n}function Zd(e,{statusCode:t,headers:n},r=va()){const s={...e},o=n==null?void 0:n["x-sentry-rate-limits"],i=n==null?void 0:n["retry-after"];if(o)for(const a of o.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else i?s.all=r+Xd(i,r):t===429&&(s.all=r+60*1e3);return s}const ef=64;function tf(e,t,n=Fa(e.bufferSize||ef)){let r={};const s=i=>n.drain(i);function o(i){const a=[];if(hn(i,(l,f)=>{const p=Yc(f);Qd(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});const c=pt(i[0],a),u=l=>{if(Oi(c,["client_report"])){L&&y.warn(`Dropping client report. Will not send outcomes (reason: ${l}).`);return}hn(c,(f,p)=>{e.recordDroppedEvent(l,Yc(p))})},d=()=>t({body:Js(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&L&&y.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Zd(r,l),l),l=>{throw u("network_error"),L&&y.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===Da)return L&&y.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:o,flush:s}}function A_(e,t,n){const r=[{type:"client_report"},{timestamp:Eo(),discarded_events:e}];return pt(t?{dsn:t}:{},[r])}function nf(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function N_(e){var c;const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:o,data:i,op:a}=((c=e.contexts)==null?void 0:c.trace)??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:i==null?void 0:i[pa],exclusive_time:i==null?void 0:i[Qn],measurements:e.measurements,is_segment:!0}}function M_(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[pa]:e.profile_id},...e.exclusive_time&&{[Qn]:e.exclusive_time}}}},measurements:e.measurements}}const ru="Not capturing exception because it's already been captured.",su="Discarded session because of missing or non-string release",rf=Symbol.for("SentryInternalError"),sf=Symbol.for("SentryDoNotSendEventError"),P_=5e3;function Is(e){return{message:e,[rf]:!0}}function ii(e){return{message:e,[sf]:!0}}function ou(e){return!!e&&typeof e=="object"&&rf in e}function iu(e){return!!e&&typeof e=="object"&&sf in e}function au(e,t,n,r,s){let o=0,i,a=!1;e.on(n,()=>{o=0,clearTimeout(i),a=!1}),e.on(t,c=>{o+=r(c),o>=8e5?s(e):a||(a=!0,i=setTimeout(()=>{s(e)},P_))}),e.on("flush",()=>{s(e)})}class O_{constructor(t){var r,s,o;if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Fa(((r=t.transportOptions)==null?void 0:r.bufferSize)??ef),t.dsn?this._dsn=Fm(t.dsn):L&&y.warn("No DSN provided, client will not send events."),this._dsn){const i=Td(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:i})}this._options.enableLogs=this._options.enableLogs??((s=this._options._experiments)==null?void 0:s.enableLogs),this._options.enableLogs&&au(this,"afterCaptureLog","flushLogs",$_,Ma),(this._options.enableMetrics??((o=this._options._experiments)==null?void 0:o.enableMetrics)??!0)&&au(this,"afterCaptureMetric","flushMetrics",F_,Oa)}captureException(t,n,r){const s=at();if(jc(t))return L&&y.log(ru),s;const o={event_id:s,...n};return this._process(()=>this.eventFromException(t,o).then(i=>this._captureEvent(i,o,r)).then(i=>i),"error"),o.event_id}captureMessage(t,n,r,s){const o={event_id:at(),...r},i=Sa(t)?t:String(t),a=Jt(t),c=a?this.eventFromMessage(i,n,o):this.eventFromException(t,o);return this._process(()=>c.then(u=>this._captureEvent(u,o,s)),a?"unknown":"error"),o.event_id}captureEvent(t,n,r){const s=at();if(n!=null&&n.originalException&&jc(n.originalException))return L&&y.log(ru),s;const o={event_id:s,...n},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope,u=cu(t.type);return this._process(()=>this._captureEvent(t,o,a||r,c),u),o.event_id}captureSession(t){this.sendSession(t),Hc(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),s=await n.flush(t);return r&&s}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Vd(this,t,this._integrations),n||nu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Yg(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=Ug(r,qg(s));this.sendEnvelope(r).then(s=>this.emit("afterSendEvent",t,s))}sendSession(t){const{release:n,environment:r=wd}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!n){L&&y.warn(su);return}o.release=o.release||n,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!n){L&&y.warn(su);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=Jg(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;L&&y.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,s=(...o)=>n(...o);return r.add(s),()=>{r.delete(s)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return L&&y.error("Error while sending envelope:",n),{}}return L&&y.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=f_(this,t),nu(this,t)}_updateSessionFromEvent(t,n){var c,u;let r=n.level==="fatal",s=!1;const o=(c=n.exception)==null?void 0:c.values;if(o){s=!0,r=!1;for(const d of o)if(((u=d.mechanism)==null?void 0:u.handled)===!1){r=!0;break}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(Hc(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const o=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&(i!=null&&i.length)&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),Id(o,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:bd(r),...a.contexts};const c=ba(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=Y(),s=_t()){return L&&Di(t)&&y.log(`Captured error event \`${nf(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(o=>o.event_id,o=>{L&&(iu(o)?y.log(o.message):ou(o)?y.warn(o.message):y.warn(o))})}_processEvent(t,n,r,s){const o=this.getOptions(),{sampleRate:i}=o,a=of(t),c=Di(t),d=`before send for type \`${t.type||"error"}\``,l=typeof i>"u"?void 0:Cr(i);if(c&&typeof l=="number"&&_d()>l)return this.recordDroppedEvent("sample_rate","error"),vd(ii(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const f=cu(t.type);return this._prepareEvent(t,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),ii("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=D_(this,o,p,n);return L_(m,d)}).then(p=>{var g;if(p===null){if(this.recordDroppedEvent("before_send",f),a){const S=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw ii(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const b=((g=p.sdkProcessingMetadata)==null?void 0:g.spanCountBeforeProcessing)||0,S=p.spans?p.spans.length:0,R=b-S;R>0&&this.recordDroppedEvent("before_send","span",R)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const b="custom";p.transaction_info={...m,source:b}}return this.sendEvent(p,n),p}).then(null,p=>{throw iu(p)||ou(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Is(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===Da&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,o]=n.split(":");return{reason:s,category:o,quantity:r}})}_flushOutcomes(){L&&y.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){L&&y.log("No outcomes to send");return}if(!this._dsn){L&&y.log("No dsn provided, will not send outcomes");return}L&&y.log("Sending outcomes:",t);const n=A_(t,this._options.tunnel&&Qt(this._dsn));this.sendEnvelope(n)}}function cu(e){return e==="replay_event"?"replay":e||"error"}function L_(e,t){const n=`${t} must return \`null\` or a valid event.`;if(ha(e))return e.then(r=>{if(!Et(r)&&r!==null)throw Is(n);return r},r=>{throw Is(`${t} rejected with ${r}`)});if(!Et(e)&&e!==null)throw Is(n);return e}function D_(e,t,n,r){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:i,ignoreSpans:a}=t;let c=n;if(Di(c)&&s)return s(c,r);if(of(c)){if(i||a){const u=N_(c);if(a!=null&&a.length&&Gs(u,a))return null;if(i){const d=i(u);d?c=$m(n,M_(d)):Ci()}if(c.spans){const d=[],l=c.spans;for(const p of l){if(a!=null&&a.length&&Gs(p,a)){$g(l,p);continue}if(i){const h=i(p);h?d.push(h):(Ci(),d.push(p))}else d.push(p)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(o){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return o(c,r)}}return c}function Di(e){return e.type===void 0}function of(e){return e.type==="transaction"}function F_(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+af(e.attributes)}function $_(e){let t=0;return e.message&&(t+=e.message.length*2),t+af(e.attributes)}function af(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*uu(n[0]):Jt(n)?t+=uu(n):t+=100}),t}function uu(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function B_(e){return Ft(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function lu(e){return B_(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function U_(e,t){t.debug===!0&&(L?y.enable():Hr(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Y().update(t.initialScope);const r=new e(t);return cf(r),r.init(),r}function cf(e){Y().setClient(e)}const ai=100,ci=5e3,j_=36e5;function H_(e){function t(...n){L&&y.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let o=ci,i;function a(l,f,p){return Oi(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const f=await s.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof i!="number"&&i.unref&&i.unref()}function u(){i||(c(o),o=Math.min(o*2,j_))}async function d(l,f=!1){var p,h;if(!f&&Oi(l,["replay_event","replay_recording"]))return await s.push(l),c(ai),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const m=await r.send(l);let g=ai;if(m){if((p=m.headers)!=null&&p["retry-after"])g=Xd(m.headers["retry-after"]);else if((h=m.headers)!=null&&h["x-sentry-rate-limits"])g=6e4;else if((m.statusCode||0)>=400)return m}return c(g),o=ci,m}catch(m){if(await a(l,m,o))return f?await s.unshift(l):await s.push(l),u(),t("Error sending. Event queued.",m),{};throw m}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(o=ci,c(ai)),r.flush(l))}}}const xs="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function uf(e,t){let n;return hn(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function W_(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const o=uf(s,["event","transaction","profile","replay_event"]);return o&&(o.release=t),r.send(s)}}}}function z_(e,t){return pt(t?{...e[0],dsn:t}:e[0],e[1])}function q_(e,t){return n=>{const r=e(n),s=new Map,o=t||(u=>{var l;const d=u.getEvent();return(l=d==null?void 0:d.extra)!=null&&l[xs]&&Array.isArray(d.extra[xs])?d.extra[xs]:[]});function i(u,d){const l=d?`${u}:${d}`:u;let f=s.get(l);if(!f){const p=Bm(u);if(!p)return;const h=Td(p,n.tunnel);f=d?W_(e,d)({...n,url:h}):e({...n,url:h}),s.set(l,f)}return[u,f]}async function a(u){function d(h){const m=h!=null&&h.length?h:["event"];return uf(u,m)}const l=o({envelope:u,getEvent:d}).map(h=>typeof h=="string"?i(h,void 0):i(h.dsn,h.release)).filter(h=>!!h),f=l.length?l:[["",r]];return(await Promise.all(f.map(([h,m])=>m.send(z_(u,h)))))[0]}async function c(u){const d=[...s.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}const G_="thismessage:/";function $a(e){return"isRelative"in e}function Ba(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?G_:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function V_(e){if($a(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function fn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function lf(e){return e.split(/[?#]/,1)[0]}function $t(e,t=!0){if(e.startsWith("data:")){const n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",s=e.includes(";base64,"),o=e.indexOf(",");let i="";if(t&&o!==-1){const a=e.slice(o+1);i=a.length>10?`${a.slice(0,10)}... [truncated]`:a}return`data:${r}${s?",base64":""}${i?`,${i}`:""}`}return e}function df(e,t){const n=t==null?void 0:t.getDsn(),r=t==null?void 0:t.getOptions().tunnel;return Y_(e,n)||J_(e,r)}function J_(e,t){return t?du(e)===du(t):!1}function Y_(e,t){const n=Ba(e);return!n||$a(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function du(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function ff(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const K_=ff;function X_(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function pf(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:Ws})),version:Ws}),e._metadata=s}function Ua(e={}){const t=e.client||P();if(!xd()||!t)return{};const n=ma(),r=ga(n);if(r.getTraceData)return r.getTraceData(e);const s=e.scope||Y(),o=e.span||be(),i=o?kd(o):Q_(s),a=o?It(o):ba(t,s),c=Um(a);if(!jm.test(i))return y.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const d={"sentry-trace":i,baggage:c};return e.propagateTraceparent&&(d.traceparent=o?Hm(o):Z_(s)),d}function Q_(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Wm(t,r,n)}function Z_(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return zm(t,r,n)}function ey(e,t,n){let r,s,o;const i=n!=null&&n.maxWait?Math.max(n.maxWait,t):0,a=(n==null?void 0:n.setTimeoutImpl)||setTimeout;function c(){return u(),r=e(),r}function u(){s!==void 0&&clearTimeout(s),o!==void 0&&clearTimeout(o),s=o=void 0}function d(){return s!==void 0||o!==void 0?c():r}function l(){return s&&clearTimeout(s),s=a(c,t),i&&o===void 0&&(o=a(c,i)),r}return l.cancel=u,l.flush=d,l}const ty=100;function ut(e,t){const n=P(),r=_t();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=ty}=n.getOptions();if(o<=0)return;const a={timestamp:Eo(),...e},c=s?Hr(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}let fu;const ny="FunctionToString",pu=new WeakMap,ry=()=>({name:ny,setupOnce(){fu=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Rd(this),n=pu.has(P())&&t!==void 0?t:this;return fu.apply(n,e)}}catch{}},setup(e){pu.set(e,!0)}}),hf=ry,sy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],oy="EventFilters",mf=(e={})=>{let t;return{name:oy,setup(n){const r=n.getOptions();t=hu(e,r)},processEvent(n,r,s){if(!t){const o=s.getOptions();t=hu(e,o)}return iy(n,t)?null:n}}},gf=(e={})=>({...mf(e),name:"InboundFilters"});function hu(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:sy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function iy(e,t){if(e.type){if(e.type==="transaction"&&cy(e,t.ignoreTransactions))return L&&y.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${rn(e)}`),!0}else{if(ay(e,t.ignoreErrors))return L&&y.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${rn(e)}`),!0;if(fy(e))return L&&y.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${rn(e)}`),!0;if(uy(e,t.denyUrls))return L&&y.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${rn(e)}.
Url: ${Qs(e)}`),!0;if(!ly(e,t.allowUrls))return L&&y.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${rn(e)}.
Url: ${Qs(e)}`),!0}return!1}function ay(e,t){return t!=null&&t.length?nf(e).some(n=>ct(n,t)):!1}function cy(e,t){if(!(t!=null&&t.length))return!1;const n=e.transaction;return n?ct(n,t):!1}function uy(e,t){if(!(t!=null&&t.length))return!1;const n=Qs(e);return n?ct(n,t):!1}function ly(e,t){if(!(t!=null&&t.length))return!0;const n=Qs(e);return n?ct(n,t):!0}function dy(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Qs(e){var t,n;try{const r=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(o=>{var i,a,c;return((i=o.mechanism)==null?void 0:i.parent_id)===void 0&&((c=(a=o.stacktrace)==null?void 0:a.frames)==null?void 0:c.length)}),s=(n=r==null?void 0:r.stacktrace)==null?void 0:n.frames;return s?dy(s):null}catch{return L&&y.error(`Cannot extract url for event ${rn(e)}`),null}}function fy(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)!=null&&n.length?!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function py(e,t,n,r,s,o){var a;if(!((a=s.exception)!=null&&a.values)||!o||!zs(o.originalException,Error))return;const i=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;i&&(s.exception.values=Fi(e,t,r,o.originalException,n,s.exception.values,i,0))}function Fi(e,t,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(zs(r[s],Error)){mu(i,a);const u=e(t,r[s]),d=c.length;gu(u,s,d,a),c=Fi(e,t,n,r[s],s,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(zs(u,Error)){mu(i,a);const l=e(t,u),f=c.length;gu(l,`errors[${d}]`,f,a),c=Fi(e,t,n,u,s,[l,...c],l,f)}}),c}function mu(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function gu(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const _f=new Map,_u=new Set;function hy(e){if(K._sentryModuleMetadata)for(const t of Object.keys(K._sentryModuleMetadata)){const n=K._sentryModuleMetadata[t];if(_u.has(t))continue;_u.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){_f.set(s.filename,n);break}}}function my(e,t){return hy(e),_f.get(t)}function yf(e,t){var n,r;(r=(n=t.exception)==null?void 0:n.values)==null||r.forEach(s=>{var o,i;(i=(o=s.stacktrace)==null?void 0:o.frames)==null||i.forEach(a=>{if(!a.filename||a.module_metadata)return;const c=my(e,a.filename);c&&(a.module_metadata=c)})})}function bf(e){var t,n;(n=(t=e.exception)==null?void 0:t.values)==null||n.forEach(r=>{var s,o;(o=(s=r.stacktrace)==null?void 0:s.frames)==null||o.forEach(i=>{delete i.module_metadata})})}const gy=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{hn(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(bf(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;yf(n,t)})}});function ja(e){const t="console";Zt(t,e),en(t,_y)}function _y(){"console"in K&&Ta.forEach(function(e){e in K.console&&ke(K.console,e,function(t){return Wc[e]=t,function(...n){et("console",{args:n,level:e});const s=Wc[e];s==null||s.apply(K.console,n)}})})}function Zs(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const yy="CaptureConsole",by=(e={})=>{const t=e.levels||Ta,n=e.handled??!0;return{name:yy,setup(r){"console"in K&&ja(({args:s,level:o})=>{P()!==r||!t.includes(o)||Ey(s,o,n)})}}},Sy=by;function Ey(e,t,n){const r=Zs(t),s=new Error,o={level:Zs(t),extra:{arguments:e}};ft(i=>{if(i.addEventProcessor(u=>(u.logger="console",pn(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){const u=`Assertion failed: ${qs(e.slice(1)," ")||"console.assert"}`;i.setExtra("arguments",e.slice(1)),i.captureMessage(u,r,{captureContext:o,syntheticException:s})}return}const a=e.find(u=>u instanceof Error);if(a){ge(a,o);return}const c=qs(e," ");i.captureMessage(c,r,{captureContext:o,syntheticException:s})})}const vy="Dedupe",Ty=()=>{let e;return{name:vy,processEvent(t){if(t.type)return t;try{if(wy(t,e))return L&&y.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},Sf=Ty;function wy(e,t){return t?!!(Iy(e,t)||xy(e,t)):!1}function Iy(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!vf(e,t)||!Ef(e,t))}function xy(e,t){const n=yu(t),r=yu(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!vf(e,t)||!Ef(e,t))}function Ef(e,t){let n=Ai(e),r=Ai(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const o=r[s],i=n[s];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function vf(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function yu(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}const ky="ExtraErrorData",Ry=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:ky,processEvent(r,s,o){const{maxValueLength:i}=o.getOptions();return Ay(r,s,t,n,i)}}},Cy=Ry;function Ay(e,t={},n,r,s){if(!t.originalException||!Ft(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=Tf(t.originalException,r,s);if(i){const a={...e.contexts},c=Br(i,n);return Et(c)&&(Ve(c,"__sentry_skip_normalization__",!0),a[o]=c),{...e,contexts:a}}return e}function Tf(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const o of Object.keys(e)){if(r.indexOf(o)!==-1)continue;const i=e[o];s[o]=Ft(i)||typeof i=="string"?n?Cd(`${i}`,n):`${i}`:i}if(t&&e.cause!==void 0)if(Ft(e.cause)){const o=e.cause.name||e.cause.constructor.name;s.cause={[o]:Tf(e.cause,!1,n)}}else s.cause=e.cause;if(typeof e.toJSON=="function"){const o=e.toJSON();for(const i of Object.keys(o)){const a=o[i];s[i]=Ft(a)?a.toString():a}}return s}catch(r){L&&y.error("Unable to extract extra data from the Error object:",r)}return null}function Ny(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const My=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Py(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=My.exec(t);return n?n.slice(1):[]}function bu(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=Ny(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Su(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Oy(e,t){e=bu(e).slice(1),t=bu(t).slice(1);const n=Su(e.split("/")),r=Su(t.split("/")),s=Math.min(n.length,r.length);let o=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){o=a;break}let i=[];for(let a=o;a<n.length;a++)i.push("..");return i=i.concat(r.slice(o)),i.join("/")}function Ly(e,t){return Py(e)[2]||""}const Dy="RewriteFrames",Fy=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in K&&!!K.window,s=e.iteratee||$y({isBrowser:r,root:t,prefix:n});function o(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:i(c.stacktrace)}}))}}}catch{return a}}function i(a){var c;return{...a,frames:(c=a==null?void 0:a.frames)==null?void 0:c.map(u=>s(u))}}return{name:Dy,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=o(c)),c}}};function $y({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),o=/^\//.test(r.filename);if(e){if(t){const i=r.filename;i.indexOf(t)===0&&(r.filename=i.replace(t,n))}}else if(s||o){const i=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Oy(t,i):Ly(i);r.filename=`${n}${a}`}return r}}const By=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],Uy=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],jy={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},wf=["select","insert","upsert","update","delete"];function Io(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function xo(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function Hy(e,t={}){var n;switch(e){case"GET":return"select";case"POST":return(n=t.Prefer)!=null&&n.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Wy(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return n!=null&&n.startsWith("fts")?s="textSearch":n!=null&&n.startsWith("plfts")?s="textSearch[plain]":n!=null&&n.startsWith("phfts")?s="textSearch[phrase]":n!=null&&n.startsWith("wfts")?s="textSearch[websearch]":s=n&&jy[n]||"filter",`${s}(${e}, ${r.join(".")})`}function Eu(e,t=!1){return new Proxy(e,{apply(n,r,s){return Ct({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[q]:"auto.db.supabase",[pe]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},o=>Reflect.apply(n,r,s).then(i=>(i&&typeof i=="object"&&"error"in i&&i.error?(o.setStatus({code:Ee}),ge(i.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):o.setStatus({code:yd}),o.end(),i)).catch(i=>{throw o.setStatus({code:Ee}),o.end(),ge(i,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),i}).then(...s))}})}function zy(e){const t=e.auth;if(!(!t||xo(e.auth))){for(const n of By){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Eu(r))}for(const n of Uy){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Eu(r,!0))}Io(e.auth)}}function qy(e){xo(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const s=Reflect.apply(t,n,r),o=s.constructor;return Vy(o),s}}),Io(e.prototype.from))}function Gy(e){xo(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){var p;const s=wf,o=n,i=Hy(o.method,o.headers);if(!s.includes(i)||!((p=o==null?void 0:o.url)!=null&&p.pathname)||typeof o.url.pathname!="string")return Reflect.apply(t,n,r);const a=o.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[h,m]of o.url.searchParams.entries())u.push(Wy(h,m));const d=Object.create(null);if(Et(o.body))for(const[h,m]of Object.entries(o.body))d[h]=m;const l=`${i==="select"?"":`${i}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":o.schema,"db.url":o.url.origin,"db.sdk":o.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[q]:"auto.db.supabase",[pe]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),Ct({name:l,attributes:f},h=>Reflect.apply(t,n,[]).then(m=>{if(h&&(m&&typeof m=="object"&&"status"in m&&Nr(h,m.status||500),h.end()),m.error){const S=new Error(m.error.message);m.error.code&&(S.code=m.error.code),m.error.details&&(S.details=m.error.details);const R={};u.length&&(R.query=u),Object.keys(d).length&&(R.body=d),ge(S,w=>(w.addEventProcessor(D=>(pn(D,{handled:!1,type:"auto.db.supabase.postgres"}),D)),w.setContext("supabase",R),w))}const g={type:"supabase",category:`db.${i}`,message:l},b={};return u.length&&(b.query=u),Object.keys(d).length&&(b.body=d),Object.keys(b).length&&(g.data=b),ut(g),m},m=>{throw h&&(Nr(h,500),h.end()),m}).then(...r))}}),Io(e.prototype.then))}function Vy(e){for(const t of wf)xo(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,s){const o=Reflect.apply(n,r,s),i=o.constructor;return L&&y.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),Gy(i),o}}),Io(e.prototype[t]))}const If=e=>{if(!e){L&&y.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;qy(t),zy(e)},Jy="Supabase",Yy=e=>({setupOnce(){If(e)},name:Jy}),Ky=e=>Yy(e.supabaseClient),Xy=10,Qy="ZodErrors";function Zy(e){return Ft(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function eb(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function tb(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function nb(e){const t=new Set;for(const r of e.issues){const s=tb(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Cd(n.join(", "),100)}`}function rb(e,t=!1,n,r){var s;if(!((s=n.exception)!=null&&s.values)||!r.originalException||!Zy(r.originalException)||r.originalException.issues.length===0)return n;try{const i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(eb);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:nb(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}const sb=(e={})=>{const t=e.limit??Xy;return{name:Qy,processEvent(n,r){return rb(t,e.saveZodIssuesAsAttachment,n,r)}}},ob=sb,ib=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{hn(n,(r,s)=>{if(s==="event"){const o=Array.isArray(r)?r[1]:void 0;o&&(bf(o),r[1]=o)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;yf(r,n)})},processEvent(t){const n=cb(t,e.ignoreSentryInternalFrames);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](o=>!o.some(i=>e.filterKeys.includes(i)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function ab(e,t){var n;if(t!==0||!e.context_line||!e.filename||!e.filename.includes("sentry")||!e.filename.includes("helpers")||!e.context_line.includes(lb))return!1;if(e.pre_context){const r=e.pre_context.length;for(let s=0;s<r;s++)if((n=e.pre_context[s])!=null&&n.includes(ub))return!0}return!1}function cb(e,t){const n=Ai(e);if(n)return n.filter((r,s)=>!r.filename||r.lineno==null&&r.colno==null&&r.instruction_addr==null?!1:!t||!ab(r,s)).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(s=>s.startsWith(vu)).map(s=>s.slice(vu.length)):[])}const vu="_sentryBundlerPluginAppKey:",ub="Attempt to invoke user-land function",lb="fn.apply(this, wrappedArguments)",db=100,fb=10,is="flag.evaluation.";function tr(e){const n=Y().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function gn(e,t,n=db){const r=Y().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;pb(s,e,t,n)}function pb(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){L&&y.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(o=>o.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function _n(e,t,n=fb){if(typeof t!="boolean")return;const r=be();if(!r)return;const s=$(r).data;if(`${is}${e}`in s){r.setAttribute(`${is}${e}`,t);return}Object.keys(s).filter(i=>i.startsWith(is)).length<n&&r.setAttribute(`${is}${e}`,t)}const hb=()=>({name:"FeatureFlags",processEvent(e,t,n){return tr(e)},addFeatureFlag(e,t){gn(e,t),_n(e,t)}}),mb=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&ke(t,"isOn",Tu),typeof t.getFeatureValue=="function"&&ke(t,"getFeatureValue",Tu)},processEvent(t,n,r){return tr(t)}});function Tu(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(gn(n,r),_n(n,r)),r}}const gb="ConversationId",_b=()=>({name:gb,setup(e){e.on("spanStart",t=>{const n=Y().getScopeData(),r=_t().getScopeData(),s=n.conversationId||r.conversationId;s&&t.setAttribute(qm,s)})}}),yb=_b;function bb(e,t,n,r,s){if(!e.fetchData)return;const{method:o,url:i}=e.fetchData,a=it()&&t(i);if(e.endTimestamp&&a){const p=e.fetchData.__span;if(!p)return;const h=r[p];h&&(vb(h,e),Sb(h,e,s),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof s=="object"?s:{spanOrigin:s},d=!!be(),l=a&&d?tt(wb(i,o,c)):new kt;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){const p=e.args[0],h={...e.args[1]||{}},m=Eb(p,h,it()&&d?l:void 0,u);m&&(e.args[1]=h,h.headers=m)}const f=P();if(f){const p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function Sb(e,t,n){var s;const r=typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0;r==null||r(e,{headers:(s=t.response)==null?void 0:s.headers,error:t.error})}function Eb(e,t,n,r){const s=Ua({span:n,propagateTraceparent:r}),o=s["sentry-trace"],i=s.baggage,a=s.traceparent;if(!o)return;const c=t.headers||(wa(e)?e.headers:void 0);if(c)if(Tb(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",o),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),i){const d=u.get("baggage");d?as(d)||u.set("baggage",`${d},${i}`):u.set("baggage",i)}return u}else if(Array.isArray(c)){const u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",o]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);const d=c.find(l=>l[0]==="baggage"&&as(l[1]));return i&&!d&&u.push(["baggage",i]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(m=>as(m)):as(l));i&&!p&&f.push(i);const h={...c,"sentry-trace":u??o,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(h.traceparent=a),h}else return{...s}}function vb(e,t){var n,r;if(t.response){Nr(e,t.response.status);const s=(r=(n=t.response)==null?void 0:n.headers)==null?void 0:r.get("content-length");if(s){const o=parseInt(s);o>0&&e.setAttribute("http.response_content_length",o)}}else t.error&&e.setStatus({code:Ee,message:"internal_error"});e.end()}function as(e){return e.split(",").some(t=>t.trim().startsWith(Gm))}function Tb(e){return typeof Headers<"u"&&zs(e,Headers)}function wb(e,t,n){if(e.startsWith("data:")){const o=$t(e);return{name:`${t} ${o}`,attributes:wu(e,void 0,t,n)}}const r=Ba(e),s=r?V_(r):e;return{name:`${t} ${s}`,attributes:wu(e,r,t,n)}}function wu(e,t,n,r){const s={url:$t(e),type:"fetch","http.method":n,[q]:r,[pe]:"http.client"};return t&&($a(t)||(s["http.url"]=$t(t.href),s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function xf(e,t={},n=Y()){const{message:r,name:s,email:o,url:i,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:o,name:s,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=(n==null?void 0:n.getClient())||P();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function nr(e,t,n,r,s){Xs({level:e,message:t,attributes:n,severityNumber:s},r)}function Ib(e,t,{scope:n}={}){nr("trace",e,t,n)}function xb(e,t,{scope:n}={}){nr("debug",e,t,n)}function kb(e,t,{scope:n}={}){nr("info",e,t,n)}function Rb(e,t,{scope:n}={}){nr("warn",e,t,n)}function Cb(e,t,{scope:n}={}){nr("error",e,t,n)}function Ab(e,t,{scope:n}={}){nr("fatal",e,t,n)}const Nb=Object.freeze(Object.defineProperty({__proto__:null,debug:xb,error:Cb,fatal:Ab,fmt:K_,info:kb,trace:Ib,warn:Rb},Symbol.toStringTag,{value:"Module"}));function $i(e,t,n){return"util"in K&&typeof K.util.format=="function"?K.util.format(...e):Mb(e,t,n)}function Mb(e,t,n){return e.map(r=>Jt(r)?String(r):JSON.stringify(Br(r,t,n))).join(" ")}function Pb(e){return/%[sdifocO]/.test(e)}function Ob(e,t){const n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((s,o)=>{n[`sentry.message.parameter.${o}`]=s}),n}const Lb="ConsoleLogs",Iu={[q]:"auto.log.console"},Db=(e={})=>{const t=e.levels||Ta;return{name:Lb,setup(n){const{enableLogs:r,normalizeDepth:s=3,normalizeMaxBreadth:o=1e3}=n.getOptions();if(!r){L&&y.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}ja(({args:i,level:a})=>{if(P()!==n||!t.includes(a))return;const c=i[0],u=i.slice(1);if(a==="assert"){if(!c){const p=u.length>0?`Assertion failed: ${$i(u,s,o)}`:"Assertion failed";Xs({level:"error",message:p,attributes:Iu})}return}const d=a==="log",l=i.length>1&&typeof i[0]=="string"&&!Pb(i[0]),f={...Iu,...l?Ob(c,u):{}};Xs({level:d?"info":a,message:$i(i,s,o),severityNumber:d?10:void 0,attributes:f})})}}},Fb=Db;function Ha(e,t,n,r){k_({type:e,name:t,value:n,unit:r==null?void 0:r.unit,attributes:r==null?void 0:r.attributes},{scope:r==null?void 0:r.scope})}function $b(e,t=1,n){Ha("counter",e,t,n)}function Bb(e,t,n){Ha("gauge",e,t,n)}function Ub(e,t,n){Ha("distribution",e,t,n)}const jb=Object.freeze(Object.defineProperty({__proto__:null,count:$b,distribution:Ub,gauge:Bb},Symbol.toStringTag,{value:"Module"})),Hb=["trace","debug","info","warn","error","fatal"];function Wb(e={}){const t=new Set(e.levels??Hb),n=e.client;return{log(r){const{type:s,level:o,message:i,args:a,tag:c,date:u,...d}=r,l=n||P();if(!l)return;const f=Gb(s,o);if(!t.has(f))return;const{normalizeDepth:p=3,normalizeMaxBreadth:h=1e3}=l.getOptions(),m=[];i&&m.push(i),a&&a.length>0&&m.push($i(a,p,h));const g=m.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),s&&(d["consola.type"]=s),o!=null&&typeof o=="number"&&(d["consola.level"]=o),Xs({level:f,message:g,attributes:d})}}}const zb={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},qb={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function Gb(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const n=zb[e];if(n)return n}if(typeof t=="number"){const n=qb[t];if(n)return n}return"info"}const Vb="gen_ai.prompt",ko="gen_ai.system",We="gen_ai.request.model",Wa="gen_ai.request.stream",Ro="gen_ai.request.temperature",za="gen_ai.request.max_tokens",Co="gen_ai.request.frequency_penalty",qa="gen_ai.request.presence_penalty",Ao="gen_ai.request.top_p",kf="gen_ai.request.top_k",Jb="gen_ai.request.encoding_format",Yb="gen_ai.request.dimensions",tn="gen_ai.response.finish_reasons",At="gen_ai.response.model",wn="gen_ai.response.id",Kb="gen_ai.response.stop_reason",yn="gen_ai.usage.input_tokens",bn="gen_ai.usage.output_tokens",Sn="gen_ai.usage.total_tokens",Yt="gen_ai.operation.name",En="sentry.sdk_meta.gen_ai.input.messages.original_length",rr="gen_ai.input.messages",zr="gen_ai.system_instructions",nt="gen_ai.response.text",No="gen_ai.request.available_tools",Mo="gen_ai.response.streaming",yt="gen_ai.response.tool_calls",Rf="gen_ai.agent.name",Xb="gen_ai.pipeline.name",Ga="gen_ai.conversation.id",Qb="gen_ai.usage.cache_creation_input_tokens",Zb="gen_ai.usage.cache_read_input_tokens",eS="gen_ai.invoke_agent",tS="gen_ai.embeddings.input",nS="gen_ai.tool.name",rS="gen_ai.tool.input",sS="gen_ai.tool.output",Cf="openai.response.id",Af="openai.response.model",Nf="openai.response.timestamp",oS="openai.usage.completion_tokens",iS="openai.usage.prompt_tokens",gr={CHAT:"chat",EMBEDDINGS:"embeddings"},xu="anthropic.response.timestamp",Mf=2e4,eo=e=>new TextEncoder().encode(e).length,Va=e=>eo(JSON.stringify(e));function Po(e,t){if(eo(e)<=t)return e;let n=0,r=e.length,s="";for(;n<=r;){const o=Math.floor((n+r)/2),i=e.slice(0,o);eo(i)<=t?(s=i,n=o+1):r=o-1}return s}function aS(e){return typeof e=="string"?e:"text"in e?e.text:""}function ku(e,t){return typeof e=="string"?t:{...e,text:t}}function cS(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function uS(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function Tr(e){return!e||typeof e!="object"?!1:lS(e)||Pf(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function lS(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&Tr(e.source)}function Pf(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function Of(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function dS(e,t){const n={...e,content:""},r=Va(n),s=t-r;if(s<=0)return[];const o=Po(e.content,s);return[{...e,content:o}]}function fS(e,t){const{parts:n}=e,r=n.map(a=>ku(a,"")),s=Va({...e,parts:r});let o=t-s;if(o<=0)return[];const i=[];for(const a of n){const c=aS(a),u=eo(c);if(u<=o)i.push(a),o-=u;else if(i.length===0){const d=Po(c,o);d&&i.push(ku(a,d));break}else break}return i.length<=0?[]:[{...e,parts:i}]}function pS(e,t){if(!e)return[];if(typeof e=="string"){const n=Po(e,t);return n?[n]:[]}return typeof e!="object"?[]:cS(e)?dS(e,t):Of(e)?fS(e,t):[]}const Ru="[Filtered]",hS=["image_url","data","content","b64_json","result","uri"];function ks(e){const t={...e};Tr(t.source)&&(t.source=ks(t.source)),Pf(e)&&(t.inlineData={...e.inlineData,data:Ru});for(const n of hS)typeof t[n]=="string"&&(t[n]=Ru);return t}function Bi(e){return e.map(n=>{let r;return n&&typeof n=="object"&&(uS(n)?r={...n,content:Bi(n.content)}:"content"in n&&Tr(n.content)&&(r={...n,content:ks(n.content)}),Of(n)&&(r={...r??n,parts:Bi(n.parts)}),Tr(r)?r=ks(r):Tr(n)&&(r=ks(n))),r??n})}function mS(e,t){if(!Array.isArray(e)||e.length===0)return e;const n=e[e.length-1],r=Bi([n]),s=r[0];return Va(s)<=t?r:pS(s,t)}function Oo(e){return mS(e,Mf)}function gS(e){return Po(e,Mf)}function qr(e){return e.includes("messages")?"chat":e.includes("completions")?"text_completion":e.includes("generateContent")?"generate_content":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function to(e){return`gen_ai.${qr(e)}`}function Lf(e,t){return e?`${e}.${t}`:t}function Ja(e,t,n,r,s){if(t!==void 0&&e.setAttributes({[yn]:t}),n!==void 0&&e.setAttributes({[bn]:n}),t!==void 0||n!==void 0||r!==void 0||s!==void 0){const o=(t??0)+(n??0)+(r??0)+(s??0);e.setAttributes({[Sn]:o})}}function Df(e){if(typeof e=="string")return gS(e);if(Array.isArray(e)){const t=Oo(e);return JSON.stringify(t)}return JSON.stringify(e)}function Gr(e){if(!Array.isArray(e))return{systemInstructions:void 0,filteredMessages:e};const t=e.findIndex(i=>i&&typeof i=="object"&&"role"in i&&i.role==="system");if(t===-1)return{systemInstructions:void 0,filteredMessages:e};const n=e[t],r=typeof n.content=="string"?n.content:n.content!==void 0?JSON.stringify(n.content):void 0;if(!r)return{systemInstructions:void 0,filteredMessages:e};const s=JSON.stringify([{type:"text",content:r}]),o=[...e.slice(0,t),...e.slice(t+1)];return{systemInstructions:s,filteredMessages:o}}const _S=["responses.create","chat.completions.create","embeddings.create","conversations.create"],yS=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],bS=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...yS];function Ya(e){return e.includes("chat.completions")||e.includes("responses")?gr.CHAT:e.includes("embeddings")?gr.EMBEDDINGS:e.includes("conversations")?gr.CHAT:e.split(".").pop()||"unknown"}function Cu(e){return`gen_ai.${Ya(e)}`}function SS(e){return _S.includes(e)}function ES(e,t){return e?`${e}.${t}`:t}function vS(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function TS(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function wS(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function IS(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="conversation"}function xS(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function kS(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function RS(e,t,n){if(Ka(e,t.id,t.model,t.created),t.usage&&Lo(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const r=t.choices.map(s=>s.finish_reason).filter(s=>s!==null);if(r.length>0&&e.setAttributes({[tn]:JSON.stringify(r)}),n){const s=t.choices.map(o=>{var i;return(i=o.message)==null?void 0:i.tool_calls}).filter(o=>Array.isArray(o)&&o.length>0).flat();s.length>0&&e.setAttributes({[yt]:JSON.stringify(s)})}}}function CS(e,t,n){if(Ka(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[tn]:JSON.stringify([t.status])}),t.usage&&Lo(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){const r=t;if(Array.isArray(r.output)&&r.output.length>0){const s=r.output.filter(o=>typeof o=="object"&&o!==null&&o.type==="function_call");s.length>0&&e.setAttributes({[yt]:JSON.stringify(s)})}}}function AS(e,t){e.setAttributes({[Af]:t.model,[At]:t.model}),t.usage&&Lo(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function NS(e,t){const{id:n,created_at:r}=t;e.setAttributes({[Cf]:n,[wn]:n,[Ga]:n}),r&&e.setAttributes({[Nf]:new Date(r*1e3).toISOString()})}function Lo(e,t,n,r){t!==void 0&&e.setAttributes({[iS]:t,[yn]:t}),n!==void 0&&e.setAttributes({[oS]:n,[bn]:n}),r!==void 0&&e.setAttributes({[Sn]:r})}function Ka(e,t,n,r){e.setAttributes({[Cf]:t,[wn]:t}),e.setAttributes({[Af]:n,[At]:n}),e.setAttributes({[Nf]:new Date(r*1e3).toISOString()})}function MS(e){if("conversation"in e&&typeof e.conversation=="string")return e.conversation;if("previous_response_id"in e&&typeof e.previous_response_id=="string")return e.previous_response_id}function PS(e){const t={[We]:e.model??"unknown"};"temperature"in e&&(t[Ro]=e.temperature),"top_p"in e&&(t[Ao]=e.top_p),"frequency_penalty"in e&&(t[Co]=e.frequency_penalty),"presence_penalty"in e&&(t[qa]=e.presence_penalty),"stream"in e&&(t[Wa]=e.stream),"encoding_format"in e&&(t[Jb]=e.encoding_format),"dimensions"in e&&(t[Yb]=e.dimensions);const n=MS(e);return n&&(t[Ga]=n),t}function OS(e,t){for(const n of e){const r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const s=t.chatCompletionToolCalls[r];n.function.arguments&&(s!=null&&s.function)&&(s.function.arguments+=n.function.arguments)}}}function LS(e,t,n){var r,s;t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const o of e.choices??[])n&&((r=o.delta)!=null&&r.content&&t.responseTexts.push(o.delta.content),(s=o.delta)!=null&&s.tool_calls&&OS(o.delta.tool_calls,t)),o.finish_reason&&t.finishReasons.push(o.finish_reason)}function DS(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:Ee,message:"internal_error"}),ge(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const s=e;if(!bS.includes(s.type)){t.eventTypes.push(s.type);return}if(n&&(s.type==="response.output_item.done"&&"item"in s&&t.responsesApiToolCalls.push(s.item),s.type==="response.output_text.delta"&&"delta"in s&&s.delta)){t.responseTexts.push(s.delta);return}if("response"in s){const{response:o}=s;t.responseId=o.id??t.responseId,t.responseModel=o.model??t.responseModel,t.responseTimestamp=o.created_at??t.responseTimestamp,o.usage&&(t.promptTokens=o.usage.input_tokens,t.completionTokens=o.usage.output_tokens,t.totalTokens=o.usage.total_tokens),o.status&&t.finishReasons.push(o.status),n&&o.output_text&&t.responseTexts.push(o.output_text)}}async function*FS(e,t,n){const r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const s of e)kS(s)?LS(s,r,n):xS(s)&&DS(s,r,n,t),yield s}finally{Ka(t,r.responseId,r.responseModel,r.responseTimestamp),Lo(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[Mo]:!0}),r.finishReasons.length&&t.setAttributes({[tn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[nt]:r.responseTexts.join("")});const o=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];o.length>0&&t.setAttributes({[yt]:JSON.stringify(o)}),t.end()}}function $S(e){const t=Array.isArray(e.tools)?e.tools:[],r=e.web_search_options&&typeof e.web_search_options=="object"?[{type:"web_search_options",...e.web_search_options}]:[],s=[...t,...r];return s.length>0?JSON.stringify(s):void 0}function BS(e,t){const n={[ko]:"openai",[Yt]:Ya(t),[q]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0],s=$S(r);s&&(n[No]=s),Object.assign(n,PS(r))}else n[We]="unknown";return n}function US(e,t,n){var s;if(!t||typeof t!="object")return;const r=t;if(vS(r)){if(RS(e,r,n),n&&((s=r.choices)!=null&&s.length)){const o=r.choices.map(i=>{var a;return((a=i.message)==null?void 0:a.content)||""});e.setAttributes({[nt]:JSON.stringify(o)})}}else TS(r)?(CS(e,r,n),n&&r.output_text&&e.setAttributes({[nt]:r.output_text})):wS(r)?AS(e,r):IS(r)&&NS(e,r)}function Au(e,t,n){if(n===gr.EMBEDDINGS&&"input"in t){const a=t.input;if(a==null||typeof a=="string"&&a.length===0||Array.isArray(a)&&a.length===0)return;e.setAttribute(tS,typeof a=="string"?a:JSON.stringify(a));return}const r="input"in t?t.input:"messages"in t?t.messages:void 0;if(!r||Array.isArray(r)&&r.length===0)return;const{systemInstructions:s,filteredMessages:o}=Gr(r);s&&e.setAttribute(zr,s);const i=Df(o);e.setAttribute(rr,i),Array.isArray(o)?e.setAttribute(En,o.length):e.setAttribute(En,1)}function jS(e,t,n,r){return async function(...o){const i=BS(o,t),a=i[We]||"unknown",c=Ya(t),u=o[0];return u&&typeof u=="object"&&u.stream===!0?vt({name:`${c} ${a} stream-response`,op:Cu(t),attributes:i},async l=>{try{r.recordInputs&&u&&Au(l,u,c);const f=await e.apply(n,o);return FS(f,l,r.recordOutputs??!1)}catch(f){throw l.setStatus({code:Ee,message:"internal_error"}),ge(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),f}}):Ct({name:`${c} ${a}`,op:Cu(t),attributes:i},async l=>{try{r.recordInputs&&u&&Au(l,u,c);const f=await e.apply(n,o);return US(l,f,r.recordOutputs),f}catch(f){throw ge(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function Ff(e,t="",n){return new Proxy(e,{get(r,s){const o=r[s],i=ES(t,String(s));return typeof o=="function"&&SS(i)?jS(o,i,r,n):typeof o=="function"?o.bind(r):o&&typeof o=="object"?Ff(o,i,n):o}})}function HS(e,t){var s;const n=!!((s=P())!=null&&s.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return Ff(e,"",r)}function WS(e,t){var n;return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:Ee,message:((n=e.error)==null?void 0:n.type)??"internal_error"}),ge(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function zS(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function qS(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function GS(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function VS(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const n=t.activeToolBlocks[e.index];if(!n)return;const r=n.inputJsonParts.join("");let s;try{s=r?JSON.parse(r):{}}catch{s={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:s}),delete t.activeToolBlocks[e.index]}function $f(e,t,n,r){!(e&&typeof e=="object")||WS(e,r)||(zS(e,t),qS(e,t),GS(e,t,n),VS(e,t))}function JS(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[wn]:e.responseId}),e.responseModel&&t.setAttributes({[At]:e.responseModel}),Ja(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[Mo]:!0}),e.finishReasons.length>0&&t.setAttributes({[tn]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[nt]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[yt]:JSON.stringify(e.toolCalls)}),t.end())}async function*YS(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const s of e)$f(s,r,n,t),yield s}finally{r.responseId&&t.setAttributes({[wn]:r.responseId}),r.responseModel&&t.setAttributes({[At]:r.responseModel}),Ja(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[Mo]:!0}),r.finishReasons.length>0&&t.setAttributes({[tn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[nt]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[yt]:JSON.stringify(r.toolCalls)}),t.end()}}function KS(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",s=>{$f(s,r,n,t)}),e.on("message",()=>{JS(r,t,n)}),e.on("error",s=>{ge(s,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:Ee,message:"stream_error"}),t.end())}),e}const XS=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function QS(e){return XS.includes(e)}function ZS(e,t){if(Array.isArray(t)&&t.length===0)return;const{systemInstructions:n,filteredMessages:r}=Gr(t);n&&e.setAttributes({[zr]:n});const s=Array.isArray(r)?r.length:1;e.setAttributes({[rr]:Df(r),[En]:s})}function eE(e,t){t.error&&(e.setStatus({code:Ee,message:t.error.type||"internal_error"}),ge(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function tE(e){const{system:t,messages:n,input:r}=e,s=typeof t=="string"?[{role:"system",content:e.system}]:[],o=Array.isArray(r)?r:r!=null?[r]:void 0,i=Array.isArray(n)?n:n!=null?[n]:[],a=o??i;return[...s,...a]}function nE(e,t){const n={[ko]:"anthropic",[Yt]:qr(t),[q]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0];r.tools&&Array.isArray(r.tools)&&(n[No]=JSON.stringify(r.tools)),n[We]=r.model??"unknown","temperature"in r&&(n[Ro]=r.temperature),"top_p"in r&&(n[Ao]=r.top_p),"stream"in r&&(n[Wa]=r.stream),"top_k"in r&&(n[kf]=r.top_k),"frequency_penalty"in r&&(n[Co]=r.frequency_penalty),"max_tokens"in r&&(n[za]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[We]=e[0]:n[We]="unknown";return n}function Ui(e,t){const n=tE(t);ZS(e,n),"prompt"in t&&e.setAttributes({[Vb]:JSON.stringify(t.prompt)})}function rE(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[nt]:t.content.map(r=>r.text).filter(r=>!!r).join("")});const n=[];for(const r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[yt]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[nt]:t.completion}),"input_tokens"in t&&e.setAttributes({[nt]:JSON.stringify(t.input_tokens)})}function sE(e,t){"id"in t&&"model"in t&&(e.setAttributes({[wn]:t.id,[At]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[xu]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[xu]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&Ja(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function oE(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){eE(e,t);return}n&&rE(e,t),sE(e,t)}}function Nu(e,t,n){throw ge(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:Ee,message:"internal_error"}),t.end()),e}function iE(e,t,n,r,s,o,i,a,c,u,d){const l=s[We]??"unknown",f={name:`${o} ${l} stream-response`,op:to(i),attributes:s};return u&&!d?vt(f,async p=>{try{c.recordInputs&&a&&Ui(p,a);const h=await e.apply(n,r);return YS(h,p,c.recordOutputs??!1)}catch(h){return Nu(h,p,i)}}):vt(f,p=>{try{c.recordInputs&&a&&Ui(p,a);const h=t.apply(n,r);return KS(h,p,c.recordOutputs??!1)}catch(h){return Nu(h,p,i)}})}function aE(e,t,n,r){return new Proxy(e,{apply(s,o,i){const a=nE(i,t),c=a[We]??"unknown",u=qr(t),d=typeof i[0]=="object"?i[0]:void 0,l=!!(d!=null&&d.stream),f=t==="messages.stream";return l||f?iE(e,s,n,i,a,u,t,d,r,l,f):Ct({name:`${u} ${c}`,op:to(t),attributes:a},p=>(r.recordInputs&&d&&Ui(p,d),wo(()=>s.apply(n,i),h=>{ge(h,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},h=>oE(p,h,r.recordOutputs))))}})}function Bf(e,t="",n){return new Proxy(e,{get(r,s){const o=r[s],i=Lf(t,String(s));return typeof o=="function"&&QS(i)?aE(o,i,r,n):typeof o=="function"?o.bind(r):o&&typeof o=="object"?Bf(o,i,n):o}})}function cE(e,t){var s;const n=!!((s=P())!=null&&s.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return Bf(e,"",r)}const Mu=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],uE="google_genai",Uf="chats.create",lE="chat";function dE(e,t){const n=e==null?void 0:e.promptFeedback;if(n!=null&&n.blockReason){const r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:Ee,message:`Content blocked: ${r}`}),ge(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function fE(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function pE(e,t,n){var r;Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const s of e.candidates??[]){s!=null&&s.finishReason&&!t.finishReasons.includes(s.finishReason)&&t.finishReasons.push(s.finishReason);for(const o of((r=s==null?void 0:s.content)==null?void 0:r.parts)??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function hE(e,t,n,r){!e||dE(e,r)||(fE(e,t),pE(e,t,n))}async function*mE(e,t,n){const r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const s of e)hE(s,r,n,t),yield s}finally{const s={[Mo]:!0};r.responseId&&(s[wn]=r.responseId),r.responseModel&&(s[At]=r.responseModel),r.promptTokens!==void 0&&(s[yn]=r.promptTokens),r.completionTokens!==void 0&&(s[bn]=r.completionTokens),r.totalTokens!==void 0&&(s[Sn]=r.totalTokens),r.finishReasons.length&&(s[tn]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(s[nt]=r.responseTexts.join("")),n&&r.toolCalls.length&&(s[yt]=JSON.stringify(r.toolCalls)),t.setAttributes(s),t.end()}}function gE(e){if(Mu.includes(e))return!0;const t=e.split(".").pop();return Mu.includes(t)}function _E(e){return e.includes("Stream")}function _r(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>_r(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function Pu(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function yE(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Ro]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Ao]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[kf]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[za]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Co]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[qa]=e.presencePenalty),t}function bE(e,t,n){const r={[ko]:uE,[Yt]:qr(e),[q]:"auto.ai.google_genai"};if(t){if(r[We]=Pu(t,n),"config"in t&&typeof t.config=="object"&&t.config){const s=t.config;if(Object.assign(r,yE(s)),"tools"in s&&Array.isArray(s.tools)){const o=s.tools.flatMap(i=>i.functionDeclarations);r[No]=JSON.stringify(o)}}}else r[We]=Pu({},n);return r}function Ou(e,t){const n=[];if("config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(..._r(t.config.systemInstruction,"system")),"history"in t&&n.push(..._r(t.history,"user")),"contents"in t&&n.push(..._r(t.contents,"user")),"message"in t&&n.push(..._r(t.message,"user")),Array.isArray(n)&&n.length){const{systemInstructions:r,filteredMessages:s}=Gr(n);r&&e.setAttribute(zr,r);const o=Array.isArray(s)?s.length:0;e.setAttributes({[En]:o,[rr]:JSON.stringify(Oo(s))})}}function SE(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(At,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[yn]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[bn]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Sn]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){const r=t.candidates.map(s=>{var o;return(o=s.content)!=null&&o.parts&&Array.isArray(s.content.parts)?s.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):""}).filter(s=>s.length>0);r.length>0&&e.setAttributes({[nt]:r.join("")})}if(n&&t.functionCalls){const r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[yt]:JSON.stringify(r)})}}}function Lu(e,t,n,r){const s=t===Uf;return new Proxy(e,{apply(o,i,a){const c=a[0],u=bE(t,c,n),d=u[We]??"unknown",l=qr(t);return _E(t)?vt({name:`${l} ${d} stream-response`,op:to(t),attributes:u},async f=>{try{r.recordInputs&&c&&Ou(f,c);const p=await o.apply(n,a);return mE(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:Ee,message:"internal_error"}),ge(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),f.end(),p}}):Ct({name:s?`${l} ${d} create`:`${l} ${d}`,op:to(t),attributes:u},f=>(r.recordInputs&&c&&Ou(f,c),wo(()=>o.apply(n,a),p=>{ge(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},p=>{s||SE(f,p,r.recordOutputs)})))}})}function ji(e,t="",n){return new Proxy(e,{get:(r,s,o)=>{const i=Reflect.get(r,s,o),a=Lf(t,String(s));if(typeof i=="function"&&gE(a)){if(a===Uf){const c=Lu(i,a,r,n);return function(...d){const l=c(...d);return l&&typeof l=="object"?ji(l,lE,n):l}}return Lu(i,a,r,n)}return typeof i=="function"?i.bind(r):i&&typeof i=="object"?ji(i,a,n):i}})}function EE(e,t){var s;const n=!!((s=P())!=null&&s.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return ji(e,"",r)}const yr="auto.ai.langchain",vE={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},Ze=(e,t,n)=>{n!=null&&(e[t]=n)},ze=(e,t,n)=>{const r=Number(n);Number.isNaN(r)||(e[t]=r)};function He(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function pr(e){const t=e.toLowerCase();return vE[t]??t}function Du(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function Fu(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Xa(e){return e.map(t=>{var s,o;const n=t._getType;if(typeof n=="function"){const i=n.call(t);return{role:pr(i),content:He(t.content)}}if(t.lc===1&&t.kwargs){const i=t.id,a=Array.isArray(i)&&i.length>0?i[i.length-1]:"",c=typeof a=="string"?Du(a):"user";return{role:pr(c),content:He((s=t.kwargs)==null?void 0:s.content)}}if(t.type){const i=String(t.type).toLowerCase();return{role:pr(i),content:He(t.content)}}if(t.role)return{role:pr(String(t.role)),content:He(t.content)};const r=(o=t.constructor)==null?void 0:o.name;return r&&r!=="Object"?{role:pr(Du(r)),content:He(t.content)}:{role:"user",content:He(t.content)}})}function TE(e,t,n){const r={},s="kwargs"in e?e.kwargs:void 0,o=(t==null?void 0:t.temperature)??(n==null?void 0:n.ls_temperature)??(s==null?void 0:s.temperature);ze(r,Ro,o);const i=(t==null?void 0:t.max_tokens)??(n==null?void 0:n.ls_max_tokens)??(s==null?void 0:s.max_tokens);ze(r,za,i);const a=(t==null?void 0:t.top_p)??(s==null?void 0:s.top_p);ze(r,Ao,a);const c=t==null?void 0:t.frequency_penalty;ze(r,Co,c);const u=t==null?void 0:t.presence_penalty;return ze(r,qa,u),t&&"stream"in t&&Ze(r,Wa,!!t.stream),r}function jf(e,t,n,r,s){return{[ko]:He(e??"langchain"),[Yt]:"chat",[We]:He(t),[q]:yr,...TE(n,r,s)}}function wE(e,t,n,r,s){const o=s==null?void 0:s.ls_provider,i=(r==null?void 0:r.model)??(s==null?void 0:s.ls_model_name)??"unknown",a=jf(o,i,e,r,s);if(n&&Array.isArray(t)&&t.length>0){Ze(a,En,t.length);const c=t.map(u=>({role:"user",content:u}));Ze(a,rr,He(c))}return a}function IE(e,t,n,r,s){var c;const o=(s==null?void 0:s.ls_provider)??((c=e.id)==null?void 0:c[2]),i=(r==null?void 0:r.model)??(s==null?void 0:s.ls_model_name)??"unknown",a=jf(o,i,e,r,s);if(n&&Array.isArray(t)&&t.length>0){const u=Xa(t.flat()),{systemInstructions:d,filteredMessages:l}=Gr(u);d&&Ze(a,zr,d);const f=Array.isArray(l)?l.length:0;Ze(a,En,f);const p=Oo(l);Ze(a,rr,He(p))}return a}function xE(e,t){var s;const n=[],r=e.flat();for(const o of r){const i=(s=o.message)==null?void 0:s.content;if(Array.isArray(i))for(const a of i){const c=a;c.type==="tool_use"&&n.push(c)}}n.length>0&&Ze(t,yt,He(n))}function kE(e,t){if(!e)return;const n=e.tokenUsage,r=e.usage;if(n)ze(t,yn,n.promptTokens),ze(t,bn,n.completionTokens),ze(t,Sn,n.totalTokens);else if(r){ze(t,yn,r.input_tokens),ze(t,bn,r.output_tokens);const s=Number(r.input_tokens),o=Number(r.output_tokens),i=(Number.isNaN(s)?0:s)+(Number.isNaN(o)?0:o);i>0&&ze(t,Sn,i),r.cache_creation_input_tokens!==void 0&&ze(t,Qb,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&ze(t,Zb,r.cache_read_input_tokens)}}function RE(e,t){var u,d,l,f;if(!e)return;const n={};if(Array.isArray(e.generations)){const p=e.generations.flat().map(h=>{var m,g;return(m=h.generationInfo)!=null&&m.finish_reason?h.generationInfo.finish_reason:(g=h.generation_info)!=null&&g.finish_reason?h.generation_info.finish_reason:null}).filter(h=>typeof h=="string");if(p.length>0&&Ze(n,tn,He(p)),xE(e.generations,n),t){const h=e.generations.flat().map(m=>{var g;return m.text??((g=m.message)==null?void 0:g.content)}).filter(m=>typeof m=="string");h.length>0&&Ze(n,nt,He(h))}}kE(e.llmOutput,n);const r=e.llmOutput,s=(d=(u=e.generations)==null?void 0:u[0])==null?void 0:d[0],o=s==null?void 0:s.message,i=(r==null?void 0:r.model_name)??(r==null?void 0:r.model)??((l=o==null?void 0:o.response_metadata)==null?void 0:l.model_name);i&&Ze(n,At,i);const a=(r==null?void 0:r.id)??(o==null?void 0:o.id);a&&Ze(n,wn,a);const c=(r==null?void 0:r.stop_reason)??((f=o==null?void 0:o.response_metadata)==null?void 0:f.finish_reason);return c&&Ze(n,Kb,He(c)),n}function CE(e={}){const t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,s=i=>{const a=r.get(i);a!=null&&a.isRecording()&&(a.end(),r.delete(i))},o={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(i,a,c,u,d,l,f,p){const h=Fu(l),m=wE(i,a,t,h,f),g=m[We],b=m[Yt];vt({name:`${b} ${g}`,op:"gen_ai.chat",attributes:{...m,[pe]:"gen_ai.chat"}},S=>(r.set(c,S),S))},handleChatModelStart(i,a,c,u,d,l,f,p){const h=Fu(l),m=IE(i,a,t,h,f),g=m[We],b=m[Yt];vt({name:`${b} ${g}`,op:"gen_ai.chat",attributes:{...m,[pe]:"gen_ai.chat"}},S=>(r.set(c,S),S))},handleLLMEnd(i,a,c,u,d){const l=r.get(a);if(l!=null&&l.isRecording()){const f=RE(i,n);f&&l.setAttributes(f),s(a)}},handleLLMError(i,a){const c=r.get(a);c!=null&&c.isRecording()&&(c.setStatus({code:Ee,message:"llm_error"}),s(a)),ge(i,{mechanism:{handled:!1,type:`${yr}.llm_error_handler`}})},handleChainStart(i,a,c,u){const d=i.name||"unknown_chain",l={[q]:"auto.ai.langchain","langchain.chain.name":d};t&&(l["langchain.chain.inputs"]=JSON.stringify(a)),vt({name:`chain ${d}`,op:"gen_ai.invoke_agent",attributes:{...l,[pe]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(i,a){const c=r.get(a);c!=null&&c.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(i)}),s(a))},handleChainError(i,a){const c=r.get(a);c!=null&&c.isRecording()&&(c.setStatus({code:Ee,message:"chain_error"}),s(a)),ge(i,{mechanism:{handled:!1,type:`${yr}.chain_error_handler`}})},handleToolStart(i,a,c,u){const d=i.name||"unknown_tool",l={[q]:yr,[nS]:d};t&&(l[rS]=a),vt({name:`execute_tool ${d}`,op:"gen_ai.execute_tool",attributes:{...l,[pe]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(i,a){const c=r.get(a);c!=null&&c.isRecording()&&(n&&c.setAttributes({[sS]:JSON.stringify(i)}),s(a))},handleToolError(i,a){const c=r.get(a);c!=null&&c.isRecording()&&(c.setStatus({code:Ee,message:"tool_error"}),s(a)),ge(i,{mechanism:{handled:!1,type:`${yr}.tool_error_handler`}})},copy(){return o},toJSON(){return{lc:1,type:"not_implemented",id:o.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:o.lc_id}}};return o}const Hf="auto.ai.langgraph";function AE(e){if(!e||e.length===0)return null;const t=[];for(const n of e)if(n&&typeof n=="object"){const r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function NE(e){const t=e;let n=0,r=0,s=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const o=t.usage_metadata;return typeof o.input_tokens=="number"&&(n=o.input_tokens),typeof o.output_tokens=="number"&&(r=o.output_tokens),typeof o.total_tokens=="number"&&(s=o.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:s}}if(t.response_metadata&&typeof t.response_metadata=="object"){const o=t.response_metadata;if(o.tokenUsage&&typeof o.tokenUsage=="object"){const i=o.tokenUsage;typeof i.promptTokens=="number"&&(n=i.promptTokens),typeof i.completionTokens=="number"&&(r=i.completionTokens),typeof i.totalTokens=="number"&&(s=i.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:s}}function ME(e,t){const n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){const r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(At,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(tn,[r.finish_reason])}}function PE(e){var n,r,s,o,i,a,c,u;if(!((o=(s=(r=(n=e.builder)==null?void 0:n.nodes)==null?void 0:r.tools)==null?void 0:s.runnable)!=null&&o.tools))return null;const t=(u=(c=(a=(i=e.builder)==null?void 0:i.nodes)==null?void 0:a.tools)==null?void 0:c.runnable)==null?void 0:u.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(d=>{var l,f,p;return{name:(l=d.lc_kwargs)==null?void 0:l.name,description:(f=d.lc_kwargs)==null?void 0:f.description,schema:(p=d.lc_kwargs)==null?void 0:p.schema}})}function OE(e,t,n){const r=n,s=r==null?void 0:r.messages;if(!s||!Array.isArray(s))return;const o=(t==null?void 0:t.length)??0,i=s.length>o?s.slice(o):[];if(i.length===0)return;const a=AE(i);a&&e.setAttribute(yt,JSON.stringify(a));const c=Xa(i);e.setAttribute(nt,JSON.stringify(c));let u=0,d=0,l=0;for(const f of i){const p=NE(f);u+=p.inputTokens,d+=p.outputTokens,l+=p.totalTokens,ME(e,f)}u>0&&e.setAttribute(yn,u),d>0&&e.setAttribute(bn,d),l>0&&e.setAttribute(Sn,l)}function LE(e,t){return new Proxy(e,{apply(n,r,s){return Ct({op:"gen_ai.create_agent",name:"create_agent",attributes:{[q]:Hf,[pe]:"gen_ai.create_agent",[Yt]:"create_agent"}},o=>{try{const i=Reflect.apply(n,r,s),a=s.length>0?s[0]:{};a!=null&&a.name&&typeof a.name=="string"&&(o.setAttribute(Rf,a.name),o.updateName(`create_agent ${a.name}`));const c=i.invoke;return c&&typeof c=="function"&&(i.invoke=DE(c.bind(i),i,a,t)),i}catch(i){throw o.setStatus({code:Ee,message:"internal_error"}),ge(i,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),i}})}})}function DE(e,t,n,r){return new Proxy(e,{apply(s,o,i){return Ct({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[q]:Hf,[pe]:eS,[Yt]:"invoke_agent"}},async a=>{try{const c=n==null?void 0:n.name;c&&typeof c=="string"&&(a.setAttribute(Xb,c),a.setAttribute(Rf,c),a.updateName(`invoke_agent ${c}`));const u=i.length>1?i[1]:void 0,d=u==null?void 0:u.configurable,l=d==null?void 0:d.thread_id;l&&typeof l=="string"&&a.setAttribute(Ga,l);const f=PE(t);f&&a.setAttribute(No,JSON.stringify(f));const p=r.recordInputs,h=r.recordOutputs,m=i.length>0?i[0].messages??[]:[];if(m&&p){const b=Xa(m),{systemInstructions:S,filteredMessages:R}=Gr(b);S&&a.setAttribute(zr,S);const w=Oo(R),D=Array.isArray(R)?R.length:0;a.setAttributes({[rr]:JSON.stringify(w),[En]:D})}const g=await Reflect.apply(s,o,i);return h&&OE(a,m??null,g),g}catch(c){throw a.setStatus({code:Ee,message:"internal_error"}),ge(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function FE(e,t){const n=t||{};return e.compile=LE(e.compile.bind(e),n),e}function Wf(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Wn=K;function $E(){return"history"in Wn&&!!Wn.history}function BE(){if(!("fetch"in Wn))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Hi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function zf(){var n;if(typeof EdgeRuntime=="string")return!0;if(!BE())return!1;if(Hi(Wn.fetch))return!0;let e=!1;const t=Wn.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(e=Hi(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){L&&y.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function UE(){return"ReportingObserver"in Wn}function Qa(e,t){const n="fetch";Zt(n,e),en(n,()=>qf(void 0,t))}function jE(e){const t="fetch-body-resolved";Zt(t,e),en(t,()=>qf(WE))}function qf(e,t=!1){t&&!zf()||ke(K,"fetch",function(n){return function(...r){const s=new Error,{method:o,url:i}=zE(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:ye()*1e3,virtualError:s,headers:qE(r)};return e||et("fetch",{...a}),n.apply(K,r).then(async c=>(e?e(c):et("fetch",{...a,endTimestamp:ye()*1e3,response:c}),c),c=>{et("fetch",{...a,endTimestamp:ye()*1e3,error:c}),Ft(c)&&c.stack===void 0&&(c.stack=s.stack,Ve(c,"framesToPop",1));const u=P(),d=(u==null?void 0:u.getOptions().enhanceFetchErrorMessages)??"always";if(d!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const p=new URL(a.fetchData.url).host;d==="always"?c.message=`${c.message} (${p})`:Ve(c,"__sentry_fetch_url_host__",p)}catch{}throw c})}})}async function HE(e,t){if(e!=null&&e.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let i;try{i=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(i),a&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(i)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function WE(e){let t;try{t=e.clone()}catch{return}HE(t,()=>{et("fetch-body-resolved",{endTimestamp:ye()*1e3,response:e})})}function Rs(e,t){return!!e&&typeof e=="object"&&!!e[t]}function $u(e){return typeof e=="string"?e:e?Rs(e,"url")?e.url:e.toString?e.toString():"":""}function zE(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:$u(n),method:Rs(r,"method")?String(r.method).toUpperCase():wa(n)&&Rs(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:$u(t),method:Rs(t,"method")?String(t.method).toUpperCase():"GET"}}function qE(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(wa(t))return new Headers(t.headers)}catch{}}function GE(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function VE(){return"npm"}function JE(){return!GE()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function no(){return typeof window<"u"&&(!JE()||YE())}function YE(){const e=K.process;return(e==null?void 0:e.type)==="renderer"}const ot=K,ce=ot.document,br=ot.navigator,Gf="Report a Bug",KE="Cancel",XE="Send Bug Report",QE="Confirm",ZE="Report a Bug",ev="your.email@example.org",tv="Email",nv="What's the bug? What did you expect?",rv="Description",sv="Your Name",ov="Name",iv="Thank you for your report!",av="(required)",cv="Add a screenshot",uv="Remove screenshot",lv="Highlight",dv="Hide",fv="Remove",pv="widget",hv="api",mv=5e3,Vf=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=P();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&Y().setTags(e.tags);const r=xf({source:hv,url:Zn(),...e},t);return new Promise((s,o)=>{const i=setTimeout(()=>o("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(i),a(),u!=null&&u.statusCode&&u.statusCode>=200&&u.statusCode<300?s(r):(u==null?void 0:u.statusCode)===403?o("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):o("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Cs=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function gv(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(br.userAgent)||/Macintosh/i.test(br.userAgent)&&br.maxTouchPoints&&br.maxTouchPoints>1||!isSecureContext)}function cs(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{var n,r;(n=t.onFormOpen)==null||n.call(t),(r=e.onFormOpen)==null||r.call(e)},onFormClose:()=>{var n,r;(n=t.onFormClose)==null||n.call(t),(r=e.onFormClose)==null||r.call(e)},onSubmitSuccess:(n,r)=>{var s,o;(s=t.onSubmitSuccess)==null||s.call(t,n,r),(o=e.onSubmitSuccess)==null||o.call(e,n,r)},onSubmitError:n=>{var r,s;(r=t.onSubmitError)==null||r.call(t,n),(s=e.onSubmitError)==null||s.call(e,n)},onFormSubmitted:()=>{var n,r;(n=t.onFormSubmitted)==null||n.call(t),(r=e.onFormSubmitted)==null||r.call(e)},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function _v(e){const t=ce.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Ge(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const xn=20,yv="http://www.w3.org/2000/svg";function bv(){const e=a=>ot.document.createElementNS(yv,a),t=Ge(e("svg"),{width:`${xn}`,height:`${xn}`,viewBox:`0 0 ${xn} ${xn}`,fill:"var(--actor-color, var(--foreground))"}),n=Ge(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Ge(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),o=Ge(e("clipPath"),{id:"clip0_57_80"}),i=Ge(e("rect"),{width:`${xn}`,height:`${xn}`,fill:"white"});return o.appendChild(i),s.appendChild(o),t.appendChild(s).appendChild(o).appendChild(i),t}function Sv({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=ce.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||Gf,s.appendChild(bv()),e){const i=ce.createElement("span");i.appendChild(ce.createTextNode(e)),s.appendChild(i)}const o=_v(r);return{el:s,appendToDom(){n.appendChild(o),n.appendChild(s)},removeFromDom(){s.remove(),o.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const Jf="rgba(88, 74, 192, 1)",Ev={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Jf,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Bu={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Jf,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Uu(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function vv({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=ce.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?`color-scheme: only ${e};`:""}

  ${Uu(e==="dark"?{...Bu,...t}:{...Ev,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    color-scheme: only dark;

    ${Uu({...Bu,...t})}
  }
}`:""}
`,r&&s.setAttribute("nonce",r),s}const Yf=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:s="sentry-feedback",autoInject:o=!0,showBranding:i=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:g="system",themeLight:b={},themeDark:S={},addScreenshotButtonLabel:R=cv,cancelButtonLabel:w=KE,confirmButtonLabel:D=QE,emailLabel:N=tv,emailPlaceholder:E=ev,formTitle:C=ZE,isRequiredLabel:B=av,messageLabel:v=rv,messagePlaceholder:M=nv,nameLabel:k=ov,namePlaceholder:A=sv,removeScreenshotButtonLabel:F=uv,submitButtonLabel:X=XE,successMessageText:Q=iv,triggerLabel:te=Gf,triggerAriaLabel:T="",highlightToolText:W=lv,hideToolText:x=dv,removeHighlightText:G=fv,onFormOpen:oe,onFormClose:se,onSubmitSuccess:Te,onSubmitError:Me,onFormSubmitted:Nt}={})=>{const Pe={id:s,autoInject:o,showBranding:i,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:g,themeDark:S,themeLight:b,triggerLabel:te,triggerAriaLabel:T,cancelButtonLabel:w,submitButtonLabel:X,confirmButtonLabel:D,formTitle:C,emailLabel:N,emailPlaceholder:E,messageLabel:v,messagePlaceholder:M,nameLabel:k,namePlaceholder:A,successMessageText:Q,isRequiredLabel:B,addScreenshotButtonLabel:R,removeScreenshotButtonLabel:F,highlightToolText:W,hideToolText:x,removeHighlightText:G,onFormClose:se,onFormOpen:oe,onSubmitError:Me,onSubmitSuccess:Te,onFormSubmitted:Nt};let $e=null,ht=[];const Mt=ne=>{if(!$e){const he=ce.createElement("div");he.id=String(ne.id),ce.body.appendChild(he),$e=he.attachShadow({mode:"open"}),$e.appendChild(vv(ne))}return $e},lr=async ne=>{const he=ne.enableScreenshot&&gv();let Be,xe;try{Be=(t?t():await e("feedbackModalIntegration",m))(),Li(Be)}catch{throw Cs&&y.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const Ce=he?n?n():await e("feedbackScreenshotIntegration",m):void 0;Ce&&(xe=Ce(),Li(xe))}catch{Cs&&y.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const me=Be.createDialog({options:{...ne,onFormClose:()=>{var Ce;me==null||me.close(),(Ce=ne.onFormClose)==null||Ce.call(ne)},onFormSubmitted:()=>{var Ce;me==null||me.close(),(Ce=ne.onFormSubmitted)==null||Ce.call(ne)}},screenshotIntegration:xe,sendFeedback:Vf,shadow:Mt(ne)});return me},os=(ne,he={})=>{const Be=cs(Pe,he),xe=typeof ne=="string"?ce.querySelector(ne):typeof ne.addEventListener=="function"?ne:null;if(!xe)throw Cs&&y.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let me=null;const Ce=async()=>{me||(me=await lr({...Be,onFormSubmitted:()=>{var Ae;me==null||me.removeFromDom(),(Ae=Be.onFormSubmitted)==null||Ae.call(Be)}})),me.appendToDom(),me.open()};xe.addEventListener("click",Ce);const Z=()=>{ht=ht.filter(Ae=>Ae!==Z),me==null||me.removeFromDom(),me=null,xe.removeEventListener("click",Ce)};return ht.push(Z),Z},dr=(ne={})=>{const he=cs(Pe,ne),Be=Mt(he),xe=Sv({triggerLabel:he.triggerLabel,triggerAriaLabel:he.triggerAriaLabel,shadow:Be,styleNonce:h});return os(xe.el,{...he,onFormOpen(){xe.hide()},onFormClose(){xe.show()},onFormSubmitted(){xe.show()}}),xe};return{name:"Feedback",setupOnce(){!no()||!Pe.autoInject||(ce.readyState==="loading"?ce.addEventListener("DOMContentLoaded",()=>dr().appendToDom()):dr().appendToDom())},attachTo:os,createWidget(ne={}){const he=dr(cs(Pe,ne));return he.appendToDom(),he},async createForm(ne={}){return lr(cs(Pe,ne))},remove(){var ne;$e&&((ne=$e.parentElement)==null||ne.remove(),$e=null),ht.forEach(he=>he()),ht=[]}}};function Tv(){const e=P();return e==null?void 0:e.getIntegrationByName("Feedback")}var Do,le,Kf,sn,ju,Xf,Wi,Pr={},Za=[],wv=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ec=Array.isArray;function Dt(e,t){for(var n in t)e[n]=t[n];return e}function Qf(e){var t=e.parentNode;t&&t.removeChild(e)}function J(e,t,n){var r,s,o,i={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?Do.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)i[o]===void 0&&(i[o]=e.defaultProps[o]);return As(e,i,r,s,null)}function As(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Kf,__i:-1,__u:0};return s==null&&le.vnode!=null&&le.vnode(o),o}function Vr(e){return e.children}function Ns(e,t){this.props=e,this.context=t}function zn(e,t){if(t==null)return e.__?zn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?zn(e):null}function Iv(e,t,n){var r,s=e.__v,o=s.__e,i=e.__P;if(i)return(r=Dt({},s)).__v=s.__v+1,le.vnode&&le.vnode(r),tc(i,r,s,e.__n,i.ownerSVGElement!==void 0,32&s.__u?[o]:null,t,o??zn(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=o&&Zf(r),r}function Zf(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Zf(e)}}function Hu(e){(!e.__d&&(e.__d=!0)&&sn.push(e)&&!ro.__r++||ju!==le.debounceRendering)&&((ju=le.debounceRendering)||Xf)(ro)}function ro(){var e,t,n,r=[],s=[];for(sn.sort(Wi);e=sn.shift();)e.__d&&(n=sn.length,t=Iv(e,r,s)||t,n===0||sn.length>n?(zi(r,t,s),s.length=r.length=0,t=void 0,sn.sort(Wi)):t&&le.__c&&le.__c(t,Za));t&&zi(r,t,s),ro.__r=0}function ep(e,t,n,r,s,o,i,a,c,u,d){var l,f,p,h,m,g=r&&r.__k||Za,b=t.length;for(n.__d=c,xv(n,t,g),c=n.__d,l=0;l<b;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Pr:g[p.__i]||Pr,p.__i=l,tc(e,p,f,s,o,i,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&nc(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=tp(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function xv(e,t,n){var r,s,o,i,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?As(null,s,null,null,s):ec(s)?As(Vr,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?As(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=kv(s,n,i=r+l,d),s.__i=a,o=null,a!==-1&&(d--,(o=n[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==i&&(a===i+1?l++:a>i?d>c-i?l+=a-i:l--:l=a<i&&a==i-1?a-i:0,a!==r+l&&(s.__u|=65536))):(o=n[r])&&o.key==null&&o.__e&&(o.__e==e.__d&&(e.__d=zn(o)),qi(o,o,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(o=n[r])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=zn(o)),qi(o,o))}function tp(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=tp(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function kv(e,t,n,r){var s=e.key,o=e.type,i=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&o===c.type)return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&!(131072&c.__u)&&s==c.key&&o===c.type)return i;i--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&s==c.key&&o===c.type)return a;a++}}return-1}function Wu(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||wv.test(t)?n:n+"px"}function us(e,t,n,r,s){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Wu(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Wu(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?qu:zu,o)):e.removeEventListener(t,o?qu:zu,o);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function zu(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(le.event?le.event(e):e)}}function qu(e){if(this.l)return this.l[e.type+!0](le.event?le.event(e):e)}function tc(e,t,n,r,s,o,i,a,c,u){var d,l,f,p,h,m,g,b,S,R,w,D,N,E,C,B=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),o=[a=t.__e=n.__e]),(d=le.__b)&&d(t);e:if(typeof B=="function")try{if(b=t.props,S=(d=B.contextType)&&r[d.__c],R=d?S?S.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in B&&B.prototype.render?t.__c=l=new B(b,R):(t.__c=l=new Ns(b,R),l.constructor=B,l.render=Cv),S&&S.sub(l),l.props=b,l.state||(l.state={}),l.context=R,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),B.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Dt({},l.__s)),Dt(l.__s,B.getDerivedStateFromProps(b,l.__s))),p=l.props,h=l.state,l.__v=t,f)B.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(B.getDerivedStateFromProps==null&&b!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(b,R),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(b,l.__s,R)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=b,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(v){v&&(v.__=t)}),w=0;w<l._sb.length;w++)l.__h.push(l._sb[w]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(b,l.__s,R),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=R,l.props=b,l.__P=e,l.__e=!1,D=le.__r,N=0,"prototype"in B&&B.prototype.render){for(l.state=l.__s,l.__d=!1,D&&D(t),d=l.render(l.props,l.state,l.context),E=0;E<l._sb.length;E++)l.__h.push(l._sb[E]);l._sb=[]}else do l.__d=!1,D&&D(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(r=Dt(Dt({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),ep(e,ec(C=d!=null&&d.type===Vr&&d.key==null?d.props.children:d)?C:[C],t,n,r,s,o,i,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),g&&(l.__E=l.__=null)}catch(v){t.__v=null,c||o!=null?(t.__e=a,t.__u|=c?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),le.__e(v,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Rv(n.__e,t,n,r,s,o,i,c,u);(d=le.diffed)&&d(t)}function zi(e,t,n){for(var r=0;r<n.length;r++)nc(n[r],n[++r],n[++r]);le.__c&&le.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(o){o.call(s)})}catch(o){le.__e(o,s.__v)}})}function Rv(e,t,n,r,s,o,i,a,c){var u,d,l,f,p,h,m,g=n.props,b=t.props,S=t.type;if(S==="svg"&&(s=!0),o!=null){for(u=0;u<o.length;u++)if((p=o[u])&&"setAttribute"in p==!!S&&(S?p.localName===S:p.nodeType===3)){e=p,o[u]=null;break}}if(e==null){if(S===null)return document.createTextNode(b);e=s?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,b.is&&b),o=null,a=!1}if(S===null)g===b||a&&e.data===b||(e.data=b);else{if(o=o&&Do.call(e.childNodes),g=n.props||Pr,!a&&o!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in b||us(e,u,null,p,s));for(u in b)p=b[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||g[u]===p||us(e,u,p,g[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),ep(e,ec(f)?f:[f],t,n,r,s&&S!=="foreignObject",o,i,o?o[0]:n.__k&&zn(n,0),a,c),o!=null)for(u=o.length;u--;)o[u]!=null&&Qf(o[u]);a||(u="value",h!==void 0&&(h!==e[u]||S==="progress"&&!h||S==="option"&&h!==g[u])&&us(e,u,h,g[u],!1),u="checked",m!==void 0&&m!==e[u]&&us(e,u,m,g[u],!1))}return e}function nc(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){le.__e(r,n)}}function qi(e,t,n){var r,s;if(le.unmount&&le.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||nc(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){le.__e(o,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&qi(r[s],t,n||typeof e.type!="function");n||e.__e==null||Qf(e.__e),e.__=e.__e=e.__d=void 0}function Cv(e,t,n){return this.constructor(e,n)}function Av(e,t,n){var r,s,o,i;le.__&&le.__(e,t),s=(r=!1)?null:t.__k,o=[],i=[],tc(t,e=t.__k=J(Vr,null,[e]),s||Pr,Pr,t.ownerSVGElement!==void 0,s?null:t.firstChild?Do.call(t.childNodes):null,o,s?s.__e:t.firstChild,r,i),e.__d=void 0,zi(o,e,i)}Do=Za.slice,le={__e:function(e,t,n,r){for(var s,o,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),i=s.__d),i)return s.__E=s}catch(a){e=a}throw e}},Kf=0,Ns.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Dt({},this.state),typeof e=="function"&&(e=e(Dt({},n),this.props)),e&&Dt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Hu(this))},Ns.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Hu(this))},Ns.prototype.render=Vr,sn=[],Xf=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Wi=function(e,t){return e.__v.__b-t.__v.__b},ro.__r=0;var Rt,ue,ui,Gu,qn=0,np=[],Ms=[],_e=le,Vu=_e.__b,Ju=_e.__r,Yu=_e.diffed,Ku=_e.__c,Xu=_e.unmount,Qu=_e.__;function In(e,t){_e.__h&&_e.__h(ue,e,qn||t),qn=0;var n=ue.__H||(ue.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ms}),n.__[e]}function an(e){return qn=1,rp(op,e)}function rp(e,t,n){var r=In(Rt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):op(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ue,!ue.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!o||o.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!o||o.call(this,a,c,u))};ue.u=!0;var o=ue.shouldComponentUpdate,i=ue.componentWillUpdate;ue.componentWillUpdate=function(a,c,u){if(this.__e){var d=o;o=void 0,s(a,c,u),o=d}i&&i.call(this,a,c,u)},ue.shouldComponentUpdate=s}return r.__N||r.__}function Nv(e,t){var n=In(Rt++,3);!_e.__s&&rc(n.__H,t)&&(n.__=e,n.i=t,ue.__H.__h.push(n))}function sp(e,t){var n=In(Rt++,4);!_e.__s&&rc(n.__H,t)&&(n.__=e,n.i=t,ue.__h.push(n))}function Mv(e){return qn=5,Jr(function(){return{current:e}},[])}function Pv(e,t,n){qn=6,sp(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Jr(e,t){var n=In(Rt++,7);return rc(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Bn(e,t){return qn=8,Jr(function(){return e},t)}function Ov(e){var t=ue.context[e.__c],n=In(Rt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(ue)),t.props.value):e.__}function Lv(e,t){_e.useDebugValue&&_e.useDebugValue(t?t(e):e)}function Dv(e){var t=In(Rt++,10),n=an();return t.__=e,ue.componentDidCatch||(ue.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function Fv(){var e=In(Rt++,11);if(!e.__){for(var t=ue.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function $v(){for(var e;e=np.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ps),e.__H.__h.forEach(Gi),e.__H.__h=[]}catch(t){e.__H.__h=[],_e.__e(t,e.__v)}}_e.__b=function(e){ue=null,Vu&&Vu(e)},_e.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Qu&&Qu(e,t)},_e.__r=function(e){Ju&&Ju(e),Rt=0;var t=(ue=e.__c).__H;t&&(ui===ue?(t.__h=[],ue.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Ms,n.__N=n.i=void 0})):(t.__h.forEach(Ps),t.__h.forEach(Gi),t.__h=[],Rt=0)),ui=ue},_e.diffed=function(e){Yu&&Yu(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(np.push(t)!==1&&Gu===_e.requestAnimationFrame||((Gu=_e.requestAnimationFrame)||Bv)($v)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Ms&&(n.__=n.__V),n.i=void 0,n.__V=Ms})),ui=ue=null},_e.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ps),n.__h=n.__h.filter(function(r){return!r.__||Gi(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],_e.__e(r,n.__v)}}),Ku&&Ku(e,t)},_e.unmount=function(e){Xu&&Xu(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ps(r)}catch(s){t=s}}),n.__H=void 0,t&&_e.__e(t,n.__v))};var Zu=typeof requestAnimationFrame=="function";function Bv(e){var t,n=function(){clearTimeout(r),Zu&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Zu&&(t=requestAnimationFrame(n))}function Ps(e){var t=ue,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ue=t}function Gi(e){var t=ue;e.__c=e.__(),ue=t}function rc(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function op(e,t){return typeof t=="function"?t(e):t}const Uv=Object.defineProperty({__proto__:null,useCallback:Bn,useContext:Ov,useDebugValue:Lv,useEffect:Nv,useErrorBoundary:Dv,useId:Fv,useImperativeHandle:Pv,useLayoutEffect:sp,useMemo:Jr,useReducer:rp,useRef:Mv,useState:an},Symbol.toStringTag,{value:"Module"}),jv="http://www.w3.org/2000/svg";function Hv(){const e=r=>ce.createElementNS(jv,r),t=Ge(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Ge(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function Wv({options:e}){const t=Jr(()=>({__html:Hv().outerHTML}),[]);return J("h2",{class:"dialog__header"},J("span",{class:"dialog__title"},e.formTitle),e.showBranding?J("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function zv(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function li(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function qv({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:o,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:g,isNameRequired:b,messageLabel:S,messagePlaceholder:R,nameLabel:w,namePlaceholder:D,submitButtonLabel:N,isRequiredLabel:E}=e,[C,B]=an(!1),[v,M]=an(null),[k,A]=an(!1),F=u==null?void 0:u.input,[X,Q]=an(null),te=Bn(x=>{Q(x),A(!1)},[]),T=Bn(x=>{const G=zv(x,{emailLabel:h,isEmailRequired:g,isNameRequired:b,messageLabel:S,nameLabel:w});return G.length>0?M(`Please enter in the following required fields: ${G.join(", ")}`):M(null),G.length===0},[h,g,b,S,w]),W=Bn(async x=>{B(!0);try{if(x.preventDefault(),!(x.target instanceof HTMLFormElement))return;const G=new FormData(x.target),oe=await(u&&k?u.value():void 0),se={name:li(G,"name"),email:li(G,"email"),message:li(G,"message"),attachments:oe?[oe]:void 0};if(!T(se))return;try{const Te=await s({name:se.name,email:se.email,message:se.message,source:pv,tags:d},{attachments:se.attachments});o(se,Te)}catch(Te){Cs&&y.error(Te),M(Te),i(Te)}}finally{B(!1)}},[u&&k,o,i]);return J("form",{class:"form",onSubmit:W},F&&k?J(F,{onError:te}):null,J("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:C},J("div",{class:"form__top"},v?J("div",{class:"form__error-container"},v):null,c?J("label",{for:"name",class:"form__label"},J(di,{label:w,isRequiredLabel:E,isRequired:b}),J("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:D,required:b,type:"text"})):J("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?J("label",{for:"email",class:"form__label"},J(di,{label:h,isRequiredLabel:E,isRequired:g}),J("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):J("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),J("label",{for:"message",class:"form__label"},J(di,{label:S,isRequiredLabel:E,isRequired:!0}),J("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:R,required:!0,rows:5})),F?J("label",{for:"screenshot",class:"form__label"},J("button",{class:"btn btn--default",disabled:C,type:"button",onClick:()=>{Q(null),A(x=>!x)}},k?f:l),X?J("div",{class:"form__error-container"},X.message):null):null),J("div",{class:"btn-group"},J("button",{class:"btn btn--primary",disabled:C,type:"submit"},N),J("button",{class:"btn btn--default",disabled:C,type:"button",onClick:r},p))))}function di({label:e,isRequired:t,isRequiredLabel:n}){return J("span",{class:"form__label__text"},e,t&&J("span",{class:"form__label__text--required"},n))}const ls=16,el=17,Gv="http://www.w3.org/2000/svg";function Vv(){const e=c=>ot.document.createElementNS(Gv,c),t=Ge(e("svg"),{width:`${ls}`,height:`${el}`,viewBox:`0 0 ${ls} ${el}`,fill:"inherit"}),n=Ge(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Ge(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=Ge(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const o=e("defs"),i=Ge(e("clipPath"),{id:"clip0_57_156"}),a=Ge(e("rect"),{width:`${ls}`,height:`${ls}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),t}function Jv({open:e,onFormSubmitted:t,...n}){const r=n.options,s=Jr(()=>({__html:Vv().outerHTML}),[]),[o,i]=an(null),a=Bn(()=>{o&&(clearTimeout(o),i(null)),t()},[o]),c=Bn((u,d)=>{n.onSubmitSuccess(u,d),i(setTimeout(()=>{t(),i(null)},mv))},[t]);return J(Vr,null,o?J("div",{class:"success__position",onClick:a},J("div",{class:"success__content"},r.successMessageText,J("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):J("dialog",{class:"dialog",onClick:r.onFormClose,open:e},J("div",{class:"dialog__position"},J("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},J(Wv,{options:r}),J(qv,{...n,onSubmitSuccess:c})))))}const Yv=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,Kv=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,Xv=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,Qv=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,Zv=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function e0(e){const t=ce.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Yv}
${Kv}
${Xv}
${Qv}
${Zv}
`,e&&t.setAttribute("nonce",e),t}function t0(){const e=Y().getUser(),t=_t().getUser(),n=$n().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const n0=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,o=e.useSentryUser,i=t0(),a=ce.createElement("div"),c=e0(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){a.remove(),c.remove(),ce.body.style.overflow=u},open(){var p,h;f(!0),(p=e.onFormOpen)==null||p.call(e),(h=P())==null||h.emit("openFeedbackWidget"),u=ce.body.style.overflow,ce.body.style.overflow="hidden"},close(){f(!1),ce.body.style.overflow=u}},l=t==null?void 0:t.createInput({h:J,hooks:Uv,dialog:d,options:e}),f=p=>{Av(J(Jv,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(o&&(i==null?void 0:i[o.name])||""),defaultEmail:String(o&&(i==null?void 0:i[o.email])||""),onFormClose:()=>{var h;f(!1),(h=e.onFormClose)==null||h.call(e)},onSubmit:n,onSubmitSuccess:(h,m)=>{var g;f(!1),(g=e.onSubmitSuccess)==null||g.call(e,h,m)},onSubmitError:h=>{var m;(m=e.onSubmitError)==null||m.call(e,h)},onFormSubmitted:()=>{var h;(h=e.onFormSubmitted)==null||h.call(e)},open:p}),a)};return d}});function r0({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function s0(e){const t=ce.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function o0({h:e}){return function({action:n,setAction:r,options:s}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},s.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},s.hideToolText)))}}function i0({hooks:e}){function t(){const[n,r]=e.useState(ot.devicePixelRatio??1);return e.useEffect(()=>{const s=()=>{r(ot.devicePixelRatio)},o=matchMedia(`(resolution: ${ot.devicePixelRatio}dppx)`);return o.addEventListener("change",s),()=>{o.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:o,onError:i}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await br.mediaDevices.getDisplayMedia({video:{width:ot.innerWidth*a,height:ot.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=ce.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),o()})().catch(i)},[])}}function a0(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Pt(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function fi(e,t){Pt(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function pi(e,t,n){Pt(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(o=>{a0(o,s,t)})})}function c0({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const o=i0({hooks:t}),i=o0({h:e}),a=r0({h:e}),c={__html:s0(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),g=t.useRef(null),b=t.useRef(null),S=t.useRef(null),R=t.useRef(null),[w,D]=t.useState(1),N=t.useMemo(()=>{const k=ce.getElementById(s.id);if(!k)return"white";const A=getComputedStyle(k);return A.getPropertyValue("--button-primary-background")||A.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const k=()=>{const A=g.current;A&&(Pt(l.canvas,{alpha:!1},F=>{const X=Math.min(A.clientWidth/F.width,A.clientHeight/F.height);D(X)}),(A.clientHeight===0||A.clientWidth===0)&&setTimeout(k,0))};return k(),ot.addEventListener("resize",k),()=>{ot.removeEventListener("resize",k)}},[l]);const E=t.useCallback((k,A)=>{Pt(k,{alpha:!0},(F,X)=>{X.scale(A,A),F.width=l.canvas.width,F.height=l.canvas.height})},[l]);t.useEffect(()=>{E(b.current,l.dpi),fi(b.current,l.canvas)},[l]),t.useEffect(()=>{E(S.current,l.dpi),Pt(S.current,{alpha:!0},(k,A)=>{A.clearRect(0,0,k.width,k.height)}),pi(S.current,N,h)},[h,N]),t.useEffect(()=>{E(n,l.dpi),fi(n,l.canvas),Pt(ce.createElement("canvas"),{alpha:!0},(k,A)=>{A.scale(l.dpi,l.dpi),k.width=l.canvas.width,k.height=l.canvas.height,pi(k,N,h),fi(n,k)})},[h,l,N]);const C=k=>{if(!f||!R.current)return;const A=R.current.getBoundingClientRect(),F={type:f,x:k.offsetX/w,y:k.offsetY/w},X=(T,W)=>{const x=(W.clientX-A.x)/w,G=(W.clientY-A.y)/w;return{type:T.type,x:Math.min(T.x,x),y:Math.min(T.y,G),w:Math.abs(x-T.x),h:Math.abs(G-T.y)}},Q=T=>{Pt(S.current,{alpha:!0},(W,x)=>{x.clearRect(0,0,W.width,W.height)}),pi(S.current,N,[...h,X(F,T)])},te=T=>{const W=X(F,T);W.w*w>=1&&W.h*w>=1&&m(x=>[...x,W]),ce.removeEventListener("mousemove",Q),ce.removeEventListener("mouseup",te)};ce.addEventListener("mousemove",Q),ce.addEventListener("mouseup",te)},B=t.useCallback(k=>A=>{A.preventDefault(),A.stopPropagation(),m(F=>{const X=[...F];return X.splice(k,1),X})},[]),v={width:`${l.canvas.width*w}px`,height:`${l.canvas.height*w}px`},M=k=>{k.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:b,id:"background",style:v}),e("canvas",{ref:S,id:"foreground",style:v}),e("div",{ref:R,onMouseDown:C,style:v},h.map((k,A)=>e("div",{key:A,class:"editor__rect",style:{top:`${k.y*w}px`,left:`${k.x*w}px`,width:`${k.w*w}px`,height:`${k.h*w}px`}},e("button",{"aria-label":s.removeHighlightText,onClick:B(A),onMouseDown:M,onMouseUp:M,type:"button"},e(a,null))))))),e(i,{options:s,action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return o({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,g)=>{Pt(ce.createElement("canvas"),{alpha:!1},(b,S)=>{S.scale(g,g),b.width=m.videoWidth,b.height=m.videoHeight,S.drawImage(m,0,0,b.width,b.height),h({canvas:b,dpi:g})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const u0=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=ce.createElement("canvas");return{input:c0({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const o=await new Promise(i=>{s.toBlob(i,"image/png")});if(o)return{data:new Uint8Array(await o.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),l0={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},tl=O;async function ip(e,t){const n=l0[e],r=tl.Sentry=tl.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const o=d0(n),i=O.document.createElement("script");i.src=o,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise((l,f)=>{i.addEventListener("load",()=>l()),i.addEventListener("error",f)}),c=O.document.currentScript,u=O.document.body||O.document.head||(c==null?void 0:c.parentElement);if(u)u.appendChild(i);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function d0(e){var r;const t=P(),n=((r=t==null?void 0:t.getOptions())==null?void 0:r.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${Ws}/${e}.min.js`,n).toString()}const f0=Yf({lazyLoadIntegration:ip}),nl=Yf({getModalIntegration:()=>n0,getScreenshotIntegration:()=>u0});function Fo(e,t){const n=sc(e,t),r={type:_0(t),value:y0(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function p0(e,t,n,r){const s=P(),o=s==null?void 0:s.getOptions().normalizeDepth,i=E0(t),a={__serialized__:Jm(t,o)};if(i)return{exception:{values:[Fo(e,i)]},extra:a};const c={exception:{values:[{type:Ia(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:b0(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=sc(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function hi(e,t){return{exception:{values:[Fo(e,t)]}}}function sc(e,t){const n=t.stacktrace||t.stack||"",r=m0(t),s=g0(t);try{return e(n,r,s)}catch{}return[]}const h0=/Minified React error #\d+;/i;function m0(e){return e&&h0.test(e.message)?1:0}function g0(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function ap(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function _0(e){const t=e==null?void 0:e.name;return!t&&ap(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function y0(e){const t=e==null?void 0:e.message;return ap(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?lu(t.error):lu(e):"No error message"}function cp(e,t,n,r){const s=(n==null?void 0:n.syntheticException)||void 0,o=$o(e,t,s,r);return pn(o),o.level="error",n!=null&&n.event_id&&(o.event_id=n.event_id),Ea(o)}function up(e,t,n="info",r,s){const o=(r==null?void 0:r.syntheticException)||void 0,i=Vi(e,t,o,s);return i.level=n,r!=null&&r.event_id&&(i.event_id=r.event_id),Ea(i)}function $o(e,t,n,r,s){let o;if(Ad(t)&&t.error)return hi(e,t.error);if(zc(t)||Vm(t)){const i=t;if("stack"in t)o=hi(e,t);else{const a=i.name||(zc(i)?"DOMError":"DOMException"),c=i.message?`${a}: ${i.message}`:a;o=Vi(e,c,n,r),qc(o,c)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return Ft(t)?hi(e,t):Et(t)||Ia(t)?(o=p0(e,t,n,s),pn(o,{synthetic:!0}),o):(o=Vi(e,t,n,r),qc(o,`${t}`),pn(o,{synthetic:!0}),o)}function Vi(e,t,n,r){const s={};if(r&&n){const o=sc(e,n);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]}),pn(s,{synthetic:!0})}if(Sa(t)){const{__sentry_template_string__:o,__sentry_template_values__:i}=t;return s.logentry={message:o,params:i},s}return s.message=t,s}function b0(e,{isUnhandledRejection:t}){const n=Ym(e),r=t?"promise rejection":"exception";return Ad(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Ia(e)?`Event \`${S0(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function S0(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function E0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class lp extends O_{constructor(t){var d;const n=v0(t),r=O.SENTRY_SDK_SOURCE||VE();pf(n,"browser",["browser"],r),(d=n._metadata)!=null&&d.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:o,enableLogs:i,_experiments:a,enableMetrics:c}=this._options,u=c??(a==null?void 0:a.enableMetrics)??!0;O.document&&(o||i||u)&&O.document.addEventListener("visibilitychange",()=>{O.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),i&&Ma(this),u&&Oa(this))}),s&&this.on("beforeSendSession",X_)}eventFromException(t,n){return cp(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return up(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}function v0(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=O.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const vn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,H=K,T0=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Yr=(e,t,n,r)=>{let s,o;return i=>{t.value>=0&&(i||r)&&(o=t.value-(s??0),(o||s===void 0)&&(s=t.value,t.delta=o,t.rating=T0(t.value,n),e(t)))}},Kr=(e=!0)=>{var n,r;const t=(r=(n=H.performance)==null?void 0:n.getEntriesByType)==null?void 0:r.call(n,"navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},sr=()=>{const e=Kr();return(e==null?void 0:e.activationStart)??0};function Bt(e,t,n){H.document&&H.addEventListener(e,t,n)}function so(e,t,n){H.document&&H.removeEventListener(e,t,n)}let Un=-1;const dp=new Set,w0=()=>{var e,t;return((e=H.document)==null?void 0:e.visibilityState)==="hidden"&&!((t=H.document)!=null&&t.prerendering)?0:1/0},Os=e=>{if(I0(e)&&Un>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of dp)t();isFinite(Un)||(Un=e.type==="visibilitychange"?e.timeStamp:0,so("prerenderingchange",Os,!0))}},Xr=()=>{var e;if(H.document&&Un<0){const t=sr();Un=(H.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>t)[0])==null?void 0:e.startTime)??w0(),Bt("visibilitychange",Os,!0),Bt("pagehide",Os,!0),Bt("prerenderingchange",Os,!0)}return{get firstHiddenTime(){return Un},onHidden(t){dp.add(t)}}};function I0(e){var t;return e.type==="pagehide"||((t=H.document)==null?void 0:t.visibilityState)==="hidden"}const x0=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Qr=(e,t=-1)=>{var o,i;const n=Kr();let r="navigate";return n&&((o=H.document)!=null&&o.prerendering||sr()>0?r="prerender":(i=H.document)!=null&&i.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:x0(),navigationType:r}},mi=new WeakMap;function oc(e,t){try{return mi.get(e)||mi.set(e,new t),mi.get(e)}catch{return new t}}class oo{constructor(){oo.prototype.__init.call(this),oo.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var s;if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),(s=this._onAfterProcessingUnexpectedShift)==null||s.call(this,t)}}const or=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},ic=e=>{let t=!1;return()=>{t||(e(),t=!0)}},Bo=e=>{var t;(t=H.document)!=null&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},k0=[1800,3e3],R0=(e,t={})=>{Bo(()=>{const n=Xr(),r=Qr("FCP");let s;const i=or("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(i.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-sr(),0),r.entries.push(c),s(!0)))});i&&(s=Yr(e,r,k0,t.reportAllChanges))})},C0=[.1,.25],A0=(e,t={})=>{R0(ic(()=>{var c;const n=Qr("CLS",0);let r;const s=Xr(),o=oc(t,oo),i=u=>{for(const d of u)o._processEntry(d);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},a=or("layout-shift",i);a&&(r=Yr(e,n,C0,t.reportAllChanges),s.onHidden(()=>{i(a.takeRecords()),r(!0)}),(c=H==null?void 0:H.setTimeout)==null||c.call(H,r))}))};let fp=0,gi=1/0,ds=0;const N0=e=>{e.forEach(t=>{t.interactionId&&(gi=Math.min(gi,t.interactionId),ds=Math.max(ds,t.interactionId),fp=ds?(ds-gi)/7+1:0)})};let Ji;const pp=()=>Ji?fp:performance.interactionCount||0,M0=()=>{"interactionCount"in performance||Ji||(Ji=or("event",N0,{type:"event",buffered:!0,durationThreshold:0}))},_i=10;let hp=0;const P0=()=>pp()-hp;class io{constructor(){io.prototype.__init.call(this),io.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){hp=pp(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(P0()/50));return this._longestInteractionList[t]}_processEntry(t){var s,o;if((s=this._onBeforeProcessingEntry)==null||s.call(this,t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<_i||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((i,a)=>a._latency-i._latency),this._longestInteractionList.length>_i){const i=this._longestInteractionList.splice(_i);for(const a of i)this._longestInteractionMap.delete(a.id)}(o=this._onAfterProcessingINPCandidate)==null||o.call(this,r)}}}const mp=e=>{var n;const t=H.requestIdleCallback||H.setTimeout;((n=H.document)==null?void 0:n.visibilityState)==="hidden"?e():(e=ic(e),Bt("visibilitychange",e,{once:!0,capture:!0}),Bt("pagehide",e,{once:!0,capture:!0}),t(()=>{e(),so("visibilitychange",e,{capture:!0}),so("pagehide",e,{capture:!0})}))},O0=[200,500],L0=40,D0=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=Xr();Bo(()=>{M0();const r=Qr("INP");let s;const o=oc(t,io),i=c=>{mp(()=>{for(const d of c)o._processEntry(d);const u=o._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,s())})},a=or("event",i,{durationThreshold:t.durationThreshold??L0});s=Yr(e,r,O0,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{i(a.takeRecords()),s(!0)}))})};class F0{_processEntry(t){var n;(n=this._onBeforeProcessingEntry)==null||n.call(this,t)}}const $0=[2500,4e3],B0=(e,t={})=>{Bo(()=>{const n=Xr(),r=Qr("LCP");let s;const o=oc(t,F0),i=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)o._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-sr(),0),r.entries=[u],s())},a=or("largest-contentful-paint",i);if(a){s=Yr(e,r,$0,t.reportAllChanges);const c=ic(()=>{i(a.takeRecords()),a.disconnect(),s(!0)}),u=d=>{d.isTrusted&&(mp(c),so(d.type,u,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])Bt(d,u,{capture:!0})}})},U0=[800,1800],Yi=e=>{var t,n;(t=H.document)!=null&&t.prerendering?Bo(()=>Yi(e)):((n=H.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>Yi(e),!0):setTimeout(e)},j0=(e,t={})=>{const n=Qr("TTFB"),r=Yr(e,n,U0,t.reportAllChanges);Yi(()=>{const s=Kr();s&&(n.value=Math.max(s.responseStart-sr(),0),n.entries=[s],r(!0))})},wr={},ao={};let gp,_p,yp,bp;function ac(e,t=!1){return Uo("cls",e,W0,gp,t)}function cc(e,t=!1){return Uo("lcp",e,z0,_p,t)}function H0(e){return Uo("ttfb",e,q0,yp)}function Sp(e){return Uo("inp",e,G0,bp)}function Tn(e,t){return Ep(e,t),ao[e]||(V0(e),ao[e]=!0),vp(e,t)}function Zr(e,t){const n=wr[e];if(n!=null&&n.length)for(const r of n)try{r(t)}catch(s){vn&&y.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Gt(r)}
Error:`,s)}}function W0(){return A0(e=>{Zr("cls",{metric:e}),gp=e},{reportAllChanges:!0})}function z0(){return B0(e=>{Zr("lcp",{metric:e}),_p=e},{reportAllChanges:!0})}function q0(){return j0(e=>{Zr("ttfb",{metric:e}),yp=e})}function G0(){return D0(e=>{Zr("inp",{metric:e}),bp=e})}function Uo(e,t,n,r,s=!1){Ep(e,t);let o;return ao[e]||(o=n(),ao[e]=!0),r&&t({metric:r}),vp(e,t,s?o:void 0)}function V0(e){const t={};e==="event"&&(t.durationThreshold=0),or(e,n=>{Zr(e,{entries:n})},t)}function Ep(e,t){wr[e]=wr[e]||[],wr[e].push(t)}function vp(e,t,n){return()=>{n&&n();const r=wr[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function J0(e){return"duration"in e}const Y0=e=>{const t=n=>{var r;(n.type==="pagehide"||((r=H.document)==null?void 0:r.visibilityState)==="hidden")&&e(n)};Bt("visibilitychange",t,{capture:!0,once:!0}),Bt("pagehide",t,{capture:!0,once:!0})};function yi(e){return typeof e=="number"&&isFinite(e)}function Kt(e,t,n,{...r}){const s=$(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),mn(e,()=>{const o=tt({startTime:t,...r});return o&&o.end(n),o})}function uc(e){var g;const t=P();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:o}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),u=t.getIntegrationByName("Replay"),d=u==null?void 0:u.getReplayId(),l=Y(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":(g=H.navigator)==null?void 0:g.userAgent,"client.address":c?"{{auto}}":void 0,...s};return tt({name:n,attributes:m,startTime:o,experimental:{standalone:!0}})}function es(){return H.addEventListener&&H.performance}function ve(e){return e/1e3}function K0(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function Tp(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function wp(e,t){let n,r=!1;function s(a){!r&&n&&t(a,n),r=!0}Y0(()=>{s("pagehide")});const o=e.on("beforeStartNavigationSpan",(a,c)=>{c!=null&&c.isRedirect||(s("navigation"),o(),i())}),i=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,i()})}function X0(e){let t=0,n;if(!Tp("layout-shift"))return;const r=ac(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);wp(e,(s,o)=>{Q0(t,n,o,s),r()})}function Q0(e,t,n,r){var u;vn&&y.log(`Sending CLS span (${e})`);const s=t?ve((Ne()||0)+t.startTime):ye(),o=Y().getScopeData().transactionName,i=t?Je((u=t.sources[0])==null?void 0:u.node):"Layout shift",a={[q]:"auto.http.browser.cls",[pe]:"ui.webvital.cls",[Qn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t!=null&&t.sources&&t.sources.forEach((d,l)=>{a[`cls.source.${l+1}`]=Je(d.node)});const c=uc({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Ur]:"",[jr]:e}),c.end(s))}function Z0(e){let t=0,n;if(!Tp("largest-contentful-paint"))return;const r=cc(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);wp(e,(s,o)=>{eT(t,n,o,s),r()})}function eT(e,t,n,r){vn&&y.log(`Sending LCP span (${e})`);const s=ve((Ne()||0)+((t==null?void 0:t.startTime)||0)),o=Y().getScopeData().transactionName,i=t?Je(t.element):"Largest contentful paint",a={[q]:"auto.http.browser.lcp",[pe]:"ui.webvital.lcp",[Qn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Je(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=uc({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Ur]:"millisecond",[jr]:e}),c.end(s))}function Ke(e){return e&&((Ne()||performance.timeOrigin)+e)/1e3}function Ip(e){var n;const t={};if(e.nextHopProtocol!=null){const{name:r,version:s}=K0(e.nextHopProtocol);t["network.protocol.version"]=s,t["network.protocol.name"]=r}return Ne()||(n=es())!=null&&n.timeOrigin?tT({...t,"http.request.redirect_start":Ke(e.redirectStart),"http.request.redirect_end":Ke(e.redirectEnd),"http.request.worker_start":Ke(e.workerStart),"http.request.fetch_start":Ke(e.fetchStart),"http.request.domain_lookup_start":Ke(e.domainLookupStart),"http.request.domain_lookup_end":Ke(e.domainLookupEnd),"http.request.connect_start":Ke(e.connectStart),"http.request.secure_connection_start":Ke(e.secureConnectionStart),"http.request.connection_end":Ke(e.connectEnd),"http.request.request_start":Ke(e.requestStart),"http.request.response_start":Ke(e.responseStart),"http.request.response_end":Ke(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function tT(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const nT=2147483647;let rl=0,st={},je,Mn;function rT({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=es();if(r&&Ne()){r.mark&&H.performance.mark("sentry-tracing-init");const s=t?Z0(n):cT(),o=uT(),i=e?X0(n):aT();return()=>{s==null||s(),o(),i==null||i()}}return()=>{}}function sT(){Tn("longtask",({entries:e})=>{const t=be();if(!t)return;const{op:n,start_timestamp:r}=$(t);for(const s of e){const o=ve(Ne()+s.startTime),i=ve(s.duration);n==="navigation"&&r&&o<r||Kt(t,o,o+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[q]:"auto.ui.browser.metrics"}})}})}function oT(){new PerformanceObserver(t=>{const n=be();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=ve(Ne()+r.startTime),{start_timestamp:o,op:i}=$(n);if(i==="navigation"&&o&&s<o)continue;const a=ve(r.duration),c={[q]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),Kt(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function iT(){Tn("event",({entries:e})=>{const t=be();if(t){for(const n of e)if(n.name==="click"){const r=ve(Ne()+n.startTime),s=ve(n.duration),o={name:Je(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[q]:"auto.ui.browser.metrics"}},i=Nd(n.target);i&&(o.attributes["ui.component_name"]=i),Kt(t,r,r+s,o)}}})}function aT(){return ac(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(st.cls={value:e.value,unit:""},Mn=t)},!0)}function cT(){return cc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(st.lcp={value:e.value,unit:"millisecond"},je=t)},!0)}function uT(){return H0(({metric:e})=>{e.entries[e.entries.length-1]&&(st.ttfb={value:e.value,unit:"millisecond"})})}function lT(e,t){const n=es(),r=Ne();if(!(n!=null&&n.getEntries)||!r)return;const s=ve(r),o=n.getEntries(),{op:i,start_timestamp:a}=$(e);o.slice(rl).forEach(c=>{const u=ve(c.startTime),d=ve(Math.max(0,c.duration));if(!(i==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{hT(e,c,s);break}case"mark":case"paint":case"measure":{fT(e,c,u,d,s,t.ignorePerformanceApiSpans);const l=Xr(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(st.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(st.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{_T(e,c,c.name,u,d,s,t.ignoreResourceSpans);break}}}),rl=Math.max(o.length-1,0),yT(e),i==="pageload"&&(ET(st),t.recordClsOnPageloadSpan||delete st.cls,t.recordLcpOnPageloadSpan||delete st.lcp,Object.entries(st).forEach(([c,u])=>{Hd(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",sr()),bT(e,t)),je=void 0,Mn=void 0,st={}}function dT(e){if((e==null?void 0:e.entryType)==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function fT(e,t,n,r,s,o){if(dT(t)||["mark","measure"].includes(t.entryType)&&ct(t.name,o))return;const i=Kr(!1),a=ve(i?i.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,l={[q]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),pT(l,t),c<=d&&Kt(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function pT(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&Jt(s))e[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(Jt(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function hT(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{fs(e,t,r,n)}),fs(e,t,"secureConnection",n,"TLS/SSL"),fs(e,t,"fetch",n,"cache"),fs(e,t,"domainLookup",n,"DNS"),gT(e,t,n)}function fs(e,t,n,r,s=n){const o=mT(n),i=t[o],a=t[`${n}Start`];!a||!i||Kt(e,r+ve(a),r+ve(i),{op:`browser.${s}`,name:t.name,attributes:{[q]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function mT(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function gT(e,t,n){const r=n+ve(t.requestStart),s=n+ve(t.responseEnd),o=n+ve(t.responseStart);t.responseEnd&&(Kt(e,r,s,{op:"browser.request",name:t.name,attributes:{[q]:"auto.ui.browser.metrics"}}),Kt(e,o,s,{op:"browser.response",name:t.name,attributes:{[q]:"auto.ui.browser.metrics"}}))}function _T(e,t,n,r,s,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(i!=null&&i.includes(a))return;const c={[q]:"auto.resource.browser.metrics"},u=fn(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(H.location.origin),ST(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d={...c,...Ip(t)},l=o+r,f=l+s;Kt(e,l,f,{name:n.replace(H.location.origin,""),op:a,attributes:d})}function yT(e){const t=H.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),yi(n.rtt)&&(st["connection.rtt"]={value:n.rtt,unit:"millisecond"})),yi(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),yi(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function bT(e,t){je&&t.recordLcpOnPageloadSpan&&(je.element&&e.setAttribute("lcp.element",Je(je.element)),je.id&&e.setAttribute("lcp.id",je.id),je.url&&e.setAttribute("lcp.url",je.url.trim().slice(0,200)),je.loadTime!=null&&e.setAttribute("lcp.loadTime",je.loadTime),je.renderTime!=null&&e.setAttribute("lcp.renderTime",je.renderTime),e.setAttribute("lcp.size",je.size)),Mn!=null&&Mn.sources&&t.recordClsOnPageloadSpan&&Mn.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Je(n.node)))}function ST(e,t,n){n.forEach(([r,s])=>{const o=e[r];o!=null&&(typeof o=="number"&&o<nT||typeof o=="string")&&(t[s]=o)})}function ET(e){const t=Kr(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function vT(){return es()&&Ne()?Tn("element",TT):()=>{}}const TT=({entries:e})=>{const t=be(),n=t?we(t):void 0,r=n?$(n).description:Y().getScopeData().transactionName;e.forEach(s=>{var p,h;const o=s;if(!o.identifier)return;const i=o.name,a=o.renderTime,c=o.loadTime,[u,d]=c?[ve(c),"load-time"]:a?[ve(a),"render-time"]:[ye(),"entry-emission"],l=i==="image-paint"?ve(Math.max(0,(a??0)-(c??0))):0,f={[q]:"auto.ui.browser.elementtiming",[pe]:"ui.elementtiming",[ae]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":o.id,"element.type":((h=(p=o.element)==null?void 0:p.tagName)==null?void 0:h.toLowerCase())||"unknown","element.size":o.naturalWidth&&o.naturalHeight?`${o.naturalWidth}x${o.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":o.url||void 0,"element.identifier":o.identifier,"element.paint_type":i};Ct({name:`element[${o.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},m=>{m.end(u+l)})})},wT=1e3;let sl,Ki,Xi;function xp(e){const t="dom";Zt(t,e),en(t,IT)}function IT(){if(!H.document)return;const e=et.bind(null,"dom"),t=ol(e,!0);H.document.addEventListener("click",t,!1),H.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var o,i;const s=(o=H[n])==null?void 0:o.prototype;(i=s==null?void 0:s.hasOwnProperty)!=null&&i.call(s,"addEventListener")&&(ke(s,"addEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=l[c]=l[c]||{refCount:0};if(!f.handler){const p=ol(e);f.handler=p,a.call(this,c,p,d)}f.refCount++}catch{}return a.call(this,c,u,d)}}),ke(s,"removeEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__||{},f=l[c];f&&(f.refCount--,f.refCount<=0&&(a.call(this,c,f.handler,d),f.handler=void 0,delete l[c]),Object.keys(l).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,u,d)}}))})}function xT(e){if(e.type!==Ki)return!1;try{if(!e.target||e.target._sentryId!==Xi)return!1}catch{}return!0}function kT(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function ol(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=RT(n);if(kT(n.type,r))return;Ve(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ve(r,"_sentryId",at());const s=n.type==="keypress"?"input":n.type;xT(n)||(e({event:n,name:s,global:t}),Ki=n.type,Xi=r?r._sentryId:void 0),clearTimeout(sl),sl=H.setTimeout(()=>{Xi=void 0,Ki=void 0},wT)}}function RT(e){try{return e.target}catch{return null}}let ps;function jo(e){const t="history";Zt(t,e),en(t,CT)}function CT(){if(H.addEventListener("popstate",()=>{const t=H.location.href,n=ps;if(ps=t,n===t)return;et("history",{from:n,to:t})}),!$E())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=ps,o=AT(String(r));if(ps=o,s===o)return t.apply(this,n);et("history",{from:s,to:o})}return t.apply(this,n)}}ke(H.history,"pushState",e),ke(H.history,"replaceState",e)}function AT(e){try{return new URL(e,H.location.origin).toString()}catch{return e}}const Ls={};function lc(e){const t=Ls[e];if(t)return t;let n=H[e];if(Hi(n))return Ls[e]=n.bind(H);const r=H.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o!=null&&o[e]&&(n=o[e]),r.head.removeChild(s)}catch(s){vn&&y.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(Ls[e]=n.bind(H))}function NT(e){Ls[e]=void 0}function ts(...e){return lc("setTimeout")(...e)}const Tt="__sentry_xhr_v3__";function dc(e){const t="xhr";Zt(t,e),en(t,MT)}function MT(){if(!H.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,o=ye()*1e3,i=dn(r[0])?r[0].toUpperCase():void 0,a=PT(r[1]);if(!i||!a)return t.apply(n,r);n[Tt]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[Tt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:ye()*1e3,startTimestamp:o,xhr:n,virtualError:s};et("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[Tt];return h&&dn(f)&&dn(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[Tt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const o={startTimestamp:ye()*1e3,xhr:n};return et("xhr",o),t.apply(n,r)}})}function PT(e){if(dn(e))return e;try{return e.toString()}catch{}}const OT=Symbol.for("sentry__originalRequestBody");function kp(e){return new URLSearchParams(e).toString()}function co(e,t=y){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[kp(e)];if(!e)return[void 0]}catch(n){return vn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return vn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function fc(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const n=e[0][OT];return n!==void 0?n:void 0}}function Rp(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return vn&&y.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return o&&(n[s.toLowerCase()]=o),n},{}):{}}const bi=[],Ds=new Map,kn=new Map,LT=60;function DT(){if(es()&&Ne()){const t=FT();return()=>{t()}}return()=>{}}const Qi={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function FT(){return Sp($T)}const $T=({metric:e})=>{if(e.value==null)return;const t=ve(e.value);if(t>LT)return;const n=e.entries.find(h=>h.duration===e.value&&Qi[h.name]);if(!n)return;const{interactionId:r}=n,s=Qi[n.name],o=ve(Ne()+n.startTime),i=be(),a=i?we(i):void 0,c=r!=null?Ds.get(r):void 0,u=(c==null?void 0:c.span)||a,d=u?$(u).description:Y().getScopeData().transactionName,l=(c==null?void 0:c.elementName)||Je(n.target),f={[q]:"auto.http.browser.inp",[pe]:`ui.interaction.${s}`,[Qn]:n.duration},p=uc({name:l,transaction:d,attributes:f,startTime:o});p&&(p.addEvent("inp",{[Ur]:"millisecond",[jr]:e.value}),p.end(o+t))};function BT(){const e=Object.keys(Qi);no()&&e.forEach(s=>{H.addEventListener(s,t,{capture:!0,passive:!0})});function t(s){const o=s.target;if(!o)return;const i=Je(o),a=Math.round(s.timeStamp);if(kn.set(a,i),kn.size>50){const c=kn.keys().next().value;c!==void 0&&kn.delete(c)}}function n(s){const o=Math.round(s.startTime);let i=kn.get(o);if(!i)for(let a=-5;a<=5;a++){const c=kn.get(o+a);if(c){i=c;break}}return i||"<unknown>"}const r=({entries:s})=>{const o=be(),i=o&&we(o);s.forEach(a=>{if(!J0(a))return;const c=a.interactionId;if(c==null||Ds.has(c))return;const u=a.target?Je(a.target):n(a);if(bi.length>10){const d=bi.shift();Ds.delete(d)}bi.push(c),Ds.set(c,{span:i,elementName:u})})};Tn("event",r),Tn("first-input",r)}const UT=40;function pc(e,t=lc("fetch")){let n=0,r=0;async function s(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw NT("fetch"),c}finally{n-=i,r--}}return tf(e,s,Fa(e.bufferSize||UT))}function jT(){const e=P();if(!e){I&&y.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&y.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function HT(){const e=P();if(!e){I&&y.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&y.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const WT={startProfiler:jT,stopProfiler:HT},zT=10,qT=20,GT=30,VT=40,JT=50;function Gn(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?xt:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const YT=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,KT=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,XT=/\((\S*)(?::(\d+))(?::(\d+))\)/,QT=/at (.+?) ?\(data:(.+?),/,ZT=e=>{const t=e.match(QT);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=YT.exec(e);if(n){const[,s,o,i]=n;return Gn(s,xt,+o,+i)}const r=KT.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=XT.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[o,i]=Pp(r[1]||xt,r[2]);return Gn(i,o,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Cp=[GT,ZT],ew=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tw=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,nw=e=>{const t=ew.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=tw.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],s=t[1]||xt;return[s,r]=Pp(s,r),Gn(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Ap=[JT,nw],rw=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,sw=e=>{const t=rw.exec(e);return t?Gn(t[2],t[1]||xt,+t[3],t[4]?+t[4]:void 0):void 0},ow=[VT,sw],iw=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,aw=e=>{const t=iw.exec(e);return t?Gn(t[2],t[3]||xt,+t[1]):void 0},cw=[zT,aw],uw=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,lw=e=>{const t=uw.exec(e);return t?Gn(t[5],t[3]||t[4]||xt,+t[1],+t[2]):void 0},dw=[qT,lw],Np=[Cp,Ap],Mp=Km(...Np),Pp=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:xt,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function fw(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...(t==null?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Qt(r)}},o=pw(e);return pt(s,[o])}function pw(e){return[{type:"user_report"},e]}const hs=1024,hw="Breadcrumbs",mw=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:hw,setup(n){t.console&&ja(yw(n)),t.dom&&xp(_w(n,t.dom)),t.xhr&&dc(bw(n)),t.fetch&&Qa(Sw(n)),t.history&&jo(Ew(n)),t.sentry&&n.on("beforeSendEvent",gw(n))}}},Op=mw;function gw(e){return function(n){P()===e&&ut({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:rn(n)},{event:n})}}function _w(e,t){return function(r){if(P()!==e)return;let s,o,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>hs&&(I&&y.warn(`\`dom.maxStringLength\` cannot exceed ${hs}, but a value of ${a} was configured. Sentry will use ${hs} instead.`),a=hs),typeof i=="string"&&(i=[i]);try{const u=r.event,d=vw(u)?u.target:u;s=Je(d,{keyAttrs:i,maxStringLength:a}),o=Nd(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};o&&(c.data={"ui.component_name":o}),ut(c,{event:r.event,name:r.name,global:r.global})}}function yw(e){return function(n){if(P()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Zs(n.level),message:qs(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${qs(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ut(r,{input:n.args,level:n.level})}}function bw(e){return function(n){if(P()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,o=n.xhr[Tt];if(!r||!s||!o)return;const{method:i,url:a,status_code:c,body:u}=o,d={method:i,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:d,type:"http",level:Wf(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),ut(f,l)}}function Sw(e){return function(n){if(P()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const o=n.fetchData,i={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),ut(a,i)}else{const o=n.response,i={...n.fetchData,status_code:o==null?void 0:o.status};n.fetchData.request_body_size,n.fetchData.response_body_size,o==null||o.status;const a={input:n.args,response:o,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:i,type:"http",level:Wf(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),ut(c,a)}}}function Ew(e){return function(n){if(P()!==e)return;let r=n.from,s=n.to;const o=fn(O.location.href);let i=r?fn(r):void 0;const a=fn(s);i!=null&&i.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(s=a.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),ut({category:"navigation",data:{from:r,to:s}})}}function vw(e){return!!e&&!!e.target}const Tw=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],ww="BrowserApiErrors",Iw=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:ww,setupOnce(){t.setTimeout&&ke(O,"setTimeout",il),t.setInterval&&ke(O,"setInterval",il),t.requestAnimationFrame&&ke(O,"requestAnimationFrame",xw),t.XMLHttpRequest&&"XMLHttpRequest"in O&&ke(XMLHttpRequest.prototype,"send",kw);const n=t.eventTarget;n&&(Array.isArray(n)?n:Tw).forEach(s=>Rw(s,t))}}},Lp=Iw;function il(e){return function(...t){const n=t[0];return t[0]=Mr(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${Gt(e)}`}}),e.apply(this,t)}}function xw(e){return function(t){return e.apply(this,[Mr(t,{mechanism:{data:{handler:Gt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function kw(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&ke(n,s,function(o){const i={mechanism:{data:{handler:Gt(o)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},a=Rd(o);return a&&(i.mechanism.data.handler=Gt(a)),Mr(o,i)})}),e.apply(this,t)}}function Rw(e,t){var s,o;const r=(s=O[e])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(ke(r,"addEventListener",function(i){return function(a,c,u){try{Cw(c)&&(c.handleEvent=Mr(c.handleEvent,{mechanism:{data:{handler:Gt(c),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&Aw(this,a,c),i.apply(this,[a,Mr(c,{mechanism:{data:{handler:Gt(c),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),u])}}),ke(r,"removeEventListener",function(i){return function(a,c,u){try{const d=c.__sentry_wrapped__;d&&i.call(this,a,d,u)}catch{}return i.call(this,a,c,u)}}))}function Cw(e){return typeof e.handleEvent=="function"}function Aw(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const Dp=()=>({name:"BrowserSession",setupOnce(){if(typeof O.document>"u"){I&&y.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Ni({ignoreDuration:!0}),Mi(),jo(({from:e,to:t})=>{e!==void 0&&e!==t&&(Ni({ignoreDuration:!0}),Mi())})}}),Nw="GlobalHandlers",Mw=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Nw,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Pw(n),al("onerror")),t.onunhandledrejection&&(Ow(n),al("onunhandledrejection"))}}},Fp=Mw;function Pw(e){$d(t=>{const{stackParser:n,attachStacktrace:r}=Up();if(P()!==e||Md())return;const{msg:s,url:o,line:i,column:a,error:c}=t,u=Lw($o(n,c||s,void 0,r,!1),o,i,a);u.level="error",er(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function Ow(e){Bd(t=>{const{stackParser:n,attachStacktrace:r}=Up();if(P()!==e||Md())return;const s=$p(t),o=Jt(s)?Bp(s):$o(n,s,void 0,r,!0);o.level="error",er(o,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function $p(e){if(Jt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Bp(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Lw(e,t,n,r){const s=e.exception=e.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=Dw(t)??Zn();return c.length===0&&c.push({colno:u,filename:l,function:xt,in_app:!0,lineno:d}),e}function al(e){I&&y.log(`Global Handler attached: ${e}`)}function Up(){const e=P();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function Dw(e){if(!(!dn(e)||e.length===0))return e.startsWith("data:")?`<${$t(e,!1)}>`:e}const jp=()=>({name:"HttpContext",preprocessEvent(e){var r;if(!O.navigator&&!O.location&&!O.document)return;const t=xa(),n={...t.headers,...(r=e.request)==null?void 0:r.headers};e.request={...t,...e.request,headers:n}}}),Fw="cause",$w=5,Bw="LinkedErrors",Uw=(e={})=>{const t=e.limit||$w,n=e.key||Fw;return{name:Bw,preprocessEvent(r,s,o){const i=o.getOptions();py(Fo,i.stackParser,n,t,r,s)}}},Hp=Uw,jw="SpotlightBrowser",Hw=(e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:jw,setup:()=>{I&&y.log("Using Sidecar URL",t)},processEvent:n=>qw(n)?null:n,afterAllSetup:n=>{Ww(n,t)}}};function Ww(e,t){const n=lc("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){y.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Js(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(o=>{o.status>=200&&o.status<400&&(r=0)},o=>{r++,y.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",o)})})}const zw=Hw;function qw(e){var t;return!!(e.type==="transaction"&&e.spans&&((t=e.contexts)!=null&&t.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:n})=>n==null?void 0:n.includes("#sentry-spotlight")))}function Gw(){return Vw()?(I&&Hr(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Vw(){var o;if(typeof O.window>"u")return!1;const e=O;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((o=t==null?void 0:t.runtime)!=null&&o.id))return!1;const n=Zn(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(O===O.top&&r.some(i=>n.startsWith(`${i}://`)))}function Wp(e){return[gf(),hf(),yb(),Lp(),Op(),Fp(),Hp(),Sf(),jp(),Dp()]}function Jw(e={}){const t=!e.skipBrowserExtensionCheck&&Gw();let n=e.defaultIntegrations==null?Wp():e.defaultIntegrations;const r={...e,enabled:t?!1:e.enabled,stackParser:Xm(e.stackParser||Mp),integrations:d_({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||pc};return U_(lp,r)}function Yw(){}function Kw(e){e()}const Xw=K,Qw="ReportingObserver",cl=new WeakMap,Zw=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(cl.has(P()))for(const s of r)ft(o=>{o.setExtra("url",s.url);const i=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(o.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}Pd(`${i}: ${a}`)})}return{name:Qw,setupOnce(){if(!UE())return;new Xw.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){cl.set(r,!0)}}},eI=Zw,tI="HttpClient",nI=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:tI,setup(n){dI(n,t),fI(n,t)}}},rI=nI;function sI(e,t,n,r,s){if(qp(e,n.status,n.url)){const o=pI(t,r);let i,a,c,u;Vp()&&([i,c]=ul("Cookie",o),[a,u]=ul("Set-Cookie",n));const d=Gp({url:o.url,method:o.method,status:n.status,requestHeaders:i,responseHeaders:a,requestCookies:c,responseCookies:u,error:s,type:"fetch"});er(d)}}function ul(e,t){const n=aI(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=zp(s))}catch{}return[n,r]}function oI(e,t,n,r,s){if(qp(e,t.status,t.responseURL)){let o,i,a;if(Vp()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(i=zp(u))}catch{}try{a=cI(t)}catch{}o=r}const c=Gp({url:t.responseURL,method:n,status:t.status,requestHeaders:o,responseHeaders:a,responseCookies:i,error:s,type:"xhr"});er(c)}}function iI(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function zp(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function aI(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function cI(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return s&&o&&(n[s]=o),n},{}):{}}function uI(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function lI(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function dI(e,t){zf()&&Qa(n=>{if(P()!==e)return;const{response:r,args:s,error:o,virtualError:i}=n,[a,c]=s;r&&sI(t,a,r,c,o||i)},!1)}function fI(e,t){"XMLHttpRequest"in K&&dc(n=>{if(P()!==e)return;const{error:r,virtualError:s}=n,o=n.xhr,i=o[Tt];if(!i)return;const{method:a,request_headers:c}=i;try{oI(t,o,a,c,r||s)}catch(u){I&&y.warn("Error while extracting response event form XHR response",u)}})}function qp(e,t,n){return lI(e.failedRequestStatusCodes,t)&&uI(e.failedRequestTargets,n)&&!df(n,P())}function Gp(e){const t=P(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,o={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:iI(e.responseHeaders)}}};return pn(o,{type:`auto.http.client.${e.type}`,handled:!1}),o}function pI(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Vp(){const e=P();return e?!!e.getOptions().sendDefaultPii:!1}const Si=K,hI=7,mI="ContextLines",gI=(e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:hI;return{name:mI,processEvent(n){return yI(n,t)}}},_I=gI;function yI(e,t){var a;const n=Si.document,r=Si.location&&lf(Si.location.href);if(!n||!r)return e;const s=(a=e.exception)==null?void 0:a.values;if(!(s!=null&&s.length))return e;const o=n.documentElement.innerHTML;if(!o)return e;const i=["<!DOCTYPE html>","<html>",...o.split(`
`),"</html>"];return s.forEach(c=>{const u=c.stacktrace;u!=null&&u.frames&&(u.frames=u.frames.map(d=>bI(d,i,r,t)))}),e}function bI(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Qm(t,e,r),e}const SI="GraphQLClient",EI=e=>({name:SI,setup(t){vI(t,e),TI(t,e)}});function vI(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const o=$(n).data||{};if(!(o[pe]==="http.client"))return;const c=o[Zm]||o["http.url"],u=o[eg]||o["http.method"];if(!dn(c)||!dn(u))return;const{endpoints:d}=t,l=ct(c,d),f=Yp(r);if(l&&f){const p=Kp(f);if(p){const h=Jp(p);n.updateName(`${u} ${c} (${h})`),Ho(p)&&n.setAttribute("graphql.document",p.query),Wo(p)&&(n.setAttribute("graphql.persisted_query.hash.sha256",p.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",p.extensions.persistedQuery.version))}}})}function TI(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:s,type:o,data:i}=n;if(o==="http"&&(s==="fetch"||s==="xhr")){const d=i==null?void 0:i.url,{endpoints:l}=t,f=ct(d,l),p=Yp(r);if(f&&i&&p){const h=Kp(p);if(!i.graphql&&h){const m=Jp(h);i["graphql.operation"]=m,Ho(h)&&(i["graphql.document"]=h.query),Wo(h)&&(i["graphql.persisted_query.hash.sha256"]=h.extensions.persistedQuery.sha256Hash,i["graphql.persisted_query.version"]=h.extensions.persistedQuery.version)}}}})}function Jp(e){if(Wo(e))return`persisted ${e.operationName}`;if(Ho(e)){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=wI(t);return r?`${s} ${r}`:`${s}`}return"unknown"}function Yp(e){const t="xhr"in e;let n;if(t){const r=e.xhr[Tt];n=r&&co(r.body)[0]}else{const r=fc(e.input);n=co(r)[0]}return n}function wI(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Fs(e){return typeof e=="object"&&e!==null}function Ho(e){return Fs(e)&&typeof e.query=="string"}function Wo(e){return Fs(e)&&typeof e.operationName=="string"&&Fs(e.extensions)&&Fs(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function Kp(e){try{const t=JSON.parse(e);return Ho(t)||Wo(t)?t:void 0}catch{return}}const II=EI,fe=K,hc="sentryReplaySession",xI="replay_event",mc="Unable to send Replay",kI=3e5,RI=9e5,CI=5e3,AI=5500,NI=6e4,MI=5e3,PI=3,ll=15e4,ms=5e3,OI=3e3,LI=300,gc=2e7,DI=4999,FI=5e4,dl=36e5;var $I=Object.defineProperty,BI=(e,t,n)=>t in e?$I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fl=(e,t,n)=>BI(e,typeof t!="symbol"?t+"":t,n),Ie=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ie||{});function UI(e){return e.nodeType===e.ELEMENT_NODE}function Ir(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function xr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function jI(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function HI(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function uo(e){try{const t=e.rules||e.cssRules;return t?jI(Array.from(t,Xp).join("")):null}catch{return null}}function WI(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],o=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${o?" !important":""};`}return`${e.selectorText} { ${t} }`}function Xp(e){let t;if(qI(e))try{t=uo(e.styleSheet)||HI(e)}catch{}else if(GI(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=WI(e)),r&&(n=zI(n)),r||s)return n}return t||e.cssText}function zI(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function qI(e){return"styleSheet"in e}function GI(e){return"selectorText"in e}let Qp=class{constructor(){fl(this,"idNodeMap",new Map),fl(this,"nodeMetaMap",new WeakMap)}getId(t){var r;return t?((r=this.getMeta(t))==null?void 0:r.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function VI(){return new Qp}function zo({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Or({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Vn(e){return e.toLowerCase()}function Zi(e){return e.toUpperCase()}const pl="__rrweb_original__";function JI(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const o=t.getImageData,i=pl in o?o[pl]:o;if(new Uint32Array(i.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function _c(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Vn(t):null}function lo(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Zp(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i,s=n.pathname.match(r);return(s==null?void 0:s[1])??null}const hl={};function eh(e){const t=hl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return hl[e]=r.bind(window)}function ea(...e){return eh("setTimeout")(...e)}function th(...e){return eh("clearTimeout")(...e)}function nh(e){try{return e.contentDocument}catch{}}let YI=1;const KI=new RegExp("[^a-z0-9-_:]"),Lr=-2;function yc(){return YI++}function XI(e){if(e instanceof HTMLFormElement)return"form";const t=Vn(e.tagName);return KI.test(t)?"div":t}function QI(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Rn,ml;const ZI=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ex=/^(?:[a-z+]+:)?\/\//i,tx=/^www\..*/i,nx=/^(data:)([^,]*),(.*)/i;function rx(e,t){if(!e||t.size===0)return e;try{const n=e.split(";"),r=[];for(let s of n){if(s=s.trim(),!s)continue;const o=s.indexOf(":");if(o===-1){r.push(s);continue}const i=s.slice(0,o).trim();t.has(i)||r.push(s)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function fo(e,t){return(e||"").replace(ZI,(n,r,s,o,i,a)=>{const c=s||i||a,u=r||o||"";if(!c)return n;if(ex.test(c)||tx.test(c))return`url(${u}${c}${u})`;if(nx.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${QI(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const sx=/^[^ \t\n\r\u000c]+/,ox=/^[, \t\n\r\u000c]+/;function ix(e,t){if(t.trim()==="")return t;let n=0;function r(o){let i;const a=o.exec(t.substring(n));return a?(i=a[0],n+=i.length,i):""}const s=[];for(;r(ox),!(n>=t.length);){let o=r(sx);if(o.slice(-1)===",")o=Pn(e,o.substring(0,o.length-1)),s.push(o);else{let i="";o=Pn(e,o);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((o+i).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((o+i).trim());break}else c==="("&&(a=!0);i+=c,n+=1}}}return s.join(", ")}const gl=new WeakMap;function Pn(e,t){return!t||t.trim()===""?t:qo(e,t)}function ax(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function qo(e,t){let n=gl.get(e);if(n||(n=e.createElement("a"),gl.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function rh(e,t,n,r,s,o,i){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return Pn(e,r);if(n==="xlink:href"&&r[0]!=="#")return Pn(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return Pn(e,r);if(n==="srcset")return ix(e,r);if(n==="style"){let a=fo(r,qo(e));return i&&i.size>0&&(a=rx(a,i)),a}else if(t==="object"&&n==="data")return Pn(e,r);return typeof o=="function"?o(n,r,s):r}function sh(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function cx(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const o=e.classList[s];if(t.test(o))return!0}if(n)return e.matches(n)}catch{}return!1}function ux(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function cn(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:cn(e.parentNode,t,n,r+1)}function On(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(ux(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Jn(e,t,n,r,s,o){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(o){if(c=cn(i,On(r,s)),c<0)return!0;a=cn(i,On(t,n),c>=0?c:1/0)}else{if(a=cn(i,On(t,n)),a<0)return!1;c=cn(i,On(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!o}catch{}return!!o}function lx(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){const a=ea(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{th(a),s=!0,t()});return}const i="about:blank";if(r.location.href!==i||e.src===i||e.src==="")return ea(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function dx(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const o=ea(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{th(o),r=!0,t()})}function fx(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:b={},inlineImages:S,recordCanvas:R,keepIframeSrcFn:w,newlyAddedElement:D=!1,ignoreCSSAttributes:N}=t,E=px(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Ie.Document,childNodes:[],compatMode:e.compatMode}:{type:Ie.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ie.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return mx(e,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:b,inlineImages:S,recordCanvas:R,keepIframeSrcFn:w,newlyAddedElement:D,rootId:E,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:N});case e.TEXT_NODE:return hx(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:E});case e.CDATA_SECTION_NODE:return{type:Ie.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:Ie.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function px(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function hx(e,t){var b;const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||(b=e.parentNode.sheet)!=null&&b.cssRules&&(f=uo(e.parentNode.sheet))}catch(S){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${S}`,e)}f=fo(f,qo(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const g=Jn(e,r,o,s,i,n);if(!p&&!h&&!m&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const S=zo({type:null,tagName:l,maskInputOptions:c});f=Or({isMasked:Jn(e,r,o,s,i,S),element:e,value:f,maskInputFn:u})}return{type:Ie.Text,textContent:f||"",isStyle:p,rootId:d}}function mx(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:b,maskTextSelector:S,unmaskTextSelector:R,ignoreCSSAttributes:w}=t,D=cx(e,r,s,o),N=XI(e);let E={};const C=e.attributes.length;for(let v=0;v<C;v++){const M=e.attributes[v];M.name&&!sh(N,M.name,M.value)&&(E[M.name]=rh(n,N,Vn(M.name),M.value,e,c,w))}if(N==="link"&&i){const v=Array.from(n.styleSheets).find(k=>k.href===e.href);let M=null;v&&(M=uo(v)),M&&(E.rel=null,E.href=null,E.crossorigin=null,E._cssText=fo(M,v.href))}if(N==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const v=uo(e.sheet);v&&(E._cssText=fo(v,qo(n)))}if(N==="input"||N==="textarea"||N==="select"||N==="option"){const v=e,M=_c(v),k=lo(v,Zi(N),M),A=v.checked;if(M!=="submit"&&M!=="button"&&k){const F=Jn(v,g,S,b,R,zo({type:M,tagName:Zi(N),maskInputOptions:a}));E.value=Or({isMasked:F,element:v,value:k,maskInputFn:u})}A&&(E.checked=A)}if(N==="option"&&(e.selected&&!a.select?E.selected=!0:delete E.selected),N==="canvas"&&f){if(e.__context==="2d")JI(e)||(E.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const v=e.toDataURL(d.type,d.quality),M=n.createElement("canvas");M.width=e.width,M.height=e.height;const k=M.toDataURL(d.type,d.quality);v!==k&&(E.rr_dataURL=v)}}if(N==="img"&&l){Rn||(Rn=n.createElement("canvas"),ml=Rn.getContext("2d"));const v=e,M=v.currentSrc||v.getAttribute("src")||"<unknown-src>",k=v.crossOrigin,A=()=>{v.removeEventListener("load",A);try{Rn.width=v.naturalWidth,Rn.height=v.naturalHeight,ml.drawImage(v,0,0),E.rr_dataURL=Rn.toDataURL(d.type,d.quality)}catch(F){if(v.crossOrigin!=="anonymous"){v.crossOrigin="anonymous",v.complete&&v.naturalWidth!==0?A():v.addEventListener("load",A);return}else console.warn(`Cannot inline img src=${M}! Error: ${F}`)}v.crossOrigin==="anonymous"&&(k?E.crossOrigin=k:v.removeAttribute("crossorigin"))};v.complete&&v.naturalWidth!==0?A():v.addEventListener("load",A)}if((N==="audio"||N==="video")&&(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop)),D){const{width:v,height:M}=e.getBoundingClientRect();E={class:E.class,rr_width:`${v}px`,rr_height:`${M}px`}}N==="iframe"&&!p(E.src)&&(!D&&!nh(e)&&(E.rr_src=E.src),delete E.src);let B;try{customElements.get(N)&&(B=!0)}catch{}return{type:Ie.Element,tagName:N,attributes:E,childNodes:[],isSVG:ax(e)||void 0,needBlock:D,rootId:m,isCustom:B}}function de(e){return e==null?"":e.toLowerCase()}function gx(e,t){if(t.comment&&e.type===Ie.Comment)return!0;if(e.type===Ie.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Zp(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(de(e.attributes.name).match(/^msapplication-tile(image|color)$/)||de(e.attributes.name)==="application-name"||de(e.attributes.rel)==="icon"||de(e.attributes.rel)==="apple-touch-icon"||de(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&de(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(de(e.attributes.property).match(/^(og|twitter|fb):/)||de(e.attributes.name).match(/^(og|twitter):/)||de(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(de(e.attributes.name)==="robots"||de(e.attributes.name)==="googlebot"||de(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(de(e.attributes.name)==="author"||de(e.attributes.name)==="generator"||de(e.attributes.name)==="framework"||de(e.attributes.name)==="publisher"||de(e.attributes.name)==="progid"||de(e.attributes.property).match(/^article:/)||de(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(de(e.attributes.name)==="google-site-verification"||de(e.attributes.name)==="yandex-verification"||de(e.attributes.name)==="csrf-token"||de(e.attributes.name)==="p:domain_verify"||de(e.attributes.name)==="verify-v1"||de(e.attributes.name)==="verification"||de(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ln(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:b,slimDOMOptions:S,dataURLOptions:R={},inlineImages:w=!1,recordCanvas:D=!1,onSerialize:N,onIframeLoad:E,iframeLoadTimeout:C=5e3,onBlockedImageLoad:B,onStylesheetLoad:v,stylesheetLoadTimeout:M=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:A=!1,ignoreCSSAttributes:F}=t;let{preserveWhiteSpace:X=!0}=t;const Q=fx(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:b,dataURLOptions:R,inlineImages:w,recordCanvas:D,keepIframeSrcFn:k,newlyAddedElement:A,ignoreCSSAttributes:F});if(!Q)return console.warn(e,"not serialized"),null;let te;r.hasNode(e)?te=r.getId(e):gx(Q,S)||!X&&Q.type===Ie.Text&&!Q.isStyle&&!Q.textContent.replace(/^\s+|\s+$/gm,"").length?te=Lr:te=yc();const T=Object.assign(Q,{id:te});if(r.add(e,T),te===Lr)return null;N&&N(e);let W=!f;if(T.type===Ie.Element){W=W&&!T.needBlock;const x=e.shadowRoot;x&&xr(x)&&(T.isShadowHost=!0)}if((T.type===Ie.Document||T.type===Ie.Element)&&W){S.headWhitespace&&T.type===Ie.Element&&T.tagName==="head"&&(X=!1);const x={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:b,slimDOMOptions:S,dataURLOptions:R,inlineImages:w,recordCanvas:D,preserveWhiteSpace:X,onSerialize:N,onIframeLoad:E,iframeLoadTimeout:C,onBlockedImageLoad:B,onStylesheetLoad:v,stylesheetLoadTimeout:M,keepIframeSrcFn:k,ignoreCSSAttributes:F},G=e.childNodes?Array.from(e.childNodes):[];for(const oe of G){const se=Ln(oe,x);se&&T.childNodes.push(se)}if(UI(e)&&e.shadowRoot)for(const oe of Array.from(e.shadowRoot.childNodes)){const se=Ln(oe,x);se&&(xr(e.shadowRoot)&&(se.isShadow=!0),T.childNodes.push(se))}}if(e.parentNode&&Ir(e.parentNode)&&xr(e.parentNode)&&(T.isShadow=!0),T.type===Ie.Element&&T.tagName==="iframe"&&!T.needBlock&&lx(e,()=>{const x=nh(e);if(x&&E){const G=Ln(x,{doc:x,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:b,slimDOMOptions:S,dataURLOptions:R,inlineImages:w,recordCanvas:D,preserveWhiteSpace:X,onSerialize:N,onIframeLoad:E,iframeLoadTimeout:C,onStylesheetLoad:v,stylesheetLoadTimeout:M,keepIframeSrcFn:k,ignoreCSSAttributes:F});G&&E(e,G)}},C),T.type===Ie.Element&&T.tagName==="img"&&!e.complete&&T.needBlock){const x=e,G=()=>{if(x.isConnected&&!x.complete&&B)try{const oe=x.getBoundingClientRect();oe.width>0&&oe.height>0&&B(x,T,oe)}catch{}x.removeEventListener("load",G)};x.isConnected&&x.addEventListener("load",G)}return T.type===Ie.Element&&T.tagName==="link"&&typeof T.attributes.rel=="string"&&(T.attributes.rel==="stylesheet"||T.attributes.rel==="preload"&&typeof T.attributes.href=="string"&&Zp(T.attributes.href)==="css")&&dx(e,()=>{if(v){const x=Ln(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:b,slimDOMOptions:S,dataURLOptions:R,inlineImages:w,recordCanvas:D,preserveWhiteSpace:X,onSerialize:N,onIframeLoad:E,iframeLoadTimeout:C,onStylesheetLoad:v,stylesheetLoadTimeout:M,keepIframeSrcFn:k,ignoreCSSAttributes:F});x&&v(e,x)}},M),T.type===Ie.Element&&delete T.needBlock,T}function _x(e,t){const{mirror:n=new Qp,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:b,slimDOM:S=!1,dataURLOptions:R,preserveWhiteSpace:w,onSerialize:D,onIframeLoad:N,iframeLoadTimeout:E,onBlockedImageLoad:C,onStylesheetLoad:B,stylesheetLoadTimeout:v,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:k=new Set([])}=t||{};return Ln(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:b,slimDOMOptions:S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:S==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:S===!1?{}:S,dataURLOptions:R,inlineImages:f,recordCanvas:p,preserveWhiteSpace:w,onSerialize:D,onIframeLoad:N,iframeLoadTimeout:E,onBlockedImageLoad:C,onStylesheetLoad:B,stylesheetLoadTimeout:v,keepIframeSrcFn:M,newlyAddedElement:!1,ignoreCSSAttributes:k})}function Le(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Cn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let _l={map:{},getId(){return console.error(Cn),-1},getNode(){return console.error(Cn),null},removeNodeFromMap(){console.error(Cn)},has(){return console.error(Cn),!1},reset(){console.error(Cn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(_l=new Proxy(_l,{get(e,t,n){return t==="map"&&console.error(Cn),Reflect.get(e,t,n)}}));function Dr(e,t,n={}){let r=null,s=0;return function(...o){const i=Date.now();!s&&n.leading===!1&&(s=i);const a=t-(i-s),c=this;a<=0||a>t?(r&&(wx(r),r=null),s=i,e.apply(c,o)):!r&&n.trailing!==!1&&(r=Go(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,o)},a))}}function oh(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){Go(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>oh(e,t,o||{},!0)}function bc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let po=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(po=()=>new Date().getTime());function ih(e){var n,r,s,o,i,a;const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(t==null?void 0:t.documentElement.scrollLeft)||((r=(n=t==null?void 0:t.body)==null?void 0:n.parentElement)==null?void 0:r.scrollLeft)||((s=t==null?void 0:t.body)==null?void 0:s.scrollLeft)||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(t==null?void 0:t.documentElement.scrollTop)||((i=(o=t==null?void 0:t.body)==null?void 0:o.parentElement)==null?void 0:i.scrollTop)||((a=t==null?void 0:t.body)==null?void 0:a.scrollTop)||0}}function ah(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ch(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function uh(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function qe(e,t,n,r,s){if(!e)return!1;const o=uh(e);if(!o)return!1;const i=On(t,n);if(!s){const u=r&&o.matches(r);return i(o)&&!u}const a=cn(o,i);let c=-1;return a<0?!1:(r&&(c=cn(o,On(null,r))),a>-1&&c<0?!0:a<c)}function yx(e,t){return t.getId(e)!==-1}function Ei(e,t){return t.getId(e)===Lr}function lh(e,t){if(Ir(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?lh(e.parentNode,t):!0:!0}function ta(e){return!!e.changedTouches}function bx(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function dh(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function fh(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function na(e){return!!(e!=null&&e.shadowRoot)}class Sx{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ph(e){var n,r;let t=null;return((r=(n=e.getRootNode)==null?void 0:n.call(e))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Ex(e){let t=e,n;for(;n=ph(t);)t=n;return t}function vx(e){const t=e.ownerDocument;if(!t)return!1;const n=Ex(e);return t.contains(n)}function hh(e){const t=e.ownerDocument;return t?t.contains(e)||vx(e):!1}const yl={};function Sc(e){const t=yl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return yl[e]=r.bind(window)}function Tx(...e){return Sc("requestAnimationFrame")(...e)}function Go(...e){return Sc("setTimeout")(...e)}function wx(...e){return Sc("clearTimeout")(...e)}var V=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(V||{}),z=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(z||{}),Oe=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Oe||{}),St=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(St||{}),An=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(An||{});function Ec(e){try{return e.contentDocument}catch{}}function Ix(e){try{return e.contentWindow}catch{}}function bl(e){return"__ln"in e}class xx{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&bl(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&bl(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Sl=(e,t)=>`${e}@${t}`;class kx{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new xx,s=c=>{let u=c,d=Lr;for(;d===Lr;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},o=c=>{if(!c.parentNode||!hh(c))return;const u=Ir(c.parentNode)?this.mirror.getId(ph(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=Ln(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{dh(f,this.mirror)&&!qe(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),fh(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),na(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{qe(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:h,height:m})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${h}px`,height:`${m}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)El(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||o(c);for(const c of this.addedSet)!vl(this.droppedSet,c)&&!El(this.removes,c,this.mirror)||vl(this.movedSet,c)?o(c):this.droppedSet.add(c);let i=null;for(;r.length;){let c=null;if(i){const u=this.mirror.getId(i.value.parentNode),d=s(i.value);u!==-1&&d!==-1&&(c=i)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}i=c.previous,r.removeNode(c.value),o(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Ei(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Jn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,uh(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const i=_c(n),a=n.tagName;s=lo(n,a,i);const c=zo({maskInputOptions:this.maskInputOptions,tagName:a,type:i}),u=Jn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Or({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!Ec(n))r="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(t.target,o)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!sh(n.tagName,r)&&(o.attributes[r]=rh(this.doc,Vn(n.tagName),Vn(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==i.style.getPropertyValue(a)||u!==i.style.getPropertyPriority(a)?u===""?o.styleDiff[a]=c:o.styleDiff[a]=[c,u]:o._unchangedStyles[a]=[c,u]}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(o.styleDiff[a]=!1)}break}case"childList":{if(qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=Ir(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ei(n,this.mirror)||!yx(n,this.mirror)||(this.addedSet.has(n)?(ra(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||lh(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Sl(r,s)]?ra(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:Ir(t.target)&&xr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Ei(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Sl(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);qe(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),na(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ra(e,t){var n;e.delete(t),(n=t.childNodes)==null||n.forEach(r=>ra(e,r))}function El(e,t,n){return e.length===0?!1:Rx(e,t,n)}function Rx(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(o=>o.id===s))return!0;r=r.parentNode}return!1}function vl(e,t){return e.size===0?!1:mh(e,t)}function mh(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:mh(e,n):!1}let kr;function Cx(e){kr=e}function Ax(){kr=void 0}const re=e=>kr?(...n)=>{try{return e(...n)}catch(r){if(kr&&kr(r)===!0)return()=>{};throw r}}:e,Dn=[];function ns(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function gh(e,t){var i,a;const n=new kx;Dn.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=(a=(i=window==null?void 0:window.Zone)==null?void 0:i.__symbol__)==null?void 0:a.call(i,"MutationObserver");s&&window[s]&&(r=window[s]);const o=new r(re(c=>{e.onMutation&&e.onMutation(c)===!1||n.processMutations.bind(n)(c)}));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function Nx({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,o=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let i=[],a;const c=Dr(re(l=>{const f=Date.now()-a;e(i.map(p=>(p.timeOffset-=f,p)),l),i=[],a=null}),o),u=re(Dr(re(l=>{const f=ns(l),{clientX:p,clientY:h}=ta(l)?l.changedTouches[0]:l;a||(a=po()),i.push({x:p,y:h,id:r.getId(f),timeOffset:po()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?z.Drag:l instanceof MouseEvent?z.MouseMove:z.TouchMove)}),s,{trailing:!1})),d=[Le("mousemove",u,n),Le("touchmove",u,n),Le("drag",u,n)];return re(()=>{d.forEach(l=>l())})}function Mx({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=ns(f);if(qe(p,r,s,o,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=St.Mouse;break;case"touch":h=St.Touch;break;case"pen":h=St.Pen;break}h===St.Touch?Oe[l]===Oe.MouseDown?m="TouchStart":Oe[l]===Oe.MouseUp&&(m="TouchEnd"):St.Pen}else ta(f)&&(h=St.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===St.Touch||m.startsWith("Mouse")&&h===St.Mouse)&&(h=null)):Oe[l]===Oe.Click&&(h=u,u=null);const g=ta(f)?f.changedTouches[0]:f;if(!g)return;const b=n.getId(p),{clientX:S,clientY:R}=g;re(e)({type:Oe[m],id:b,x:S,y:R,...h!==null&&{pointerType:h}})};return Object.keys(Oe).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Vn(l);const p=d(l);if(window.PointerEvent)switch(Oe[l]){case Oe.MouseDown:case Oe.MouseUp:f=f.replace("mouse","pointer");break;case Oe.TouchStart:case Oe.TouchEnd:return}c.push(Le(f,p,t))}),re(()=>{c.forEach(l=>l())})}function _h({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){const a=re(Dr(re(c=>{const u=ns(c);if(!u||qe(u,r,s,o,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=ih(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),i.scroll||100));return Le("scroll",a,t)}function Px({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=re(Dr(re(()=>{const o=ah(),i=ch();(n!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),n=o,r=i)}),200));return Le("resize",s,t)}const Ox=["INPUT","TEXTAREA","SELECT"],Tl=new WeakMap;function Lx({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function g(E){let C=ns(E);const B=E.isTrusted,v=C&&Zi(C.tagName);if(v==="OPTION"&&(C=C.parentElement),!C||!v||Ox.indexOf(v)<0||qe(C,r,s,o,!0))return;const M=C;if(M.classList.contains(i)||a&&M.matches(a))return;const k=_c(C);let A=lo(M,v,k),F=!1;const X=zo({maskInputOptions:c,tagName:v,type:k}),Q=Jn(C,f,h,p,m,X);(k==="radio"||k==="checkbox")&&(F=C.checked),A=Or({isMasked:Q,element:C,value:A,maskInputFn:u}),b(C,l?{text:A,isChecked:F,userTriggered:B}:{text:A,isChecked:F});const te=C.name;k==="radio"&&te&&F&&t.querySelectorAll(`input[type="radio"][name="${te}"]`).forEach(T=>{if(T!==C){const W=Or({isMasked:Q,element:T,value:lo(T,v,k),maskInputFn:u});b(T,l?{text:W,isChecked:!F,userTriggered:!1}:{text:W,isChecked:!F})}})}function b(E,C){const B=Tl.get(E);if(!B||B.text!==C.text||B.isChecked!==C.isChecked){Tl.set(E,C);const v=n.getId(E);re(e)({...C,id:v})}}const R=(d.input==="last"?["change"]:["input","change"]).map(E=>Le(E,re(g),t)),w=t.defaultView;if(!w)return()=>{R.forEach(E=>E())};const D=w.Object.getOwnPropertyDescriptor(w.HTMLInputElement.prototype,"value"),N=[[w.HTMLInputElement.prototype,"value"],[w.HTMLInputElement.prototype,"checked"],[w.HTMLSelectElement.prototype,"value"],[w.HTMLTextAreaElement.prototype,"value"],[w.HTMLSelectElement.prototype,"selectedIndex"],[w.HTMLOptionElement.prototype,"selected"]];return D&&D.set&&R.push(...N.map(E=>oh(E[0],E[1],{set(){re(g)({target:this,isTrusted:!1})}},!1,w))),re(()=>{R.forEach(E=>E())})}function ho(e){const t=[];function n(r,s){if(gs("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||gs("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||gs("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||gs("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(i)}else if(r.parentStyleSheet){const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(i)}return s}return n(e,t)}function Ot(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function Dx({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:re((d,l,f)=>{const[p,h]=f,{id:m,styleId:g}=Ot(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:re((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ot(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let i;r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:re((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ot(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:re((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ot(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};_s("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(_s("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),_s("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),_s("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:re((f,p,h)=>{const[m,g]=h,{id:b,styleId:S}=Ot(p.parentStyleSheet,t,n.styleMirror);return(b&&b!==-1||S&&S!==-1)&&e({id:b,styleId:S,adds:[{rule:m,index:[...ho(p),g||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:re((f,p,h)=>{const[m]=h,{id:g,styleId:b}=Ot(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||b&&b!==-1)&&e({id:g,styleId:b,removes:[{index:[...ho(p),m]}]}),f.apply(p,h)})})}),re(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function yh({mirror:e,stylesheetManager:t},n){var i,a,c;let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?(i=n.defaultView)==null?void 0:i.Document:(c=(a=n.ownerDocument)==null?void 0:a.defaultView)==null?void 0:c.ShadowRoot,o=s!=null&&s.prototype?Object.getOwnPropertyDescriptor(s==null?void 0:s.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!o?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){var u;return(u=o.get)==null?void 0:u.call(this)},set(u){var l;const d=(l=o.set)==null?void 0:l.call(this,u);if(r!==null&&r!==-1)try{t.adoptStyleSheets(u,r)}catch{}return d}}),re(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function Fx({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:re((a,c,u)=>{var m;const[d,l,f]=u;if(n.has(d))return o.apply(c,[d,l,f]);const{id:p,styleId:h}=Ot((m=c.parentRule)==null?void 0:m.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:ho(c.parentRule)}),a.apply(c,u)})});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:re((a,c,u)=>{var p;const[d]=u;if(n.has(d))return i.apply(c,[d]);const{id:l,styleId:f}=Ot((p=c.parentRule)==null?void 0:p.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:ho(c.parentRule)}),a.apply(c,u)})}),re(()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i})}function $x({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=re(u=>Dr(re(d=>{const l=ns(d);if(!l||qe(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:s.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),o.media||500)),c=[Le("play",a(An.Play),i),Le("pause",a(An.Pause),i),Le("seeked",a(An.Seeked),i),Le("volumechange",a(An.VolumeChange),i),Le("ratechange",a(An.RateChange),i)];return re(()=>{c.forEach(u=>u())})}function Bx({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(c,u,d){const l=new o(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const i=bc(t.fonts,"add",function(a){return function(c){return Go(re(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=o}),r.push(i),re(()=>{r.forEach(a=>a())})}function Ux(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=e;let a=!0;const c=re(()=>{const u=t.getSelection();if(!u||a&&(u!=null&&u.isCollapsed))return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:g,endOffset:b}=p;qe(h,r,s,o,!0)||qe(g,r,s,o,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(g),endOffset:b})}i({ranges:d})});return c(),Le("selectionchange",c)}function jx({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:bc(n.customElements,"define",function(s){return function(o,i,a){try{t({define:{name:o}})}catch{}return s.apply(this,[o,i,a])}})}function Hx(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=gh(e,e.doc));const s=Nx(e),o=Mx(e),i=_h(e),a=Px(e,{win:n}),c=Lx(e),u=$x(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=Dx(e,{win:n}),l=yh(e,e.doc),f=Fx(e,{win:n}),e.collectFonts&&(p=Bx(e)));const h=Ux(e),m=jx(e),g=[];for(const b of e.plugins)g.push(b.observer(b.callback,n,b.options));return re(()=>{Dn.forEach(b=>b.reset()),r==null||r.disconnect(),s(),o(),i(),a(),c(),u(),d(),l(),f(),p(),h(),m(),g.forEach(b=>b())})}function gs(e){return typeof window[e]<"u"}function _s(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class sa{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const o=r||this.getIdToRemoteIdMap(t),i=s||this.getRemoteIdToIdMap(t);let a=o.get(n);return a||(a=this.generateIdFn(),o.set(n,a),i.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(o=>this.getId(t,o,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const o=s.get(n);return o||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Wx{constructor(){this.crossOriginIframeMirror=new sa(yc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class zx{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new sa(yc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new sa(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var s,o;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((s=t.contentWindow)==null||s.addEventListener("message",this.handleMessage.bind(this))),(o=this.loadListener)==null||o.call(this,t);const r=Ec(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const o=this.transformCrossOriginEvent(s,n.data.event);o&&this.wrappedEmit(o,n.data.isCheckout)}transformCrossOriginEvent(t,n){var r;switch(n.type){case V.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const s=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,s),this.patchRootIdOnNode(n.data.node,s),{timestamp:n.timestamp,type:V.IncrementalSnapshot,data:{source:z.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case V.Meta:case V.Load:case V.DomContentLoaded:return!1;case V.Plugin:return n;case V.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case V.IncrementalSnapshot:switch(n.data.source){case z.Mutation:return n.data.adds.forEach(s=>{this.replaceIds(s,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,t);const o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(s.node,o)}),n.data.removes.forEach(s=>{this.replaceIds(s,t,["parentId","id"])}),n.data.attributes.forEach(s=>{this.replaceIds(s,t,["id"])}),n.data.texts.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case z.Drag:case z.TouchMove:case z.MouseMove:return n.data.positions.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case z.ViewportResize:return!1;case z.MediaInteraction:case z.MouseInteraction:case z.Scroll:case z.CanvasMutation:case z.Input:return this.replaceIds(n.data,t,["id"]),n;case z.StyleSheetRule:case z.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case z.Font:return n;case z.Selection:return n.data.ranges.forEach(s=>{this.replaceIds(s,t,["start","end"])}),n;case z.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(r=n.data.styles)==null||r.forEach(s=>{this.replaceStyleIds(s,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const o of s)!Array.isArray(n[o])&&typeof n[o]!="number"||(Array.isArray(n[o])?n[o]=t.getIds(r,n[o]):n[o]=t.getId(r,n[o]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Ie.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class qx{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Gx{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!xr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=gh({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(_h({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Go(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(yh({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=Ec(t),r=Ix(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(bc(t.prototype,"attachShadow",function(s){return function(o){const i=s.call(this,o);return this.shadowRoot&&hh(this)&&r.addShadowRoot(this.shadowRoot,n),i}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var wl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ys=0;ys<wl.length;ys++)Vx[wl.charCodeAt(ys)]=ys;class Il{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Jx{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Sx,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const o of t){let i;this.styleMirror.has(o)?i=this.styleMirror.getId(o):(i=this.styleMirror.add(o),s.push({styleId:i,rules:Array.from(o.rules||CSSRule,(a,c)=>({rule:Xp(a),index:c}))})),r.styleIds.push(i)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Yx{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,Tx(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let Se,mo;var ld;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((ld=e.contentWindow)==null?void 0:ld.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const rt=VI();function wt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:b,maskAttributeFn:S,maskInputFn:R,maskTextFn:w,maxCanvasSize:D=null,packFn:N,sampling:E={},dataURLOptions:C={},mousemoveWait:B,recordDOM:v=!0,recordCanvas:M=!1,recordCrossOriginIframes:k=!1,recordAfter:A=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:F=!1,collectFonts:X=!1,inlineImages:Q=!1,plugins:te,keepIframeSrcFn:T=()=>!1,ignoreCSSAttributes:W=new Set([]),errorHandler:x,onMutation:G,getCanvasManager:oe}=e;Cx(x);const se=k?window.parent===window:!0;let Te=!1;if(!se)try{window.parent.document&&(Te=!1)}catch{Te=!0}if(se&&!t)throw new Error("emit function is required");if(!se&&!Te)return()=>{};B!==void 0&&E.mousemove===void 0&&(E.mousemove=B),rt.reset();const Me=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},Nt=b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:b==="all",headMetaDescKeywords:b==="all"}:b||{};bx();let Pe,$e=0;const ht=Z=>{for(const Ae of te||[])Ae.eventProcessor&&(Z=Ae.eventProcessor(Z));return N&&!Te&&(Z=N(Z)),Z};Se=(Z,Ae)=>{var Ue;const ee=Z;if(ee.timestamp=po(),(Ue=Dn[0])!=null&&Ue.isFrozen()&&ee.type!==V.FullSnapshot&&!(ee.type===V.IncrementalSnapshot&&ee.data.source===z.Mutation)&&Dn.forEach(Ye=>Ye.unfreeze()),se)t==null||t(ht(ee),Ae);else if(Te){const Ye={type:"rrweb",event:ht(ee),origin:window.location.origin,isCheckout:Ae};window.parent.postMessage(Ye,"*")}if(ee.type===V.FullSnapshot)Pe=ee,$e=0;else if(ee.type===V.IncrementalSnapshot){if(ee.data.source===z.Mutation&&ee.data.isAttachIframe)return;$e++;const Ye=r&&$e>=r,ie=n&&Pe&&ee.timestamp-Pe.timestamp>n;(Ye||ie)&&Ce(!0)}};const Mt=Z=>{Se({type:V.IncrementalSnapshot,data:{source:z.Mutation,...Z}})},lr=Z=>Se({type:V.IncrementalSnapshot,data:{source:z.Scroll,...Z}}),os=Z=>Se({type:V.IncrementalSnapshot,data:{source:z.CanvasMutation,...Z}}),dr=Z=>Se({type:V.IncrementalSnapshot,data:{source:z.AdoptedStyleSheet,...Z}}),ne=new Jx({mutationCb:Mt,adoptedStyleSheetCb:dr}),he=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Wx:new zx({mirror:rt,mutationCb:Mt,stylesheetManager:ne,recordCrossOriginIframes:k,wrappedEmit:Se});for(const Z of te||[])Z.getMirror&&Z.getMirror({nodeMirror:rt,crossOriginIframeMirror:he.crossOriginIframeMirror,crossOriginIframeStyleMirror:he.crossOriginIframeStyleMirror});const Be=new Yx,xe=Xx(oe,{mirror:rt,win:window,mutationCb:Z=>Se({type:V.IncrementalSnapshot,data:{source:z.CanvasMutation,...Z}}),recordCanvas:M,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:D,sampling:E.canvas,dataURLOptions:C,errorHandler:x}),me=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new qx:new Gx({mutationCb:Mt,scrollCb:lr,bypassOptions:{onMutation:G,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Me,dataURLOptions:C,maskAttributeFn:S,maskTextFn:w,maskInputFn:R,recordCanvas:M,inlineImages:Q,sampling:E,slimDOMOptions:Nt,iframeManager:he,stylesheetManager:ne,canvasManager:xe,keepIframeSrcFn:T,processedNodeManager:Be,ignoreCSSAttributes:W},mirror:rt}),Ce=(Z=!1)=>{if(!v)return;Se({type:V.Meta,data:{href:window.location.href,width:ch(),height:ah()}},Z),ne.reset(),me.init(),Dn.forEach(ee=>ee.lock());const Ae=_x(document,{mirror:rt,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Me,maskAttributeFn:S,maskInputFn:R,maskTextFn:w,slimDOM:Nt,dataURLOptions:C,recordCanvas:M,inlineImages:Q,onSerialize:ee=>{dh(ee,rt)&&he.addIframe(ee),fh(ee,rt)&&ne.trackLinkElement(ee),na(ee)&&me.addShadowRoot(ee.shadowRoot,document)},onIframeLoad:(ee,Ue)=>{he.attachIframe(ee,Ue),ee.contentWindow&&xe.addWindow(ee.contentWindow),me.observeAttachShadow(ee)},onStylesheetLoad:(ee,Ue)=>{ne.attachLinkElement(ee,Ue)},onBlockedImageLoad:(ee,Ue,{width:Ye,height:ie})=>{Mt({adds:[],removes:[],texts:[],attributes:[{id:Ue.id,attributes:{style:{width:`${Ye}px`,height:`${ie}px`}}}]})},keepIframeSrcFn:T,ignoreCSSAttributes:W});if(!Ae)return console.warn("Failed to snapshot the document");Se({type:V.FullSnapshot,data:{node:Ae,initialOffset:ih(window)}}),Dn.forEach(ee=>ee.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ne.adoptStyleSheets(document.adoptedStyleSheets,rt.getId(document))};mo=Ce;try{const Z=[],Ae=Ue=>{var Ye;return re(Hx)({onMutation:G,mutationCb:Mt,mousemoveCb:(ie,ti)=>Se({type:V.IncrementalSnapshot,data:{source:ti,positions:ie}}),mouseInteractionCb:ie=>Se({type:V.IncrementalSnapshot,data:{source:z.MouseInteraction,...ie}}),scrollCb:lr,viewportResizeCb:ie=>Se({type:V.IncrementalSnapshot,data:{source:z.ViewportResize,...ie}}),inputCb:ie=>Se({type:V.IncrementalSnapshot,data:{source:z.Input,...ie}}),mediaInteractionCb:ie=>Se({type:V.IncrementalSnapshot,data:{source:z.MediaInteraction,...ie}}),styleSheetRuleCb:ie=>Se({type:V.IncrementalSnapshot,data:{source:z.StyleSheetRule,...ie}}),styleDeclarationCb:ie=>Se({type:V.IncrementalSnapshot,data:{source:z.StyleDeclaration,...ie}}),canvasMutationCb:os,fontCb:ie=>Se({type:V.IncrementalSnapshot,data:{source:z.Font,...ie}}),selectionCb:ie=>{Se({type:V.IncrementalSnapshot,data:{source:z.Selection,...ie}})},customElementCb:ie=>{Se({type:V.IncrementalSnapshot,data:{source:z.CustomElement,...ie}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Me,inlineStylesheet:h,sampling:E,recordDOM:v,recordCanvas:M,inlineImages:Q,userTriggeredOnInput:F,collectFonts:X,doc:Ue,maskAttributeFn:S,maskInputFn:R,maskTextFn:w,keepIframeSrcFn:T,blockSelector:o,unblockSelector:i,slimDOMOptions:Nt,dataURLOptions:C,mirror:rt,iframeManager:he,stylesheetManager:ne,shadowDomManager:me,processedNodeManager:Be,canvasManager:xe,ignoreCSSAttributes:W,plugins:((Ye=te==null?void 0:te.filter(ie=>ie.observer))==null?void 0:Ye.map(ie=>({observer:ie.observer,options:ie.options,callback:ti=>Se({type:V.Plugin,data:{plugin:ie.name,payload:ti}})})))||[]},{})};he.addLoadListener(Ue=>{try{Z.push(Ae(Ue.contentDocument))}catch(Ye){console.warn(Ye)}});const ee=()=>{Ce(),Z.push(Ae(document))};return document.readyState==="interactive"||document.readyState==="complete"?ee():(Z.push(Le("DOMContentLoaded",()=>{Se({type:V.DomContentLoaded,data:{}}),A==="DOMContentLoaded"&&ee()})),Z.push(Le("load",()=>{Se({type:V.Load,data:{}}),A==="load"&&ee()},window))),()=>{Z.forEach(Ue=>Ue()),Be.destroy(),mo=void 0,Ax()}}catch(Z){console.warn(Z)}}function Kx(e){if(!mo)throw new Error("please take full snapshot after start recording");mo(e)}wt.mirror=rt;wt.takeFullSnapshot=Kx;function Xx(e,t){try{return e?e(t):new Il}catch{return console.warn("Unable to initialize CanvasManager"),new Il}}var xl;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(xl||(xl={}));const Qx=3,Zx=5;function vc(e){return e>9999999999?e:e*1e3}function vi(e){return e>9999999999?e/1e3:e}function rs(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:V.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Br(t,10,1e3)}}),t.category==="console")))}const ek="button,a";function bh(e){return e.closest(ek)||e}function Sh(e){const t=Eh(e);return!t||!(t instanceof Element)?t:bh(t)}function Eh(e){return tk(e)?e.target:e}function tk(e){return typeof e=="object"&&!!e&&"target"in e}let Lt;function nk(e){return Lt||(Lt=[],rk()),Lt.push(e),()=>{const t=Lt?Lt.indexOf(e):-1;t>-1&&Lt.splice(t,1)}}function rk(){ke(fe,"open",function(e){return function(...t){if(Lt)try{Lt.forEach(n=>n())}catch{}return e.apply(fe,t)}})}const sk=new Set([z.Mutation,z.StyleSheetRule,z.StyleDeclaration,z.AdoptedStyleSheet,z.CanvasMutation,z.Selection,z.MediaInteraction]);function ok(e,t,n){e.handleClick(t,n)}class ik{constructor(t,n,r=rs){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=nk(()=>{this._lastMutation=kl()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(ck(n,this._ignoreSelector)||!uk(t))return;const r={timestamp:vi(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=vi(t)}registerScroll(t=Date.now()){this._lastScroll=vi(t)}registerClick(t){const n=bh(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=kl();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,o=!r&&!s,{clickCount:i,clickBreadcrumb:a}=t;if(o){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:fe.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,d);return}if(i>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:fe.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=ts(()=>this._checkClicks(),1e3)}}const ak=["A","BUTTON","INPUT"];function ck(e,t){return!!(!ak.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function uk(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function kl(){return Date.now()/1e3}function lk(e,t){try{if(!dk(t))return;const{source:n}=t.data;if(sk.has(n)&&e.registerMutation(t.timestamp),n===z.Scroll&&e.registerScroll(t.timestamp),fk(t)){const{type:r,id:s}=t.data,o=wt.mirror.getNode(s);o instanceof HTMLElement&&r===Oe.Click&&e.registerClick(o)}}catch{}}function dk(e){return e.type===Qx}function fk(e){return e.data.source===z.MouseInteraction}function gt(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Tc=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Tc||{});const pk=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function hk(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(pk.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const mk=e=>t=>{if(!e.isEnabled())return;const n=gk(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&(s!=null&&s.target)&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&ok(e.clickDetector,n,Sh(t.event)),rs(e,n)};function vh(e,t){const n=wt.mirror.getId(e),r=n&&wt.mirror.getNode(n),s=r&&wt.mirror.getMeta(r),o=s&&yk(s)?s:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map(i=>i.type===Tc.Text&&i.textContent).filter(Boolean).map(i=>i.trim()).join(""),attributes:hk(o.attributes)}}:{}}}function gk(e){const{target:t,message:n}=_k(e);return gt({category:`ui.${e.name}`,...vh(t,n)})}function _k(e){const t=e.name==="click";let n,r=null;try{r=t?Sh(e.event):Eh(e.event),n=Je(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function yk(e){return e.type===Tc.Element}function bk(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=Sk(t);n&&rs(e,n)}function Sk(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=e;if(!i||Ek(i)||!o)return null;const a=t||r||s,c=o.length===1;if(!a&&c)return null;const u=Je(i,{maxStringLength:200})||"<unknown>",d=vh(i,u);return gt({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}function Ek(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const vk={resource:kk,paint:Ik,navigation:xk};function Ti(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function Tk(e){return e.map(wk).filter(Boolean)}function wk(e){const t=vk[e.entryType];return t?t(e):null}function Yn(e){return((Ne()||fe.performance.timeOrigin)+e)/1e3}function Ik(e){const{duration:t,entryType:n,name:r,startTime:s}=e,o=Yn(s);return{type:n,name:r,start:o,end:o+t,data:void 0}}function xk(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:Yn(p),end:Yn(o),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:o,redirectCount:f}}}function kk(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Yn(o),end:Yn(s),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}}function Rk(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.element?[t.element]:void 0;return wc(e,"largest-contentful-paint",n)}function Ck(e){return e.sources!==void 0}function Ak(e){const t=[],n=[];for(const r of e.entries)if(Ck(r)){const s=[];for(const o of r.sources)if(o.node){n.push(o.node);const i=wt.mirror.getId(o.node);i&&s.push(i)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return wc(e,"cumulative-layout-shift",n,t)}function Nk(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.target?[t.target]:void 0;return wc(e,"interaction-to-next-paint",n)}function wc(e,t,n,r){const s=e.value,o=e.rating,i=Yn(s);return{type:"web-vital",name:t,start:i,end:i,data:{value:s,size:s,rating:o,nodeIds:n?n.map(a=>wt.mirror.getId(a)):void 0,attributions:r}}}function Mk(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Tn(s,n))}),r.push(cc(Ti(Rk,e)),ac(Ti(Ak,e)),Sp(Ti(Nk,e))),()=>{r.forEach(s=>s())}}const U=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Pk='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Ok(){const e=new Blob([Pk]);return URL.createObjectURL(e)}const Rl=["log","warn","error"],$s="[Replay] ";function wi(e,t="info"){ut({category:"console",data:{logger:"replay"},level:t,message:`${$s}${e}`},{level:t})}function Lk(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return U?(Rl.forEach(r=>{n[r]=(...s)=>{y[r]($s,...s),t&&wi(s.join(""),Zs(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),y.error($s,r),e?ge(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&wi(r,"error")},n.infoTick=(...r)=>{y.log($s,...r),t&&setTimeout(()=>wi(r[0]),0)}):Rl.forEach(r=>{n[r]=()=>{}}),n}const j=Lk();class Ic extends Error{constructor(){super(`Event buffer exceeded maximum size of ${gc}.`)}}class Th{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>gc)throw new Ic;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?vc(t):null}}class Dk{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){U&&j.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,o)=>{const i=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",i),!c.success){U&&j.error("Error in compression worker: ",c.response),o(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class Fk{constructor(t){this._worker=new Dk(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=vc(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>gc?Promise.reject(new Ic):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{U&&j.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class $k{constructor(t){this._fallback=new Th,this._compression=new Fk(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){U&&j.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const o of t)s.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(o){U&&j.exception(o,"Failed to add events when switching buffers.")}}}function Bk({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=Uk(t);if(n)return n}return U&&j.log("Using simple buffer"),new Th}function Uk(e){try{const t=e||jk();if(!t)return;U&&j.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new $k(n)}catch(t){U&&j.exception(t,"Failed to create compression worker")}}function jk(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?Ok():""}function xc(){try{return"sessionStorage"in fe&&!!fe.sessionStorage}catch{return!1}}function Hk(e){Wk(),e.session=void 0}function Wk(){if(xc())try{fe.sessionStorage.removeItem(hc)}catch{}}function wh(e){return e===void 0?!1:Math.random()<e}function Vo(e){if(xc())try{fe.sessionStorage.setItem(hc,JSON.stringify(e))}catch{}}function Ih(e){const t=Date.now(),n=e.id||at(),r=e.started||t,s=e.lastActivity||t,o=e.segmentId||0,i=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:s,segmentId:o,sampled:i,previousSessionId:a,dirty:c}}function zk(e,t){return wh(e)?"session":t?"buffer":!1}function Cl({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=zk(e,t),o=Ih({sampled:s,previousSessionId:r});return n&&Vo(o),o}function qk(){if(!xc())return null;try{const e=fe.sessionStorage.getItem(hc);if(!e)return null;const t=JSON.parse(e);return U&&j.infoTick("Loading existing session"),Ih(t)}catch{return null}}function oa(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function xh(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return oa(e.started,t,r)||oa(e.lastActivity,n,r)}function kh(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!xh(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Ii({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&qk();return s?kh(s,{sessionIdleExpire:e,maxReplayDuration:t})?(U&&j.infoTick("Session in sessionStorage is expired, creating new one..."),Cl(r,{previousSessionId:s.id})):s:(U&&j.infoTick("Creating new session"),Cl(r,{previousSessionId:n}))}function Gk(e){return e.type===V.Custom}function kc(e,t,n){return Ch(e,t)?(Rh(e,t,n),!0):!1}function Vk(e,t,n){return Ch(e,t)?Rh(e,t,n):Promise.resolve(null)}async function Rh(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=e.getOptions(),i=Jk(t,o.beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(o){const i=o&&o instanceof Ic,a=i?"addEventSizeExceeded":"addEvent",c=P();if(c){const u=i?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(i&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:a})}}function Ch(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=vc(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(U&&j.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function Jk(e,t){try{if(typeof t=="function"&&Gk(e))return t(e)}catch(n){return U&&j.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Rc(e){return!e.type}function ia(e){return e.type==="transaction"}function Yk(e){return e.type==="replay_event"}function Al(e){return e.type==="feedback"}function Kk(e){return(t,n)=>{if(!e.isEnabled()||!Rc(t)&&!ia(t))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(ia(t)){Xk(e,t);return}Qk(e,t)}}}function Xk(e,t){var r,s;const n=e.getContext();(s=(r=t.contexts)==null?void 0:r.trace)!=null&&s.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function Qk(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||ts(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function Zk(e){return t=>{!e.isEnabled()||!Rc(t)||eR(e,t)}}function eR(e,t){var r,s,o;const n=(o=(s=(r=t.exception)==null?void 0:r.values)==null?void 0:s[0])==null?void 0:o.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const i=gt({category:"replay.hydrate-error",data:{url:Zn()}});rs(e,i)}}function tR(e){const t=P();t&&t.on("beforeAddBreadcrumb",n=>nR(e,n))}function nR(e,t){if(!e.isEnabled()||!Ah(t))return;const n=rR(t);n&&rs(e,n)}function rR(e){return!Ah(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?sR(e):gt(e)}function sR(e){var s;const t=(s=e.data)==null?void 0:s.arguments;if(!Array.isArray(t)||t.length===0)return gt(e);let n=!1;const r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>ms?(n=!0,`${o.slice(0,ms)}`):o;if(typeof o=="object")try{const i=Br(o,7);return JSON.stringify(i).length>ms?(n=!0,`${JSON.stringify(i,null,2).slice(0,ms)}`):i}catch{}return o});return gt({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Ah(e){return!!e.category}function oR(e,t){var n,r,s;return e.type||!((r=(n=e.exception)==null?void 0:n.values)!=null&&r.length)?!1:!!((s=t.originalException)!=null&&s.__rrweb__)}function Nh(){const e=Y().getPropagationContext().dsc;e&&delete e.replay_id;const t=be();if(t){const n=It(t);delete n.replay_id}}function iR(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:V.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function aR(e,t){return e.recordingMode!=="buffer"||t.message===mc||!t.exception||t.type?!1:wh(e.getOptions().errorSampleRate)}function cR(e){return Object.assign((t,n)=>{var i;if(!e.isEnabled()||e.isPaused())return t;if(Yk(t))return delete t.breadcrumbs,t;if(!Rc(t)&&!ia(t)&&!Al(t))return t;if(!e.checkAndHandleExpiredSession())return Nh(),t;if(Al(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),iR(e,t),t;if(oR(t,n)&&!e.getOptions()._experiments.captureExceptions)return U&&j.log("Ignoring error from rrweb internals",t),null;const s=aR(e,t);if((s||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),s&&e.recordingMode==="buffer"&&((i=e.session)==null?void 0:i.sampled)==="buffer"){const a=e.session;a.dirty=!0,e.getOptions().stickySession&&Vo(a)}return t},{id:"Replay"})}function Jo(e,t){return t.map(({type:n,start:r,end:s,name:o,data:i})=>{const a=e.throttledAddEvent({type:V.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:s,data:i}}});return typeof a=="string"?Promise.resolve(null):a})}function uR(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function lR(e){return t=>{if(!e.isEnabled())return;const n=uR(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Jo(e,[n]),!1)))}}function dR(e,t){return U&&e.getOptions()._experiments.traceInternals?!1:df(t,P())}function Mh(e,t){e.isEnabled()&&t!==null&&(dR(e,t.name)||e.addUpdate(()=>(Jo(e,[t]),!0)))}function Yo(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=kp(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Ph(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function go(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Oh(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:o,statusCode:i,request:a,response:c}}}function Fr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Ut(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:o}=fR(n);return r.body=s,o!=null&&o.length&&(r._meta={warnings:o}),r}function aa(e,t){return Object.entries(e).reduce((n,[r,s])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=s),n},{})}function fR(e){if(!e||typeof e!="string")return{body:e};const t=e.length>ll,n=pR(e);if(t){const r=e.slice(0,ll);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function pR(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function _o(e,t){const n=hR(e);return ct(n,t)}function hR(e,t=fe.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(fe.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function mR(e,t,n){try{const r=await _R(e,t,n),s=Oh("resource.fetch",r);Mh(n.replay,s)}catch(r){U&&j.exception(r,"Failed to capture fetch breadcrumb")}}function gR(e,t){const{input:n,response:r}=t,s=n?fc(n):void 0,o=Yo(s),i=r?Ph(r.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}async function _R(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=_o(i,n.networkDetailAllowUrls)&&!_o(i,n.networkDetailDenyUrls),f=l?yR(n,t.input,u):Fr(u),p=await bR(l,n,t.response,d);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:f,response:p}}function yR({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?vR(n,t):{};if(!e)return Ut(s,r,void 0);const o=fc(n),[i,a]=co(o,j),c=Ut(s,r,i);return a?go(c,a):c}async function bR(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return Fr(s);const o=r?Lh(r.headers,n):{};if(!r||!t&&s!==void 0)return Ut(o,s,void 0);const[i,a]=await ER(r),c=SR(i,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:o});return a?go(c,a):c}function SR(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const o=e!=null&&e.length&&n===void 0?Yo(e):n;return r?t?Ut(s,o,e):Ut(s,o,void 0):Fr(o)}catch(o){return U&&j.exception(o,"Failed to serialize response body"),Ut(s,n,void 0)}}async function ER(e){const t=TR(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await wR(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(U&&j.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(U&&j.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function Lh(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function vR(e,t){return e.length===1&&typeof e[0]!="string"?Nl(e[0],t):e.length===2?Nl(e[1],t):{}}function Nl(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Lh(n,t):Array.isArray(n)?{}:aa(n,t):{}}function TR(e){try{return e.clone()}catch(t){U&&j.exception(t,"Failed to clone response body")}}function wR(e){return new Promise((t,n)=>{const r=ts(()=>n(new Error("Timeout while trying to read response body")),500);IR(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function IR(e){return await e.text()}async function xR(e,t,n){try{const r=RR(e,t,n),s=Oh("resource.xhr",r);Mh(n.replay,s)}catch(r){U&&j.exception(r,"Failed to capture xhr breadcrumb")}}function kR(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=Yo(r),o=n.getResponseHeader("content-length")?Ph(n.getResponseHeader("content-length")):NR(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),o!==void 0&&(e.data.response_body_size=o)}function RR(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!_o(c,n.networkDetailAllowUrls)||_o(c,n.networkDetailDenyUrls)){const N=Fr(l),E=Fr(f);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:N,response:E}}const p=a[Tt],h=p?aa(p.request_headers,n.networkRequestHeaders):{},m=aa(Rp(a),n.networkResponseHeaders),[g,b]=n.networkCaptureBodies?co(i,j):[void 0],[S,R]=n.networkCaptureBodies?CR(a):[void 0],w=Ut(h,l,g),D=Ut(m,f,S);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:b?go(w,b):w,response:R?go(D,R):D}}function CR(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return AR(e.response,e.responseType)}catch(n){t.push(n)}return U&&j.warn("Failed to get xhr response body",...t),[void 0]}function AR(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return U&&j.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return U&&j.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function NR(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Yo(n)}catch{return}}function MR(e){const t=P();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",(c,u)=>PR(a,c,u))}catch{}}function PR(e,t,n){if(t.data)try{OR(t)&&DR(n)&&(kR(t,n),xR(t,n,e)),LR(t)&&FR(n)&&(gR(t,n),mR(t,n,e))}catch(r){U&&j.exception(r,"Error when enriching network breadcrumb")}}function OR(e){return e.category==="xhr"}function LR(e){return e.category==="fetch"}function DR(e){return e==null?void 0:e.xhr}function FR(e){return e==null?void 0:e.response}function $R(e){const t=P();xp(mk(e)),jo(lR(e)),tR(e),MR(e);const n=cR(e);Od(n),t&&(t.on("beforeSendEvent",Zk(e)),t.on("afterSendEvent",Kk(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,s)=>{var i;const o=e.getSessionId();s!=null&&s.includeReplay&&e.isEnabled()&&o&&((i=r.contexts)!=null&&i.feedback)&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=o)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function BR(e){try{return Promise.all(Jo(e,[UR(fe.performance.memory)]))}catch{return[]}}function UR(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function jR(e,t,n){return ey(e,t,{...n,setTimeoutImpl:ts})}const Xe=K.navigator;function HR(){return/iPhone|iPad|iPod/i.test((Xe==null?void 0:Xe.userAgent)??"")||/Macintosh/i.test((Xe==null?void 0:Xe.userAgent)??"")&&(Xe!=null&&Xe.maxTouchPoints)&&(Xe==null?void 0:Xe.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function WR(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){U&&j.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&lk(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!kc(e,n,s))return!0;if(!s)return!1;const o=e.session;if(qR(e,s),e.recordingMode==="buffer"&&o&&e.eventBuffer&&!o.dirty){const i=e.eventBuffer.getEarliestTimestamp();i&&(U&&j.log(`Updating session start time to earliest event in buffer to ${new Date(i)}`),o.started=i,e.getOptions().stickySession&&Vo(o))}return o!=null&&o.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function zR(e){const t=e.getOptions();return{type:V.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function qR(e,t){!t||!e.session||e.session.segmentId!==0||kc(e,zR(e),!1)}function GR(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function VR(e,t,n,r){return pt(jd(e,vo(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function JR({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const o=new TextEncoder().encode(r);n=new Uint8Array(o.length+e.length),n.set(o),n.set(e,o.length)}return n}async function YR({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o={event_id:n,integrations:s};e.emit("preprocessEvent",r,o);const i=await Id(e.getOptions(),r,o,t,e,_t());if(!i)return null;e.emit("postprocessEvent",i,o),i.platform=i.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u,settings:d}=(a==null?void 0:a.sdk)||{};return i.sdk={...i.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},i}async function KR({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=JR({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=P(),f=Y(),p=l==null?void 0:l.getTransport(),h=l==null?void 0:l.getDsn();if(!l||!p||!h||!o.sampled)return Promise.resolve({});const m={type:xI,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:o.sampled},g=await YR({scope:f,client:l,replayId:t,event:m});if(!g)return l.recordDroppedEvent("event_processor","replay"),U&&j.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;const b=VR(g,i,h,l.getOptions().tunnel);let S;try{S=await p.send(b)}catch(w){const D=new Error(mc);try{D.cause=w}catch{}throw D}const R=Zd({},S);if(Qd(R,"replay"))throw new Cc(R);if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new Dh(S.statusCode);return S}class Dh extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Cc extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}class Ml extends Error{constructor(){super("Session is too long, not sending replay")}}async function Fh(e,t={count:0,interval:MI}){const{recordingData:n,onError:r}=e;if(n.length)try{return await KR(e),!0}catch(s){if(s instanceof Dh||s instanceof Cc)throw s;if(ka("Replays",{_retryCount:t.count}),r&&r(s),t.count>=PI){const o=new Error(`${mc} - max retries exceeded`);try{o.cause=s}catch{}throw o}return t.interval*=++t.count,new Promise((o,i)=>{ts(async()=>{try{await Fh(e,t),o(!0)}catch(a){i(a)}},t.interval)})}}const $h="__THROTTLED",XR="__SKIPPED";function QR(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},o=()=>[...r.values()].reduce((a,c)=>a+c,0);let i=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),o()>=t){const d=i;return i=!0,d?XR:$h}i=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class ZR{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:kI,sessionIdleExpire:RI},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=jR(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=QR((i,a)=>Vk(this,i,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),o=r?{threshold:Math.min(OI,r),timeout:r,scrollTimeout:LI,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new ik(this,o)),U){const i=t._experiments;j.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{fe.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=gt({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=gt({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{bk(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){U&&j.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){U&&j.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",U&&j.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){U&&j.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){U&&j.log("Buffering is in progress, call `flush()` to save the replay");return}U&&j.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=Ii({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){U&&j.log("Buffering is in progress, call `flush()` to save the replay");return}U&&j.infoTick("Starting replay in buffer mode");const t=Ii({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=wt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:NI}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:WR(this),...HR(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){var r;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{U&&j.log(`Stopping Replay${n?` triggered by ${n}`:""}`),Nh(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),(r=this.eventBuffer)==null||r.destroy(),this.eventBuffer=null,Hk(this)}catch(s){this.handleException(s)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),U&&j.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),U&&j.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();U&&j.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){var n,r;if(!(t&&((n=this.session)==null?void 0:n.sampled)===!1))return(r=this.session)==null?void 0:r.id}checkAndHandleExpiredSession(){if(this._lastActivity&&oa(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${fe.location.pathname}${fe.location.hash}${fe.location.search}`,n=`${fe.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===$h){const s=gt({category:"replay.throttled"});this.addUpdate(()=>!kc(this,{type:Zx,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||be(),n=t&&we(t),s=(n&&$(n).data||{})[ae];if(!(!n||!s||!["route","custom"].includes(s)))return $(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Bk({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Ii({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return kh(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{fe.document.addEventListener("visibilitychange",this._handleVisibilityChange),fe.addEventListener("blur",this._handleWindowBlur),fe.addEventListener("focus",this._handleWindowFocus),fe.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||($R(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=Mk(this)}_removeListeners(){try{fe.document.removeEventListener("visibilitychange",this._handleVisibilityChange),fe.removeEventListener("blur",this._handleWindowBlur),fe.removeEventListener("focus",this._handleWindowFocus),fe.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||xh(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){U&&j.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:V.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=Tk(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Jo(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){var n;const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){U&&j.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((n=this.eventBuffer)!=null&&n.hasEvents)&&(await BR(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Ml;const s=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await Fh({replayId:t,recordingData:i,segmentId:o,eventContext:s,session:this.session,timestamp:r,onError:a=>this.handleException(a)})}catch(r){this.handleException(r),this.stop({reason:"sendReplay"});const s=P();if(s){let o;r instanceof Cc?o="ratelimit_backoff":r instanceof Ml?o="invalid":o="send_error",s.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){U&&j.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const o=s<this._options.minReplayDuration,i=s>this._options.maxReplayDuration+5e3;if(o||i){U&&j.log(`Session duration (${Math.floor(s/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&U&&j.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Vo(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n!=null&&n.length&&t.some(a=>{const c=GR(a.target),u=n.join(",");return c==null?void 0:c.matches(u)}))return!1;const r=t.length,s=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=s&&r>s;if(r>o||i){const a=gt({category:"replay.mutations",data:{count:r,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function hr(e,t){return[...e,...t].join(",")}function e1({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const o=["base","iframe[srcdoc]:not([src])"],i=hr(e,[".sentry-mask","[data-sentry-mask]"]),a=hr(t,[]);return{maskTextSelector:i,unmaskTextSelector:a,blockSelector:hr(n,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:hr(r,[]),ignoreSelector:hr(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function t1({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?o:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}const Pl='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',n1=["content-length","content-type","accept"],r1=Symbol.for("sentry__originalRequestBody");let Ol=!1,Ll=!1;function s1(){if(typeof Request>"u"||Ll)return;const e=Request;try{const t=function(n,r){const s=new e(n,r);return(r==null?void 0:r.body)!=null&&(s[r1]=r.body),s};t.prototype=e.prototype,K.Request=t,Ll=!0}catch{}}const o1=e=>new i1(e);class i1{constructor({flushMinDelay:t=CI,flushMaxDelay:n=AI,minReplayDuration:r=DI,maxReplayDuration:s=dl,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:b=[],networkCaptureBodies:S=!0,networkRequestHeaders:R=[],networkResponseHeaders:w=[],mask:D=[],maskAttributes:N=["title","placeholder","aria-label"],unmask:E=[],block:C=[],unblock:B=[],ignore:v=[],maskFn:M,beforeAddRecordingEvent:k,beforeErrorSampling:A,onError:F,attachRawBodyFromRequest:X=!1}={}){this.name="Replay";const Q=e1({mask:D,unmask:E,block:C,unblock:B,ignore:v});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:M,maskInputFn:M,maskAttributeFn:(te,T,W)=>t1({maskAttributes:N,maskAllText:u,privacyOptions:Q,key:te,value:T,el:W}),...Q,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:te=>{try{te.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,FI),maxReplayDuration:Math.min(s,dl),stickySession:o,useCompression:i,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:b,networkCaptureBodies:S,networkRequestHeaders:Dl(R),networkResponseHeaders:Dl(w),beforeAddRecordingEvent:k,beforeErrorSampling:A,onError:F,attachRawBodyFromRequest:X,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Pl}`:Pl,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&no())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ol}set _isInitialized(t){Ol=t}afterAllSetup(t){!no()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&s1(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){var n;if((n=this._replay)!=null&&n.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=a1(this._initialOptions,t);this._replay=new ZR({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function a1(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=Cr(n.replaysSessionSampleRate),o=Cr(n.replaysOnErrorSampleRate);return s==null&&o==null&&Hr(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),o!=null&&(r.errorSampleRate=o),r}function Dl(e){return[...n1,...e.map(t=>t.toLowerCase())]}function c1(){const e=P();return e==null?void 0:e.getIntegrationByName("Replay")}var u1=Object.defineProperty,l1=(e,t,n)=>t in e?u1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fl=(e,t,n)=>l1(e,typeof t!="symbol"?t+"":t,n);class d1{constructor(){Fl(this,"idNodeMap",new Map),Fl(this,"nodeMetaMap",new WeakMap)}getId(t){var r;return t?((r=this.getMeta(t))==null?void 0:r.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function f1(){return new d1}function p1(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function ca(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ca(e.parentNode,t,n,r+1)}function $l(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(p1(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const Nn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Bl={map:{},getId(){return console.error(Nn),-1},getNode(){return console.error(Nn),null},removeNodeFromMap(){console.error(Nn)},has(){return console.error(Nn),!1},reset(){console.error(Nn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Bl=new Proxy(Bl,{get(e,t,n){return t==="map"&&console.error(Nn),Reflect.get(e,t,n)}}));function Ac(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){Uh(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>Ac(e,t,o||{},!0)}function Nc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function h1(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ko(e,t,n,r,s){if(!e)return!1;const o=h1(e);if(!o)return!1;const i=$l(t,n),a=ca(o,i);let c=-1;return a<0?!1:(r&&(c=ca(o,$l(null,r))),a>-1&&c<0?!0:a<c)}const Ul={};function Bh(e){const t=Ul[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return Ul[e]=r.bind(window)}function nn(...e){return Bh("requestAnimationFrame")(...e)}function Uh(...e){return Bh("setTimeout")(...e)}var Kn=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Kn||{});let Bs;function m1(e){Bs=e}const xi=e=>Bs?(...n)=>{try{return e(...n)}catch(r){if(Bs&&Bs(r)===!0)return()=>{};throw r}}:e;var Fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bs=0;bs<Fn.length;bs++)g1[Fn.charCodeAt(bs)]=bs;var _1=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=Fn[t[n]>>2],s+=Fn[(t[n]&3)<<4|t[n+1]>>4],s+=Fn[(t[n+1]&15)<<2|t[n+2]>>6],s+=Fn[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const jl=new Map;function y1(e,t){let n=jl.get(e);return n||(n=new Map,jl.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const jh=(e,t,n)=>{if(!e||!(Wh(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=y1(n,r);let o=s.indexOf(e);return o===-1&&(o=s.length,s.push(e)),o};function Us(e,t,n){if(e instanceof Array)return e.map(r=>Us(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=_1(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Us(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Us(e.data,t,n),e.width,e.height]};if(Wh(e,t)||typeof e=="object"){const r=e.constructor.name,s=jh(e,t,n);return{rr_type:r,index:s}}}}return e}const Hh=(e,t,n)=>e.map(r=>Us(r,t,n)),Wh=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function b1(e,t,n,r,s){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=Nc(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return Ko(this.canvas,n,r,s,!0)||Uh(()=>{const l=Hh(d,t,this);e(this.canvas,{type:Kn["2D"],property:a,args:l})},0),u.apply(this,d)}});o.push(c)}catch{const c=Ac(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Kn["2D"],property:a,args:[u],setter:!0})}});o.push(c)}return()=>{o.forEach(a=>a())}}function S1(e){return e==="experimental-webgl"?"webgl":e}function Hl(e,t,n,r,s){const o=[];try{const i=Nc(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!Ko(this,t,n,r,!0)){const d=S1(c);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});o.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(i=>i())}}function Wl(e,t,n,r,s,o,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=Nc(e,d,function(f){return function(...p){const h=f.apply(this,p);if(jh(h,a,this),"tagName"in this.canvas&&!Ko(this.canvas,r,s,o,!0)){const m=Hh(p,a,this),g={type:t,property:d,args:m};n(this.canvas,g)}return h}});c.push(l)}catch{const l=Ac(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function E1(e,t,n,r,s,o){const i=[];return i.push(...Wl(t.WebGLRenderingContext.prototype,Kn.WebGL,e,n,r,s,o,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...Wl(t.WebGL2RenderingContext.prototype,Kn.WebGL2,e,n,r,s,o,t)),()=>{i.forEach(a=>a())}}const v1='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function T1(){const e=new Blob([v1]);return URL.createObjectURL(e)}class w1{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{enableManualSnapshot:n,sampling:r="all",win:s,recordCanvas:o,errorHandler:i}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,i&&m1(i),(o&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(s),!n&&xi(()=>{o&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),o&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){var t;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,(t=this.worker)==null||t.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:o,recordCanvas:i,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}xi(()=>{if(i&&n==="all"&&this.initCanvasMutationObserver(t,r,s,o),i&&typeof n=="number"){const c=Hl(t,r,s,o,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n!=null&&n.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}nn(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){const t=new Worker(T1());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:o,type:i,width:a,height:c}=r;this.mutationCb({id:s,type:Kn["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:i}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const n=r=>{this.takeSnapshot(r,!1),t=nn(n)};t=nn(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,s){const o=Hl(t,n,r,s,!1),i=b1(this.processMutation.bind(this),t,n,r,s),a=E1(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{o(),i(),a()})}getCanvasElements(t,n,r){const s=[],o=i=>{i.querySelectorAll("canvas").forEach(a=>{Ko(a,t,n,r)||s.push(a)})};for(const i of this.windows){const a=i.deref();let c;try{c=a&&a.document}catch{}c&&o(c)}for(const i of this.shadowDoms){const a=i.deref();a&&o(a)}return s}takeSnapshot(t,n,r){const{sampling:s,blockClass:o,blockSelector:i,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(s==="all"?2:s||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(o,i,a)).forEach(h=>{var g;const m=this.mirror.getId(h);if(!(!this.mirror.hasNode(h)||!h.width||!h.height||this.snapshotInProgressMap.get(m))){if(this.snapshotInProgressMap.set(m,!0),!n&&["webgl","webgl2"].includes(h.__context)){const b=h.getContext(h.__context);((g=b==null?void 0:b.getContextAttributes())==null?void 0:g.preserveDrawingBuffer)===!1&&b.clear(b.COLOR_BUFFER_BIT)}createImageBitmap(h).then(b=>{var S;(S=this.worker)==null||S.postMessage({id:m,bitmap:b,width:h.width,height:h.height,dataURLOptions:c,maxCanvasSize:u},[b])}).catch(b=>{xi(()=>{throw this.snapshotInProgressMap.delete(m),b})()})}}),!0)}startPendingCanvasMutationFlusher(){nn(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,nn(t)};nn(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),nn(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(i=>{const{type:a,...c}=i;return c}),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:s}),this.pendingCanvasMutations.delete(t)}}var dd;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((dd=e.contentWindow)==null?void 0:dd.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}f1();var zl;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(zl||(zl={}));const ql={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},I1="ReplayCanvas",Ss=1280,x1=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Ss):Ss,n?Math.min(n,Ss):Ss]};let s,o;const i=new Promise(a=>o=a);return{name:I1,getOptions(){const{quality:a,enableManualSnapshot:c,maxCanvasSize:u}=r;return{enableManualSnapshot:c,recordCanvas:!0,getCanvasManager:d=>{const l=new w1({...d,enableManualSnapshot:c,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return s=l,o(l),l},...ql[a]||ql.medium}},async snapshot(a,c){(s||await i).snapshot(a,c)}}},k1=x1;function R1(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function zh(e){try{return new URL(e,O.location.origin).href}catch{return}}function C1(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function qh(e){try{return new Headers(e)}catch{return}}const Gl=new WeakMap,ki=new Map,Mc={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Gh(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...Mc,...t},d=typeof o=="function"?o:h=>!0,l=h=>A1(h,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(m=>{if(m.op==="http.client"){const g=ki.get(m.span_id);g&&(m.timestamp=g/1e3,ki.delete(m.span_id))}}),h)),s&&jE(h=>{if(h.response){const m=Gl.get(h.response);m&&h.endTimestamp&&ki.set(m,h.endTimestamp)}}),Qa(h=>{const m=bb(h,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&Gl.set(h.response,h.fetchData.__span),m){const g=zh(h.fetchData.url),b=g?fn(g).host:void 0;m.setAttributes({"http.url":g?$t(g):void 0,"server.address":b}),i&&Vl(m),c==null||c(m,{headers:h.headers})}})),r&&dc(h=>{var g;const m=N1(h,d,l,f,p,u);m&&(i&&Vl(m),c==null||c(m,{headers:qh((g=h.xhr.__sentry_xhr_v3__)==null?void 0:g.request_headers)}))})}function Vl(e){const{url:t}=$(e).data;if(!t||typeof t!="string")return;const n=Tn("resource",({entries:r})=>{r.forEach(s=>{C1(s)&&s.name.endsWith(t)&&(e.setAttributes(Ip(s)),setTimeout(n))})})}function A1(e,t){const n=Zn();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const o=r.origin===s;return t?ct(r.toString(),t)||o&&ct(r.pathname,t):o}else{const r=!!e.match(/^\/(?!\/)/);return t?ct(e,t):r}}function N1(e,t,n,r,s,o){const i=e.xhr,a=i==null?void 0:i[Tt];if(!i||i.__sentry_own_request__||!a)return;const{url:c,method:u}=a,d=it()&&t(c);if(e.endTimestamp&&d){const b=i.__sentry_xhr_span_id__;if(!b)return;const S=r[b];S&&a.status_code!==void 0&&(Nr(S,a.status_code),S.end(),o==null||o(S,{headers:qh(Rp(i)),error:e.error}),delete r[b]);return}const l=zh(c),f=fn(l||c),p=$t(lf(c)),h=!!be(),m=d&&h?tt({name:`${u} ${p}`,attributes:{url:$t(c),type:"xhr","http.method":u,"http.url":l?$t(l):void 0,"server.address":f==null?void 0:f.host,[q]:"auto.http.browser",[pe]:"http.client",...(f==null?void 0:f.search)&&{"http.query":f==null?void 0:f.search},...(f==null?void 0:f.hash)&&{"http.fragment":f==null?void 0:f.hash}}}):new kt;i.__sentry_xhr_span_id__=m.spanContext().spanId,r[i.__sentry_xhr_span_id__]=m,n(c)&&M1(i,it()&&h?m:void 0,s);const g=P();return g&&g.emit("beforeOutgoingRequestSpan",m,e),m}function M1(e,t,n){const{"sentry-trace":r,baggage:s,traceparent:o}=Ua({span:t,propagateTraceparent:n});r&&P1(e,r,s,o)}function P1(e,t,n,r){var o;const s=(o=e.__sentry_xhr_v3__)==null?void 0:o.request_headers;if(!(s!=null&&s["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!(s!=null&&s.traceparent)&&e.setRequestHeader("traceparent",r),n){const i=s==null?void 0:s.baggage;(!i||!R1(i))&&e.setRequestHeader("baggage",n)}}catch{}}function O1(){O.document?O.document.addEventListener("visibilitychange",()=>{const e=be();if(!e)return;const t=we(e);if(O.document.hidden&&t){const n="cancelled",{op:r,status:s}=$(t);I&&y.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:Ee,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):I&&y.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const L1=3600,Vh="sentry_previous_trace",D1="sentry.previous_trace";function F1(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let s=r?U1():void 0;e.on("spanStart",i=>{if(we(i)!==i)return;const a=Y().getPropagationContext();s=$1(s,i,a),r&&B1(s)});let o=!0;n&&e.on("beforeSampling",i=>{if(!s)return;const a=Y(),c=a.getPropagationContext();if(o&&c.parentSpanId){o=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(ua(s.spanContext))},sampleRand:s.sampleRand}),i.parentSampled=ua(s.spanContext),i.parentSampleRate=s.sampleRate,i.spanAttributes={...i.spanAttributes,[tg]:s.sampleRate}})}function $1(e,t,n){const r=$(t);function s(){var a,c;try{return Number((a=n.dsc)==null?void 0:a.sample_rate)??Number((c=r.data)==null?void 0:c[ya])}catch{return 0}}const o={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return o;const i=e.spanContext;return i.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=L1&&(I&&y.log(`Adding previous_trace \`${JSON.stringify(i)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:i,attributes:{[ng]:"previous_trace"}}),t.setAttribute(D1,`${i.traceId}-${i.spanId}-${ua(i)?1:0}`)),o)}function B1(e){try{O.sessionStorage.setItem(Vh,JSON.stringify(e))}catch(t){I&&y.warn("Could not store previous trace in sessionStorage",t)}}function U1(){var e;try{const t=(e=O.sessionStorage)==null?void 0:e.getItem(Vh);return JSON.parse(t)}catch{return}}function ua(e){return e.traceFlags===1}const j1="BrowserTracing",H1={...ws,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Mc},ir=(e={})=>{const t={name:void 0,source:void 0},n=O.document,{enableInp:r,enableElementTiming:s,enableLongTask:o,enableLongAnimationFrame:i,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:m,traceXHR:g,trackFetchStreamPerformance:b,shouldCreateSpanForRequest:S,enableHTTPTimings:R,ignoreResourceSpans:w,ignorePerformanceApiSpans:D,instrumentPageLoad:N,instrumentNavigation:E,detectRedirects:C,linkPreviousTrace:B,consistentTraceSampling:v,enableReportPageLoaded:M,onRequestSpanStart:k,onRequestSpanEnd:A}={...H1,...e};let F,X,Q;function te(T,W,x=!0){const G=W.op==="pageload",oe=W.name,se=d?d(W):W,Te=se.attributes||{};if(oe!==se.name&&(Te[ae]="custom",se.attributes=Te),!x){const Pe=Eo();tt({...se,startTime:Pe}).end(Pe);return}t.name=se.name,t.source=Te[ae];const Me=Gd(se,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:G,beforeSpanEnd:Pe=>{F==null||F(),lT(Pe,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:w,ignorePerformanceApiSpans:D}),Yl(T,void 0);const $e=Y(),ht=$e.getPropagationContext();$e.setPropagationContext({...ht,traceId:Me.spanContext().traceId,sampled:So(Me),dsc:It(Pe)}),G&&(Q=void 0)},trimIdleSpanEndTimestamp:!M});G&&M&&(Q=Me),Yl(T,Me);function Nt(){n&&["interactive","complete"].includes(n.readyState)&&T.emit("idleSpanEnableAutoFinish",Me)}G&&!M&&n&&(n.addEventListener("readystatechange",()=>{Nt()}),Nt())}return{name:j1,setup(T){if(Ud(),F=rT({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:T}),r&&DT(),s&&vT(),i&&K.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?oT():o&&sT(),a&&iT(),C&&n){const x=()=>{X=ye()};addEventListener("click",x,{capture:!0}),addEventListener("keydown",x,{capture:!0,passive:!0})}function W(){const x=$r(T);x&&!$(x).timestamp&&(I&&y.log(`[Tracing] Finishing current active span with op: ${$(x).op}`),x.setAttribute(Ar,"cancelled"),x.end())}T.on("startNavigationSpan",(x,G)=>{if(P()!==T)return;if(G!=null&&G.isRedirect){I&&y.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),te(T,{op:"navigation.redirect",...x},!1);return}X=void 0,W(),_t().setPropagationContext({traceId:Rr(),sampleRand:Math.random(),propagationSpanId:it()?void 0:Sr()});const oe=Y();oe.setPropagationContext({traceId:Rr(),sampleRand:Math.random(),propagationSpanId:it()?void 0:Sr()}),oe.setSDKProcessingMetadata({normalizedRequest:void 0}),te(T,{op:"navigation",...x,parentSpan:null,forceTransaction:!0})}),T.on("startPageLoadSpan",(x,G={})=>{if(P()!==T)return;W();const oe=G.sentryTrace||Jl("sentry-trace"),se=G.baggage||Jl("baggage"),Te=gd(oe,se),Me=Y();Me.setPropagationContext(Te),it()||(Me.getPropagationContext().propagationSpanId=Sr()),Me.setSDKProcessingMetadata({normalizedRequest:xa()}),te(T,{op:"pageload",...x})}),T.on("endPageloadSpan",()=>{M&&Q&&(Q.setAttribute(Ar,"reportPageLoaded"),Q.end())})},afterAllSetup(T){let W=Zn();if(B!=="off"&&F1(T,{linkPreviousTrace:B,consistentTraceSampling:v}),O.location){if(N){const x=Ne();ar(T,{name:O.location.pathname,startTime:x?x/1e3:void 0,attributes:{[ae]:"url",[q]:"auto.pageload.browser"}})}E&&jo(({to:x,from:G})=>{if(G===void 0&&(W==null?void 0:W.indexOf(x))!==-1){W=void 0;return}W=void 0;const oe=Ba(x),se=$r(T),Te=se&&C&&z1(se,X);cr(T,{name:(oe==null?void 0:oe.pathname)||O.location.pathname,attributes:{[ae]:"url",[q]:"auto.navigation.browser"}},{url:x,isRedirect:Te})})}h&&O1(),a&&W1(T,l,f,p,t),r&&BT(),Gh(T,{traceFetch:m,traceXHR:g,trackFetchStreamPerformance:b,tracePropagationTargets:T.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:S,enableHTTPTimings:R,onRequestSpanStart:k,onRequestSpanEnd:A})}}};function ar(e,t,n){e.emit("startPageLoadSpan",t,n),Y().setTransactionName(t.name);const r=$r(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function cr(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const o=Y();return o.setTransactionName(t.name),r&&!s&&o.setSDKProcessingMetadata({normalizedRequest:{...xa(),url:r}}),$r(e)}function Jl(e){const t=O.document,n=t==null?void 0:t.querySelector(`meta[name=${e}]`);return(n==null?void 0:n.getAttribute("content"))||void 0}function W1(e,t,n,r,s){const o=O.document;let i;const a=()=>{const c="ui.action.click",u=$r(e);if(u){const d=$(u).op;if(["navigation","pageload"].includes(d)){I&&y.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(Ar,"interactionInterrupted"),i.end(),i=void 0),!s.name){I&&y.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}i=Gd({name:s.name,op:c,attributes:{[ae]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};o&&addEventListener("click",a,{capture:!0})}const Jh="_sentry_idleSpan";function $r(e){return e[Jh]}function Yl(e,t){Ve(e,Jh,t)}const Kl=1.5;function z1(e,t){const n=$(e),r=Eo(),s=n.start_timestamp;return!(r-s>Kl||t&&r-t<=Kl)}function q1(e=P()){e==null||e.emit("endPageloadSpan")}function G1(e){const t=be();if(t===e)return;const n=Y();e.end=new Proxy(e.end,{apply(r,s,o){return Vt(n,t),Reflect.apply(r,s,o)}}),Vt(n,e)}function Xn(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function V1(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Xn(n);return s=>r.then(o=>s(o.transaction(t,"readwrite").objectStore(t)))}function Pc(e){return Xn(e.getAllKeys())}function J1(e,t,n){return e(r=>Pc(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),Xn(r.transaction)}))}function Y1(e,t,n){return e(r=>Pc(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),Xn(r.transaction)}))}function K1(e){return e(t=>Pc(t).then(n=>{const r=n[0];if(r!=null)return Xn(t.get(r)).then(s=>(t.delete(r),Xn(t.transaction).then(()=>s)))}))}function X1(e){let t;function n(){return t==null&&(t=V1(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await Js(r);await J1(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await Js(r);await Y1(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await K1(n());if(r)return Wg(r)}catch{}}}}function Q1(e){return t=>{const n=e({...t,createStore:X1});return O.addEventListener("online",async r=>{await n.flush()}),n}}function Z1(e=pc){return Q1(H_(e))}const Xl=1e6,eC="window"in K&&K.window===K&&typeof importScripts>"u",jt=String(0),yo=eC?"main":"worker",Qe=O.navigator;let Yh="",Kh="",Xh="",la=(Qe==null?void 0:Qe.userAgent)||"",Qh="";var fd;const tC=(Qe==null?void 0:Qe.language)||((fd=Qe==null?void 0:Qe.languages)==null?void 0:fd[0])||"";function nC(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const Ql=Qe==null?void 0:Qe.userAgentData;nC(Ql)&&Ql.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(Yh=e.platform||"",Xh=e.architecture||"",Qh=e.model||"",Kh=e.platformVersion||"",(t=e.fullVersionList)!=null&&t.length){const n=e.fullVersionList[e.fullVersionList.length-1];la=`${n.brand} ${n.version}`}}).catch(e=>{});function rC(e){return!("thread_metadata"in e)}function sC(e){return rC(e)?lC(e):e}function oC(e){var n,r;const t=(r=(n=e.contexts)==null?void 0:n.trace)==null?void 0:r.trace_id;return typeof t=="string"&&t.length!==32&&I&&y.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function iC(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=oC(r),o=sC(n),i=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:ye()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:ye()*1e3;return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||wd,runtime:{name:"javascript",version:O.navigator.userAgent},os:{name:Yh,version:Kh,build_number:la},device:{locale:tC,model:Qh,manufacturer:la,architecture:Xh,is_emulator:!1},debug_meta:{images:em(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||at(),trace_id:s,active_thread_id:jt,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function aC(e,t,n){var i,a;if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const r=uC(e),s=t.getOptions(),o=(a=(i=t.getSdkMetadata)==null?void 0:i.call(t))==null?void 0:a.sdk;return{chunk_id:at(),client_sdk:{name:(o==null?void 0:o.name)??"sentry.javascript.browser",version:(o==null?void 0:o.version)??"0.0.0"},profiler_id:n||at(),platform:"javascript",version:"2",release:s.release??"",environment:s.environment??"production",debug_meta:{images:em(e.resources)},profile:r}}function cC(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function uC(e){const t=[];for(let a=0;a<e.frames.length;a++){const c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}const n=[];for(let a=0;a<e.stacks.length;a++){const c=e.stacks[a];if(!c)continue;const u=[];let d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}const r=Ne(),s=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,o=s-(r||s),i=[];for(let a=0;a<e.samples.length;a++){const c=e.samples[a];if(!c)continue;const u=(s+(c.timestamp-o))/1e3;i[a]={stack_id:c.stackId??0,thread_id:jt,timestamp:u}}return{frames:t,stacks:n,samples:i,thread_metadata:{[jt]:{name:yo}}}}function Zh(e){return $(e).op==="pageload"}function lC(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[jt]:{name:yo}}},s=e.samples[0];if(!s)return r;const o=s.timestamp,i=Ne(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-o)*Xl).toFixed(0),stack_id:t,thread_id:jt};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-o)*Xl).toFixed(0),stack_id:n,thread_id:jt};r.stacks[n]=f,r.samples[d]=p,n++}),r}function dC(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function fC(e){const t=[];return hn(e,(n,r)=>{var s,o;if(r==="transaction")for(let i=1;i<n.length;i++){const a=n[i];(o=(s=a==null?void 0:a.contexts)==null?void 0:s.profile)!=null&&o.profile_id&&t.push(n[i])}}),t}function em(e){const t=P(),n=t==null?void 0:t.getOptions(),r=n==null?void 0:n.stackParser;return r?rg(r,e):[]}function tm(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(I&&y.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(I&&y.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function pC(e){return e.samples.length<2?(I&&y.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(I&&y.log("[Profiling] Discarding profile because it contains no frames"),!1)}let Oc=!1;const nm=3e4;function hC(e){return typeof e=="function"}function rm(){const e=O.Profiler;if(!hC(e)){I&&y.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(nm/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{I&&(y.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),y.log("[Profiling] Disabling profiling for current user session.")),Oc=!0}}function Zl(e){if(Oc)return I&&y.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return I&&y.log("[Profiling] Discarding profile because root span was not sampled."),!1;const t=P(),n=t==null?void 0:t.getOptions();if(!n)return I&&y.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return tm(r)?r?(r===!0?!0:Math.random()<r)?!0:(I&&y.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(I&&y.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(I&&y.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function mC(e){if(Oc)return I&&y.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return I&&y.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return tm(t)?t?Math.random()<=t:(I&&y.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(I&&y.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function Es(e){return typeof e.profilesSampleRate<"u"}function gC(e,t,n,r){return pC(n)?iC(e,t,n,r):null}const un=new Map;function _C(){return un.size}function yC(e){const t=un.get(e);return t&&un.delete(e),t}function bC(e,t){if(un.set(e,t),un.size>30){const n=un.keys().next().value;n!==void 0&&un.delete(n)}}function SC(e){var t,n,r,s,o;return!((t=e==null?void 0:e.contexts)!=null&&t.profile)||!e.contexts||(e.contexts.trace={...((n=e.contexts)==null?void 0:n.trace)??{},data:{...((s=(r=e.contexts)==null?void 0:r.trace)==null?void 0:s.data)??{},"thread.id":jt,"thread.name":yo}},(o=e.spans)==null||o.forEach(i=>{i.data={...i.data||{},"thread.id":jt,"thread.name":yo}})),e}function ed(e){let t;Zh(e)&&(t=ye()*1e3);const n=rm();if(!n)return;I&&y.log(`[Profiling] started profiling span: ${$(e).description}`);const r=at();let s=null;Y().setContext("profile",{profile_id:r,start_timestamp:t});async function o(){if(e&&n){if(s){I&&y.log("[Profiling] profile for:",$(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(i&&(O.clearTimeout(i),i=void 0),I&&y.log(`[Profiling] stopped profiling of span: ${$(e).description}`),!u){I&&y.log(`[Profiling] profiler returned null profile for: ${$(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}s=u,bC(r,u)}).catch(u=>{I&&y.log("[Profiling] error while stopping profiler:",u)})}}let i=O.setTimeout(()=>{I&&y.log("[Profiling] max profile duration elapsed, stopping profiling for:",$(e).description),o()},nm);const a=e.end.bind(e);function c(){return e?(o().then(()=>{a()},()=>{a()}),e):a()}e.end=c}const EC=6e4,vC=3e5;class TC{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const n=t.getOptions().profileLifecycle,r=mC(t.getOptions());I&&y.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||I&&y.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=at(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){I&&y.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){I&&y.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){I&&y.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){I&&y.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){I&&y.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);const r=this._activeRootSpanIds.size;r===1&&(I&&y.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,I&&y.log("[Profiling] Started profiling with profiler ID:",this._profilerId),$n().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){I&&y.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{I&&y.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&$n().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){I&&y.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==we(n))return;if(!n.isRecording()){I&&y.log("[Profiling] Discarding profile because root span was not sampled.");return}const r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const s=this._activeRootSpanIds.size;s===1&&(I&&y.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${s}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;const r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);const s=this._activeRootSpanIds.size;I&&y.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${s}).`),s===0&&(this._collectCurrentChunk().catch(o=>{I&&y.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",o)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,$n().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const n=setTimeout(()=>this._onRootSpanTimeout(t),vC);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){var n;if(((n=this._profiler)==null?void 0:n.stopped)===!1)return;const t=rm();if(!t){I&&y.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{I&&y.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},EC))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(I&&y.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const n=await t.stop(),r=aC(n,this._client,this._profilerId),s=cC(r);if("reason"in s){I&&y.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",s.reason);return}this._sendProfileChunk(r),I&&y.log("[Profiling] Collected browser profile chunk.")}catch(n){I&&y.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){var a;const n=this._client,r=vo((a=n.getSdkMetadata)==null?void 0:a.call(n)),s=n.getDsn(),o=n.getOptions().tunnel,i=pt({event_id:at(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!o&&s&&{dsn:Qt(s)}},[[{type:"profile_chunk",platform:"javascript"},t]]);n.sendEnvelope(i).then(null,c=>{I&&y.error("Error while sending profile chunk envelope:",c)})}}const wC="BrowserProfiling",IC=()=>({name:wC,setup(e){const t=e.getOptions(),n=new TC;if(!Es(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),Es(t)&&!t.profilesSampleRate){I&&y.log("[Profiling] Profiling disabled, no profiling options found.");return}const r=be(),s=r&&we(r);if(Es(t)&&t.profileSessionSampleRate!==void 0&&I&&y.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),Es(t))s&&Zh(s)&&Zl(s)&&ed(s),e.on("spanStart",o=>{o===we(o)&&Zl(o)&&ed(o)}),e.on("beforeEnvelope",o=>{var c,u;if(!_C())return;const i=fC(o);if(!i.length)return;const a=[];for(const d of i){const l=d==null?void 0:d.contexts,f=(c=l==null?void 0:l.profile)==null?void 0:c.profile_id,p=(u=l==null?void 0:l.profile)==null?void 0:u.start_timestamp;if(typeof f!="string"){I&&y.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!f){I&&y.log("[Profiling] cannot find profile for a span without a profile context");continue}l!=null&&l.profile&&delete l.profile;const h=yC(f);if(!h){I&&y.log(`[Profiling] Could not retrieve profile for span: ${f}`);continue}const m=gC(f,p,h,d);m&&a.push(m)}dC(o,a)});else{const o=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),o==="manual")n.initialize(e);else if(o==="trace"){if(!it(t)){I&&y.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),s&&n.notifyRootSpanActive(s),O.setTimeout(()=>{const i=be(),a=i&&we(i);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return SC(e)}}),xC=IC,kC=()=>({name:"LaunchDarkly",processEvent(e,t,n){return tr(e)}});function RC(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{gn(e,t.value),_n(e,t.value)}}}const CC=()=>({name:"OpenFeature",processEvent(e,t,n){return tr(e)}});class AC{after(t,n){gn(n.flagKey,n.value),_n(n.flagKey,n.value)}error(t,n,r){gn(t.flagKey,t.defaultValue),_n(t.flagKey,t.defaultValue)}}const NC=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;ke(t,"isEnabled",MC)},processEvent(t,n,r){return tr(t)}});function MC(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(gn(n,r),_n(n,r)):I&&y.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const PC=({growthbookClass:e})=>mb({growthbookClass:e}),OC=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{gn(n.gate.name,n.gate.value),_n(n.gate.name,n.gate.value)})},processEvent(t,n,r){return tr(t)}});async function LC(){const e=P();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";const r=e.getOptions().tunnel||"https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7";try{await Wd(()=>fetch(r,{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const DC="WebWorker",FC=({worker:e})=>({name:DC,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>td(t))},addWorker:t=>td(t)});function td(e){e.addEventListener("message",t=>{UC(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(I&&y.log("Sentry debugId web worker message received",t.data),O._sentryDebugIds={...t.data._sentryDebugIds,...O._sentryDebugIds}),t.data._sentryModuleMetadata&&(I&&y.log("Sentry module metadata web worker message received",t.data),O._sentryModuleMetadata={...t.data._sentryModuleMetadata,...O._sentryModuleMetadata}),t.data._sentryWorkerError&&(I&&y.log("Sentry worker rejection message received",t.data._sentryWorkerError),$C(t.data._sentryWorkerError)))})}function $C(e){const t=P();if(!t)return;const n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,s=e.reason,o=Jt(s)?Bp(s):$o(n,s,void 0,r,!0);o.level="error",e.filename&&(o.contexts={...o.contexts,worker:{filename:e.filename}}),er(o,{originalException:s,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),I&&y.log("Captured worker unhandled rejection",s)}function BC({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0,_sentryModuleMetadata:e._sentryModuleMetadata??void 0}),e.addEventListener("unhandledrejection",t=>{var s;const r={reason:$p(t),filename:(s=e.location)==null?void 0:s.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),I&&y.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),I&&y.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function UC(e){if(!Et(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,n="_sentryModuleMetadata"in e,r="_sentryWorkerError"in e;return!(!t&&!n&&!r||t&&!(Et(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!(Et(e._sentryModuleMetadata)||e._sentryModuleMetadata===void 0)||r&&!Et(e._sentryWorkerError))}function jC(e){const t={...e};return pf(t,"react"),ka("react",{version:De.version}),Jw(t)}const sm="ui.react.render",HC="ui.react.update",om="ui.react.mount",WC="unknown";class Lc extends De.Component{constructor(t){super(t);const{name:n,disabled:r=!1}=this.props;r||(this._mountSpan=tt({name:`<${n}>`,onlyIfParent:!0,op:om,attributes:{[q]:"auto.ui.react.profiler","ui.component_name":n}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:t,includeUpdates:n=!0}){if(n&&this._mountSpan&&t!==this.props.updateProps){const r=Object.keys(t).filter(s=>t[s]!==this.props.updateProps[s]);if(r.length>0){const s=ye();this._updateSpan=mn(this._mountSpan,()=>tt({name:`<${this.props.name}>`,onlyIfParent:!0,op:HC,startTime:s,attributes:{[q]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":r}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const t=ye(),{name:n,includeRender:r=!0}=this.props;if(this._mountSpan&&r){const s=$(this._mountSpan).timestamp;mn(this._mountSpan,()=>{const o=tt({onlyIfParent:!0,name:`<${n}>`,op:sm,startTime:s,attributes:{[q]:"auto.ui.react.profiler","ui.component_name":n}});o&&o.end(t)})}}render(){return this.props.children}}Object.assign(Lc,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});function zC(e,t){const n=(t==null?void 0:t.name)||e.displayName||e.name||WC,r=s=>De.createElement(Lc,{...t,name:n,updateProps:s},De.createElement(e,{...s}));return r.displayName=`profiler(${n})`,Ra(r,e),r}function qC(e,t={disabled:!1,hasRenderSpan:!0}){const[n]=De.useState(()=>{if(!(t!=null&&t.disabled))return tt({name:`<${e}>`,onlyIfParent:!0,op:om,attributes:{[q]:"auto.ui.react.profiler","ui.component_name":e}})});De.useEffect(()=>(n&&n.end(),()=>{if(n&&t.hasRenderSpan){const r=$(n).timestamp,s=ye(),o=tt({name:`<${e}>`,onlyIfParent:!0,op:sm,startTime:r,attributes:{[q]:"auto.ui.react.profiler","ui.component_name":e}});o&&o.end(s)}}),[])}const GC="redux.action",VC="info",JC={attachReduxState:!0,actionTransformer:e=>e,stateTransformer:e=>e||null};function YC(e){const t={...JC,...e};return n=>(r,s)=>{t.attachReduxState&&$n().addEventProcessor((a,c)=>{try{a.type===void 0&&a.contexts.state.state.type==="redux"&&(c.attachments=[...c.attachments||[],{filename:"redux_state.json",data:JSON.stringify(a.contexts.state.state.value)}])}catch{}return a});function o(a){return(c,u)=>{const d=a(c,u),l=Y(),f=t.actionTransformer(u);typeof f<"u"&&f!==null&&ut({category:GC,data:f,type:VC});const p=t.stateTransformer(d);if(typeof p<"u"&&p!==null){const m=P(),g=m==null?void 0:m.getOptions(),b=(g==null?void 0:g.normalizeDepth)||3,S={state:{type:"redux",value:p}};Ve(S,"__sentry_override_normalization_depth__",3+b),l.setContext("state",S)}else l.setContext("state",null);const{configureScopeWithState:h}=t;return typeof h=="function"&&h(l,d),d}}const i=n(o(r),s);return i.replaceReducer=new Proxy(i.replaceReducer,{apply:function(a,c,u){a.apply(c,[o(u[0])])}}),i}}function KC(e){const t=ir({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,match:s,instrumentPageLoad:o=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),o&&O.location&&nd(r,O.location,s,(c,u="url")=>{ar(a,{name:c,attributes:{[pe]:"pageload",[q]:"auto.pageload.react.reactrouter_v3",[ae]:u}})}),i&&n.listen&&n.listen(c=>{(c.action==="PUSH"||c.action==="POP")&&nd(r,c,s,(u,d="url")=>{cr(a,{name:u,attributes:{[pe]:"navigation",[q]:"auto.navigation.react.reactrouter_v3",[ae]:d}})})})}}}function nd(e,t,n,r){let s=t.pathname;n({location:t,routes:e},(o,i,a)=>{if(o||!a)return r(s);const c=XC(a.routes||[]);return c.length===0||c==="/*"?r(s):(s=c,r(s,"route"))})}function XC(e){var r;if(!Array.isArray(e)||e.length===0)return"";const t=e.filter(s=>!!s.path);let n=-1;for(let s=t.length-1;s>=0;s--)if((r=t[s].path)!=null&&r.startsWith("/")){n=s;break}return t.slice(n).reduce((s,{path:o})=>{const i=s==="/"||s===""?o:`/${o}`;return`${s}${i}`},"")}function QC(e,t={}){const n=e,r=ir({...t,instrumentNavigation:!1,instrumentPageLoad:!1}),{instrumentPageLoad:s=!0,instrumentNavigation:o=!0}=t;return{...r,afterAllSetup(i){r.afterAllSetup(i);const a=O.location;if(s&&a){const c=n.matchRoutes(a.pathname,n.options.parseSearch(a.search),{preload:!1,throwOnError:!1}),u=c[c.length-1],d=(u==null?void 0:u.routeId)!=="__root__"?u:void 0;ar(i,{name:d?d.routeId:a.pathname,attributes:{[pe]:"pageload",[q]:"auto.pageload.react.tanstack_router",[ae]:d?"route":"url",...rd(d)}})}o&&n.subscribe("onBeforeNavigate",c=>{if(!c.fromLocation||c.toLocation.state===c.fromLocation.state)return;const u=n.matchRoutes(c.toLocation.pathname,c.toLocation.search,{preload:!1,throwOnError:!1}),d=u[u.length-1],l=(d==null?void 0:d.routeId)!=="__root__"?d:void 0,f=O.location,p=cr(i,{name:l?l.routeId:f.pathname,attributes:{[pe]:"navigation",[q]:"auto.navigation.react.tanstack_router",[ae]:l?"route":"url"}}),h=n.subscribe("onResolved",m=>{if(h(),p){const g=n.matchRoutes(m.toLocation.pathname,m.toLocation.search,{preload:!1,throwOnError:!1}),b=g[g.length-1],S=(b==null?void 0:b.routeId)!=="__root__"?b:void 0;S&&(p.updateName(S.routeId),p.setAttribute(ae,"route"),p.setAttributes(rd(S)))}})})}}}function rd(e){if(!e)return{};const t={};return Object.entries(e.params).forEach(([n,r])=>{t[`url.path.params.${n}`]=r,t[`url.path.parameter.${n}`]=r,t[`params.${n}`]=r}),t}function ZC(e){const t=ir({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:s,instrumentPageLoad:o=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),im(a,o,i,n,"reactrouter_v4",r,s)}}}function eA(e){const t=ir({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:s,instrumentPageLoad:o=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),im(a,o,i,n,"reactrouter_v5",r,s)}}}function im(e,t,n,r,s,o=[],i){function a(){if(r.location)return r.location.pathname;if(O.location)return O.location.pathname}function c(u){if(o.length===0||!i)return[u,"url"];const d=am(o,u,i);for(const l of d)if(l.match.isExact)return[l.match.path,"route"];return[u,"url"]}if(t){const u=a();if(u){const[d,l]=c(u);ar(e,{name:d,attributes:{[pe]:"pageload",[q]:`auto.pageload.react.${s}`,[ae]:l}})}}n&&r.listen&&r.listen((u,d)=>{if(d&&(d==="PUSH"||d==="POP")){const[l,f]=c(u.pathname);cr(e,{name:l,attributes:{[pe]:"navigation",[q]:`auto.navigation.react.${s}`,[ae]:f}})}})}function am(e,t,n,r=[]){return e.some(s=>{const o=s.path?n(t,s):r.length?r[r.length-1].match:tA(t);return o&&(r.push({route:s,match:o}),s.routes&&am(s.routes,t,n,r)),!!o}),r}function tA(e){return{path:"/",url:"/",params:{},isExact:e==="/"}}function nA(e){const t=e.displayName||e.name,n=r=>{var s;if((s=r==null?void 0:r.computedMatch)!=null&&s.isExact){const o=r.computedMatch.path,i=rA();Y().setTransactionName(o),i&&(i.updateName(o),i.setAttribute(ae,"route"))}return De.createElement(e,{...r})};return n.displayName=`sentryRoute(${t})`,Ra(n,e),n}function rA(){const e=be(),t=e&&we(e);if(!t)return;const n=$(t).op;return n==="navigation"||n==="pageload"?t:void 0}let Dc,jn=!1;const Ht=[],sA=10;function oA(e,t){const n={};return Ht.length>=sA&&(Fe&&y.warn("[React Router] Navigation context stack overflow - removing oldest context"),Ht.shift()),Ht.push({token:n,targetPath:e,span:t}),n}function iA(e){const t=Ht[Ht.length-1];(t==null?void 0:t.token)===e&&Ht.pop()}function cm(){const e=Ht.length;return e>0?Ht[e-1]??null:null}function aA(e,t=!1){Dc=e,jn=t}function cA(e){return lA(e.route.path||"")}function uA(e){return e.params["*"]||""}function lA(e){return e[e.length-1]==="*"?e.slice(0,-1):e}function Hn(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function um(e){return e.endsWith("*")}function Xt(e){return e.includes("/*")||e.endsWith("*")}function sd(e,t){var n;return um(e)&&!!((n=t.route.children)!=null&&n.length)||!1}function dA(e){var t;return!!(!e.children&&e.element&&((t=e.path)!=null&&t.endsWith("/*")))}function fA(e,t,n){const r=e&&e.length>0?e:jn?Xo(t,n):t;let s=r.slice(-2)==="/*"?r.slice(0,-2):r;return s.length>1&&s[s.length-1]==="/"&&(s=s.slice(0,-1)),[s,"route"]}function od(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function Xo(e,t){if(!t||t==="/"||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?e:e.slice(n)||"/"}function bo(e){return e[0]==="/"?e:`/${e}`}function lm(e,t){const n=Dc(e,t);if(!n||n.length===0)return"";for(const r of n)if(r.route.path&&r.route.path!=="*"){const s=cA(r),o=Xo(t.pathname,bo(r.pathnameBase));return t.pathname===o?Hn(o):Hn(Hn(s||"")+bo(lm(e.filter(i=>i!==r.route),{pathname:o})))}return""}function pA(e,t){const n=Dc(t,e);if(n){for(const r of n)if(dA(r.route)&&uA(r))return!0}return!1}function id(e,t){return jn?Xo(e.pathname,t):e.pathname||""}function hA(e,t,n,r=""){if(!e||e.length===0)return[jn?Xo(t.pathname,r):t.pathname,"url"];if(!n)return[id(t,r),"url"];let s="";for(const o of n){const i=o.route;if(!i)continue;if(i.index)return fA(s,o.pathname,r);const a=i.path;if(!a||sd(a,o))continue;const c=a[0]==="/"||s[s.length-1]==="/"?a:`/${a}`;if(s=Hn(s)+bo(c),Hn(t.pathname)===Hn(r+o.pathname))return od(s)!==od(o.pathname)&&!um(s)?[(jn?"":r)+c,"route"]:(sd(s,o)&&(s=s.slice(0,-1)),[(jn?"":r)+s,"route"])}return[id(t,r),"url"]}function Qo(e,t,n,r,s=""){let o,i="url";const a=pA(e,n);return a&&(o=bo(lm(n,e)),i="route"),(!a||!o)&&([o,i]=hA(t,e,r,s)),[o||e.pathname,i]}function lt(){const e=be(),t=e?we(e):void 0;if(!t)return;const n=$(t).op;return n==="navigation"||n==="pageload"?t:void 0}function mA(){const e=cm();if(e!=null&&e.targetPath)return{pathname:e.targetPath,search:"",hash:"",state:null,key:"default"};if(typeof O<"u")try{const t=O.location;if(t)return{pathname:t.pathname,search:t.search||"",hash:t.hash||"",state:null,key:"default"}}catch{Fe&&y.warn("[React Router] Could not access window.location")}return null}function gA(){const e=cm();return e?e.span:lt()}function _A(e,t,n,r){const s=new Proxy(e,{apply(o,i,a){const c=mA(),u=gA(),d=o.apply(i,a);return yA(d,t,n,r,c,u),d}});return Ve(s,"__sentry_proxied__",!0),s}function yA(e,t,n,r,s,o){ha(e)?e.then(i=>{Array.isArray(i)&&r(i,t,s??void 0,o)}).catch(i=>{Fe&&y.warn(`Error resolving async handler '${n}' for route`,t,i)}):Array.isArray(e)&&r(e,t,s??void 0,o)}function Zo(e,t){if(e.handle&&typeof e.handle=="object")for(const n of Object.keys(e.handle)){const r=e.handle[n];typeof r=="function"&&!r.__sentry_proxied__&&(e.handle[n]=_A(r,e,n,t))}if(Array.isArray(e.children))for(const n of e.children)Zo(n,t)}let Wt,zt,qt,js,dt,ei=!1,ln=3e3;const dm=new WeakSet,on=new WeakMap,Re=new Set,Hs=new WeakMap,da=new WeakMap;function bA(e){var t;return(t=O)!=null&&t.requestAnimationFrame?O.requestAnimationFrame(e):setTimeout(e,0)}function ad(e){var t;(t=O)!=null&&t.cancelAnimationFrame?O.cancelAnimationFrame(e):clearTimeout(e)}function fm(e){return`${e.pathname}${e.search||""}${e.hash||""}`}function cd(e){return e.includes(":")||e.includes("*")}function SA(e,t,n,r){var o;if(!e)return{skip:!1,shouldUpdate:!1};if(e.locationKey===t&&(e.isPlaceholder||!r)){const i=!!e.routeName&&Xt(e.routeName),a=Xt(n),c=!!e.routeName&&cd(e.routeName),u=cd(n),d=i&&!a,l=!c&&u,f=n!==e.routeName&&n.length>(((o=e.routeName)==null?void 0:o.length)||0)&&!a;return{skip:!0,shouldUpdate:!!(e.routeName&&(d||l||f))}}return{skip:!1,shouldUpdate:!1}}function pm(e,t){const n=t.children||[],r=e.filter(s=>!n.some(o=>o===s||s.path&&o.path===s.path||s.id&&o.id===s.id));r.length>0&&(t.children=[...n,...r])}function hm(e,t){let n=Hs.get(e);n||(n=new Set,Hs.set(e,n)),n.add(t),t.finally(()=>{const r=Hs.get(e);r&&r.delete(t)})}function mm(e){const t=new Promise(n=>{da.set(e,n)});hm(e,t)}function EA(e){const t=da.get(e);t&&(t(),da.delete(e),e.__sentry_may_have_lazy_routes__&&(e.__sentry_may_have_lazy_routes__=!1))}function Fc(e,t,n=null,r){e.forEach(o=>{Re.add(o),ei&&Zo(o,Fc)}),t&&pm(e,t);const s=r??lt();if(s){const o=$(s);if(o.timestamp){Fe&&y.warn("[React Router] Lazy handler resolved after span ended - skipping update");return}const i=o.op;let a=n;if(!a&&!r&&typeof O<"u"){const c=O.location;c!=null&&c.pathname&&(a={pathname:c.pathname})}a&&(i==="pageload"?ur({activeRootSpan:s,location:{pathname:a.pathname},routes:Array.from(Re),allRoutes:Array.from(Re)}):i==="navigation"&&gm(s,a,Array.from(Re),!1,dt))}}function gm(e,t,n,r=!1,s){var d;const o=$(e),i=o.description,a=e==null?void 0:e.__sentry_navigation_name_set__,c=i&&Xt(i);if((!a||r||c)&&!o.timestamp){const l=s(n,t),[f,p]=Qo(t,n,n,l||[],""),h=(d=o.data)==null?void 0:d[ae];f&&(!i||!a&&(h!=="route"||p==="route")||h!=="route"&&p==="route"||h==="route"&&p==="route"&&c)&&(e.updateName(f),e.setAttribute(ae,p),!Xt(f)&&p==="route"&&Ve(e,"__sentry_navigation_name_set__",!0))}}function _m(e,t,n,r,s){let o=!1,i=!!s&&$(s).op==="pageload",a=!1,c=null,u=null;e.subscribe(d=>{if(!o){const f=lt();f&&$(f).op==="pageload"?i=!0:i&&(d.historyAction==="POP"&&!a?a=!0:o=!0)}if(d.historyAction==="PUSH"||d.historyAction==="POP"&&o){const f=fm(d.location),p=()=>{u!==f&&(u=f,c=null,$c({location:d.location,routes:t,navigationType:d.historyAction,version:n,basename:r,allRoutes:Array.from(Re)}))};d.navigation.state!=="idle"?(u!==f&&(u=null),c!==null&&ad(c),c=bA(p)):(c!==null&&(ad(c),c=null),p())}})}function ym(e,t){return!Wt||!zt||!qt||!dt?(Fe&&y.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createRouter\` function because of one or more missing parameters.`),e):function(n,r){if(ss(n),ei)for(const u of n)Zo(u,Fc);const s=lt();r&&"patchRoutesOnNavigation"in r&&typeof r.patchRoutesOnNavigation=="function"&&s&&(Ve(s,"__sentry_may_have_lazy_routes__",!0),mm(s));const i=vm(r,!1,s),a=e(n,i),c=r==null?void 0:r.basename;return a.state.historyAction==="POP"&&s&&ur({activeRootSpan:s,location:a.state.location,routes:n,basename:c,allRoutes:Array.from(Re)}),_m(a,n,t,c,s),a}}function bm(e,t){return!Wt||!zt||!qt||!dt?(Fe&&y.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createMemoryRouter\` function because of one or more missing parameters.`),e):function(n,r){if(ss(n),ei)for(const g of n)Zo(g,Fc);const s=lt();r&&"patchRoutesOnNavigation"in r&&typeof r.patchRoutesOnNavigation=="function"&&s&&(Ve(s,"__sentry_may_have_lazy_routes__",!0),mm(s));const i=vm(r,!0,s),a=e(n,i),c=r==null?void 0:r.basename;let u;const d=r==null?void 0:r.initialEntries,l=r==null?void 0:r.initialIndex,f=d&&d.length===1,p=l!==void 0&&d&&d[l];u=f?d[0]:p?d[l]:void 0;const h=u?typeof u=="string"?{pathname:u}:u:a.state.location,m=lt();return a.state.historyAction==="POP"&&m&&ur({activeRootSpan:m,location:h,routes:n,basename:c,allRoutes:Array.from(Re)}),_m(a,n,t,c,m),a}}function Sm(e,t){const n=ir({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:r,useLocation:s,useNavigationType:o,createRoutesFromChildren:i,matchRoutes:a,stripBasename:c,enableAsyncRouteHandlers:u=!1,instrumentPageLoad:d=!0,instrumentNavigation:l=!0,lazyRouteTimeout:f}=e;return{...n,setup(p){n.setup(p);const h=e.finalTimeout??3e4,m=(e.idleTimeout??1e3)*3,g=f??m;g===1/0?(ln=h,Fe&&y.log("[React Router] lazyRouteTimeout set to Infinity, capping at finalTimeout:",h,"ms to prevent indefinite hangs")):Number.isNaN(g)?(Fe&&y.warn("[React Router] lazyRouteTimeout must be a number, falling back to default:",m),ln=m):g<0?(Fe&&y.warn("[React Router] lazyRouteTimeout must be non-negative or Infinity, got:",g,"falling back to:",m),ln=m):ln=g,Wt=r,zt=s,qt=o,dt=a,js=i,ei=u,aA(a,c||!1)},afterAllSetup(p){var m;n.afterAllSetup(p);const h=(m=O.location)==null?void 0:m.pathname;d&&h&&ar(p,{name:h,attributes:{[ae]:"url",[pe]:"pageload",[q]:`auto.pageload.react.reactrouter_v${t}`}}),l&&dm.add(p)}}}function Em(e,t){if(!Wt||!zt||!qt||!dt)return Fe&&y.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),e;const n=r=>{const s=De.useRef(!0),{routes:o,locationArg:i}=r,a=e(o,i),c=zt(),u=qt(),d=typeof i=="string"||i!=null&&i.pathname?i:c;return Wt(()=>{const l=typeof d=="string"?{pathname:d}:d;s.current?(ss(o),ur({activeRootSpan:lt(),location:l,routes:o,allRoutes:Array.from(Re)}),s.current=!1):$c({location:l,routes:o,navigationType:u,version:t,allRoutes:Array.from(Re)})},[u,d]),a};return(r,s)=>De.createElement(n,{routes:r,locationArg:s})}function ud(e,t){const n=lt();if(!n)return;const r=$(n).op,s={pathname:e,search:"",hash:"",state:null,key:"default"},o=Array.from(Re);r==="navigation"?gm(n,s,o,t,dt):r==="pageload"&&ur({activeRootSpan:n,location:s,routes:o,allRoutes:o})}function vm(e,t=!1,n){if(!e||!("patchRoutesOnNavigation"in e)||typeof e.patchRoutesOnNavigation!="function")return e||{};const r=e.patchRoutesOnNavigation;return{...e,patchRoutesOnNavigation:async s=>{const o=s==null?void 0:s.path,i=lt()??n;if(!t){const c=s==null?void 0:s.patch,u=s==null?void 0:s.matches;c&&(s.patch=(d,l)=>{if(ss(l),u&&u.length>0){const f=u[u.length-1],p=f==null?void 0:f.route;if(p){const h=Array.from(Re).find(m=>{const g=m.id!==void 0&&m.id===d,b=m===p,S=m.path!==void 0&&p.path!==void 0&&m.path===p.path;return g||b||S});h&&pm(l,h)}}return o&&ud(o,!0),c(d,l)})}const a=(async()=>{var l;const c=oA(o,i);let u;try{u=await r(s)}finally{iA(c),i&&EA(i)}const d=t?o:o||((l=O.location)==null?void 0:l.pathname);return d&&ud(d,!1),u})();return i&&hm(i,a),a}}}function $c(e){const{location:t,routes:n,navigationType:r,version:s,matches:o,basename:i,allRoutes:a}=e,c=Array.isArray(o)?o:dt(a||n,t,i),u=P();if(!u||!dm.has(u))return;const d=lt();if(!(d&&$(d).op==="pageload"&&r==="POP")&&(r==="PUSH"||r==="POP")&&c){const[l,f]=Qo(t,a||n,a||n,c,i),p=fm(t),h=on.get(u),m=h&&!h.isPlaceholder?!!$(h.span).timestamp:!1,{skip:g,shouldUpdate:b}=SA(h,p,l,m);if(g){if(b&&h){const D=h.routeName;h.isPlaceholder?(h.routeName=l,Fe&&y.log(`[Tracing] Updated placeholder navigation name from "${D}" to "${l}" (will apply to real span)`)):(h.span.updateName(l),h.span.setAttribute(ae,f),Ve(h.span,"__sentry_navigation_name_set__",!0),h.routeName=l,Fe&&y.log(`[Tracing] Updated navigation span name from "${D}" to "${l}"`))}else Fe&&y.log(`[Tracing] Skipping duplicate navigation for location: ${p}`);return}const R={span:{end:()=>{}},routeName:l,pathname:t.pathname,locationKey:p,isPlaceholder:!0};on.set(u,R);let w;try{w=cr(u,{name:R.routeName,attributes:{[ae]:f,[pe]:"navigation",[q]:`auto.navigation.react.reactrouter_v${s}`}})}catch(D){throw on.delete(u),D}w?(on.set(u,{span:w,routeName:R.routeName,pathname:t.pathname,locationKey:p}),fa(w,t,n,i,"navigation")):on.delete(u)}}function ss(e){e.forEach(t=>{Tm(t).forEach(r=>{Re.add(r)})})}function Tm(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(n=>{Tm(n,t).forEach(s=>{t.add(s)})})),t}function ur({activeRootSpan:e,location:t,routes:n,matches:r,basename:s,allRoutes:o}){const i=Array.isArray(r)?r:dt(o||n,t,s);if(i){const[a,c]=Qo(t,o||n,o||n,i,s);Y().setTransactionName(a||"/"),e&&(e.updateName(a),e.setAttribute(ae,c),fa(e,t,n,s,"pageload"))}else e&&fa(e,t,n,s,"pageload")}function vA(e,t,n,r,s=!1){return n?!!(!e&&s||e&&Xt(e)&&r==="route"&&!Xt(n)||t!=="route"&&r==="route"):!1}function Ri(e,t,n,r,s,o,i,a){var c;try{const u=(c=t.data)==null?void 0:c[ae];if(u==="route"&&n&&!Xt(n))return;const d=Array.from(a),l=d.length>0?d:s,f=dt(l,r,o);if(!f)return;const[p,h]=Qo(r,l,l,f,o),m=vA(n,u,p,h,!0),g=i==="pageload"||!t.timestamp;m&&g&&(e.updateName(p),e.setAttribute(ae,h))}catch(u){Fe&&y.warn(`Error updating span details before ending: ${u}`)}}function fa(e,t,n,r,s){const o=`__sentry_${s}_end_patched__`;if((e==null?void 0:e[o])||!e.end)return;const a=e.end.bind(e);let c=!1;e.end=function(...d){var w;if(c)return;c=!0;const l=d.length>0?d[0]:Date.now()/1e3,f=$(e),p=f.description,h=(w=f.data)==null?void 0:w[ae],m=()=>{const D=P();if(D&&s==="navigation"){const N=on.get(D);N&&N.span===e&&on.delete(D)}},g=Hs.get(e),b=e.__sentry_may_have_lazy_routes__;if((g&&g.size>0||b)&&p&&(Xt(p)||h!=="route")){if(ln===0){Ri(e,f,p,t,n,r,s,Re),m(),a(l);return}const D=new Promise(E=>setTimeout(E,ln));let N;if(g&&g.size>0){const E=Promise.allSettled(g).then(()=>{});N=ln===1/0?E:Promise.race([E,D])}else N=D;N.then(()=>{const E=$(e);Ri(e,E,E.description,t,n,r,s,Re),m(),a(l)}).catch(()=>{m(),a(l)});return}Ri(e,f,p,t,n,r,s,Re),m(),a(l)},Ve(e,o,!0)}function wm(e,t){if(!Wt||!zt||!qt||!js||!dt)return Fe&&y.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${Wt}. useLocation: ${zt}. useNavigationType: ${qt}.
      createRoutesFromChildren: ${js}. matchRoutes: ${dt}.`),e;const n=r=>{const s=De.useRef(!0),o=zt(),i=qt();return Wt(()=>{const a=js(r.children);s.current?(ss(a),ur({activeRootSpan:lt(),location:o,routes:a,allRoutes:Array.from(Re)}),s.current=!1):$c({location:o,routes:a,navigationType:i,version:t,allRoutes:Array.from(Re)})},[o,i]),De.createElement(e,{...r})};return Ra(n,e),n}function TA(e){return Sm(e,"6")}function wA(e){return Em(e,"6")}function IA(e){return ym(e,"6")}function xA(e){return bm(e,"6")}function kA(e){return wm(e,"6")}function RA(e){return Sm(e,"7")}function CA(e){return wm(e,"7")}function AA(e){return ym(e,"7")}function NA(e){return bm(e,"7")}function MA(e){return Em(e,"7")}const PA=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:lp,ErrorBoundary:sg,MULTIPLEXED_TRANSPORT_EXTRA_KEY:xs,OpenFeatureIntegrationHook:AC,Profiler:Lc,SDK_VERSION:Ws,SEMANTIC_ATTRIBUTE_SENTRY_OP:pe,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:q,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:ya,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:ae,Scope:og,WINDOW:O,addBreadcrumb:ut,addEventProcessor:Od,addIntegration:Li,breadcrumbsIntegration:Op,browserApiErrorsIntegration:Lp,browserProfilingIntegration:xC,browserSessionIntegration:Dp,browserTracingIntegration:ir,buildLaunchDarklyFlagUsedHandler:RC,captureConsoleIntegration:Sy,captureEvent:er,captureException:ge,captureFeedback:xf,captureMessage:Pd,captureReactException:ig,captureSession:Mi,chromeStackLineParser:Cp,close:ag,consoleLoggingIntegration:Fb,contextLinesIntegration:_I,continueTrace:r_,createConsolaReporter:Wb,createLangChainCallbackHandler:CE,createReduxEnhancer:YC,createTransport:tf,createUserFeedbackEnvelope:fw,dedupeIntegration:Sf,defaultRequestInstrumentationOptions:Mc,defaultStackLineParsers:Np,defaultStackParser:Mp,diagnoseSdkConnectivity:LC,endSession:cg,eventFiltersIntegration:mf,eventFromException:cp,eventFromMessage:up,exceptionFromError:Fo,extraErrorDataIntegration:Cy,featureFlagsIntegration:hb,feedbackAsyncIntegration:f0,feedbackIntegration:nl,feedbackSyncIntegration:nl,flush:ug,forceLoad:Yw,functionToStringIntegration:hf,geckoStackLineParser:Ap,getActiveSpan:be,getClient:P,getCurrentScope:Y,getDefaultIntegrations:Wp,getFeedback:Tv,getGlobalScope:$n,getIsolationScope:_t,getReplay:c1,getRootSpan:we,getSpanDescendants:vr,getSpanStatusFromHttpCode:lg,getTraceData:Ua,globalHandlersIntegration:Fp,graphqlClientIntegration:II,growthbookIntegration:PC,httpClientIntegration:rI,httpContextIntegration:jp,inboundFiltersIntegration:gf,init:jC,instrumentAnthropicAiClient:cE,instrumentGoogleGenAIClient:EE,instrumentLangGraph:FE,instrumentOpenAiClient:HS,instrumentOutgoingRequests:Gh,instrumentSupabaseClient:If,isEnabled:xd,isInitialized:dg,lastEventId:fg,launchDarklyIntegration:kC,lazyLoadIntegration:ip,linkedErrorsIntegration:Hp,logger:Nb,makeBrowserOfflineTransport:Z1,makeFetchTransport:pc,makeMultiplexedTransport:q_,metrics:jb,moduleMetadataIntegration:gy,onLoad:Kw,openFeatureIntegration:CC,opera10StackLineParser:cw,opera11StackLineParser:dw,parameterize:ff,reactErrorHandler:pg,reactRouterV3BrowserTracingIntegration:KC,reactRouterV4BrowserTracingIntegration:ZC,reactRouterV5BrowserTracingIntegration:eA,reactRouterV6BrowserTracingIntegration:TA,reactRouterV7BrowserTracingIntegration:RA,registerSpanErrorInstrumentation:Ud,registerWebWorker:BC,replayCanvasIntegration:k1,replayIntegration:o1,reportPageLoaded:q1,reportingObserverIntegration:eI,rewriteFramesIntegration:Fy,sendFeedback:Vf,setActiveSpanInBrowser:G1,setContext:ka,setCurrentClient:cf,setExtra:hg,setExtras:mg,setHttpStatus:Nr,setMeasurement:Hd,setTag:gg,setTags:_g,setUser:yg,showReportDialog:bg,spanToBaggageHeader:Sg,spanToJSON:$,spanToTraceHeader:kd,spotlightBrowserIntegration:zw,startBrowserTracingNavigationSpan:cr,startBrowserTracingPageLoadSpan:ar,startInactiveSpan:tt,startNewTrace:zd,startSession:Ni,startSpan:Ct,startSpanManual:vt,statsigIntegration:OC,supabaseIntegration:Ky,suppressTracing:Wd,tanstackRouterBrowserTracingIntegration:QC,thirdPartyErrorFilterIntegration:ib,uiProfiler:WT,unleashIntegration:NC,updateSpanName:Eg,useProfiler:qC,webWorkerIntegration:FC,winjsStackLineParser:ow,withActiveSpan:mn,withErrorBoundary:vg,withIsolationScope:Tg,withProfiler:zC,withScope:ft,withSentryReactRouterV6Routing:kA,withSentryReactRouterV7Routing:CA,withSentryRouting:nA,wrapCreateBrowserRouterV6:IA,wrapCreateBrowserRouterV7:AA,wrapCreateMemoryRouterV6:xA,wrapCreateMemoryRouterV7:NA,wrapUseRoutesV6:wA,wrapUseRoutesV7:MA,zodErrorsIntegration:ob},Symbol.toStringTag,{value:"Module"})),OA={monthlySessions:1e5,conversionRate:2.5,averageOrderValue:500,grossMarginPercent:40,currentMatchRate:35,expectedMatchRateImprovement:40,monthlyPlatformFee:2e3};function LA(e){const{monthlySessions:t,conversionRate:n,averageOrderValue:r,grossMarginPercent:s,currentMatchRate:o,expectedMatchRateImprovement:i,monthlyPlatformFee:a}=e,c=t*n/100,u=c*(o/100),d=Math.min(o+i,100),l=c*(d/100),f=l-u,p=f*r,h=p*(s/100),m=h-a,g=a>0?m/a*100:0,b=m>0?a/m:999,S=m*12;return{currentAttributedConversions:Math.round(u),projectedAttributedConversions:Math.round(l),incrementalConversions:Math.round(f),incrementalRevenue:p,incrementalGrossProfit:h,monthlyROI:g,paybackPeriodMonths:Math.max(0,b),annualValue:S}}function DA({className:e,currency:t="USD"}){const[n,r]=De.useState(OA),s=De.useMemo(()=>LA(n),[n]),o=(a,c)=>{r(u=>({...u,[a]:c}))},i=De.useCallback(a=>wg(a,t),[t]);return _.jsxs("div",{className:mr("bg-card border border-border rounded-xl p-6",e),children:[_.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[_.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:_.jsx(Ng,{className:"w-5 h-5 text-primary"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-lg",children:"CDP ROI Calculator"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Estimate the impact of improved identity resolution"})]})]}),_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[_.jsxs("div",{className:"space-y-5",children:[_.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide",children:"Your Metrics"}),_.jsxs("div",{children:[_.jsxs("label",{id:"monthly-sessions-label",className:"flex items-center justify-between text-sm mb-2",children:[_.jsx("span",{children:"Monthly Website Sessions"}),_.jsx("span",{className:"font-mono text-primary",children:n.monthlySessions.toLocaleString()})]}),_.jsx("input",{type:"range",min:"10000",max:"1000000",step:"10000",value:n.monthlySessions,onChange:a=>o("monthlySessions",Number(a.target.value)),className:"w-full accent-primary","aria-labelledby":"monthly-sessions-label","aria-valuemin":1e4,"aria-valuemax":1e6,"aria-valuenow":n.monthlySessions,"aria-valuetext":`${n.monthlySessions.toLocaleString()} sessions`}),_.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1","aria-hidden":"true",children:[_.jsx("span",{children:"10K"}),_.jsx("span",{children:"500K"}),_.jsx("span",{children:"1M"})]})]}),_.jsxs("div",{children:[_.jsxs("label",{id:"conversion-rate-label",className:"flex items-center justify-between text-sm mb-2",children:[_.jsx("span",{children:"Conversion Rate"}),_.jsxs("span",{className:"font-mono text-primary",children:[n.conversionRate,"%"]})]}),_.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.1",value:n.conversionRate,onChange:a=>o("conversionRate",Number(a.target.value)),className:"w-full accent-primary","aria-labelledby":"conversion-rate-label","aria-valuemin":.5,"aria-valuemax":10,"aria-valuenow":n.conversionRate,"aria-valuetext":`${n.conversionRate}%`})]}),_.jsxs("div",{children:[_.jsxs("label",{id:"aov-label",className:"flex items-center justify-between text-sm mb-2",children:[_.jsx("span",{children:"Average Order Value"}),_.jsx("span",{className:"font-mono text-primary",children:i(n.averageOrderValue)})]}),_.jsx("input",{type:"range",min:"50",max:"5000",step:"50",value:n.averageOrderValue,onChange:a=>o("averageOrderValue",Number(a.target.value)),className:"w-full accent-primary","aria-labelledby":"aov-label","aria-valuemin":50,"aria-valuemax":5e3,"aria-valuenow":n.averageOrderValue,"aria-valuetext":i(n.averageOrderValue)})]}),_.jsxs("div",{children:[_.jsxs("label",{id:"gross-margin-label",className:"flex items-center justify-between text-sm mb-2",children:[_.jsx("span",{children:"Gross Margin"}),_.jsxs("span",{className:"font-mono text-primary",children:[n.grossMarginPercent,"%"]})]}),_.jsx("input",{type:"range",min:"10",max:"80",step:"5",value:n.grossMarginPercent,onChange:a=>o("grossMarginPercent",Number(a.target.value)),className:"w-full accent-primary","aria-labelledby":"gross-margin-label","aria-valuemin":10,"aria-valuemax":80,"aria-valuenow":n.grossMarginPercent,"aria-valuetext":`${n.grossMarginPercent}%`})]}),_.jsxs("div",{children:[_.jsxs("label",{id:"current-match-rate-label",className:"flex items-center justify-between text-sm mb-2",children:[_.jsx("span",{children:"Current Identity Match Rate"}),_.jsxs("span",{className:"font-mono text-amber-500",children:[n.currentMatchRate,"%"]})]}),_.jsx("input",{type:"range",min:"10",max:"70",step:"5",value:n.currentMatchRate,onChange:a=>o("currentMatchRate",Number(a.target.value)),className:"w-full accent-amber-500","aria-labelledby":"current-match-rate-label","aria-valuemin":10,"aria-valuemax":70,"aria-valuenow":n.currentMatchRate,"aria-valuetext":`${n.currentMatchRate}%`})]}),_.jsxs("div",{children:[_.jsxs("label",{id:"improvement-label",className:"flex items-center justify-between text-sm mb-2",children:[_.jsx("span",{children:"Expected Match Rate Improvement"}),_.jsxs("span",{className:"font-mono text-green-500",children:["+",n.expectedMatchRateImprovement,"%"]})]}),_.jsx("input",{type:"range",min:"10",max:"60",step:"5",value:n.expectedMatchRateImprovement,onChange:a=>o("expectedMatchRateImprovement",Number(a.target.value)),className:"w-full accent-green-500","aria-labelledby":"improvement-label","aria-valuemin":10,"aria-valuemax":60,"aria-valuenow":n.expectedMatchRateImprovement,"aria-valuetext":`+${n.expectedMatchRateImprovement}%`})]}),_.jsxs("div",{children:[_.jsxs("label",{id:"monthly-fee-label",className:"flex items-center justify-between text-sm mb-2",children:[_.jsx("span",{children:"Monthly CDP Cost"}),_.jsx("span",{className:"font-mono text-muted-foreground",children:i(n.monthlyPlatformFee)})]}),_.jsx("input",{type:"range",min:"500",max:"10000",step:"500",value:n.monthlyPlatformFee,onChange:a=>o("monthlyPlatformFee",Number(a.target.value)),className:"w-full accent-muted-foreground","aria-labelledby":"monthly-fee-label","aria-valuemin":500,"aria-valuemax":1e4,"aria-valuenow":n.monthlyPlatformFee,"aria-valuetext":i(n.monthlyPlatformFee)})]})]}),_.jsxs("div",{className:"space-y-5",children:[_.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide",children:"Projected Impact"}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{className:"p-4 rounded-lg bg-muted/30 border border-border",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx(Pi,{className:"w-4 h-4 text-amber-500"}),_.jsx("span",{className:"text-xs text-muted-foreground",children:"Current Attributed"})]}),_.jsx("p",{className:"text-2xl font-bold text-amber-500",children:s.currentAttributedConversions.toLocaleString()}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"conversions/mo"})]}),_.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx(Pi,{className:"w-4 h-4 text-green-500"}),_.jsx("span",{className:"text-xs text-muted-foreground",children:"Projected Attributed"})]}),_.jsx("p",{className:"text-2xl font-bold text-green-500",children:s.projectedAttributedConversions.toLocaleString()}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"conversions/mo"})]})]}),_.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx(Ld,{className:"w-4 h-4 text-primary"}),_.jsx("span",{className:"text-sm font-medium",children:"Incremental Impact"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional Conversions"}),_.jsxs("p",{className:"text-xl font-bold text-primary",children:["+",s.incrementalConversions.toLocaleString()]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-muted-foreground",children:"Incremental Revenue"}),_.jsxs("p",{className:"text-xl font-bold text-primary",children:["+",i(s.incrementalRevenue)]})]})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{className:"p-4 rounded-lg bg-muted/30 border border-border",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx(Ig,{className:"w-4 h-4 text-muted-foreground"}),_.jsx("span",{className:"text-xs text-muted-foreground",children:"Monthly ROI"})]}),_.jsxs("p",{className:mr("text-2xl font-bold",s.monthlyROI>=100?"text-green-500":s.monthlyROI>=0?"text-amber-500":"text-red-500"),children:[s.monthlyROI.toFixed(0),"%"]})]}),_.jsxs("div",{className:"p-4 rounded-lg bg-muted/30 border border-border",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx(xg,{className:"w-4 h-4 text-muted-foreground"}),_.jsx("span",{className:"text-xs text-muted-foreground",children:"Payback Period"})]}),_.jsxs("p",{className:mr("text-2xl font-bold",s.paybackPeriodMonths<=1?"text-green-500":s.paybackPeriodMonths<=3?"text-amber-500":"text-muted-foreground"),children:[s.paybackPeriodMonths<1?"<1":s.paybackPeriodMonths.toFixed(1)," mo"]})]})]}),_.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx(Mg,{className:"w-5 h-5 text-primary"}),_.jsx("span",{className:"text-sm font-medium",children:"12-Month Net Value"})]}),_.jsx("p",{className:mr("text-3xl font-bold",s.annualValue>=0?"text-primary":"text-red-500"),children:i(s.annualValue)}),_.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["After CDP costs (",i(n.monthlyPlatformFee*12),"/year)"]})]}),_.jsx("div",{className:"p-4 rounded-lg bg-muted/20 border border-border",children:_.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["By improving identity match rate from"," ",_.jsxs("span",{className:"font-medium text-amber-500",children:[n.currentMatchRate,"%"]})," to"," ",_.jsxs("span",{className:"font-medium text-green-500",children:[Math.min(n.currentMatchRate+n.expectedMatchRateImprovement,100),"%"]}),", you could recover"," ",_.jsxs("span",{className:"font-medium text-primary",children:[s.incrementalConversions.toLocaleString()," conversions"]})," ","per month that are currently unattributed."]})})]})]})]})}function FA(){return`ERR-${Date.now().toString(36)}-${Math.random().toString(36).substring(2,7)}`.toUpperCase()}class $A extends De.Component{constructor(){super(...arguments);fr(this,"state",{hasError:!1,error:null,errorInfo:null,errorId:null,showStack:!1});fr(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null,showStack:!1})});fr(this,"toggleStack",()=>{this.setState(n=>({showStack:!n.showStack}))});fr(this,"copyErrorInfo",()=>{const{error:n,errorInfo:r,errorId:s}=this.state,o=`Error ID: ${s}
Message: ${n==null?void 0:n.message}
Stack: ${n==null?void 0:n.stack}
Component Stack: ${r==null?void 0:r.componentStack}`;navigator.clipboard.writeText(o)})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorId:FA()}}componentDidCatch(n,r){var s,o;console.error("ErrorBoundary caught an error:",n,r),this.setState({errorInfo:r}),typeof PA<"u"&&ge&&ge(n,{extra:{componentStack:r.componentStack,errorId:this.state.errorId}}),(o=(s=this.props).onError)==null||o.call(s,n,r)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:n,errorId:r,showStack:s,errorInfo:o}=this.state,i=this.props.showDetails??!1;return _.jsxs("div",{className:mr("flex flex-col items-center justify-center p-8 rounded-xl border bg-card",this.props.className),role:"alert","aria-live":"assertive",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center mb-4",children:_.jsx(Dd,{className:"w-6 h-6 text-destructive","aria-hidden":"true"})}),_.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:this.props.message||"Something went wrong"}),_.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2 max-w-sm",children:"We encountered an error while rendering this component. Please try again."}),r&&_.jsxs("p",{className:"text-xs text-muted-foreground mb-4",children:["Error ID: ",_.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:r})]}),_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsxs("button",{onClick:this.handleRetry,className:"inline-flex items-center px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[_.jsx(Fd,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Try Again"]}),i&&_.jsxs("button",{onClick:this.copyErrorInfo,className:"inline-flex items-center px-3 py-2 rounded-lg border bg-background hover:bg-muted transition-colors text-sm",title:"Copy error details",children:[_.jsx(Pg,{className:"w-4 h-4","aria-hidden":"true"}),_.jsx("span",{className:"sr-only",children:"Copy error details"})]})]}),i&&n&&_.jsxs("div",{className:"w-full max-w-lg",children:[_.jsxs("button",{onClick:this.toggleStack,className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[s?_.jsx(kg,{className:"w-3 h-3"}):_.jsx(Rg,{className:"w-3 h-3"}),s?"Hide":"Show"," error details"]}),s&&_.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 text-xs font-mono overflow-auto max-h-48",children:[_.jsx("p",{className:"text-destructive mb-2",children:n.message}),n.stack&&_.jsx("pre",{className:"text-muted-foreground whitespace-pre-wrap",children:n.stack}),(o==null?void 0:o.componentStack)&&_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"text-foreground mt-2 mb-1",children:"Component Stack:"}),_.jsx("pre",{className:"text-muted-foreground whitespace-pre-wrap",children:o.componentStack})]})]})]})]})}return this.props.children}}function BA({title:e,onRetry:t}){return _.jsxs("div",{className:"rounded-xl border bg-card p-6",role:"alert",children:[e&&_.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:e}),_.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-destructive/10 flex items-center justify-center mb-3",children:_.jsx(Dd,{className:"w-5 h-5 text-destructive","aria-hidden":"true"})}),_.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Unable to load this widget"}),t&&_.jsxs("button",{onClick:t,className:"mt-3 text-sm text-primary hover:underline inline-flex items-center focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 rounded",children:[_.jsx(Fd,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),"Retry"]})]})]})}function ZA(){return _.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[_.jsx("header",{className:"border-b border-border bg-background/80 backdrop-blur-sm sticky top-0 z-50",children:_.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:_.jsxs("div",{className:"flex items-center justify-between h-16",children:[_.jsxs(ni,{to:"/",className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors",children:[_.jsx(Lg,{className:"w-4 h-4"}),_.jsx("span",{className:"text-sm",children:"Back to Home"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Cg,{className:"w-5 h-5 text-primary"}),_.jsx("span",{className:"font-semibold",children:"Stratum CDP"})]}),_.jsx(ni,{to:"/signup",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors",children:"Get Started"})]})})}),_.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[_.jsxs("div",{className:"text-center mb-12",children:[_.jsx("h1",{className:"text-4xl font-bold tracking-tight mb-4",children:"CDP ROI Calculator"}),_.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Estimate the business impact of improving your customer identity resolution with Stratum CDP's first-party data platform."})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[_.jsxs("div",{className:"flex items-start gap-4 p-6 rounded-xl bg-card border border-border",children:[_.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:_.jsx(Pi,{className:"w-5 h-5 text-primary"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold mb-1",children:"Identity Resolution"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Unify customer profiles across devices and touchpoints"})]})]}),_.jsxs("div",{className:"flex items-start gap-4 p-6 rounded-xl bg-card border border-border",children:[_.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:_.jsx(Ld,{className:"w-5 h-5 text-green-500"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold mb-1",children:"Improved Attribution"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Recover conversions lost to tracking limitations"})]})]}),_.jsxs("div",{className:"flex items-start gap-4 p-6 rounded-xl bg-card border border-border",children:[_.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10",children:_.jsx(Ag,{className:"w-5 h-5 text-amber-500"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold mb-1",children:"Privacy-First"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"GDPR/PDPL compliant with built-in consent management"})]})]})]}),_.jsx($A,{fallback:_.jsx(BA,{title:"CDP ROI Calculator",onRetry:()=>window.location.reload()}),children:_.jsx(DA,{className:"mb-12"})}),_.jsxs("div",{className:"text-center p-8 rounded-xl bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20",children:[_.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to See These Results?"}),_.jsx("p",{className:"text-muted-foreground mb-6 max-w-xl mx-auto",children:"Start your 30-day pilot program and measure the real impact on your business. Free setup consultation included."}),_.jsxs("div",{className:"flex items-center justify-center gap-4",children:[_.jsx(ni,{to:"/signup",className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"Start Free Pilot"}),_.jsx("a",{href:"mailto:sales@stratum.ai",className:"px-6 py-3 border border-border rounded-lg font-medium hover:bg-muted transition-colors",children:"Contact Sales"})]})]})]}),_.jsx("footer",{className:"border-t border-border mt-12",children:_.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:_.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[_.jsx("p",{children:" 2026 Stratum AI. All rights reserved."}),_.jsxs("div",{className:"flex items-center gap-6",children:[_.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Privacy"}),_.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Terms"}),_.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Documentation"})]})]})})})]})}export{ZA as default};
//# sourceMappingURL=CDPCalculator-DOmBhu0R.js.map
