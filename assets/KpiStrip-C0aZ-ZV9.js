import{j as e}from"./vendor-ui-B0DL0VNC.js";import{c as n,ac as C,d5 as F,d4 as b,f as R,a9 as E}from"./index-BQex3859.js";import{C as g,g as N}from"./ConfidenceBandBadge-BR4oR-ha.js";import{A as p,B as j}from"./BudgetAtRiskChip-BRCQCK-f.js";import{V as w}from"./EmqTimeline-DxviryQA.js";import{F as $}from"./WrenchScrewdriverIcon-DJAaIhoQ.js";import{F as v}from"./UserCircleIcon-C5qf10f0.js";import{F as B}from"./ArrowTopRightOnSquareIcon-Cr7jBqzy.js";import{r as c}from"./vendor-react-Dz7uKsMg.js";function D(s){const t=N(s);return t==="reliable"?{icon:F,color:"text-success",bgColor:"bg-success/10",message:"Data is trustworthy for decision-making"}:t==="directional"?{icon:b,color:"text-warning",bgColor:"bg-warning/10",message:"Data shows trends but may have gaps"}:{icon:b,color:"text-danger",bgColor:"bg-danger/10",message:"Data quality too low for reliable decisions"}}function X({emqScore:s,autopilotMode:t,budgetAtRisk:l,svi:r,currency:o="USD",onViewDetails:i,compact:x=!1,className:f}){const d=D(s),a=d.icon;return x?e.jsxs("div",{className:n("flex items-center gap-4 p-3 rounded-xl bg-surface-secondary border border-white/10",f),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:n("w-5 h-5",d.color)}),e.jsx("span",{className:"text-lg font-bold text-white",children:s}),e.jsx(g,{score:s,size:"sm"})]}),e.jsx("div",{className:"h-4 w-px bg-white/10"}),e.jsx(p,{mode:t,compact:!0}),l>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-px bg-white/10"}),e.jsx(j,{amount:l,currency:o,size:"sm"})]}),r!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-px bg-white/10"}),e.jsx(w,{svi:r,size:"sm"})]})]}):e.jsxs("div",{className:n("rounded-2xl bg-surface-secondary border border-white/10 overflow-hidden",f),children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:n("p-3 rounded-xl",d.bgColor),children:e.jsx(a,{className:n("w-6 h-6",d.color)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["EMQ ",s]}),e.jsx(g,{score:s})]}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:d.message})]})]}),i&&e.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-sm text-stratum-400 hover:text-stratum-300 transition-colors",children:["View details",e.jsx(C,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-6 pt-6 border-t border-white/10",children:[e.jsx("div",{className:"flex-1",children:e.jsx(p,{mode:t,showDescription:!1,compact:!0})}),l>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"Budget at Risk:"}),e.jsx(j,{amount:l,currency:o})]}),r!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"Volatility:"}),e.jsx(w,{svi:r})]})]})]}),e.jsx("div",{className:n("px-6 py-4 border-t",d.bgColor,"border-white/10"),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:"Can I trust today?"}),e.jsx("span",{className:n("font-semibold",d.color),children:s>=90?"Yes, data is reliable":s>=60?"Partially, use with caution":"No, fix data issues first"})]})})})]})}const V={critical:{color:"text-danger",bgColor:"bg-danger/10",borderColor:"border-danger/30",label:"Critical"},high:{color:"text-orange-400",bgColor:"bg-orange-500/10",borderColor:"border-orange-500/30",label:"High"},medium:{color:"text-warning",bgColor:"bg-warning/10",borderColor:"border-warning/30",label:"Medium"},low:{color:"text-text-secondary",bgColor:"bg-surface-tertiary",borderColor:"border-white/10",label:"Low"}};function A({items:s,onItemClick:t,onAssign:l,onApply:r,maxItems:o=5,showEstimates:i=!0,className:x}){const f=s.slice(0,o),d=s.length-o;return e.jsxs("div",{className:n("rounded-2xl bg-surface-secondary border border-white/10 overflow-hidden",x),children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-stratum-500/10",children:e.jsx($,{className:"w-5 h-5 text-stratum-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Fix Playbook"}),e.jsxs("p",{className:"text-sm text-text-muted",children:[s.filter(a=>a.status==="pending").length," fixes pending"]})]})]})}),e.jsx("div",{className:"divide-y divide-white/5",children:f.map((a,y)=>{const u=V[a.priority],m=a.status==="completed";return e.jsx("div",{className:n("p-4 transition-colors",!m&&"hover:bg-white/5 cursor-pointer",m&&"opacity-60"),onClick:()=>!m&&(t==null?void 0:t(a)),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:n("flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm",m?"bg-success/10 text-success":u.bgColor,m?"":u.color),children:m?e.jsx(R,{className:"w-5 h-5"}):y+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:n("font-medium",m?"text-text-muted line-through":"text-white"),children:a.title}),e.jsx("p",{className:"text-sm text-text-muted mt-0.5 line-clamp-2",children:a.description})]}),e.jsx("span",{className:n("flex-shrink-0 text-xs px-2 py-0.5 rounded-full",u.bgColor,u.color),children:u.label})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[a.owner?e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-text-muted",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:a.owner})]}):e.jsxs("button",{onClick:h=>{h.stopPropagation(),l==null||l(a)},className:"flex items-center gap-1.5 text-xs text-stratum-400 hover:text-stratum-300",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign"})]}),i&&a.estimatedTime&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-text-muted",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:a.estimatedTime})]}),i&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-success",children:e.jsxs("span",{children:["+",a.estimatedImpact," EMQ"]})}),a.platform&&e.jsx("span",{className:"text-xs text-text-muted bg-surface-tertiary px-2 py-0.5 rounded",children:a.platform}),a.actionUrl&&e.jsx("a",{href:a.actionUrl,target:"_blank",rel:"noopener noreferrer",onClick:h=>h.stopPropagation(),className:"flex items-center gap-1 text-xs text-stratum-400 hover:text-stratum-300",children:e.jsx(B,{className:"w-3.5 h-3.5"})}),!m&&r&&e.jsx("button",{onClick:h=>{h.stopPropagation(),r(a)},className:"ml-auto px-3 py-1 text-xs font-medium rounded-lg bg-stratum-500 text-white hover:bg-stratum-600 transition-colors",children:"Apply Fix"})]})]})]})},a.id)})}),d>0&&e.jsx("div",{className:"p-4 border-t border-white/10",children:e.jsxs("button",{className:"text-sm text-stratum-400 hover:text-stratum-300 transition-colors",children:["View ",d," more fixes"]})})]})}function P({title:s,titleId:t,...l},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},l),s?c.createElement("title",{id:t},s):null,c.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l6.22-6.22a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 1 1 1.06-1.06l6.22 6.22V3a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const M=c.forwardRef(P);function U({title:s,titleId:t,...l},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},l),s?c.createElement("title",{id:t},s):null,c.createElement("path",{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const T=c.forwardRef(U);function z({title:s,titleId:t,...l},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},l),s?c.createElement("title",{id:t},s):null,c.createElement("path",{fillRule:"evenodd",d:"M4.25 12a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const I=c.forwardRef(z);function H(s){const t=(typeof s.value=="string",s.value);if(typeof t=="string")return t;switch(s.format){case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:s.currency||"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);case"percentage":return`${t.toFixed(1)}%`;case"multiplier":return`${t.toFixed(2)}x`;case"number":return new Intl.NumberFormat("en-US",{notation:t>999999?"compact":"standard",maximumFractionDigits:1}).format(t);default:return String(t)}}function K(s,t){return t===0?0:(s-t)/t*100}function L({kpi:s,showConfidence:t,compact:l}){const r=s.previousValue!==void 0&&typeof s.value=="number"?K(s.value,s.previousValue):null,o=s.trend||(r!==null?r>0?"up":r<0?"down":"flat":void 0),i=s.trendIsPositive!==!1?o==="up":o==="down",x=o==="up"?T:o==="down"?M:I;return e.jsxs("div",{className:n("flex flex-col",l?"gap-0.5":"gap-1"),children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:n("text-text-muted",l?"text-xs":"text-sm"),children:s.label}),t&&s.confidence!==void 0&&e.jsx(g,{score:s.confidence,size:"sm",showLabel:!1})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:n("font-semibold text-white",l?"text-lg":"text-2xl"),children:H(s)}),s.unit&&e.jsx("span",{className:"text-sm text-text-muted",children:s.unit})]}),r!==null&&o&&e.jsxs("div",{className:n("flex items-center gap-1",l?"text-xs":"text-sm",i?"text-success":o==="flat"?"text-text-muted":"text-danger"),children:[e.jsx(x,{className:"w-3 h-3"}),e.jsxs("span",{children:[Math.abs(r).toFixed(1),"%"]}),e.jsx("span",{className:"text-text-muted",children:"vs prev"})]})]})}function q({kpis:s,emqScore:t,showConfidence:l=!0,compact:r=!1,className:o}){const i=t!==void 0?N(t):null;return e.jsxs("div",{className:n("rounded-xl bg-surface-secondary border border-white/10",o),children:[i&&e.jsxs("div",{className:n("flex items-center justify-between px-4 py-2 border-b border-white/10",i==="reliable"&&"bg-success/5",i==="directional"&&"bg-warning/5",i==="unsafe"&&"bg-danger/5"),children:[e.jsx("span",{className:n("text-xs font-medium",i==="reliable"&&"text-success",i==="directional"&&"text-warning",i==="unsafe"&&"text-danger"),children:i==="reliable"?"Reliable metrics":i==="directional"?"Directional metrics":"Low confidence metrics"}),e.jsx(g,{score:t,size:"sm"})]}),e.jsx("div",{className:n("grid gap-4",r?"p-3":"p-4",s.length===2&&"grid-cols-2",s.length===3&&"grid-cols-3",s.length===4&&"grid-cols-2 md:grid-cols-4",s.length>=5&&"grid-cols-2 md:grid-cols-3 lg:grid-cols-5"),children:s.map(x=>e.jsx(L,{kpi:x,showConfidence:l&&!i,compact:r},x.id))})]})}export{A as E,q as K,X as T};
//# sourceMappingURL=KpiStrip-C0aZ-ZV9.js.map
