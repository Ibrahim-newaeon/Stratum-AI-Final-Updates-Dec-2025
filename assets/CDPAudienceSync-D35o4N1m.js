import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as o,L as E}from"./vendor-react-Dz7uKsMg.js";import{i as q,L as O,$ as B,U as G,c as A,Z as J,H as Q,s as X,V as Z,X as R,v as z,x as K,y as W}from"./index-BQex3859.js";import{q as Y,r as ee,c as se,s as te,t as ae,v as re,f as ne,w as le}from"./cdp-B6W0ktOz.js";import{A as oe}from"./arrow-up-right-NhE7dUE0.js";import{D as I}from"./download-BBUAq3KN.js";import{P as D}from"./plus-B9u7Tds1.js";import{L as _}from"./loader-circle-CJwg01sb.js";import{R as ie}from"./refresh-cw-DLOeozaH.js";import{H as M}from"./history-DM1vUp56.js";import{F as ce}from"./file-spreadsheet-t9aDrZhs.js";import{C as de}from"./circle-alert-MlATZigW.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],xe=q("file-braces",me),L={meta:{name:"Meta",color:"text-blue-500",bgColor:"bg-blue-500/10",icon:"M"},google:{name:"Google",color:"text-red-500",bgColor:"bg-red-500/10",icon:"G"},tiktok:{name:"TikTok",color:"text-gray-900 dark:text-white",bgColor:"bg-gray-900/10 dark:bg-white/10",icon:"T"},snapchat:{name:"Snapchat",color:"text-yellow-500",bgColor:"bg-yellow-500/10",icon:"S"}};function F({platform:a,size:n="md"}){const i=L[a],c={sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"};return e.jsx("div",{className:A("rounded-lg flex items-center justify-center font-bold",i.bgColor,i.color,c[n]),children:i.icon})}function U({status:a}){const n={pending:{icon:e.jsx(z,{className:"w-3 h-3"}),className:"bg-gray-500/10 text-gray-500",label:"Pending"},processing:{icon:e.jsx(_,{className:"w-3 h-3 animate-spin"}),className:"bg-blue-500/10 text-blue-500",label:"Syncing"},completed:{icon:e.jsx(W,{className:"w-3 h-3"}),className:"bg-green-500/10 text-green-500",label:"Synced"},failed:{icon:e.jsx(K,{className:"w-3 h-3"}),className:"bg-red-500/10 text-red-500",label:"Failed"},partial:{icon:e.jsx(de,{className:"w-3 h-3"}),className:"bg-amber-500/10 text-amber-500",label:"Partial"}};if(!a)return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/10 text-gray-500",children:[e.jsx(z,{className:"w-3 h-3"}),"Never synced"]});const i=n[a];return e.jsxs("span",{className:A("inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium",i.className),children:[i.icon,i.label]})}function ue({isOpen:a,onClose:n,segments:i,connectedPlatforms:c}){const[x,d]=o.useState(""),[m,h]=o.useState(""),[t,p]=o.useState(""),[j,b]=o.useState(""),[S,k]=o.useState(""),[v,l]=o.useState(!0),[g,y]=o.useState(24),u=re(),N=c.find(s=>s.platform===m),w=(N==null?void 0:N.ad_accounts)||[],P=async s=>{if(s.preventDefault(),!(!x||!m||!t||!j))try{await u.mutateAsync({segment_id:x,platform:m,ad_account_id:t,audience_name:j,description:S||void 0,auto_sync:v,sync_interval_hours:g}),n(),d(""),h(""),p(""),b(""),k(""),l(!0),y(24)}catch(C){console.error("Failed to create audience:",C)}};return a?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),e.jsxs("div",{className:"relative bg-card border rounded-xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Create Platform Audience"}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:P,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"CDP Segment"}),e.jsxs("select",{value:x,onChange:s=>d(s.target.value),className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20",required:!0,children:[e.jsx("option",{value:"",children:"Select a segment..."}),i.map(s=>{var C;return e.jsxs("option",{value:s.id,children:[s.name," (",((C=s.profile_count)==null?void 0:C.toLocaleString())||0," profiles)"]},s.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Ad Platform"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map(s=>e.jsxs("button",{type:"button",onClick:()=>{h(s.platform),p("")},className:A("flex items-center gap-2 p-3 rounded-lg border transition-all",m===s.platform?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-muted-foreground/20"),children:[e.jsx(F,{platform:s.platform,size:"sm"}),e.jsx("span",{className:"font-medium",children:L[s.platform].name})]},s.platform))}),c.length===0&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"No platforms connected. Connect platforms in Settings."})]}),m&&w.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Ad Account"}),e.jsxs("select",{value:t,onChange:s=>p(s.target.value),className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20",required:!0,children:[e.jsx("option",{value:"",children:"Select an ad account..."}),w.map(s=>e.jsx("option",{value:s.ad_account_id,children:s.ad_account_name||s.ad_account_id},s.ad_account_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Audience Name"}),e.jsx("input",{type:"text",value:j,onChange:s=>b(s.target.value),placeholder:"e.g., High Value Customers",className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Description (optional)"}),e.jsx("textarea",{value:S,onChange:s=>k(s.target.value),placeholder:"Describe this audience...",rows:2,className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20 resize-none"})]}),e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted/30 border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"autoSync",checked:v,onChange:s=>l(s.target.checked),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"autoSync",className:"text-sm font-medium",children:"Auto-sync audience"})]}),v&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"every"}),e.jsxs("select",{value:g,onChange:s=>y(Number(s.target.value)),className:"px-2 py-1 rounded border bg-background text-sm",children:[e.jsx("option",{value:1,children:"1 hour"}),e.jsx("option",{value:6,children:"6 hours"}),e.jsx("option",{value:12,children:"12 hours"}),e.jsx("option",{value:24,children:"24 hours"}),e.jsx("option",{value:48,children:"48 hours"}),e.jsx("option",{value:168,children:"1 week"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg border hover:bg-muted transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:!x||!m||!t||!j||u.isPending,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors",children:[u.isPending?e.jsx(_,{className:"w-4 h-4 animate-spin"}):e.jsx(D,{className:"w-4 h-4"}),"Create Audience"]})]})]})]})]}):null}function pe({audienceId:a,audienceName:n,onClose:i}){const{data:c,isLoading:x}=le(a,20),d=(c==null?void 0:c.jobs)||[],m=t=>t?t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(1)}s`:`${(t/6e4).toFixed(1)}m`:"-",h=t=>t?new Date(t).toLocaleString():"-";return e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full max-w-lg bg-card border-l shadow-xl z-50 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Sync History"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n})]}),e.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:x?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(_,{className:"w-8 h-8 animate-spin text-primary"})}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No sync history"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This audience hasn't been synced yet."})]}):e.jsx("div",{className:"space-y-3",children:d.map(t=>e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{status:t.status}),e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:t.operation})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:h(t.created_at)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Profiles"}),e.jsx("div",{className:"font-semibold",children:t.profiles_sent.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Added"}),e.jsxs("div",{className:"font-semibold text-green-500",children:["+",t.profiles_added.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Duration"}),e.jsx("div",{className:"font-semibold",children:m(t.duration_ms)})]})]}),t.profiles_failed>0&&e.jsxs("div",{className:"mt-2 text-sm text-red-500",children:[t.profiles_failed.toLocaleString()," profiles failed"]}),t.error_message&&e.jsx("div",{className:"mt-2 p-2 rounded bg-red-500/10 text-red-500 text-sm",children:t.error_message}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Triggered by: ",t.triggered_by||"manual"]})]},t.id))})})]})}function he({isOpen:a,onClose:n,segments:i}){const[c,x]=o.useState(""),[d,m]=o.useState("csv"),[h,t]=o.useState(!0),[p,j]=o.useState(!1),[b,S]=o.useState(!1),k=ne(),v=async()=>{S(!0);try{const l={format:d,segment_id:c||void 0,include_traits:h,include_events:p},g=await k.mutateAsync(l);if(g instanceof Blob){const y=URL.createObjectURL(g),u=document.createElement("a");u.href=y,u.download=`audience-export-${new Date().toISOString().split("T")[0]}.${d}`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(y)}else{const y=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),u=URL.createObjectURL(y),N=document.createElement("a");N.href=u,N.download=`audience-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(u)}n()}catch(l){console.error("Export failed:",l)}finally{S(!1)}};return a?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),e.jsxs("div",{className:"relative bg-card border rounded-xl shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Export Custom Audience"]}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Segment (optional)"}),e.jsxs("select",{value:c,onChange:l=>x(l.target.value),className:"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"",children:"All profiles"}),i.map(l=>{var g;return e.jsxs("option",{value:l.id,children:[l.name," (",((g=l.profile_count)==null?void 0:g.toLocaleString())||0," profiles)"]},l.id)})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Leave empty to export all profiles"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Export Format"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>m("csv"),className:A("flex items-center justify-center gap-2 p-3 rounded-lg border transition-all",d==="csv"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-muted-foreground/20"),children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"CSV"})]}),e.jsxs("button",{type:"button",onClick:()=>m("json"),className:A("flex items-center justify-center gap-2 p-3 rounded-lg border transition-all",d==="json"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-muted-foreground/20"),children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"JSON"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Include Data"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:l=>t(l.target.checked),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:"text-sm",children:"Profile traits & attributes"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:l=>j(l.target.checked),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:"text-sm",children:"Recent events (last 30 days)"})]})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-muted/30 border text-sm",children:e.jsxs("p",{className:"text-muted-foreground",children:["Export includes: email, phone, identifiers, lifecycle stage",h&&", custom traits",p&&", event history"]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg border hover:bg-muted transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:v,disabled:b,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors",children:[b?e.jsx(_,{className:"w-4 h-4 animate-spin"}):e.jsx(I,{className:"w-4 h-4"}),"Export ",d.toUpperCase()]})]})]})]})]}):null}function ge({audience:a,onSync:n,onDelete:i,onViewHistory:c,isSyncing:x}){var p,j;const[d,m]=o.useState(!1),h=b=>b?new Date(b).toLocaleDateString():"Never",t=a.match_rate?`${a.match_rate.toFixed(1)}%`:"-";return e.jsxs("div",{className:"p-4 rounded-xl border bg-card hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{platform:a.platform}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:a.platform_audience_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(p=L[a.platform])==null?void 0:p.name," â€¢ ",a.ad_account_id]})]})]}),e.jsx(U,{status:a.last_sync_status})]}),a.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:a.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Platform Size"}),e.jsx("div",{className:"font-semibold",children:((j=a.platform_size)==null?void 0:j.toLocaleString())||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Match Rate"}),e.jsx("div",{className:"font-semibold",children:t})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Last Sync"}),e.jsx("div",{className:"font-semibold",children:h(a.last_sync_at)})]})]}),a.auto_sync&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-3",children:[e.jsx(ie,{className:"w-3 h-3"}),e.jsxs("span",{children:["Auto-sync every ",a.sync_interval_hours,"h"]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[e.jsxs("button",{onClick:n,disabled:x,className:"flex-1 flex items-center justify-center gap-2 px-3 py-1.5 rounded-md bg-primary/10 text-primary hover:bg-primary/20 text-sm font-medium transition-colors disabled:opacity-50",children:[x?e.jsx(_,{className:"w-4 h-4 animate-spin"}):e.jsx(J,{className:"w-4 h-4"}),"Sync Now"]}),e.jsx("button",{onClick:c,className:"px-3 py-1.5 rounded-md bg-muted hover:bg-muted/80 text-sm font-medium transition-colors",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>m(!d),className:"px-3 py-1.5 rounded-md bg-muted hover:bg-muted/80 text-sm font-medium transition-colors",children:d?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{onClick:i,className:"px-3 py-1.5 rounded-md hover:bg-red-500/10 text-muted-foreground hover:text-red-500 text-sm font-medium transition-colors",children:e.jsx(Z,{className:"w-4 h-4"})})]}),d&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Segment ID"}),e.jsx("span",{className:"font-mono text-xs",children:a.segment_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Platform Audience ID"}),e.jsx("span",{className:"font-mono text-xs",children:a.platform_audience_id||"Not created yet"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:new Date(a.created_at).toLocaleDateString()})]})]})]})}function fe(){const[a,n]=o.useState(!1),[i,c]=o.useState(!1),[x,d]=o.useState(""),[m,h]=o.useState(""),[t,p]=o.useState(null),[j,b]=o.useState(new Set),{data:S,isLoading:k}=Y(),{data:v,isLoading:l,refetch:g}=ee({platform:m||void 0}),{data:y}=se({status:"active"}),u=te(),N=ae(),w=S||[],P=(v==null?void 0:v.audiences)||[],s=(y==null?void 0:y.segments)||[],C=P.filter(r=>{var f;return r.platform_audience_name.toLowerCase().includes(x.toLowerCase())||((f=r.description)==null?void 0:f.toLowerCase().includes(x.toLowerCase()))}),H=async r=>{b(f=>new Set(f).add(r));try{await u.mutateAsync({audienceId:r,operation:"update"}),g()}catch(f){console.error("Sync failed:",f)}finally{b(f=>{const T=new Set(f);return T.delete(r),T})}},$=async r=>{if(confirm("Are you sure you want to delete this audience? This will also remove it from the ad platform."))try{await N.mutateAsync({audienceId:r,deleteFromPlatform:!0}),g()}catch(f){console.error("Delete failed:",f)}},V=k||l;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(oe,{className:"w-6 h-6 text-primary"}),"Audience Sync"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Push CDP segments to ad platforms for targeting"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>c(!0),disabled:s.length===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-muted disabled:opacity-50 transition-colors",children:[e.jsx(I,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:()=>n(!0),disabled:w.length===0||s.length===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),"New Audience"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Connected:"}),w.length===0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-amber-500",children:"No platforms connected"}),e.jsxs(E,{to:"/dashboard/settings",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[e.jsx(O,{className:"w-3 h-3"}),"Connect platforms"]})]}):w.map(r=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-muted text-sm",children:[e.jsx(F,{platform:r.platform,size:"sm"}),e.jsx("span",{children:L[r.platform].name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",r.ad_accounts.length,")"]})]},r.platform))]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",value:x,onChange:r=>d(r.target.value),placeholder:"Search audiences...",className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("select",{value:m,onChange:r=>h(r.target.value),className:"px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"",children:"All Platforms"}),Object.entries(L).map(([r,f])=>e.jsx("option",{value:r,children:f.name},r))]})]}),V?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(_,{className:"w-8 h-8 animate-spin text-primary"})}):C.length===0?e.jsxs("div",{className:"text-center py-12 bg-card border rounded-xl",children:[e.jsx(G,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No audiences yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md mx-auto",children:w.length===0?"Connect your ad platforms (Meta, Google, TikTok, Snapchat) to start syncing audiences.":s.length===0?"Create a CDP segment first, then sync it to your ad platforms.":"Create your first platform audience to start syncing."}),w.length===0?e.jsxs(E,{to:"/dashboard/settings",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),"Connect Platforms"]}):s.length===0?e.jsxs(E,{to:"/dashboard/cdp/segments",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),"Create Segment"]}):e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),"Create Audience"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(r=>e.jsx(ge,{audience:r,onSync:()=>H(r.id),onDelete:()=>$(r.id),onViewHistory:()=>p(r),isSyncing:j.has(r.id)},r.id))}),e.jsx(ue,{isOpen:a,onClose:()=>n(!1),segments:s,connectedPlatforms:w}),e.jsx(he,{isOpen:i,onClose:()=>c(!1),segments:s}),t&&e.jsx(pe,{audienceId:t.id,audienceName:t.platform_audience_name,onClose:()=>p(null)})]})}function Me(){return e.jsx("div",{className:"p-6",children:e.jsx(fe,{})})}export{Me as default};
//# sourceMappingURL=CDPAudienceSync-D35o4N1m.js.map
