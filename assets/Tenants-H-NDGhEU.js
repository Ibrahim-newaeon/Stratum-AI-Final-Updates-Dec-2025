import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as c}from"./vendor-react-Dz7uKsMg.js";import{Z as A,S as B,U as E,$ as q,H as R,c as g,G as $,V as G,X as O,w as Q}from"./index-BQex3859.js";import{B as D}from"./building-2-CJWlWG2b.js";import{P as H}from"./plus-B9u7Tds1.js";import{C as V}from"./crown-BLrg3d0f.js";import{G as W}from"./globe-BqRt-3X1.js";import{F as X}from"./funnel-BvijHT_k.js";import{C as J}from"./calendar-CbIj2r5m.js";import{E as K}from"./ellipsis-9Q2qFKdX.js";import{S as Y}from"./square-pen-6DBNh-jk.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";const ee=[{id:1,name:"Acme Corporation",slug:"acme-corp",domain:"acme.stratum.ai",plan:"enterprise",plan_expires_at:"2025-12-31T00:00:00Z",max_users:100,max_campaigns:1e3,settings:{},feature_flags:{advanced_analytics:!0,ai_insights:!0,white_label:!0},created_at:"2024-01-15T10:00:00Z",updated_at:"2024-11-20T15:30:00Z",user_count:45},{id:2,name:"TechStart Inc",slug:"techstart",domain:null,plan:"professional",plan_expires_at:"2025-06-30T00:00:00Z",max_users:25,max_campaigns:200,settings:{},feature_flags:{advanced_analytics:!0,ai_insights:!0,white_label:!1},created_at:"2024-03-22T08:00:00Z",updated_at:"2024-10-15T12:00:00Z",user_count:12},{id:3,name:"Marketing Pro",slug:"marketing-pro",domain:"marketingpro.stratum.ai",plan:"starter",plan_expires_at:"2025-03-15T00:00:00Z",max_users:10,max_campaigns:50,settings:{},feature_flags:{advanced_analytics:!1,ai_insights:!0,white_label:!1},created_at:"2024-05-10T14:00:00Z",updated_at:"2024-11-01T09:00:00Z",user_count:8},{id:4,name:"Digital Bloom",slug:"digital-bloom",domain:null,plan:"free",plan_expires_at:null,max_users:5,max_campaigns:10,settings:{},feature_flags:{advanced_analytics:!1,ai_insights:!1,white_label:!1},created_at:"2024-08-01T11:00:00Z",updated_at:"2024-08-01T11:00:00Z",user_count:2}],y={free:{color:"bg-gray-500",label:"Free",limits:{users:5,campaigns:10}},starter:{color:"bg-blue-500",label:"Starter",limits:{users:10,campaigns:50}},professional:{color:"bg-purple-500",label:"Professional",limits:{users:25,campaigns:200}},enterprise:{color:"bg-amber-500",label:"Enterprise",limits:{users:100,campaigns:1e3}}},F=[{key:"advanced_analytics",label:"Advanced Analytics",description:"Deep dive analytics and custom reports"},{key:"ai_insights",label:"AI Insights",description:"AI-powered campaign recommendations"},{key:"white_label",label:"White Label",description:"Custom branding and domain"},{key:"api_access",label:"API Access",description:"Full REST API access"},{key:"sso",label:"Single Sign-On",description:"SAML/OAuth SSO integration"},{key:"audit_logs",label:"Audit Logs",description:"Detailed activity logging"}];function je(){const[a,r]=c.useState(ee),[m,o]=c.useState(""),[t,d]=c.useState("all"),[n,x]=c.useState(!1),[C,v]=c.useState(!1),[k,w]=c.useState(!1),[l,h]=c.useState(!1),[u,p]=c.useState(null),[_,P]=c.useState("name"),[S,Z]=c.useState("asc"),T=c.useMemo(()=>{let s=[...a];if(m){const i=m.toLowerCase();s=s.filter(b=>{var f;return b.name.toLowerCase().includes(i)||b.slug.toLowerCase().includes(i)||((f=b.domain)==null?void 0:f.toLowerCase().includes(i))})}return t!=="all"&&(s=s.filter(i=>i.plan===t)),s.sort((i,b)=>{let f=0;return _==="name"?f=i.name.localeCompare(b.name):_==="created_at"?f=new Date(i.created_at).getTime()-new Date(b.created_at).getTime():_==="user_count"&&(f=(i.user_count||0)-(b.user_count||0)),S==="asc"?f:-f}),s},[a,m,t,_,S]),j=c.useMemo(()=>({total:a.length,enterprise:a.filter(s=>s.plan==="enterprise").length,professional:a.filter(s=>s.plan==="professional").length,starter:a.filter(s=>s.plan==="starter").length,free:a.filter(s=>s.plan==="free").length,totalUsers:a.reduce((s,i)=>s+(i.user_count||0),0)}),[a]),L=s=>{const i={id:Date.now(),...s,plan_expires_at:s.plan==="free"?null:new Date(Date.now()+31536e6).toISOString(),max_users:y[s.plan].limits.users,max_campaigns:y[s.plan].limits.campaigns,settings:{},feature_flags:{},created_at:new Date().toISOString(),updated_at:new Date().toISOString(),user_count:0};r([...a,i]),x(!1)},U=s=>{u&&(r(a.map(i=>i.id===u.id?{...i,...s,max_users:y[s.plan].limits.users,max_campaigns:y[s.plan].limits.campaigns,updated_at:new Date().toISOString()}:i)),v(!1),p(null))},I=()=>{u&&(r(a.filter(s=>s.id!==u.id)),w(!1),p(null))},z=s=>{u&&(r(a.map(i=>i.id===u.id?{...i,feature_flags:s,updated_at:new Date().toISOString()}:i)),h(!1),p(null))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(D,{className:"h-7 w-7 text-primary"}),"Tenant Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage organizations and their subscriptions"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Tenant"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsx(N,{icon:D,label:"Total Tenants",value:j.total}),e.jsx(N,{icon:V,label:"Enterprise",value:j.enterprise,color:"amber"}),e.jsx(N,{icon:A,label:"Professional",value:j.professional,color:"purple"}),e.jsx(N,{icon:B,label:"Starter",value:j.starter,color:"blue"}),e.jsx(N,{icon:W,label:"Free",value:j.free,color:"gray"}),e.jsx(N,{icon:E,label:"Total Users",value:j.totalUsers,color:"green"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search tenants by name, slug, or domain...",value:m,onChange:s=>o(s.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("select",{value:t,onChange:s=>d(s.target.value),className:"px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"all",children:"All Plans"}),e.jsx("option",{value:"enterprise",children:"Enterprise"}),e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"free",children:"Free"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:_,onChange:s=>P(s.target.value),className:"px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"created_at",children:"Sort by Created"}),e.jsx("option",{value:"user_count",children:"Sort by Users"})]}),e.jsx("button",{onClick:()=>Z(S==="asc"?"desc":"asc"),className:"p-2 rounded-lg border hover:bg-muted transition-colors",children:e.jsx(R,{className:g("h-4 w-4 transition-transform",S==="asc"&&"rotate-180")})})]})]}),e.jsx("div",{className:"rounded-xl border bg-card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Plan"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Users"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Features"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y",children:[T.map(s=>e.jsx(se,{tenant:s,onEdit:()=>{p(s),v(!0)},onDelete:()=>{p(s),w(!0)},onManageFeatures:()=>{p(s),h(!0)}},s.id)),T.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-12 text-center text-muted-foreground",children:"No tenants found matching your criteria"})})]})]})}),n&&e.jsx(M,{title:"Create New Tenant",onClose:()=>x(!1),onSubmit:L}),C&&u&&e.jsx(M,{title:"Edit Tenant",tenant:u,onClose:()=>{v(!1),p(null)},onSubmit:U}),k&&u&&e.jsx(ae,{tenant:u,onClose:()=>{w(!1),p(null)},onConfirm:I}),l&&u&&e.jsx(te,{tenant:u,onClose:()=>{h(!1),p(null)},onSave:z})]})}function N({icon:a,label:r,value:m,color:o="primary"}){const t={primary:"bg-primary/10 text-primary",amber:"bg-amber-500/10 text-amber-500",purple:"bg-purple-500/10 text-purple-500",blue:"bg-blue-500/10 text-blue-500",gray:"bg-gray-500/10 text-gray-500",green:"bg-green-500/10 text-green-500"};return e.jsx("div",{className:"p-4 rounded-xl border bg-card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:g("p-2 rounded-lg",t[o]),children:e.jsx(a,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:m}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r})]})]})})}function se({tenant:a,onEdit:r,onDelete:m,onManageFeatures:o}){const[t,d]=c.useState(!1),n=y[a.plan],x=Object.values(a.feature_flags).filter(Boolean).length;return e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary font-semibold",children:a.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.slug}),a.domain&&e.jsx("p",{className:"text-xs text-primary",children:a.domain})]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("span",{className:g("px-2 py-1 rounded-full text-xs font-medium text-white",n.color),children:n.label}),a.plan_expires_at&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",new Date(a.plan_expires_at).toLocaleDateString()]})]}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[a.user_count||0," / ",a.max_users]})]}),e.jsx("div",{className:"w-24 h-1.5 bg-muted rounded-full mt-1",children:e.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${Math.min(100,(a.user_count||0)/a.max_users*100)}%`}})})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(A,{className:"h-4 w-4"}),x," enabled"]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(J,{className:"h-4 w-4"}),new Date(a.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{onClick:()=>d(!t),className:"p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(K,{className:"h-4 w-4"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 rounded-lg border bg-card shadow-lg z-20",children:[e.jsxs("button",{onClick:()=>{d(!1),r()},className:"w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-muted transition-colors",children:[e.jsx(Y,{className:"h-4 w-4"}),"Edit Tenant"]}),e.jsxs("button",{onClick:()=>{d(!1),o()},className:"w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-muted transition-colors",children:[e.jsx($,{className:"h-4 w-4"}),"Manage Features"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{d(!1),m()},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-500 hover:bg-red-500/10 transition-colors",children:[e.jsx(G,{className:"h-4 w-4"}),"Delete Tenant"]})]})]})]})})]})}function M({title:a,tenant:r,onClose:m,onSubmit:o}){const[t,d]=c.useState({name:(r==null?void 0:r.name)||"",slug:(r==null?void 0:r.slug)||"",domain:(r==null?void 0:r.domain)||"",plan:(r==null?void 0:r.plan)||"free"}),[n,x]=c.useState({}),C=l=>l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),v=l=>{d({...t,name:l,slug:r?t.slug:C(l)})},k=()=>{const l={};return t.name.trim()||(l.name="Name is required"),t.slug.trim()||(l.slug="Slug is required"),t.slug&&!/^[a-z0-9-]+$/.test(t.slug)&&(l.slug="Slug can only contain lowercase letters, numbers, and hyphens"),x(l),Object.keys(l).length===0},w=l=>{l.preventDefault(),k()&&o(t)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-lg bg-card rounded-xl shadow-xl border",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:a}),e.jsx("button",{onClick:m,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:w,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Organization Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:l=>v(l.target.value),className:g("w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",n.name&&"border-red-500"),placeholder:"Acme Corporation"}),n.name&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Slug *"}),e.jsx("input",{type:"text",value:t.slug,onChange:l=>d({...t,slug:l.target.value.toLowerCase()}),className:g("w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",n.slug&&"border-red-500"),placeholder:"acme-corp"}),n.slug&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.slug}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Used in URLs: ",t.slug||"slug",".stratum.ai"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Custom Domain"}),e.jsx("input",{type:"text",value:t.domain,onChange:l=>d({...t,domain:l.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"dashboard.company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subscription Plan"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(y).map(([l,h])=>e.jsxs("button",{type:"button",onClick:()=>d({...t,plan:l}),className:g("p-3 rounded-lg border text-left transition-colors",t.plan===l?"border-primary bg-primary/10":"hover:bg-muted"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:g("w-2 h-2 rounded-full",h.color)}),e.jsx("span",{className:"font-medium",children:h.label})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.limits.users," users, ",h.limits.campaigns," campaigns"]})]},l))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-2 rounded-lg border hover:bg-muted transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:r?"Save Changes":"Create Tenant"})]})]})]})})}function ae({tenant:a,onClose:r,onConfirm:m}){const[o,t]=c.useState("");return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsx("div",{className:"w-full max-w-md bg-card rounded-xl shadow-xl border",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(Q,{className:"h-6 w-6 text-red-500"})}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Delete Tenant"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Are you sure you want to delete ",e.jsx("strong",{children:a.name}),"? This action cannot be undone and will delete all associated data."]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 text-left",children:['Type "',a.slug,'" to confirm']}),e.jsx("input",{type:"text",value:o,onChange:d=>t(d.target.value),className:"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-red-500/20",placeholder:a.slug})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 rounded-lg border hover:bg-muted transition-colors",children:"Cancel"}),e.jsx("button",{onClick:m,disabled:o!==a.slug,className:"flex-1 px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete Tenant"})]})]})})})}function te({tenant:a,onClose:r,onSave:m}){const[o,t]=c.useState(F.reduce((n,x)=>({...n,[x.key]:a.feature_flags[x.key]||!1}),{})),d=n=>{t({...o,[n]:!o[n]})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-lg bg-card rounded-xl shadow-xl border",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Feature Flags"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.name})]}),e.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"p-4 space-y-3 max-h-96 overflow-y-auto",children:F.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]}),e.jsx("button",{onClick:()=>d(n.key),className:g("relative w-12 h-6 rounded-full transition-colors",o[n.key]?"bg-primary":"bg-muted"),children:e.jsx("span",{className:g("absolute top-1 w-4 h-4 bg-white rounded-full transition-transform",o[n.key]?"translate-x-7":"translate-x-1")})})]},n.key))}),e.jsxs("div",{className:"flex gap-3 p-4 border-t",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 rounded-lg border hover:bg-muted transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>m(o),className:"flex-1 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Save Features"})]})]})})}export{je as Tenants,je as default};
//# sourceMappingURL=Tenants-H-NDGhEU.js.map
