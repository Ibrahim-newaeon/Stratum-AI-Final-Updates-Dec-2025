import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as N,u as V}from"./vendor-react-Dz7uKsMg.js";import{i as C,t as f,A as v,c as n,v as ne,Z as A,w,x as G,y as W,z as T,D as F,X as oe,C as le,W as ce,E as P,G as q,r as L,B as de,L as ie,H as me,T as xe}from"./index-BQex3859.js";import{u as k,a as Y,b as J}from"./vendor-query-BPt-n81V.js";import{L as b}from"./loader-circle-CJwg01sb.js";import{S as ue}from"./server-DcIhoF9q.js";import{P as he}from"./pause-CGHTPI-4.js";import{E as ge}from"./eye-Dm_U4nfe.js";import{K as fe}from"./key-igdeBNHO.js";import{C as I}from"./circle-alert-MlATZigW.js";import{I as be}from"./info-Bj1e8ZpJ.js";import{C as pe}from"./circle-check-big-CIbPdEH4.js";import{M as X}from"./minus-B2Xc_gjC.js";import{A as Z}from"./arrow-down-EUStleW0.js";import{R as H}from"./refresh-cw-DLOeozaH.js";import{P as je}from"./plus-B9u7Tds1.js";import{D as K}from"./dollar-sign-Dosx4kzY.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-motion-CR45sdSp.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ee=C("arrow-up",Ne);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],ve=C("hand",ye);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],M=C("mouse-pointer-click",we);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ke=C("shield-alert",Ce);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ae=C("shield-check",Se);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],Fe=C("shield-off",_e),j={getOverview:async(t="7d")=>(await f.get("/dashboard/overview",{params:{period:t}})).data.data,getCampaigns:async(t={})=>(await f.get("/dashboard/campaigns",{params:t})).data.data,getRecommendations:async(t={})=>(await f.get("/dashboard/recommendations",{params:t})).data.data,approveRecommendation:async t=>(await f.post(`/dashboard/recommendations/${t}/approve`)).data.data,rejectRecommendation:async t=>(await f.post(`/dashboard/recommendations/${t}/reject`)).data.data,getActivityFeed:async(t={})=>(await f.get("/dashboard/activity",{params:t})).data.data,getQuickActions:async()=>(await f.get("/dashboard/quick-actions")).data.data,getSignalHealth:async()=>(await f.get("/dashboard/signal-health")).data.data,exportDashboard:async t=>(await f.post("/dashboard/export",t,{responseType:"blob"})).data};function Le(t="7d",o=!0){return k({queryKey:["dashboard","overview",t],queryFn:()=>j.getOverview(t),enabled:o,staleTime:60*1e3,refetchInterval:5*60*1e3})}function De(t={},o=!0){return k({queryKey:["dashboard","campaigns",t],queryFn:()=>j.getCampaigns(t),enabled:o,staleTime:60*1e3})}function Re(t={},o=!0){return k({queryKey:["dashboard","recommendations",t],queryFn:()=>j.getRecommendations(t),enabled:o,staleTime:2*60*1e3})}function Me(){const t=Y();return J({mutationFn:j.approveRecommendation,onSuccess:()=>{t.invalidateQueries({queryKey:["dashboard","recommendations"]})}})}function Te(){const t=Y();return J({mutationFn:j.rejectRecommendation,onSuccess:()=>{t.invalidateQueries({queryKey:["dashboard","recommendations"]})}})}function Ie(t={},o=!0){return k({queryKey:["dashboard","activity",t],queryFn:()=>j.getActivityFeed(t),enabled:o,staleTime:30*1e3})}function Pe(t=!0){return k({queryKey:["dashboard","quick-actions"],queryFn:j.getQuickActions,enabled:t,staleTime:5*60*1e3})}function qe(t=!0){return k({queryKey:["dashboard","signal-health"],queryFn:j.getSignalHealth,enabled:t,staleTime:30*1e3,refetchInterval:60*1e3})}function Oe({signalHealth:t,loading:o=!1}){if(o)return e.jsx("div",{className:"glass border border-white/10 rounded-xl p-5 h-full flex items-center justify-center min-h-[200px]",children:e.jsx(b,{className:"w-6 h-6 animate-spin text-muted-foreground"})});if(!t)return e.jsx("div",{className:"glass border border-white/10 rounded-xl p-5 h-full",children:e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(v,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No signal health data available"})]})});const x=(c=>{switch(c){case"healthy":return{color:"text-[#00c7be]",bgColor:"bg-[#00c7be]/10",icon:W,label:"Healthy"};case"degraded":return{color:"text-yellow-500",bgColor:"bg-yellow-500/10",icon:w,label:"Degraded"};case"critical":return{color:"text-[#ff6b6b]",bgColor:"bg-[#ff6b6b]/10",icon:G,label:"Critical"};default:return{color:"text-muted-foreground",bgColor:"bg-muted",icon:v,label:"Unknown"}}})(t.status),l=x.icon,s=c=>c>=70?"text-[#00c7be]":c>=40?"text-yellow-500":"text-[#ff6b6b]",a=c=>{if(c===null)return"Unknown";if(c<1)return"Just now";if(c<60)return`${c}m ago`;const r=Math.floor(c/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`};return e.jsxs("div",{className:"glass border border-white/10 rounded-xl p-5 h-full card-3d",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Signal Health"}),e.jsxs("div",{className:n("flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ai-chip",x.bgColor,x.color),children:[e.jsx("div",{className:n("w-1.5 h-1.5 rounded-full",t.status==="healthy"&&"dot-healthy",t.status==="degraded"&&"dot-degraded",t.status==="critical"&&"dot-critical")}),e.jsx(l,{className:"w-3.5 h-3.5"}),x.label]})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:n("text-4xl font-bold",s(t.overall_score)),children:t.overall_score}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Overall Score"}),e.jsx("div",{className:"h-1.5 rounded-full bg-white/10 overflow-hidden mt-2",children:e.jsx("div",{className:n("h-full rounded-full transition-all duration-500",t.overall_score>=70?"bg-gradient-to-r from-[#00c7be] to-[#34c759]":t.overall_score>=40?"bg-gradient-to-r from-yellow-500 to-amber-400":"bg-gradient-to-r from-[#ff6b6b] to-[#ff8a8a]"),style:{width:`${t.overall_score}%`}})})]}),e.jsxs("div",{className:"space-y-3",children:[t.emq_score!==null&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"EMQ Score"})]}),e.jsx("span",{className:n("font-medium",s(t.emq_score)),children:t.emq_score})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Data Freshness"})]}),e.jsx("span",{className:"font-medium",children:a(t.data_freshness_minutes)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"API Health"})]}),e.jsx("span",{className:n("font-medium",t.api_health?"text-[#00c7be]":"text-[#ff6b6b]"),children:t.api_health?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Autopilot"})]}),e.jsx("span",{className:n("font-medium",t.autopilot_enabled?"text-[#00c7be]":"text-muted-foreground"),children:t.autopilot_enabled?"Enabled":"Disabled"})]})]}),t.issues.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Issues"}),e.jsxs("ul",{className:"space-y-1",children:[t.issues.slice(0,3).map((c,r)=>e.jsxs("li",{className:"text-xs text-yellow-600 flex items-start gap-2",children:[e.jsx(w,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:c})]},r)),t.issues.length>3&&e.jsxs("li",{className:"text-xs text-muted-foreground",children:["+",t.issues.length-3," more issues"]})]})]})]})}const S=70,y=40;function $e({signalHealth:t,loading:o=!1}){if(o)return e.jsx("div",{className:"glass border border-white/10 rounded-xl p-6 h-full flex items-center justify-center min-h-[200px]",children:e.jsx(b,{className:"w-6 h-6 animate-spin text-muted-foreground"})});const x=t?t.overall_score>=S?"PASS":t.overall_score>=y?"HOLD":"BLOCK":"BLOCK",s={PASS:{icon:Ae,color:"text-[#00c7be]",bgColor:"bg-[#00c7be]",bgLight:"bg-[#00c7be]/10",borderColor:"border-[#00c7be]/30",ringColor:"ring-[#00c7be]/20",label:"PASS",description:"Autopilot Enabled",detail:"Signal health is strong. Automations will execute automatically.",actionIcon:A,actionLabel:"Auto-Execute"},HOLD:{icon:ke,color:"text-yellow-500",bgColor:"bg-yellow-500",bgLight:"bg-yellow-500/10",borderColor:"border-yellow-500/30",ringColor:"ring-yellow-500/20",label:"HOLD",description:"Alert Mode",detail:"Signal health is degraded. Automation on hold, alerts only.",actionIcon:w,actionLabel:"Alert Only"},BLOCK:{icon:Fe,color:"text-[#ff6b6b]",bgColor:"bg-[#ff6b6b]",bgLight:"bg-[#ff6b6b]/10",borderColor:"border-[#ff6b6b]/30",ringColor:"ring-[#ff6b6b]/20",label:"BLOCK",description:"Manual Required",detail:"Signal health is critical. All automations blocked, manual action required.",actionIcon:ve,actionLabel:"Manual Only"}}[x],a=s.icon,c=s.actionIcon;return e.jsxs("div",{className:n("glass border border-white/10 rounded-xl p-6 h-full card-3d",s.borderColor),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Trust Gate"}),e.jsxs("div",{className:n("flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-bold ai-chip",s.bgLight,s.color),children:[e.jsx(a,{className:"w-4 h-4"}),s.label]})]}),e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:n("w-32 h-32 rounded-full ring-4 flex items-center justify-center",s.ringColor,s.bgLight,x==="PASS"&&"animate-glow-loop"),children:e.jsx("div",{className:n("w-20 h-20 rounded-full flex items-center justify-center",s.bgLight),children:e.jsx(a,{className:n("w-10 h-10",s.color)})})}),x==="PASS"&&e.jsx("div",{className:n("absolute inset-0 w-32 h-32 rounded-full animate-ping opacity-20",s.bgColor)})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:n("text-lg font-semibold mb-1",s.color),children:s.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.detail})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Signal Score"}),e.jsxs("span",{className:n("font-bold",s.color),children:[(t==null?void 0:t.overall_score)??0,"/100"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsxs("div",{className:"h-full flex",children:[e.jsx("div",{className:"bg-[#ff6b6b] transition-all duration-500",style:{width:`${Math.min(y,(t==null?void 0:t.overall_score)??0)}%`}}),e.jsx("div",{className:"bg-yellow-500 transition-all duration-500",style:{width:`${Math.max(0,Math.min(S-y,((t==null?void 0:t.overall_score)??0)-y))}%`}}),e.jsx("div",{className:"bg-[#00c7be] transition-all duration-500",style:{width:`${Math.max(0,((t==null?void 0:t.overall_score)??0)-S)}%`}})]})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0"}),e.jsxs("span",{className:"text-[#ff6b6b]",children:["Block (<",y,")"]}),e.jsxs("span",{className:"text-yellow-500",children:["Hold (",y,"-",S-1,")"]}),e.jsxs("span",{className:"text-[#00c7be]",children:["Pass (>=",S,")"]})]})]}),e.jsxs("div",{className:n("mt-6 pt-4 border-t flex items-center justify-between",s.borderColor),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:n("w-4 h-4",s.color)}),e.jsx("span",{className:"text-sm font-medium",children:s.actionLabel})]}),(t==null?void 0:t.autopilot_enabled)&&x==="PASS"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-[#00c7be]/10 text-[#00c7be] rounded-full font-medium",children:"Active"})]})]})}function ze({recommendations:t,loading:o=!1,onApprove:m,onReject:x,onViewAll:l}){const[s,a]=N.useState(null),c=i=>{switch(i){case"scale":return{icon:P,color:"text-green-500",bgColor:"bg-green-500/10",label:"Scale"};case"watch":return{icon:ge,color:"text-blue-500",bgColor:"bg-blue-500/10",label:"Watch"};case"fix":return{icon:ce,color:"text-orange-500",bgColor:"bg-orange-500/10",label:"Fix"};case"pause":return{icon:he,color:"text-red-500",bgColor:"bg-red-500/10",label:"Pause"};default:return{icon:w,color:"text-muted-foreground",bgColor:"bg-muted",label:i}}},r=async i=>{a(i);try{await m(i)}finally{a(null)}},d=async i=>{a(i);try{await x(i)}finally{a(null)}};if(o)return e.jsx("div",{className:"bg-card border rounded-lg p-5 flex items-center justify-center min-h-[200px]",children:e.jsx(b,{className:"w-6 h-6 animate-spin text-muted-foreground"})});const u=t.filter(i=>i.status==="pending");return e.jsxs("div",{className:"bg-card border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"AI Recommendations"}),u.length>0&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary/10 text-primary rounded-full font-medium",children:u.length})]}),l&&e.jsxs("button",{onClick:l,className:"text-sm text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1",children:["View all",e.jsx(F,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"divide-y",children:u.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(T,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No pending recommendations"})]}):u.slice(0,5).map(i=>{const h=c(i.type),D=h.icon,_=s===i.id;return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:n("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",h.bgColor),children:e.jsx(D,{className:n("w-4 h-4",h.color)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:n("text-xs px-1.5 py-0.5 rounded font-medium",h.bgColor,h.color),children:h.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i.platform})]}),e.jsx("h4",{className:"text-sm font-medium mb-1 line-clamp-1",children:i.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:i.description}),i.impact_estimate&&e.jsx("div",{className:"mt-2 text-xs text-green-500 font-medium",children:i.impact_estimate}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:n("h-full rounded-full transition-all",i.confidence>=80?"bg-green-500":i.confidence>=60?"bg-yellow-500":"bg-orange-500"),style:{width:`${i.confidence}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.confidence,"%"]})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:_?e.jsx(b,{className:"w-4 h-4 animate-spin text-muted-foreground"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(i.id),className:"p-1.5 rounded-lg text-muted-foreground hover:text-red-500 hover:bg-red-500/10 transition-colors",title:"Reject",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 rounded-lg text-muted-foreground hover:text-green-500 hover:bg-green-500/10 transition-colors",title:"Approve",children:e.jsx(le,{className:"w-4 h-4"})})]})})]})},i.id)})}),u.length>5&&e.jsx("div",{className:"p-3 border-t text-center",children:e.jsxs("button",{onClick:l,className:"text-sm text-primary hover:underline",children:["View ",u.length-5," more recommendations"]})})]})}function Be({activities:t,loading:o=!1,onViewAll:m}){const x=a=>{switch(a){case"action":return{icon:A,color:"text-blue-500",bgColor:"bg-blue-500/10"};case"alert":return{icon:I,color:"text-yellow-500",bgColor:"bg-yellow-500/10"};case"auth":return{icon:fe,color:"text-purple-500",bgColor:"bg-purple-500/10"};case"system":return{icon:q,color:"text-muted-foreground",bgColor:"bg-muted"};default:return{icon:v,color:"text-muted-foreground",bgColor:"bg-muted"}}},l=a=>{switch(a){case"success":return{icon:pe,color:"text-green-500"};case"warning":return{icon:w,color:"text-yellow-500"};case"error":return{icon:I,color:"text-red-500"};case"info":return{icon:be,color:"text-blue-500"};default:return null}},s=a=>{const c=new Date(a),d=new Date().getTime()-c.getTime(),u=Math.floor(d/6e4),i=Math.floor(d/36e5),h=Math.floor(d/864e5);return u<1?"Just now":u<60?`${u}m ago`:i<24?`${i}h ago`:h<7?`${h}d ago`:c.toLocaleDateString()};return o?e.jsx("div",{className:"bg-card border rounded-lg p-5 flex items-center justify-center min-h-[200px]",children:e.jsx(b,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"bg-card border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Recent Activity"})]}),m&&e.jsxs("button",{onClick:m,className:"text-sm text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1",children:["View all",e.jsx(F,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"divide-y max-h-[400px] overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(v,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No recent activity"})]}):t.map(a=>{const c=x(a.type),r=l(a.severity),d=c.icon,u=r==null?void 0:r.icon;return e.jsx("div",{className:"p-3 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:n("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",c.bgColor),children:e.jsx(d,{className:n("w-4 h-4",c.color)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium line-clamp-1",children:a.title}),u&&e.jsx(u,{className:n("w-3.5 h-3.5 flex-shrink-0",r==null?void 0:r.color)})]}),a.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:s(a.timestamp)}),a.entity_type&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Â·"}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:a.entity_type})]})]})]})]})},a.id)})})]})}function p({title:t,value:o,change:m,trend:x,icon:l,loading:s=!1,size:a="default",highlight:c=!1,positive:r=!1}){const d=a==="small",u=()=>{if(!x)return null;switch(x){case"up":return e.jsx(ee,{className:n("w-3 h-3",r?"text-green-500":"text-red-500")});case"down":return e.jsx(Z,{className:n("w-3 h-3",r?"text-red-500":"text-green-500")});case"stable":return e.jsx(X,{className:"w-3 h-3 text-muted-foreground"});default:return null}},i=()=>m==null||m===0?"text-muted-foreground":r?m>0?"text-green-500":"text-red-500":m>0?"text-red-500":"text-green-500";return s?e.jsx("div",{className:n("metric-card info flex items-center justify-center",d?"p-3":"p-5"),children:e.jsx(b,{className:"w-5 h-5 animate-spin text-muted-foreground"})}):e.jsx("div",{className:n("metric-card",r?"success":"info",d?"p-3":"p-5",c&&"premium"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:n("text-muted-foreground font-medium truncate",d?"text-xs":"text-sm"),children:t}),e.jsx("p",{className:n("font-bold mt-1 truncate",d?"text-lg":"text-2xl",c&&"text-gradient"),children:o}),m!=null&&e.jsxs("div",{className:n("flex items-center gap-1 mt-1",i()),children:[u(),e.jsxs("span",{className:n("font-medium",d?"text-xs":"text-sm"),children:[m>0?"+":"",m.toFixed(1),"%"]})]})]}),l&&e.jsx("div",{className:n("flex-shrink-0 rounded-lg bg-muted flex items-center justify-center",d?"w-8 h-8":"w-10 h-10",c&&"bg-primary/10 text-primary"),children:l})]})})}const U={google:{color:"text-[#4285F4]",bgColor:"bg-[#4285F4]/10",brandHex:"#4285F4",borderColor:"border-[#4285F4]/25",gradientBg:"linear-gradient(135deg, rgba(66,133,244,0.08), rgba(66,133,244,0.02))"},meta:{color:"text-[#0866FF]",bgColor:"bg-[#0866FF]/10",brandHex:"#0866FF",borderColor:"border-[#0866FF]/25",gradientBg:"linear-gradient(135deg, rgba(8,102,255,0.08), rgba(8,102,255,0.02))"},facebook:{color:"text-[#1877F2]",bgColor:"bg-[#1877F2]/10",brandHex:"#1877F2",borderColor:"border-[#1877F2]/25",gradientBg:"linear-gradient(135deg, rgba(24,119,242,0.08), rgba(24,119,242,0.02))"},tiktok:{color:"text-[#00F2EA]",bgColor:"bg-[#00F2EA]/10",brandHex:"#00F2EA",borderColor:"border-[#00F2EA]/25",gradientBg:"linear-gradient(135deg, rgba(0,242,234,0.08), rgba(0,242,234,0.02))"},snapchat:{color:"text-[#FFFC00]",bgColor:"bg-[#FFFC00]/10",brandHex:"#FFFC00",borderColor:"border-[#FFFC00]/25",gradientBg:"linear-gradient(135deg, rgba(255,252,0,0.08), rgba(255,252,0,0.02))"},mercedes:{color:"text-[#A0A0A0]",bgColor:"bg-[#A0A0A0]/10",brandHex:"#A0A0A0",borderColor:"border-[#A0A0A0]/25",gradientBg:"linear-gradient(135deg, rgba(160,160,160,0.08), rgba(160,160,160,0.02))"},default:{color:"text-muted-foreground",bgColor:"bg-muted",brandHex:"#6B7280",borderColor:"border-white/10",gradientBg:"linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02))"}};function Ee({platforms:t,loading:o=!1}){if(o)return e.jsx("div",{className:"bg-card border rounded-lg p-5 flex items-center justify-center min-h-[120px]",children:e.jsx(b,{className:"w-6 h-6 animate-spin text-muted-foreground"})});if(t.length===0)return e.jsxs("div",{className:"bg-card border rounded-lg p-5 text-center text-muted-foreground",children:[e.jsx(L,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No platforms connected"})]});const m=t.reduce((r,d)=>r+d.spend,0),x=t.reduce((r,d)=>r+d.revenue,0),l=r=>{switch(r){case"connected":return e.jsx(W,{className:"w-4 h-4 text-[#00c7be]"});case"error":return e.jsx(w,{className:"w-4 h-4 text-yellow-500"});case"disconnected":return e.jsx(G,{className:"w-4 h-4 text-[#ff6b6b]"});default:return null}},s=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),a=r=>r===null?"-":`${r.toFixed(2)}x`,c=r=>{const d=r.toLowerCase();return U[d]||U.default};return e.jsxs("div",{className:"bg-card border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"font-semibold",children:"Platform Performance"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Total: ",s(m)," spend"]}),e.jsxs("span",{className:"text-[#00c7be]",children:[s(x)," revenue"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-4",children:t.map(r=>{const d=c(r.platform),u=m>0?r.spend/m*100:0;return e.jsxs("div",{className:n("rounded-lg p-4 relative overflow-hidden backdrop-blur-md","border transition-all duration-200",d.borderColor),style:{background:d.gradientBg,boxShadow:"inset 0 1px 1px rgba(255,255,255,0.08), 0 2px 12px rgba(0,0,0,0.15)"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] rounded-t-lg",style:{background:d.brandHex}}),e.jsx("div",{className:n("absolute bottom-0 left-0 h-1 transition-all",d.bgColor),style:{width:`${u}%`,backgroundColor:"currentColor"}}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:n("w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold",d.bgColor,d.color),children:r.platform.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium capitalize",children:r.platform})]}),l(r.status)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Spend"}),e.jsx("span",{className:"font-medium",children:s(r.spend)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Revenue"}),e.jsx("span",{className:"font-medium text-[#00c7be]",children:s(r.revenue)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"ROAS"}),e.jsx("span",{className:n("font-medium",r.roas!==null&&r.roas>=3?"text-[#00c7be]":r.roas!==null&&r.roas>=1?"text-yellow-500":"text-muted-foreground"),children:a(r.roas)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Campaigns"}),e.jsx("span",{className:"font-medium",children:r.campaigns_count})]})]}),r.last_synced_at&&e.jsxs("div",{className:"mt-3 pt-2 border-t text-xs text-muted-foreground",children:["Synced ",new Date(r.last_synced_at).toLocaleTimeString()]})]},r.platform)})})})]})}function Ke({campaigns:t,loading:o=!1,onViewAll:m}){const x=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),l=r=>r===null?"-":`${r.toFixed(2)}x`,s=r=>{switch(r){case"up":return e.jsx(ee,{className:"w-3 h-3 text-green-500"});case"down":return e.jsx(Z,{className:"w-3 h-3 text-red-500"});case"stable":return e.jsx(X,{className:"w-3 h-3 text-muted-foreground"});default:return null}},a=r=>r===null?"text-muted-foreground":r>=80?"text-green-500":r>=60?"text-yellow-500":"text-red-500",c=r=>{const d=r.toLowerCase();return d==="active"||d==="enabled"?e.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-500/10 text-green-500 rounded-full font-medium",children:"Active"}):d==="paused"?e.jsx("span",{className:"text-xs px-2 py-0.5 bg-yellow-500/10 text-yellow-500 rounded-full font-medium",children:"Paused"}):e.jsx("span",{className:"text-xs px-2 py-0.5 bg-muted text-muted-foreground rounded-full font-medium",children:r})};return o?e.jsx("div",{className:"bg-card border rounded-lg p-5 flex items-center justify-center min-h-[300px]",children:e.jsx(b,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"bg-card border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Top Campaigns"})]}),m&&e.jsxs("button",{onClick:m,className:"text-sm text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1",children:["View all",e.jsx(F,{className:"w-3 h-3"})]})]}),t.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(L,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No campaigns to display"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-left text-xs text-muted-foreground",children:[e.jsx("th",{className:"p-3 font-medium",children:"Campaign"}),e.jsx("th",{className:"p-3 font-medium",children:"Platform"}),e.jsx("th",{className:"p-3 font-medium",children:"Status"}),e.jsx("th",{className:"p-3 font-medium text-right",children:"Spend"}),e.jsx("th",{className:"p-3 font-medium text-right",children:"Revenue"}),e.jsx("th",{className:"p-3 font-medium text-right",children:"ROAS"}),e.jsx("th",{className:"p-3 font-medium text-right",children:"Conv."}),e.jsx("th",{className:"p-3 font-medium text-center",children:"Score"})]})}),e.jsx("tbody",{className:"divide-y",children:t.map(r=>e.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s(r.trend),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium truncate max-w-[200px]",title:r.name,children:r.name}),r.recommendation&&e.jsx("div",{className:"text-xs text-primary truncate max-w-[200px]",children:r.recommendation})]})]})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-sm capitalize",children:r.platform})}),e.jsx("td",{className:"p-3",children:c(r.status)}),e.jsx("td",{className:"p-3 text-right text-sm font-medium",children:x(r.spend)}),e.jsx("td",{className:"p-3 text-right text-sm font-medium text-green-500",children:x(r.revenue)}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:n("text-sm font-medium",r.roas!==null&&r.roas>=3?"text-green-500":r.roas!==null&&r.roas>=1?"text-yellow-500":"text-muted-foreground"),children:l(r.roas)})}),e.jsx("td",{className:"p-3 text-right text-sm font-medium",children:r.conversions.toLocaleString()}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:n("text-sm font-bold",a(r.scaling_score)),children:r.scaling_score!==null?r.scaling_score:"-"})})]},r.id))})]})})]})}const Ue={plus:je,link:ie,sparkles:T,zap:A,settings:q,refresh:H,bell:de,alert:I,chart:L};function Qe({actions:t}){const o=V();if(t.length===0)return null;const m=l=>{l.action.startsWith("/")?o(l.action):l.action.startsWith("http")?window.open(l.action,"_blank"):window.dispatchEvent(new CustomEvent("quick-action",{detail:l}))},x=l=>Ue[l.toLowerCase()]||A;return e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(l=>{const s=x(l.icon);return e.jsxs("button",{onClick:()=>m(l),className:n("inline-flex items-center gap-2 px-4 py-2 rounded-lg","bg-card border hover:bg-muted transition-colors","text-sm font-medium"),children:[e.jsx(s,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:l.label}),l.count!==null&&l.count>0&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-primary/10 text-primary rounded-full font-medium",children:l.count})]},l.id)})})}const Q=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"}];function xs(){var E;const t=V(),[o,m]=N.useState("7d"),[x,l]=N.useState(!1),{data:s,isLoading:a,refetch:c}=Le(o),{data:r,isLoading:d}=De({period:o,page_size:5,sort_by:"spend",sort_order:"desc"}),{data:u,isLoading:i}=Re({limit:5}),{data:h,isLoading:D}=Ie({limit:10}),{data:_,isLoading:R}=qe(),{data:O}=Pe(),$=Me(),z=Te(),se=N.useCallback(()=>{c()},[c]),te=N.useCallback(g=>{m(g),l(!1)},[]),re=N.useCallback(async g=>{await $.mutateAsync(g)},[$]),ae=N.useCallback(async g=>{await z.mutateAsync(g)},[z]),B=a||R;return s&&!s.onboarding_complete?e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{className:"w-8 h-8 text-primary"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Complete Your Setup"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Let's get your account set up so you can start optimizing your campaigns with Stratum AI."}),e.jsxs("button",{onClick:()=>t("/onboarding"),className:"inline-flex items-center px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:["Start Setup",e.jsx(F,{className:"w-4 h-4 ml-2"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Dashboard"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:[(s==null?void 0:s.period_label)||"Last 7 Days"," Overview"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!x),className:"inline-flex items-center px-4 py-2 border rounded-lg text-sm font-medium bg-background hover:bg-muted transition-colors",children:[((E=Q.find(g=>g.value===o))==null?void 0:E.label)||"Last 7 Days",e.jsx(me,{className:"w-4 h-4 ml-2"})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-card border rounded-lg shadow-lg z-20 py-1",children:Q.map(g=>e.jsx("button",{onClick:()=>te(g.value),className:n("w-full px-4 py-2 text-left text-sm hover:bg-muted transition-colors",o===g.value&&"bg-muted font-medium"),children:g.label},g.value))})]})]}),e.jsxs("button",{onClick:se,disabled:B,className:"inline-flex items-center px-4 py-2 border rounded-lg text-sm font-medium bg-background hover:bg-muted transition-colors disabled:opacity-50",children:[B?e.jsx(b,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(H,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),O&&e.jsx(Qe,{actions:O.actions}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx($e,{signalHealth:_,loading:R})}),e.jsx("div",{children:e.jsx(Oe,{signalHealth:_,loading:R})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(p,{title:"Total Spend",value:(s==null?void 0:s.metrics.spend.formatted)||"$0",change:s==null?void 0:s.metrics.spend.change_percent,trend:s==null?void 0:s.metrics.spend.trend,icon:e.jsx(K,{className:"w-5 h-5"}),loading:a}),e.jsx(p,{title:"Revenue",value:(s==null?void 0:s.metrics.revenue.formatted)||"$0",change:s==null?void 0:s.metrics.revenue.change_percent,trend:s==null?void 0:s.metrics.revenue.trend,icon:e.jsx(P,{className:"w-5 h-5"}),loading:a,positive:!0}),e.jsx(p,{title:"ROAS",value:(s==null?void 0:s.metrics.roas.formatted)||"0x",change:s==null?void 0:s.metrics.roas.change_percent,trend:s==null?void 0:s.metrics.roas.trend,icon:e.jsx(xe,{className:"w-5 h-5"}),loading:a,highlight:((s==null?void 0:s.metrics.roas.value)??0)>=3,positive:!0}),e.jsx(p,{title:"Conversions",value:(s==null?void 0:s.metrics.conversions.formatted)||"0",change:s==null?void 0:s.metrics.conversions.change_percent,trend:s==null?void 0:s.metrics.conversions.trend,icon:e.jsx(M,{className:"w-5 h-5"}),loading:a,positive:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsx(p,{title:"CPA",value:(s==null?void 0:s.metrics.cpa.formatted)||"$0",change:s==null?void 0:s.metrics.cpa.change_percent,trend:s==null?void 0:s.metrics.cpa.trend,icon:e.jsx(K,{className:"w-4 h-4"}),size:"small",loading:a}),e.jsx(p,{title:"CTR",value:(s==null?void 0:s.metrics.ctr.formatted)||"0%",change:s==null?void 0:s.metrics.ctr.change_percent,trend:s==null?void 0:s.metrics.ctr.trend,icon:e.jsx(M,{className:"w-4 h-4"}),size:"small",loading:a}),e.jsx(p,{title:"Impressions",value:(s==null?void 0:s.metrics.impressions.formatted)||"0",icon:e.jsx(L,{className:"w-4 h-4"}),size:"small",loading:a}),e.jsx(p,{title:"Clicks",value:(s==null?void 0:s.metrics.clicks.formatted)||"0",icon:e.jsx(M,{className:"w-4 h-4"}),size:"small",loading:a})]}),e.jsx(Ee,{platforms:(s==null?void 0:s.platforms)||[],loading:a}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ke,{campaigns:(r==null?void 0:r.campaigns)||[],loading:d,onViewAll:()=>t("/dashboard/campaigns")})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ze,{recommendations:(u==null?void 0:u.recommendations)||[],loading:i,onApprove:re,onReject:ae,onViewAll:()=>t("/dashboard/recommendations")}),e.jsx(Be,{activities:(h==null?void 0:h.activities)||[],loading:D,onViewAll:()=>t("/dashboard/activity")})]})]})]})}export{xs as default};
//# sourceMappingURL=UnifiedDashboard-3JLT0PSb.js.map
