import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as a}from"./vendor-react-Dz7uKsMg.js";import{i as Fe,Q as Ve,t as ie,aj as Be,c as r,x as ne,E as g,ak as Ue,N as C,A as le,Z as He,S as Ge,y as f,w as de,D as $e,a3 as ze}from"./index-BQex3859.js";import{R as h}from"./refresh-cw-DLOeozaH.js";import{C as ce}from"./circle-alert-MlATZigW.js";import{L as Oe}from"./loader-circle-CJwg01sb.js";import{T as b}from"./trending-down-75FD7zon.js";import{S as Ke}from"./server-DcIhoF9q.js";import{I as oe}from"./info-Bj1e8ZpJ.js";import{E as We}from"./eye-Dm_U4nfe.js";import{S as Ze}from"./shopping-cart-ChQsh5PH.js";import{C as Xe}from"./credit-card-B3o2lOHF.js";import{P as Je}from"./package-W5kmgQny.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],et=Fe("lock",Ye),tt=[{id:"overall_emq",label:"Overall Match Quality",value:78.5,unit:"%",trend:3.2,status:"warning",description:"Proxy EMQ across all platforms"},{id:"purchase_emq",label:"Purchase EMQ",value:82.3,unit:"%",trend:5.1,status:"good",description:"Match quality for purchase events"},{id:"server_coverage",label:"Server Coverage",value:94.7,unit:"%",trend:2.8,status:"good",description:"Events sent via server-side API"},{id:"dedup_rate",label:"Deduplication Rate",value:98.2,unit:"%",trend:.5,status:"good",description:"Successfully deduplicated events"},{id:"param_completeness",label:"Parameter Completeness",value:71.4,unit:"%",trend:-2.1,status:"warning",description:"Required parameters present"},{id:"pii_compliance",label:"PII Violations",value:3,unit:"",trend:-2,status:"warning",description:"Active compliance issues"}],st=[{platform:"meta",overallEMQ:82,emailMatch:89,phoneMatch:76,fbpMatch:95,fbcMatch:88,ipMatch:92,trend:4.2},{platform:"google",overallEMQ:79,emailMatch:85,phoneMatch:72,fbpMatch:0,fbcMatch:0,ipMatch:94,trend:2.1},{platform:"tiktok",overallEMQ:74,emailMatch:81,phoneMatch:68,fbpMatch:0,fbcMatch:0,ipMatch:89,trend:-1.5},{platform:"snapchat",overallEMQ:71,emailMatch:78,phoneMatch:64,fbpMatch:0,fbcMatch:0,ipMatch:86,trend:.8}],at=[{event:"Purchase",emqScore:82.3,volume:12450,trend:5.1,worstParameter:"phone"},{event:"AddToCart",emqScore:76.8,volume:45230,trend:2.3,worstParameter:"external_id"},{event:"BeginCheckout",emqScore:79.1,volume:23100,trend:1.8,worstParameter:"phone"},{event:"ViewContent",emqScore:71.2,volume:156780,trend:-.5,worstParameter:"email"},{event:"InitiateCheckout",emqScore:77.5,volume:28900,trend:3.2,worstParameter:"city"},{event:"Lead",emqScore:68.9,volume:8920,trend:-2.1,worstParameter:"phone"}],me=[{parameter:"email",meta:89,google:85,tiktok:81,snapchat:78,required:!0},{parameter:"phone",meta:76,google:72,tiktok:68,snapchat:64,required:!0},{parameter:"external_id",meta:92,google:88,tiktok:75,snapchat:71,required:!0},{parameter:"ip_address",meta:94,google:96,tiktok:91,snapchat:88,required:!1},{parameter:"user_agent",meta:97,google:98,tiktok:95,snapchat:93,required:!1},{parameter:"fbp",meta:95,google:0,tiktok:0,snapchat:0,required:!1},{parameter:"fbc",meta:88,google:0,tiktok:0,snapchat:0,required:!1},{parameter:"city",meta:72,google:68,tiktok:65,snapchat:61,required:!1},{parameter:"country",meta:96,google:94,tiktok:92,snapchat:89,required:!1}],rt=[{platform:"meta",serverPercent:96,browserPercent:4,trend:2.1},{platform:"google",serverPercent:94,browserPercent:6,trend:1.8},{platform:"tiktok",serverPercent:91,browserPercent:9,trend:3.5},{platform:"snapchat",serverPercent:88,browserPercent:12,trend:2.2}],it=[{type:"duplicate",count:1245,severity:"warning",description:"Duplicate events detected (same event_id)"},{type:"missing_id",count:3420,severity:"critical",description:"Events missing event_id parameter"},{type:"ordering",count:567,severity:"info",description:"Events received out of sequence"},{type:"timestamp",count:234,severity:"warning",description:"Events with future timestamps"}],nt=[{field:"email",violationType:"Unhashed PII",count:12,lastSeen:"2 hours ago"},{field:"phone",violationType:"Invalid format",count:45,lastSeen:"30 mins ago"},{field:"ip_address",violationType:"Internal IP leaked",count:3,lastSeen:"1 day ago"}],xe=[{name:"View Content",icon:We,emqScore:71.2,volume:156780,dropoff:0},{name:"Add to Cart",icon:Ze,emqScore:76.8,volume:45230,dropoff:71.2},{name:"Begin Checkout",icon:Xe,emqScore:79.1,volume:23100,dropoff:48.9},{name:"Purchase",icon:Je,emqScore:82.3,volume:12450,dropoff:46.1}],lt=[{id:"1",severity:"critical",title:"Missing event_id on 3,420 events",description:"Events without event_id cannot be deduplicated, leading to inflated conversions",timestamp:"15 mins ago",platform:"meta"},{id:"2",severity:"warning",title:"Phone match rate dropped below 70%",description:"TikTok phone match rate decreased by 5% in the last 24 hours",timestamp:"2 hours ago",platform:"tiktok"},{id:"3",severity:"warning",title:"Unhashed email detected",description:"12 events contained plaintext email addresses",timestamp:"4 hours ago"}],dt=[{id:"1",impact:"high",title:"Add event_id to all server events",description:"Missing event_id prevents deduplication and inflates conversion counts",owner:"Engineering",fixHint:"Generate UUID for each event before sending to CAPI"},{id:"2",impact:"high",title:"Improve phone number collection",description:"Phone match rate is lowest parameter at 68% average",owner:"Product",fixHint:"Add phone field to checkout flow with format validation"},{id:"3",impact:"medium",title:"Implement fbp/fbc cookie capture",description:"Meta pixel cookies improve match quality by 15-20%",owner:"Engineering",fixHint:"Read _fbp and _fbc cookies server-side and include in CAPI calls"},{id:"4",impact:"medium",title:"Fix timestamp handling",description:"234 events have future timestamps causing attribution issues",owner:"Engineering",fixHint:"Ensure event_time uses Unix timestamp in seconds, not milliseconds"}];function Rt(){const{t:_}=Ve(),[v,I]=a.useState(!0),[he,pe]=a.useState(new Date),[A,j]=a.useState(null),[E,ue]=a.useState("7d"),[n,ge]=a.useState("all"),[N,fe]=a.useState("all"),[be,ve]=a.useState("prod"),[je,Ne]=a.useState(tt),[q,ye]=a.useState(st),[R,ct]=a.useState(at),[ot,mt]=a.useState(me),[Q,xt]=a.useState(rt),[we,ht]=a.useState(it),[Se,pt]=a.useState(nt),[ke,Me]=a.useState(lt),[Pe,Ce]=a.useState(dt),[y,L]=a.useState([]),[w,S]=a.useState([]),[k,T]=a.useState([]),[M,D]=a.useState([]),[F,V]=a.useState(null),[P,p]=a.useState(null),[B,U]=a.useState(null),[H,G]=a.useState(null);a.useEffect(()=>{$()},[n,E]);const $=async()=>{var t,s,m,J,Y;I(!0),j(null);try{const x=n!=="all"?n:void 0,c=(t=(await ie.get("/capi/quality/report",{params:{platforms:x}})).data)==null?void 0:t.data;if(c&&c.overall_score>0){if(Ne(l=>l.map(i=>i.id==="overall_emq"?{...i,value:c.overall_score,trend:c.trend==="improving"?3.2:c.trend==="declining"?-2.1:0}:i)),c.platform_scores){const l=Object.entries(c.platform_scores).map(([i,d])=>{var ee,te,se,ae,re;return{platform:i,overallEMQ:d.score,emailMatch:(ee=d.fields_present)!=null&&ee.includes("email")?85:0,phoneMatch:(te=d.fields_present)!=null&&te.includes("phone")?70:0,fbpMatch:(se=d.fields_present)!=null&&se.includes("fbp")?90:0,fbcMatch:(ae=d.fields_present)!=null&&ae.includes("fbc")?85:0,ipMatch:(re=d.fields_present)!=null&&re.includes("ip_address")?92:0,trend:d.potential_roas_lift||0}});l.length>0&&ye(l)}c.top_recommendations&&c.top_recommendations.length>0&&Ce(c.top_recommendations.map((l,i)=>({id:String(i+1),impact:l.severity==="critical"?"high":l.severity==="high"?"medium":"low",title:l.action||l.field||"Recommendation",description:l.how_to_fix||l.impact||"Identified from data quality analysis",owner:"Engineering",fixHint:l.how_to_fix||"See CAPI documentation for implementation details"})))}const u=(s=(await ie.get("/capi/quality/live",{params:{platform:n!=="all"?n:"meta"}})).data)==null?void 0:s.data;if(u&&u.top_gaps&&u.top_gaps.length>0){const l=u.top_gaps.map((i,d)=>({id:`live-${d}`,severity:i.severity==="critical"?"critical":i.severity==="high"?"warning":"info",title:i.field?`Low ${i.field} match rate`:"Data quality issue",description:i.recommendation||"Review data quality settings",timestamp:"Live",platform:n!=="all"?n:void 0}));Me(i=>[...l,...i.filter(d=>!d.id.startsWith("live-"))])}}catch(x){console.error("Failed to fetch quality data:",x),((m=x.response)==null?void 0:m.status)!==404&&j(((Y=(J=x.response)==null?void 0:J.data)==null?void 0:Y.detail)||"Failed to load quality data")}finally{I(!1),pe(new Date)}},z=n==="all"?q:q.filter(t=>t.platform===n),O=N==="all"?R:R.filter(t=>{const s={purchase:"Purchase",add_to_cart:"AddToCart",begin_checkout:"BeginCheckout",view_content:"ViewContent",lead:"Lead"};return t.event===s[N]}),K=n==="all"?Q:Q.filter(t=>t.platform===n),W=ke.filter(t=>!(w.includes(t.id)||n!=="all"&&t.platform&&t.platform!==n)),Z=we.filter(t=>!y.includes(t.type)),_e=async()=>{L([]),S([]),T([]),D([]),await $()},Ie=t=>{V(t),setTimeout(()=>{L(s=>[...s,t]),V(null)},1500)},Ae=t=>{p(t),setTimeout(()=>{S(s=>[...s,t]),p(null)},1e3)},Ee=t=>{p(t),setTimeout(()=>{S(s=>[...s,t]),p(null)},2e3)},qe=t=>{U(t),setTimeout(()=>{T(s=>[...s,t]),U(null)},1500)},Re=t=>{G(t),setTimeout(()=>{D(s=>[...s,t]),G(null)},2e3)},Qe=t=>{switch(t){case"good":return"text-green-500";case"warning":return"text-amber-500";case"critical":return"text-red-500"}},Le=t=>{switch(t){case"good":return"bg-green-500/10 border-green-500/20";case"warning":return"bg-amber-500/10 border-amber-500/20";case"critical":return"bg-red-500/10 border-red-500/20"}},X=t=>{switch(t){case"critical":return e.jsx(ne,{className:"w-4 h-4 text-red-500"});case"warning":return e.jsx(de,{className:"w-4 h-4 text-amber-500"});case"info":return e.jsx(oe,{className:"w-4 h-4 text-blue-500"})}},Te=t=>{const s={high:"bg-red-500/10 text-red-500",medium:"bg-amber-500/10 text-amber-500",low:"bg-blue-500/10 text-blue-500"};return e.jsx("span",{className:r("px-2 py-0.5 rounded-full text-xs font-medium",s[t]),children:t.toUpperCase()})},De=t=>t>=90?"bg-green-500":t>=75?"bg-green-400":t>=60?"bg-amber-400":t>=40?"bg-amber-500":t>0?"bg-red-400":"bg-muted",o=t=>t>=90?"text-green-600 dark:text-green-400":t>=75?"text-green-500":t>=60?"text-amber-500":t>=40?"text-amber-600":t>0?"text-red-500":"text-muted-foreground";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Be,{className:"w-7 h-7 text-primary"}),_("dataQuality.title","Data Quality Dashboard"),e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"— EMQ"})]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:_("dataQuality.subtitle","Monitor Event Match Quality across all platforms")})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:E,onChange:t=>ue(t.target.value),className:"px-3 py-2 rounded-lg border bg-background text-sm focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"24h",children:"Last 24 hours"}),e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsxs("select",{value:n,onChange:t=>ge(t.target.value),className:"px-3 py-2 rounded-lg border bg-background text-sm focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"all",children:"All Platforms"}),e.jsx("option",{value:"meta",children:"Meta"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"tiktok",children:"TikTok"}),e.jsx("option",{value:"snapchat",children:"Snapchat"})]}),e.jsxs("select",{value:N,onChange:t=>fe(t.target.value),className:"px-3 py-2 rounded-lg border bg-background text-sm focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"begin_checkout",children:"Begin Checkout"}),e.jsx("option",{value:"view_content",children:"View Content"}),e.jsx("option",{value:"lead",children:"Lead"})]}),e.jsxs("select",{value:be,onChange:t=>ve(t.target.value),className:"px-3 py-2 rounded-lg border bg-background text-sm focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"prod",children:"Production"}),e.jsx("option",{value:"stage",children:"Staging"})]}),e.jsxs("button",{onClick:_e,disabled:v,className:"flex items-center gap-2 px-3 py-2 rounded-lg border hover:bg-muted transition-colors",children:[e.jsx(h,{className:r("w-4 h-4",v&&"animate-spin")}),e.jsx("span",{className:"text-sm",children:"Refresh"})]})]})]}),A&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(ce,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700 dark:text-red-400",children:A}),e.jsx("button",{onClick:()=>j(null),className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx(ne,{className:"w-5 h-5"})})]}),v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Oe,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading data quality metrics..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:je.map(t=>e.jsxs("div",{className:r("p-4 rounded-xl border transition-all hover:shadow-md",Le(t.status)),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:t.label}),t.trend!==0&&e.jsxs("div",{className:r("flex items-center text-xs",t.trend>0?"text-green-500":"text-red-500"),children:[t.trend>0?e.jsx(g,{className:"w-3 h-3"}):e.jsx(b,{className:"w-3 h-3"}),e.jsxs("span",{className:"ml-0.5",children:[Math.abs(t.trend),t.id!=="pii_compliance"&&"%"]})]})]}),e.jsxs("div",{className:r("text-2xl font-bold",Qe(t.status)),children:[t.value,t.unit]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description})]},t.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-primary"}),"EMQ by Platform"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 font-medium",children:"Platform"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"EMQ"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"Email"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"Phone"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"IP"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"Trend"})]})}),e.jsx("tbody",{className:"divide-y",children:z.length>0?z.map(t=>e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:C(t.platform)},children:t.platform.charAt(0).toUpperCase()}),e.jsx("span",{className:"capitalize",children:t.platform})]})}),e.jsxs("td",{className:r("text-right font-semibold",o(t.overallEMQ)),children:[t.overallEMQ,"%"]}),e.jsxs("td",{className:r("text-right",o(t.emailMatch)),children:[t.emailMatch,"%"]}),e.jsxs("td",{className:r("text-right",o(t.phoneMatch)),children:[t.phoneMatch,"%"]}),e.jsxs("td",{className:r("text-right",o(t.ipMatch)),children:[t.ipMatch,"%"]}),e.jsx("td",{className:"text-right",children:e.jsxs("span",{className:r("flex items-center justify-end gap-1",t.trend>=0?"text-green-500":"text-red-500"),children:[t.trend>=0?e.jsx(g,{className:"w-3 h-3"}):e.jsx(b,{className:"w-3 h-3"}),Math.abs(t.trend),"%"]})})]},t.platform)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No data for selected platform"})})})]})})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-primary"}),"EMQ by Event Type"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 font-medium",children:"Event"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"EMQ"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"Volume"}),e.jsx("th",{className:"text-left py-2 font-medium",children:"Worst Param"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"Trend"})]})}),e.jsx("tbody",{className:"divide-y",children:O.length>0?O.map(t=>e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsx("td",{className:"py-3 font-medium",children:t.event}),e.jsxs("td",{className:r("text-right font-semibold",o(t.emqScore)),children:[t.emqScore,"%"]}),e.jsx("td",{className:"text-right text-muted-foreground",children:t.volume.toLocaleString()}),e.jsx("td",{className:"text-left",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-red-500/10 text-red-500 text-xs",children:t.worstParameter})}),e.jsx("td",{className:"text-right",children:e.jsxs("span",{className:r("flex items-center justify-end gap-1",t.trend>=0?"text-green-500":"text-red-500"),children:[t.trend>=0?e.jsx(g,{className:"w-3 h-3"}):e.jsx(b,{className:"w-3 h-3"}),Math.abs(t.trend),"%"]})})]},t.event)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-muted-foreground",children:"No data for selected event type"})})})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-primary"}),"Required Parameter Coverage"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 font-medium",children:"Parameter"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"Meta"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"Google"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"TikTok"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"Snap"})]})}),e.jsx("tbody",{className:"divide-y",children:me.map(t=>e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsx("td",{className:"py-2",children:e.jsxs("span",{className:"flex items-center gap-2",children:[t.parameter,t.required&&e.jsx("span",{className:"text-xs text-red-500",children:"*"})]})}),[t.meta,t.google,t.tiktok,t.snapchat].map((s,m)=>e.jsx("td",{className:"text-center py-2",children:s>0?e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:r("w-10 h-6 rounded flex items-center justify-center text-xs font-medium text-white",De(s)),children:[s,"%"]})}):e.jsx("span",{className:"text-muted-foreground",children:"—"})},m))]},t.parameter))})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"* Required parameter"})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-primary"}),"Server vs Browser Split"]}),e.jsx("div",{className:"space-y-4",children:K.length>0?K.map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:C(t.platform)},children:t.platform.charAt(0).toUpperCase()}),e.jsx("span",{className:"capitalize text-sm font-medium",children:t.platform})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-500 font-medium",children:[t.serverPercent,"% Server"]}),e.jsx("span",{className:"text-muted-foreground",children:"|"}),e.jsxs("span",{className:"text-amber-500",children:[t.browserPercent,"% Browser"]}),e.jsxs("span",{className:r("flex items-center gap-0.5 text-xs",t.trend>=0?"text-green-500":"text-red-500"),children:[t.trend>=0?e.jsx(g,{className:"w-3 h-3"}):e.jsx(b,{className:"w-3 h-3"}),Math.abs(t.trend),"%"]})]})]}),e.jsxs("div",{className:"h-2 bg-muted rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-green-500 transition-all",style:{width:`${t.serverPercent}%`}}),e.jsx("div",{className:"h-full bg-amber-500 transition-all",style:{width:`${t.browserPercent}%`}})]})]},t.platform)):e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No data for selected platform"})}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{children:"Server-side (CAPI)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-amber-500"}),e.jsx("span",{children:"Browser Pixel"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-primary"}),"Data Integrity Issues",y.length>0&&e.jsxs("span",{className:"text-xs font-normal text-green-500 ml-2",children:["(",y.length," resolved)"]})]}),e.jsx("div",{className:"space-y-3",children:Z.length>0?Z.map((t,s)=>e.jsxs("div",{className:r("flex items-start gap-3 p-3 rounded-lg border",t.severity==="critical"&&"bg-red-500/5 border-red-500/20",t.severity==="warning"&&"bg-amber-500/5 border-amber-500/20",t.severity==="info"&&"bg-blue-500/5 border-blue-500/20"),children:[X(t.severity),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:t.description}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:r("font-bold",t.severity==="critical"&&"text-red-500",t.severity==="warning"&&"text-amber-500",t.severity==="info"&&"text-blue-500"),children:t.count.toLocaleString()}),e.jsx("button",{onClick:()=>Ie(t.type),disabled:F===t.type,className:r("px-3 py-1 rounded-md text-xs font-medium transition-colors",t.severity==="critical"?"bg-red-500/10 text-red-600 hover:bg-red-500/20 disabled:bg-red-500/5":t.severity==="warning"?"bg-amber-500/10 text-amber-600 hover:bg-amber-500/20 disabled:bg-amber-500/5":"bg-blue-500/10 text-blue-600 hover:bg-blue-500/20 disabled:bg-blue-500/5"),children:F===t.type?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3 animate-spin"}),"Resolving..."]}):"Auto-Resolve"})]})]})})]},s)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(f,{className:"w-12 h-12 text-green-500 mb-2"}),e.jsx("p",{className:"font-medium text-green-500",children:"All Issues Resolved"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending data integrity issues"})]})})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-primary"}),"PII Compliance Monitor",k.length>0&&e.jsxs("span",{className:"text-xs font-normal text-green-500 ml-2",children:["(",k.length," resolved)"]})]}),(()=>{const t=Se.filter(s=>!k.includes(s.field));return t.length>0?e.jsxs("div",{className:"space-y-3",children:[t.map((s,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-500/5 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"w-4 h-4 text-red-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:[s.field,": ",s.violationType]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last seen: ",s.lastSeen]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-red-500 font-bold",children:s.count}),e.jsx("button",{onClick:()=>qe(s.field),disabled:B===s.field,className:"px-3 py-1 rounded-md text-xs font-medium bg-red-500 text-white hover:bg-red-600 disabled:bg-red-400 transition-colors",children:B===s.field?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3 animate-spin"}),"Fixing..."]}):"Auto-Fix"})]})]},m)),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),"Raw PII values are never displayed for compliance"]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(f,{className:"w-12 h-12 text-green-500 mb-2"}),e.jsx("p",{className:"font-medium text-green-500",children:"All Clear"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No PII violations detected"})]})})()]})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-6 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-primary"}),"Funnel Quality View"]}),e.jsx("div",{className:"flex items-center justify-between gap-4 overflow-x-auto pb-4",children:xe.map((t,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center min-w-[140px]",children:[e.jsx("div",{className:r("w-16 h-16 rounded-xl flex items-center justify-center mb-3 transition-all",t.emqScore>=80?"bg-green-500/10 text-green-500":t.emqScore>=70?"bg-amber-500/10 text-amber-500":"bg-red-500/10 text-red-500"),children:e.jsx(t.icon,{className:"w-8 h-8"})}),e.jsx("span",{className:"font-medium text-sm mb-1",children:t.name}),e.jsxs("span",{className:r("text-2xl font-bold",o(t.emqScore)),children:[t.emqScore,"%"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.volume.toLocaleString()," events"]}),s>0&&e.jsxs("span",{className:"text-xs text-red-500 mt-1",children:["-",t.dropoff.toFixed(1),"% dropoff"]})]}),s<xe.length-1&&e.jsx($e,{className:"w-6 h-6 text-muted-foreground mx-4 flex-shrink-0"})]},t.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-primary"}),"Alerts",w.length>0&&e.jsxs("span",{className:"text-xs font-normal text-green-500 ml-2",children:["(",w.length," dismissed)"]})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:W.length>0?W.map(t=>e.jsx("div",{className:r("p-4 rounded-lg border",t.severity==="critical"&&"bg-red-500/5 border-red-500/20",t.severity==="warning"&&"bg-amber-500/5 border-amber-500/20",t.severity==="info"&&"bg-blue-500/5 border-blue-500/20"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[X(t.severity),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:t.title}),t.platform&&e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-white text-xs font-bold flex-shrink-0",style:{backgroundColor:C(t.platform)},children:t.platform.charAt(0).toUpperCase()})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:t.timestamp}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.severity!=="info"&&e.jsx("button",{onClick:()=>Ee(t.id),disabled:P===t.id,className:r("px-3 py-1 rounded-md text-xs font-medium transition-colors",t.severity==="critical"?"bg-red-500 text-white hover:bg-red-600 disabled:bg-red-400":"bg-amber-500 text-white hover:bg-amber-600 disabled:bg-amber-400"),children:P===t.id?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3 animate-spin"}),"Fixing..."]}):"Auto-Fix"}),e.jsx("button",{onClick:()=>Ae(t.id),disabled:P===t.id,className:"px-3 py-1 rounded-md text-xs font-medium bg-muted hover:bg-muted/80 transition-colors disabled:opacity-50",children:"Dismiss"})]})]})]})]})},t.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(f,{className:"w-12 h-12 text-green-500 mb-2"}),e.jsx("p",{className:"font-medium text-green-500",children:"No Active Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All alerts have been addressed"})]})})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5 text-primary"}),"Recommendations",M.length>0&&e.jsxs("span",{className:"text-xs font-normal text-green-500 ml-2",children:["(",M.length," applied)"]})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:(()=>{const t=Pe.filter(s=>!M.includes(s.id));return t.length>0?t.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),Te(s.impact)]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:s.description}),e.jsx("div",{className:"flex items-center justify-between text-xs",children:e.jsxs("span",{className:"text-muted-foreground",children:["Owner: ",e.jsx("span",{className:"font-medium text-foreground",children:s.owner})]})}),e.jsx("div",{className:"mt-2 p-2 rounded bg-primary/5 border border-primary/10",children:e.jsxs("p",{className:"text-xs text-primary font-medium",children:["Fix: ",s.fixHint]})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:()=>Re(s.id),disabled:H===s.id,className:r("px-4 py-1.5 rounded-md text-xs font-medium transition-colors",s.impact==="high"?"bg-red-500 text-white hover:bg-red-600 disabled:bg-red-400":s.impact==="medium"?"bg-amber-500 text-white hover:bg-amber-600 disabled:bg-amber-400":"bg-blue-500 text-white hover:bg-blue-600 disabled:bg-blue-400"),children:H===s.id?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3 animate-spin"}),"Applying..."]}):"Apply Fix"})})]},s.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(f,{className:"w-12 h-12 text-green-500 mb-2"}),e.jsx("p",{className:"font-medium text-green-500",children:"All Recommendations Applied"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Great job! All fixes have been implemented"})]})})()})]})]}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:["Last updated: ",he.toLocaleString()]})]})]})}export{Rt as DataQualityDashboard,Rt as default};
//# sourceMappingURL=DataQualityDashboard-DnXK8WjS.js.map
