import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r,k as R}from"./vendor-react-Dz7uKsMg.js";import{Q as M,a5 as F,c as l,a6 as D,a7 as L,e as V}from"./index-BQex3859.js";import{u as A,a as E,b as I,A as _}from"./AddCompetitorModal-Dt--nfpl.js";import"./featureFlagsStore-DvEl_DiZ.js";import{F as K}from"./PlusIcon-ByQcgXHI.js";import{F as U}from"./MagnifyingGlassIcon-3MUvqIvj.js";import{F as G}from"./GlobeAltIcon-C8EhIKXw.js";import{F as Q}from"./ArrowTrendingDownIcon-DA5nft8Y.js";import{F as j}from"./ArrowTopRightOnSquareIcon-Cr7jBqzy.js";import{F as Y}from"./TrashIcon-DR9paOX4.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";import"./CheckIcon-DQQhceDd.js";function Z({title:x,titleId:o,...c},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":o},c),x?r.createElement("title",{id:o},x):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const q=r.forwardRef(Z);function me(){const{t:x}=M(),[o,c]=R(),[n,v]=r.useState(""),[h,N]=r.useState(null),[y,p]=r.useState(!1);r.useEffect(()=>{o.get("action")==="create"&&(p(!0),c({},{replace:!0}))},[o,c]);const{data:d,refetch:f}=A(),b=new Date().toISOString().split("T")[0],w=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],{data:u}=E(w,b),C=I(),k=(t,s)=>`https://www.facebook.com/ads/library/?active_status=active&ad_type=all&country=${s}&q=${encodeURIComponent(t)}&search_type=keyword_unordered`,S=t=>`https://adstransparency.google.com/?query=${encodeURIComponent(t)}`,O=async t=>{if(confirm("Are you sure you want to delete this competitor?"))try{await C.mutateAsync(t),f()}catch(s){console.error("Failed to delete competitor:",s)}},a=(Array.isArray(d)?d:(d==null?void 0:d.data)||[]).map(t=>({id:t.id,name:t.name,domain:t.domain,logo:null,adSpend:t.estimatedSpend??0,adSpendTrend:Math.random()*40-20,shareOfVoice:t.shareOfVoice??0,keywordOverlap:Math.floor(Math.random()*50)+10,creativesTracked:t.activeCreatives??0,lastRefresh:new Date(t.lastUpdated??Date.now()),status:t.isActive?"active":"paused"}))??[{id:"1",name:"CompetitorOne",domain:"competitorone.com",logo:null,adSpend:125e3,adSpendTrend:15,shareOfVoice:24,keywordOverlap:45,creativesTracked:32,lastRefresh:new Date(Date.now()-2*60*60*1e3),status:"active"},{id:"2",name:"MarketLeader Inc",domain:"marketleader.com",logo:null,adSpend:28e4,adSpendTrend:8,shareOfVoice:35,keywordOverlap:62,creativesTracked:78,lastRefresh:new Date(Date.now()-4*60*60*1e3),status:"active"},{id:"3",name:"NewEntrant Co",domain:"newentrant.io",logo:null,adSpend:45e3,adSpendTrend:85,shareOfVoice:8,keywordOverlap:28,creativesTracked:15,lastRefresh:new Date(Date.now()-6*60*60*1e3),status:"active"},{id:"4",name:"OldPlayer Ltd",domain:"oldplayer.com",logo:null,adSpend:95e3,adSpendTrend:-12,shareOfVoice:18,keywordOverlap:55,creativesTracked:24,lastRefresh:new Date(Date.now()-12*60*60*1e3),status:"paused"}],T=[{keyword:"marketing automation",yourPosition:3,competitorPosition:1,searchVolume:12500,cpc:8.5,competitor:"MarketLeader Inc"},{keyword:"email campaigns",yourPosition:2,competitorPosition:4,searchVolume:8900,cpc:5.2,competitor:"CompetitorOne"},{keyword:"ad optimization",yourPosition:5,competitorPosition:2,searchVolume:6700,cpc:12.3,competitor:"MarketLeader Inc"},{keyword:"social media ads",yourPosition:1,competitorPosition:3,searchVolume:15200,cpc:4.8,competitor:"NewEntrant Co"},{keyword:"ppc management",yourPosition:4,competitorPosition:1,searchVolume:9800,cpc:15.6,competitor:"CompetitorOne"}],i=(u&&!Array.isArray(u)?u:null)??{you:15,competitors:[{name:"MarketLeader Inc",share:35},{name:"CompetitorOne",share:24},{name:"OldPlayer Ltd",share:18},{name:"NewEntrant Co",share:8}]},g=a.filter(t=>t.name.toLowerCase().includes(n.toLowerCase())||t.domain.toLowerCase().includes(n.toLowerCase())),$=t=>t>=1e6?`$${(t/1e6).toFixed(1)}M`:t>=1e3?`$${(t/1e3).toFixed(0)}K`:`$${t}`,P=t=>{const s=Math.floor((Date.now()-t.getTime())/36e5);return s<1?"Just now":s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},m={totalCompetitors:a.length,activeTracking:a.filter(t=>t.status==="active").length,avgKeywordOverlap:Math.round(a.reduce((t,s)=>t+s.keywordOverlap,0)/a.length),totalCreatives:a.reduce((t,s)=>t+s.creativesTracked,0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Competitor Intelligence"}),e.jsx("p",{className:"text-muted-foreground",children:"Track competitor activity and market share"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(K,{className:"w-4 h-4"}),"Add Competitor"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"metric-card premium p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Tracked Competitors"}),e.jsx("div",{className:"text-2xl font-bold",children:m.totalCompetitors})]}),e.jsxs("div",{className:"metric-card success p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Active Tracking"}),e.jsx("div",{className:"text-2xl font-bold text-green-500",children:m.activeTracking})]}),e.jsxs("div",{className:"metric-card active p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Avg Keyword Overlap"}),e.jsxs("div",{className:"text-2xl font-bold",children:[m.avgKeywordOverlap,"%"]})]}),e.jsxs("div",{className:"metric-card warning p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Creatives Tracked"}),e.jsx("div",{className:"text-2xl font-bold",children:m.totalCreatives})]})]}),e.jsxs("div",{className:"metric-card premium p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(F,{className:"w-5 h-5 text-purple-500"}),e.jsx("h2",{className:"font-semibold",children:"Share of Voice"})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsxs("div",{className:"flex-1 h-8 rounded-full overflow-hidden flex bg-muted",children:[e.jsx("div",{className:"h-full bg-primary",style:{width:`${i.you}%`},title:`You: ${i.you}%`}),i.competitors.map((t,s)=>e.jsx("div",{className:"h-full",style:{width:`${t.share}%`,backgroundColor:["#ef4444","#f59e0b","#10b981","#6366f1"][s%4]},title:`${t.name}: ${t.share}%`},t.name))]})}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),e.jsxs("span",{children:["You (",i.you,"%)"]})]}),i.competitors.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:["#ef4444","#f59e0b","#10b981","#6366f1"][s%4]}}),e.jsxs("span",{children:[t.name," (",t.share,"%)"]})]},t.name))]})]}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search competitors...",value:n,onChange:t=>v(t.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(t=>e.jsxs("div",{className:l("metric-card info p-4 cursor-pointer",h===t.id&&"ring-2 ring-primary"),onClick:()=>N(h===t.id?null:t.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.domain})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:l("px-2 py-1 rounded-full text-xs",t.status==="active"?"bg-green-500/10 text-green-500":"bg-muted text-muted-foreground"),children:t.status}),e.jsx("button",{className:"p-1 rounded hover:bg-muted transition-colors",children:e.jsx(q,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Est. Ad Spend"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold",children:[$(t.adSpend),"/mo"]}),e.jsxs("span",{className:l("flex items-center text-xs",t.adSpendTrend>=0?"text-green-500":"text-red-500"),children:[t.adSpendTrend>=0?e.jsx(D,{className:"w-3 h-3"}):e.jsx(Q,{className:"w-3 h-3"}),Math.abs(t.adSpendTrend),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Share of Voice"}),e.jsxs("div",{className:"font-semibold",children:[t.shareOfVoice,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.keywordOverlap,"% keyword overlap"]}),e.jsxs("span",{className:"text-muted-foreground",children:[t.creativesTracked," creatives"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["Updated ",P(t.lastRefresh)]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t",children:[e.jsxs("a",{href:k(t.name,t.country||"SA"),target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),className:"flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs bg-blue-500/10 text-blue-600 hover:bg-blue-500/20 transition-colors",title:`Search "${t.name}" in Meta Ads Library`,children:[e.jsx("span",{className:"font-bold",children:"M"}),"Meta Ads Library",e.jsx(j,{className:"w-3 h-3"})]}),e.jsxs("a",{href:S(t.name),target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),className:"flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs bg-green-500/10 text-green-600 hover:bg-green-500/20 transition-colors",title:`Search "${t.name}" in Google Transparency`,children:[e.jsx("span",{className:"font-bold",children:"G"}),"Google Transparency",e.jsx(j,{className:"w-3 h-3"})]}),e.jsx("button",{onClick:s=>{s.stopPropagation(),O(t.id)},className:"ml-auto p-1.5 rounded-md text-red-500 hover:bg-red-500/10 transition-colors",title:"Delete competitor",children:e.jsx(Y,{className:"w-4 h-4"})})]})]},t.id))}),e.jsxs("div",{className:"metric-card active overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-cyan-500/20",children:[e.jsx("h2",{className:"font-semibold",children:"Keyword Overlap"}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm border hover:bg-muted transition-colors",children:[e.jsx(L,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cyan-500/10 border-b border-cyan-500/20",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left text-sm font-medium",children:"Keyword"}),e.jsx("th",{className:"p-4 text-center text-sm font-medium",children:"Your Position"}),e.jsx("th",{className:"p-4 text-center text-sm font-medium",children:"Competitor"}),e.jsx("th",{className:"p-4 text-center text-sm font-medium",children:"Their Position"}),e.jsx("th",{className:"p-4 text-right text-sm font-medium",children:"Search Volume"}),e.jsx("th",{className:"p-4 text-right text-sm font-medium",children:"CPC"})]})}),e.jsx("tbody",{className:"divide-y",children:T.map((t,s)=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"p-4 font-medium",children:t.keyword}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("span",{className:l("px-2 py-1 rounded text-sm font-medium",t.yourPosition<=3?"bg-green-500/10 text-green-500":t.yourPosition<=5?"bg-amber-500/10 text-amber-500":"bg-muted text-muted-foreground"),children:["#",t.yourPosition]})}),e.jsx("td",{className:"p-4 text-center text-sm text-muted-foreground",children:t.competitor}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("span",{className:l("px-2 py-1 rounded text-sm font-medium",t.competitorPosition<=3?"bg-red-500/10 text-red-500":t.competitorPosition<=5?"bg-amber-500/10 text-amber-500":"bg-muted text-muted-foreground"),children:["#",t.competitorPosition]})}),e.jsx("td",{className:"p-4 text-right text-muted-foreground",children:t.searchVolume.toLocaleString()}),e.jsxs("td",{className:"p-4 text-right font-medium",children:["$",t.cpc.toFixed(2)]})]},s))})]})]}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(V,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No competitors found"})]}),e.jsx(_,{isOpen:y,onClose:()=>p(!1),onSuccess:()=>f()})]})}export{me as Competitors,me as default};
//# sourceMappingURL=Competitors-oGLdwz7v.js.map
