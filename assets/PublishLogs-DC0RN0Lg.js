import{j as e}from"./vendor-ui-B0DL0VNC.js";import{f as b,r as n}from"./vendor-react-Dz7uKsMg.js";import{ai as j,c as r,a7 as x,a9 as u,f as N,e as y}from"./index-BQex3859.js";import{l as w}from"./campaignBuilder-B-MzQ-hf.js";import{F as v}from"./XCircleIcon-Dk49lKz_.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";const k=[{id:"1",draftId:"d1",draftName:"Summer Sale 2024",platform:"meta",status:"success",platformCampaignId:"camp_123456789",publishedAt:"2024-01-20T10:30:00Z",publishedBy:"Ahmed Al-Saud",retryCount:0},{id:"2",draftId:"d2",draftName:"Retargeting - Cart Abandoners",platform:"google",status:"success",platformCampaignId:"987654321",publishedAt:"2024-01-19T14:00:00Z",publishedBy:"Sara Mohammed",retryCount:0},{id:"3",draftId:"d3",draftName:"Brand Awareness Q1",platform:"meta",status:"failed",errorMessage:'Invalid targeting: Location "XYZ" not found',publishedAt:"2024-01-18T09:15:00Z",publishedBy:"Omar Hassan",retryCount:2},{id:"4",draftId:"d4",draftName:"Product Launch - Winter",platform:"tiktok",status:"pending",publishedAt:"2024-01-20T11:00:00Z",publishedBy:"Fatima Al-Ali",retryCount:0}],o={success:{icon:N,label:"Published",color:"text-emerald-600 bg-emerald-100 dark:bg-emerald-900/30"},failed:{icon:v,label:"Failed",color:"text-red-600 bg-red-100 dark:bg-red-900/30"},pending:{icon:u,label:"Pending",color:"text-amber-600 bg-amber-100 dark:bg-amber-900/30"},retrying:{icon:x,label:"Retrying",color:"text-blue-600 bg-blue-100 dark:bg-blue-900/30"}};function D(){const{tenantId:p}=b(),[h]=n.useState(k),[d,f]=n.useState("all"),[s,c]=n.useState(null),l=w(Number(p)),m=h.filter(t=>d==="all"||t.status===d),g=async t=>{try{await l.mutateAsync(t),alert("Retry initiated successfully")}catch(a){const i=a instanceof Error?a.message:"An unknown error occurred";alert(`Failed to retry publish: ${i}`)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Publish Logs"}),e.jsx("p",{className:"text-muted-foreground",children:"History of all campaign publish attempts"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("div",{className:"flex gap-2",children:["all","success","failed","pending"].map(t=>e.jsx("button",{onClick:()=>f(t),className:r("px-3 py-1.5 text-sm rounded-lg transition-colors",d===t?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{className:"rounded-xl border bg-card shadow-card overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Platform ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Published By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:m.map(t=>{const a=o[t.status],i=a.icon;return e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium",children:t.draftName})}),e.jsx("td",{className:"px-6 py-4 text-sm capitalize",children:t.platform}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("span",{className:r("inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full",a.color),children:[e.jsx(i,{className:"h-3 w-3"}),a.label]}),t.retryCount>0&&e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",t.retryCount," retries)"]})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:t.platformCampaignId||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:t.publishedBy}),e.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:new Date(t.publishedAt).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>c(t),className:"p-1.5 rounded-lg hover:bg-accent transition-colors",title:"View Details",children:e.jsx(y,{className:"h-4 w-4"})}),t.status==="failed"&&e.jsx("button",{onClick:()=>g(t.id),disabled:l.isPending,className:"p-1.5 rounded-lg hover:bg-accent transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Retry",children:e.jsx(x,{className:r("h-4 w-4",l.isPending&&"animate-spin")})})]})})]},t.id)})})]})}),m.length===0&&e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(u,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"No publish logs found"})]})]}),s&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-card rounded-xl shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Publish Log Details"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Campaign"}),e.jsx("p",{className:"font-medium",children:s.draftName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform"}),e.jsx("p",{className:"font-medium capitalize",children:s.platform})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx("span",{className:r("inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full",o[s.status].color),children:o[s.status].label})]}),s.platformCampaignId&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform Campaign ID"}),e.jsx("p",{className:"font-mono text-sm",children:s.platformCampaignId})]}),s.errorMessage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Error Message"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/20 p-3 rounded-lg",children:s.errorMessage})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Published By"}),e.jsx("p",{className:"font-medium",children:s.publishedBy})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Timestamp"}),e.jsx("p",{className:"font-medium",children:new Date(s.publishedAt).toLocaleString()})]})]}),e.jsx("div",{className:"p-6 border-t bg-muted/30",children:e.jsx("button",{onClick:()=>c(null),className:"w-full px-4 py-2 rounded-lg border hover:bg-accent transition-colors",children:"Close"})})]})})]})}export{D as default};
//# sourceMappingURL=PublishLogs-DC0RN0Lg.js.map
