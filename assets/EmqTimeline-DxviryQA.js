import{j as e}from"./vendor-ui-B0DL0VNC.js";import{c as i,a6 as p,a5 as f,a9 as g,h as x,a7 as m,f as j}from"./index-BQex3859.js";import{F as w}from"./ArrowTrendingDownIcon-DA5nft8Y.js";import{C as u,g as N}from"./ConfidenceBandBadge-BR4oR-ha.js";import{F as y}from"./BugAntIcon-BjOrFbnG.js";import{F as v}from"./ExclamationCircleIcon-C8aTdMTs.js";const C={sm:"text-xs px-2 py-0.5",md:"text-sm px-3 py-1",lg:"text-base px-4 py-1.5"},F={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};function H({svi:t,threshold:r=30,showValue:o=!1,size:l="md",className:c}){const s=t>=r,n=t>=r*2,a=s?p:w,d=n?"High Volatility":s?"Unstable":"Stable";return e.jsxs("span",{className:i("inline-flex items-center gap-1.5 rounded-full font-medium transition-all",n?"bg-danger/10 text-danger":s?"bg-warning/10 text-warning":"bg-success/10 text-success",C[l],c),title:`Signal Volatility Index: ${t}%`,children:[e.jsx(a,{className:F[l]}),e.jsx("span",{children:d}),o&&e.jsxs("span",{className:"opacity-70",children:["(",t,"%)"]})]})}const R=[{name:"Freshness",value:95,weight:.3,status:"good"},{name:"Data Loss",value:88,weight:.25,status:"good"},{name:"Variance",value:72,weight:.25,status:"warning"},{name:"Errors",value:98,weight:.2,status:"good"}],$={Freshness:g,"Data Loss":v,Variance:f,Errors:y};function h({score:t,size:r=120}){const o=N(t),l=8,c=(r-l)/2,s=2*Math.PI*c,n=s-t/100*s,a=o==="reliable"?"var(--teal, #00c7be)":o==="directional"?"var(--status-warning, #f59e0b)":"var(--coral, #ff6b6b)";return e.jsxs("div",{className:"relative",style:{width:r,height:r},children:[e.jsxs("svg",{className:"transform -rotate-90",width:r,height:r,children:[e.jsx("circle",{cx:r/2,cy:r/2,r:c,fill:"none",stroke:"currentColor",strokeWidth:l,className:"text-white/10"}),e.jsx("circle",{cx:r/2,cy:r/2,r:c,fill:"none",stroke:a,strokeWidth:l,strokeLinecap:"round",strokeDasharray:s,strokeDashoffset:n,className:"transition-all duration-700 ease-out"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:t}),e.jsx("span",{className:"text-xs text-text-muted",children:"EMQ"})]})]})}function L({score:t,previousScore:r,drivers:o=R,showDrivers:l=!0,compact:c=!1,className:s}){const n=r?t-r:null;return c?e.jsxs("div",{className:i("flex items-center gap-3 p-3 rounded-xl bg-surface-secondary border border-white/10",s),children:[e.jsx(h,{score:t,size:60}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:"EMQ Score"}),e.jsx(u,{score:t,size:"sm"})]}),n!==null&&e.jsxs("span",{className:i("text-sm",n>0?"text-success":n<0?"text-danger":"text-text-muted"),children:[n>0?"+":"",n," from yesterday"]})]})]}):e.jsxs("div",{className:i("p-6 rounded-2xl bg-surface-secondary border border-white/10",s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Event Measurement Quality"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"How reliable is your data today?"})]}),e.jsx(u,{score:t})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(h,{score:t}),l&&e.jsx("div",{className:"flex-1 space-y-3",children:o.map(a=>{const d=$[a.name]||f;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:i("w-4 h-4",a.status==="good"?"text-success":a.status==="warning"?"text-warning":"text-danger")}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:a.name}),e.jsxs("span",{className:i("text-sm font-medium",a.status==="good"?"text-success":a.status==="warning"?"text-warning":"text-danger"),children:[a.value,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:i("h-full rounded-full transition-all duration-500",a.status==="good"?"bg-success":a.status==="warning"?"bg-warning":"bg-danger"),style:{width:`${a.value}%`}})})]})]},a.name)})})]}),n!==null&&e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs("span",{className:i("text-sm",n>0?"text-success":n<0?"text-danger":"text-text-muted"),children:[n>0?"+":"",n," points from yesterday"]})})]})}const I={incident_opened:{icon:x,color:"text-danger",bgColor:"bg-danger/10",lineColor:"bg-danger"},incident_closed:{icon:j,color:"text-success",bgColor:"bg-success/10",lineColor:"bg-success"},degradation:{icon:x,color:"text-warning",bgColor:"bg-warning/10",lineColor:"bg-warning"},recovery:{icon:m,color:"text-success",bgColor:"bg-success/10",lineColor:"bg-success"},update:{icon:g,color:"text-text-secondary",bgColor:"bg-surface-tertiary",lineColor:"bg-white/20"},mode_change:{icon:m,color:"text-blue-400",bgColor:"bg-blue-500/10",lineColor:"bg-blue-500"},action_blocked:{icon:x,color:"text-orange-400",bgColor:"bg-orange-500/10",lineColor:"bg-orange-500"}};function M(t){const o=new Date().getTime()-t.getTime(),l=Math.floor(o/(1e3*60*60)),c=Math.floor(l/24);return l<1?`${Math.floor(o/6e4)}m ago`:l<24?`${l}h ago`:c<7?`${c}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function T({events:t,maxEvents:r=10,showRecoveryTime:o=!0,className:l}){const c=t.slice(0,r);return e.jsxs("div",{className:i("rounded-2xl bg-surface-secondary border border-white/10 overflow-hidden",l),children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-surface-tertiary",children:e.jsx(g,{className:"w-5 h-5 text-text-secondary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Incident Timeline"}),e.jsx("p",{className:"text-sm text-text-muted",children:"Recent data quality events"})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"relative",children:c.map((s,n)=>{const a=I[s.type],d=a.icon,b=n===c.length-1;return e.jsxs("div",{className:"relative pb-6 last:pb-0",children:[!b&&e.jsx("div",{className:i("absolute left-4 top-8 bottom-0 w-0.5 -translate-x-1/2",a.lineColor)}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:i("relative z-10 flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",a.bgColor),children:e.jsx(d,{className:i("w-4 h-4",a.color)})}),e.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-text-muted mt-0.5",children:s.description})]}),e.jsx("span",{className:"text-xs text-text-muted whitespace-nowrap",children:M(s.timestamp)})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.platform&&e.jsx("span",{className:"text-xs bg-surface-tertiary text-text-muted px-2 py-0.5 rounded",children:s.platform}),s.severity&&e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded",s.severity==="critical"&&"bg-danger/10 text-danger",s.severity==="high"&&"bg-orange-500/10 text-orange-400",s.severity==="medium"&&"bg-warning/10 text-warning",s.severity==="low"&&"bg-surface-tertiary text-text-muted"),children:s.severity}),o&&s.recoveryHours!==void 0&&e.jsxs("span",{className:"text-xs text-text-muted flex items-center gap-1",children:[e.jsx(m,{className:"w-3 h-3"}),"Recovered in ",s.recoveryHours,"h"]}),s.emqImpact!==void 0&&e.jsxs("span",{className:i("text-xs",s.emqImpact>0?"text-success":"text-danger"),children:[s.emqImpact>0?"+":"",s.emqImpact," EMQ"]})]})]})]})]},s.id)})}),t.length>r&&e.jsxs("button",{className:"mt-4 text-sm text-stratum-400 hover:text-stratum-300 transition-colors",children:["View all ",t.length," events"]})]})]})}export{L as E,H as V,T as a};
//# sourceMappingURL=EmqTimeline-DxviryQA.js.map
