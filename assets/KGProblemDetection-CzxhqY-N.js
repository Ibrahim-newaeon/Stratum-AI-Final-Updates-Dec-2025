import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as h}from"./vendor-react-Dz7uKsMg.js";import{h as p,c as i,f as u,a8 as j,cU as v,ai as N}from"./index-BQex3859.js";import{u as C,a as w}from"./knowledgeGraph-DUv4fHvx.js";import{F as y}from"./InformationCircleIcon-B_QjEB21.js";import{F as f}from"./ExclamationCircleIcon-C8aTdMTs.js";import{m}from"./vendor-motion-CR45sdSp.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";const R={critical:{borderColor:"border-l-red-500",bgColor:"bg-red-500/5",iconColor:"text-red-500",badgeColor:"bg-red-500/10 text-red-500 border-red-500/20",Icon:f,label:"Critical"},warning:{borderColor:"border-l-amber-500",bgColor:"bg-amber-500/5",iconColor:"text-amber-500",badgeColor:"bg-amber-500/10 text-amber-500 border-amber-500/20",Icon:p,label:"Warning"},info:{borderColor:"border-l-blue-500",bgColor:"bg-blue-500/5",iconColor:"text-blue-500",badgeColor:"bg-blue-500/10 text-blue-500 border-blue-500/20",Icon:y,label:"Info"}};function F({severity:o,title:b,description:t,impact:g,affectedCampaigns:c,platform:s,onResolve:n,onReview:d,resolved:a}){const l=R[o],r=l.Icon;return e.jsx("div",{className:i("rounded-xl border border-l-4 p-5 transition-all",l.borderColor,l.bgColor,a&&"opacity-60"),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(r,{className:i("h-6 w-6 mt-0.5 flex-shrink-0",l.iconColor)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:b}),e.jsx("span",{className:i("px-2 py-0.5 rounded-full text-xs font-medium border",l.badgeColor),children:l.label}),a&&e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20 flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),"Resolved"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"font-medium text-red-400",children:[g," impact"]}),e.jsxs("span",{className:"text-muted-foreground",children:[c," campaign",c!==1?"s":""," affected"]}),e.jsx("span",{className:"px-2 py-0.5 rounded bg-white/5 text-xs",children:s})]})]})]}),!a&&e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o==="critical"&&n&&e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Resolve"}),d&&e.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-medium rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:"Review"})]})]})})}const x={initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3}};function W(){const[o,b]=h.useState("all"),{data:t,isLoading:g}=C(o!=="all"?{severity:o}:void 0),c=w(),s=t==null?void 0:t.summary,n=(t==null?void 0:t.problems)||[],d=o==="all"?n:n.filter(r=>r.severity===o),a=r=>{c.mutate(r)},l=[{label:"Critical Issues",value:(s==null?void 0:s.critical)??0,icon:f,color:"text-red-500",bgColor:"bg-red-500/10",borderColor:"border-red-500/20"},{label:"Warnings",value:(s==null?void 0:s.warnings)??0,icon:p,color:"text-amber-500",bgColor:"bg-amber-500/10",borderColor:"border-amber-500/20"},{label:"Resolved (30d)",value:(s==null?void 0:s.resolved30d)??0,icon:u,color:"text-green-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/20"},{label:"Revenue at Risk",value:`$${(((s==null?void 0:s.revenueAtRisk)??0)/1e3).toFixed(1)}k`,icon:j,color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20"}];return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:"Problem Detection - Knowledge Graph | Stratum AI"})}),e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsxs(m.div,{...x,children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Problem Detection"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-detected issues across your campaigns with revenue impact estimates"})]}),e.jsx(m.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",...x,transition:{delay:.1},children:l.map(r=>e.jsx("div",{className:i("rounded-xl border p-4 backdrop-blur-sm",r.borderColor,r.bgColor),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:i("p-2 rounded-lg",r.bgColor),children:e.jsx(r.icon,{className:i("h-5 w-5",r.color)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:r.label}),e.jsx("p",{className:i("text-xl font-bold",r.color),children:r.value})]})]})},r.label))}),e.jsxs(m.div,{className:"flex items-center gap-3",...x,transition:{delay:.15},children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter:"}),["all","critical","warning","info"].map(r=>e.jsx("button",{onClick:()=>b(r),className:i("px-3 py-1.5 text-sm rounded-lg transition-colors capitalize",o===r?"bg-primary/10 text-primary font-medium":"hover:bg-white/5 text-muted-foreground"),children:r==="all"?"All Issues":r},r))]}),e.jsx(m.div,{className:"space-y-4",...x,transition:{delay:.2},children:d.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),e.jsx("p",{className:"font-medium",children:"No issues found"}),e.jsx("p",{className:"text-sm",children:"All campaigns are running smoothly"})]}):d.map(r=>e.jsx(F,{severity:r.severity,title:r.title,description:r.description,impact:r.impact,affectedCampaigns:r.affectedCampaigns,platform:r.platform,resolved:r.status==="resolved",onResolve:r.severity==="critical"?()=>a(r.id):void 0,onReview:()=>a(r.id)},r.id))})]})]})}export{W as default};
//# sourceMappingURL=KGProblemDetection-CzxhqY-N.js.map
