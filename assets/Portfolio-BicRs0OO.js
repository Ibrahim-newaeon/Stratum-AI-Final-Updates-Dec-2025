import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r,L as w}from"./vendor-react-Dz7uKsMg.js";import{ai as S,c as o,a6 as R,h as k,ac as D}from"./index-BQex3859.js";import{C as M}from"./ConfidenceBandBadge-BR4oR-ha.js";import{A as q,B as T}from"./BudgetAtRiskChip-BRCQCK-f.js";import{f as A}from"./admin-C8dTloZG.js";import"./featureFlagsStore-DvEl_DiZ.js";import{F as C}from"./DocumentArrowDownIcon-D3ixpsi6.js";import{F}from"./MagnifyingGlassIcon-3MUvqIvj.js";import{F as L}from"./BellAlertIcon-DdhkZ2ID.js";import{F as O}from"./ArrowTrendingDownIcon-DA5nft8Y.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";import"./XCircleIcon-Dk49lKz_.js";function E({title:i,titleId:m,...l},u){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":m},l),i?r.createElement("title",{id:m},i):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const $=r.forwardRef(E);function te(){const[i,m]=r.useState(""),[l,u]=r.useState("all"),[h,j]=r.useState("emq"),[x,b]=r.useState(!1),{data:c}=A(),a=(Array.isArray(c)?c:(c==null?void 0:c.data)||[]).map(t=>({id:t.id,name:t.name,industry:t.industry||"E-commerce",emqScore:Math.floor(Math.random()*40)+60,emqStatus:["ok","risk","degraded","critical"][Math.floor(Math.random()*4)],emqTrend:Math.floor(Math.random()*20)-10,autopilotMode:["normal","limited","cuts_only","frozen"][Math.floor(Math.random()*4)],budgetAtRisk:Math.floor(Math.random()*15e3),activeIncidents:Math.floor(Math.random()*5),incidentOpenTime:Math.random()>.5?Math.floor(Math.random()*48):null,monthlySpend:Math.floor(Math.random()*1e5)+1e4,roas:Math.random()*4+1,roasTrend:Math.random()*2-1,renewalDate:new Date(Date.now()+Math.random()*180*24*60*60*1e3),plan:["Starter","Pro","Enterprise"][Math.floor(Math.random()*3)],lastContact:new Date(Date.now()-Math.random()*14*24*60*60*1e3),notes:null}))??[{id:"1",name:"Acme Corporation",industry:"E-commerce",emqScore:92,emqStatus:"ok",emqTrend:5,autopilotMode:"normal",budgetAtRisk:0,activeIncidents:0,incidentOpenTime:null,monthlySpend:85e3,roas:4.2,roasTrend:.3,renewalDate:new Date(Date.now()+90*24*60*60*1e3),plan:"Enterprise",lastContact:new Date(Date.now()-3*24*60*60*1e3),notes:"Happy with performance, considering expansion"},{id:"2",name:"TechStart Inc",industry:"SaaS",emqScore:78,emqStatus:"risk",emqTrend:-3,autopilotMode:"limited",budgetAtRisk:4500,activeIncidents:1,incidentOpenTime:6,monthlySpend:45e3,roas:3.1,roasTrend:-.4,renewalDate:new Date(Date.now()+45*24*60*60*1e3),plan:"Pro",lastContact:new Date(Date.now()-7*24*60*60*1e3),notes:"Needs check-in, ROAS declining"},{id:"3",name:"Fashion Forward",industry:"Retail",emqScore:65,emqStatus:"degraded",emqTrend:-8,autopilotMode:"cuts_only",budgetAtRisk:12e3,activeIncidents:2,incidentOpenTime:18,monthlySpend:12e4,roas:2.8,roasTrend:-.6,renewalDate:new Date(Date.now()+30*24*60*60*1e3),plan:"Pro",lastContact:new Date(Date.now()-2*24*60*60*1e3),notes:"Escalated - signal issues affecting campaigns"},{id:"4",name:"HealthPlus",industry:"Healthcare",emqScore:45,emqStatus:"critical",emqTrend:-15,autopilotMode:"frozen",budgetAtRisk:25e3,activeIncidents:4,incidentOpenTime:36,monthlySpend:65e3,roas:1.8,roasTrend:-1.2,renewalDate:new Date(Date.now()+15*24*60*60*1e3),plan:"Pro",lastContact:new Date(Date.now()-1*24*60*60*1e3),notes:"CRITICAL - Churn risk, scheduled call tomorrow"},{id:"5",name:"GreenGrow",industry:"Agriculture",emqScore:88,emqStatus:"ok",emqTrend:2,autopilotMode:"normal",budgetAtRisk:0,activeIncidents:0,incidentOpenTime:null,monthlySpend:32e3,roas:5.1,roasTrend:.8,renewalDate:new Date(Date.now()+120*24*60*60*1e3),plan:"Starter",lastContact:new Date(Date.now()-10*24*60*60*1e3),notes:"Strong performer, upgrade candidate"}],p=r.useMemo(()=>{let t=[...a];if(i){const s=i.toLowerCase();t=t.filter(d=>d.name.toLowerCase().includes(s)||d.industry.toLowerCase().includes(s))}return l!=="all"&&(t=t.filter(s=>s.emqStatus===l)),x&&(t=t.filter(s=>s.emqStatus!=="ok"||s.budgetAtRisk>0||s.activeIncidents>0)),t.sort((s,d)=>{var g,f;switch(h){case"name":return s.name.localeCompare(d.name);case"emq":return s.emqScore-d.emqScore;case"budgetAtRisk":return d.budgetAtRisk-s.budgetAtRisk;case"renewalDate":return(((g=s.renewalDate)==null?void 0:g.getTime())??0)-(((f=d.renewalDate)==null?void 0:f.getTime())??0);default:return 0}}),t},[a,i,l,h,x]),v=t=>{switch(t){case"ok":return"text-success bg-success/10";case"risk":return"text-warning bg-warning/10";case"degraded":return"text-orange-400 bg-orange-400/10";case"critical":return"text-danger bg-danger/10"}},N=t=>{if(!t)return"-";const s=Math.floor((t.getTime()-Date.now())/(24*60*60*1e3));return s<0?"Overdue":s===0?"Today":s===1?"1 day":`${s} days`},y=t=>{if(!t)return"Never";const s=Math.floor((Date.now()-t.getTime())/(24*60*60*1e3));return s===0?"Today":s===1?"Yesterday":`${s}d ago`},n={total:a.length,healthy:a.filter(t=>t.emqStatus==="ok").length,atRisk:a.filter(t=>t.emqStatus!=="ok").length,critical:a.filter(t=>t.emqStatus==="critical").length,totalBudgetAtRisk:a.reduce((t,s)=>t+s.budgetAtRisk,0),totalMRR:a.reduce((t,s)=>t+(s.plan==="Enterprise"?1999:s.plan==="Pro"?499:99),0),upcomingRenewals:a.filter(t=>t.renewalDate&&t.renewalDate.getTime()-Date.now()<30*24*60*60*1e3).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Portfolio"}),e.jsx("p",{className:"text-text-muted",children:"Manage your assigned tenants"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{"data-tour":"export-pdf",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-surface-secondary border border-white/10 text-text-secondary hover:text-white transition-colors",children:[e.jsx(C,{className:"w-4 h-4"}),"Export Summary"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"text-text-muted text-sm mb-1",children:"Total Tenants"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:n.total})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"text-text-muted text-sm mb-1",children:"Healthy"}),e.jsx("div",{className:"text-2xl font-bold text-success",children:n.healthy})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"text-text-muted text-sm mb-1",children:"At Risk"}),e.jsx("div",{className:"text-2xl font-bold text-warning",children:n.atRisk})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"text-text-muted text-sm mb-1",children:"Critical"}),e.jsx("div",{className:"text-2xl font-bold text-danger",children:n.critical})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"text-text-muted text-sm mb-1",children:"Budget at Risk"}),e.jsxs("div",{className:"text-2xl font-bold text-danger",children:["$",n.totalBudgetAtRisk.toLocaleString()]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"text-text-muted text-sm mb-1",children:"Portfolio MRR"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",n.totalMRR.toLocaleString()]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"text-text-muted text-sm mb-1",children:"Renewals (30d)"}),e.jsx("div",{className:"text-2xl font-bold text-warning",children:n.upcomingRenewals})]})]}),n.critical>0&&e.jsxs("div",{"data-tour":"priority-alerts",className:"rounded-xl bg-danger/5 border border-danger/20 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx($,{className:"w-5 h-5 text-danger"}),e.jsx("span",{className:"font-semibold text-danger",children:"Priority Alerts"})]}),e.jsx("div",{className:"space-y-2",children:a.filter(t=>t.emqStatus==="critical").map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-danger/10",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-white",children:t.name}),e.jsxs("span",{className:"text-sm text-text-muted ml-2",children:["EMQ ",t.emqScore," | ",t.activeIncidents," incidents open ",t.incidentOpenTime,"h"]})]}),e.jsx(w,{to:`/dashboard/am/tenant/${t.id}`,className:"px-3 py-1 rounded-lg bg-danger/20 text-danger hover:bg-danger/30 text-sm transition-colors",children:"View Now"})]},t.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),e.jsx("input",{type:"text",placeholder:"Search tenants...",value:i,onChange:t=>m(t.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-surface-secondary border border-white/10 text-white placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-stratum-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-text-muted"}),e.jsxs("select",{value:l,onChange:t=>u(t.target.value),className:"px-3 py-2 rounded-lg bg-surface-secondary border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-stratum-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ok",children:"Healthy"}),e.jsx("option",{value:"risk",children:"At Risk"}),e.jsx("option",{value:"degraded",children:"Degraded"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("select",{value:h,onChange:t=>j(t.target.value),className:"px-3 py-2 rounded-lg bg-surface-secondary border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-stratum-500",children:[e.jsx("option",{value:"emq",children:"Sort by EMQ"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"budgetAtRisk",children:"Sort by Budget at Risk"}),e.jsx("option",{value:"renewalDate",children:"Sort by Renewal"})]}),e.jsxs("button",{onClick:()=>b(!x),className:o("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",x?"bg-warning/10 text-warning border border-warning/30":"bg-surface-secondary border border-white/10 text-text-muted hover:text-white"),children:[e.jsx(L,{className:"w-4 h-4"}),"At Risk Only"]})]}),e.jsxs("div",{"data-tour":"portfolio-list",className:"grid gap-4",children:[p.map(t=>e.jsx("div",{className:o("p-4 rounded-xl border transition-all hover:border-white/20",t.emqStatus==="critical"?"bg-danger/5 border-danger/20":"bg-surface-secondary border-white/10"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-xl bg-surface-tertiary min-w-[80px]",children:[e.jsx("span",{className:o("text-3xl font-bold",t.emqScore>=80?"text-success":t.emqScore>=60?"text-warning":"text-danger"),children:t.emqScore}),e.jsx(M,{score:t.emqScore,size:"sm"}),e.jsxs("div",{className:o("flex items-center gap-1 text-xs mt-1",t.emqTrend>=0?"text-success":"text-danger"),children:[t.emqTrend>=0?e.jsx(R,{className:"w-3 h-3"}):e.jsx(O,{className:"w-3 h-3"}),t.emqTrend>=0?"+":"",t.emqTrend]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-white text-lg",children:t.name}),e.jsx("span",{className:o("px-2 py-0.5 rounded-full text-xs",v(t.emqStatus)),children:t.emqStatus}),e.jsx("span",{className:"px-2 py-0.5 rounded bg-surface-tertiary text-text-muted text-xs",children:t.plan})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-text-muted",children:t.industry}),e.jsx(q,{mode:t.autopilotMode,compact:!0}),t.budgetAtRisk>0&&e.jsx(T,{amount:t.budgetAtRisk}),t.activeIncidents>0&&e.jsxs("span",{className:"flex items-center gap-1 text-warning",children:[e.jsx(k,{className:"w-4 h-4"}),t.activeIncidents," incident",t.activeIncidents>1?"s":"",t.incidentOpenTime&&e.jsxs("span",{className:"text-text-muted",children:["(",t.incidentOpenTime,"h)"]})]})]}),t.notes&&e.jsx("p",{className:"mt-2 text-sm text-text-muted italic",children:t.notes})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-text-muted",children:"ROAS"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-white font-medium",children:[t.roas.toFixed(1),"x"]}),e.jsxs("span",{className:o("text-xs",t.roasTrend>=0?"text-success":"text-danger"),children:[t.roasTrend>=0?"+":"",t.roasTrend.toFixed(1)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-text-muted",children:"Spend"}),e.jsxs("div",{className:"text-white font-medium",children:["$",(t.monthlySpend/1e3).toFixed(0),"k"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-text-muted",children:"Renewal"}),e.jsx("div",{className:o("font-medium",t.renewalDate&&t.renewalDate.getTime()-Date.now()<30*24*60*60*1e3?"text-warning":"text-white"),children:N(t.renewalDate)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-text-muted",children:"Last Contact"}),e.jsx("div",{className:"text-white",children:y(t.lastContact)})]})]}),e.jsxs(w,{to:`/dashboard/am/tenant/${t.id}`,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-surface-tertiary text-text-secondary hover:text-white transition-colors",children:["View",e.jsx(D,{className:"w-4 h-4"})]})]})},t.id)),p.length===0&&e.jsx("div",{className:"text-center py-12 text-text-muted",children:"No tenants found matching your filters."})]})]})}export{te as default};
//# sourceMappingURL=Portfolio-BicRs0OO.js.map
