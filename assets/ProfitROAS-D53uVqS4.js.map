{"version":3,"file":"ProfitROAS-D53uVqS4.js","sources":["../../node_modules/@heroicons/react/24/outline/esm/DocumentArrowUpIcon.js","../../src/api/profit.ts","../../src/views/tenant/ProfitROAS.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction DocumentArrowUpIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentArrowUpIcon);\nexport default ForwardRef;","/**\r\n * Stratum AI - Profit ROAS API\r\n *\r\n * Handles products, COGS, margins, and profit calculations.\r\n */\r\n\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient, ApiResponse, PaginatedResponse } from './client';\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\nexport type MarginType = 'percentage' | 'fixed';\r\nexport type ProductStatus = 'active' | 'inactive' | 'discontinued';\r\nexport type COGSSource = 'manual' | 'csv_upload' | 'api_sync' | 'calculated';\r\n\r\nexport interface ProductCatalog {\r\n  id: string;\r\n  tenantId: number;\r\n  sku: string;\r\n  name: string;\r\n  description?: string;\r\n  category?: string;\r\n  subcategory?: string;\r\n  brand?: string;\r\n  status: ProductStatus;\r\n  defaultCogs: number;\r\n  defaultMarginPct: number;\r\n  currency: string;\r\n  unitOfMeasure?: string;\r\n  tags: string[];\r\n  metadata: Record<string, any>;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface ProductMargin {\r\n  id: string;\r\n  tenantId: number;\r\n  productId: string;\r\n  product?: ProductCatalog;\r\n  effectiveDate: string;\r\n  endDate?: string;\r\n  cogs: number;\r\n  cogsSource: COGSSource;\r\n  marginType: MarginType;\r\n  marginValue: number;\r\n  marginPct: number;\r\n  sellingPrice?: number;\r\n  supplierCost?: number;\r\n  shippingCost?: number;\r\n  overheadAllocation?: number;\r\n  notes?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface MarginRule {\r\n  id: string;\r\n  tenantId: number;\r\n  name: string;\r\n  description?: string;\r\n  priority: number;\r\n  isActive: boolean;\r\n  conditions: MarginCondition[];\r\n  marginType: MarginType;\r\n  marginValue: number;\r\n  appliesTo: 'all' | 'category' | 'product' | 'platform' | 'campaign';\r\n  targetIds: string[];\r\n  effectiveFrom: string;\r\n  effectiveTo?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface MarginCondition {\r\n  field: string;\r\n  operator: 'eq' | 'ne' | 'gt' | 'lt' | 'gte' | 'lte' | 'in' | 'contains';\r\n  value: any;\r\n}\r\n\r\nexport interface DailyProfitMetrics {\r\n  id: string;\r\n  tenantId: number;\r\n  date: string;\r\n  platform?: string;\r\n  campaignId?: string;\r\n  productId?: string;\r\n  revenue: number;\r\n  cogs: number;\r\n  grossProfit: number;\r\n  adSpend: number;\r\n  netProfit: number;\r\n  grossMarginPct: number;\r\n  netMarginPct: number;\r\n  roas: number;\r\n  trueRoas: number;\r\n  profitRoas: number;\r\n  unitsSold: number;\r\n  avgOrderValue: number;\r\n  costPerAcquisition: number;\r\n}\r\n\r\nexport interface ProfitReport {\r\n  id: string;\r\n  tenantId: number;\r\n  reportDate: string;\r\n  periodStart: string;\r\n  periodEnd: string;\r\n  groupBy: string;\r\n  totalRevenue: number;\r\n  totalCogs: number;\r\n  totalGrossProfit: number;\r\n  totalAdSpend: number;\r\n  totalNetProfit: number;\r\n  avgGrossMargin: number;\r\n  avgNetMargin: number;\r\n  overallRoas: number;\r\n  overallTrueRoas: number;\r\n  breakdown: ProfitBreakdown[];\r\n  createdAt: string;\r\n}\r\n\r\nexport interface ProfitBreakdown {\r\n  dimension: string;\r\n  dimensionValue: string;\r\n  revenue: number;\r\n  cogs: number;\r\n  grossProfit: number;\r\n  adSpend: number;\r\n  netProfit: number;\r\n  grossMarginPct: number;\r\n  netMarginPct: number;\r\n  roas: number;\r\n  trueRoas: number;\r\n}\r\n\r\nexport interface COGSUpload {\r\n  id: string;\r\n  tenantId: number;\r\n  filename: string;\r\n  status: 'pending' | 'processing' | 'completed' | 'failed';\r\n  rowCount: number;\r\n  successCount: number;\r\n  errorCount: number;\r\n  errors: COGSUploadError[];\r\n  uploadedAt: string;\r\n  processedAt?: string;\r\n}\r\n\r\nexport interface COGSUploadError {\r\n  row: number;\r\n  field: string;\r\n  message: string;\r\n}\r\n\r\nexport interface CreateProductRequest {\r\n  sku: string;\r\n  name: string;\r\n  description?: string;\r\n  category?: string;\r\n  subcategory?: string;\r\n  brand?: string;\r\n  defaultCogs: number;\r\n  defaultMarginPct?: number;\r\n  currency?: string;\r\n  tags?: string[];\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface CreateMarginRuleRequest {\r\n  name: string;\r\n  description?: string;\r\n  priority?: number;\r\n  conditions: MarginCondition[];\r\n  marginType: MarginType;\r\n  marginValue: number;\r\n  appliesTo: 'all' | 'category' | 'product' | 'platform' | 'campaign';\r\n  targetIds?: string[];\r\n  effectiveFrom: string;\r\n  effectiveTo?: string;\r\n}\r\n\r\n// =============================================================================\r\n// API Functions\r\n// =============================================================================\r\n\r\nexport const profitApi = {\r\n  // Products\r\n  getProducts: async (params?: {\r\n    status?: ProductStatus;\r\n    category?: string;\r\n    search?: string;\r\n    page?: number;\r\n    limit?: number;\r\n  }) => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<ProductCatalog>>>(\r\n      '/profit/products',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getProduct: async (productId: string) => {\r\n    const response = await apiClient.get<ApiResponse<ProductCatalog>>(\r\n      `/profit/products/${productId}`\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  createProduct: async (data: CreateProductRequest) => {\r\n    const response = await apiClient.post<ApiResponse<ProductCatalog>>('/profit/products', data);\r\n    return response.data.data;\r\n  },\r\n\r\n  updateProduct: async (productId: string, data: Partial<CreateProductRequest>) => {\r\n    const response = await apiClient.patch<ApiResponse<ProductCatalog>>(\r\n      `/profit/products/${productId}`,\r\n      data\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  deleteProduct: async (productId: string) => {\r\n    const response = await apiClient.delete<ApiResponse<void>>(`/profit/products/${productId}`);\r\n    return response.data;\r\n  },\r\n\r\n  importProducts: async (file: File) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    const response = await apiClient.post<ApiResponse<{ imported: number; errors: any[] }>>(\r\n      '/profit/products/import',\r\n      formData,\r\n      {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Product Margins\r\n  getProductMargins: async (productId: string) => {\r\n    const response = await apiClient.get<ApiResponse<ProductMargin[]>>(\r\n      `/profit/products/${productId}/margins`\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  setProductMargin: async (productId: string, data: Partial<ProductMargin>) => {\r\n    const response = await apiClient.post<ApiResponse<ProductMargin>>(\r\n      `/profit/products/${productId}/margins`,\r\n      data\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Margin Rules\r\n  getMarginRules: async (params?: { isActive?: boolean }) => {\r\n    const response = await apiClient.get<ApiResponse<MarginRule[]>>('/profit/margin-rules', {\r\n      params,\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  getMarginRule: async (ruleId: string) => {\r\n    const response = await apiClient.get<ApiResponse<MarginRule>>(`/profit/margin-rules/${ruleId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  createMarginRule: async (data: CreateMarginRuleRequest) => {\r\n    const response = await apiClient.post<ApiResponse<MarginRule>>('/profit/margin-rules', data);\r\n    return response.data.data;\r\n  },\r\n\r\n  updateMarginRule: async (ruleId: string, data: Partial<CreateMarginRuleRequest>) => {\r\n    const response = await apiClient.patch<ApiResponse<MarginRule>>(\r\n      `/profit/margin-rules/${ruleId}`,\r\n      data\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  deleteMarginRule: async (ruleId: string) => {\r\n    const response = await apiClient.delete<ApiResponse<void>>(`/profit/margin-rules/${ruleId}`);\r\n    return response.data;\r\n  },\r\n\r\n  // COGS\r\n  uploadCOGS: async (file: File) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    const response = await apiClient.post<ApiResponse<COGSUpload>>(\r\n      '/profit/cogs/upload',\r\n      formData,\r\n      {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getCOGSUploads: async () => {\r\n    const response = await apiClient.get<ApiResponse<COGSUpload[]>>('/profit/cogs/uploads');\r\n    return response.data.data;\r\n  },\r\n\r\n  getCOGSUpload: async (uploadId: string) => {\r\n    const response = await apiClient.get<ApiResponse<COGSUpload>>(\r\n      `/profit/cogs/uploads/${uploadId}`\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // Profit Metrics\r\n  getDailyProfitMetrics: async (params: {\r\n    startDate: string;\r\n    endDate: string;\r\n    platform?: string;\r\n    campaignId?: string;\r\n    productId?: string;\r\n    groupBy?: string;\r\n  }) => {\r\n    const response = await apiClient.get<ApiResponse<DailyProfitMetrics[]>>(\r\n      '/profit/metrics/daily',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getProfitSummary: async (params: { startDate: string; endDate: string; groupBy?: string }) => {\r\n    const response = await apiClient.get<\r\n      ApiResponse<{\r\n        totalRevenue: number;\r\n        totalCogs: number;\r\n        grossProfit: number;\r\n        adSpend: number;\r\n        netProfit: number;\r\n        grossMarginPct: number;\r\n        netMarginPct: number;\r\n        roas: number;\r\n        trueRoas: number;\r\n        profitRoas: number;\r\n      }>\r\n    >('/profit/metrics/summary', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  // Profit Reports\r\n  generateProfitReport: async (params: {\r\n    periodStart: string;\r\n    periodEnd: string;\r\n    groupBy: string;\r\n    includeProducts?: boolean;\r\n  }) => {\r\n    const response = await apiClient.post<ApiResponse<ProfitReport>>(\r\n      '/profit/reports/generate',\r\n      params\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  getProfitReports: async () => {\r\n    const response = await apiClient.get<ApiResponse<ProfitReport[]>>('/profit/reports');\r\n    return response.data.data;\r\n  },\r\n\r\n  getProfitReport: async (reportId: string) => {\r\n    const response = await apiClient.get<ApiResponse<ProfitReport>>(`/profit/reports/${reportId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  // True ROAS Calculation\r\n  calculateTrueROAS: async (params: { startDate: string; endDate: string; groupBy?: string }) => {\r\n    const response = await apiClient.get<\r\n      ApiResponse<{\r\n        standardRoas: number;\r\n        trueRoas: number;\r\n        profitRoas: number;\r\n        breakdown: Array<{\r\n          dimension: string;\r\n          standardRoas: number;\r\n          trueRoas: number;\r\n          profitRoas: number;\r\n        }>;\r\n      }>\r\n    >('/profit/true-roas', { params });\r\n    return response.data.data;\r\n  },\r\n};\r\n\r\n// =============================================================================\r\n// React Query Hooks\r\n// =============================================================================\r\n\r\n// Products\r\nexport function useProducts(params?: {\r\n  status?: ProductStatus;\r\n  category?: string;\r\n  search?: string;\r\n  page?: number;\r\n  limit?: number;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'products', params],\r\n    queryFn: () => profitApi.getProducts(params),\r\n  });\r\n}\r\n\r\nexport function useProduct(productId: string) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'products', productId],\r\n    queryFn: () => profitApi.getProduct(productId),\r\n    enabled: !!productId,\r\n  });\r\n}\r\n\r\nexport function useCreateProduct() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: profitApi.createProduct,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'products'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useUpdateProduct() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: ({ productId, data }: { productId: string; data: Partial<CreateProductRequest> }) =>\r\n      profitApi.updateProduct(productId, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'products'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useDeleteProduct() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: profitApi.deleteProduct,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'products'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useImportProducts() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: profitApi.importProducts,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'products'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Product Margins\r\nexport function useProductMargins(productId: string) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'products', productId, 'margins'],\r\n    queryFn: () => profitApi.getProductMargins(productId),\r\n    enabled: !!productId,\r\n  });\r\n}\r\n\r\nexport function useSetProductMargin() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: ({ productId, data }: { productId: string; data: Partial<ProductMargin> }) =>\r\n      profitApi.setProductMargin(productId, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'products'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Margin Rules\r\nexport function useMarginRules(params?: { isActive?: boolean }) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'margin-rules', params],\r\n    queryFn: () => profitApi.getMarginRules(params),\r\n  });\r\n}\r\n\r\nexport function useMarginRule(ruleId: string) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'margin-rules', ruleId],\r\n    queryFn: () => profitApi.getMarginRule(ruleId),\r\n    enabled: !!ruleId,\r\n  });\r\n}\r\n\r\nexport function useCreateMarginRule() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: profitApi.createMarginRule,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'margin-rules'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useUpdateMarginRule() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: ({ ruleId, data }: { ruleId: string; data: Partial<CreateMarginRuleRequest> }) =>\r\n      profitApi.updateMarginRule(ruleId, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'margin-rules'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useDeleteMarginRule() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: profitApi.deleteMarginRule,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'margin-rules'] });\r\n    },\r\n  });\r\n}\r\n\r\n// COGS\r\nexport function useUploadCOGS() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: profitApi.uploadCOGS,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useCOGSUploads() {\r\n  return useQuery({\r\n    queryKey: ['profit', 'cogs', 'uploads'],\r\n    queryFn: profitApi.getCOGSUploads,\r\n  });\r\n}\r\n\r\nexport function useCOGSUpload(uploadId: string) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'cogs', 'uploads', uploadId],\r\n    queryFn: () => profitApi.getCOGSUpload(uploadId),\r\n    enabled: !!uploadId,\r\n  });\r\n}\r\n\r\n// Profit Metrics\r\nexport function useDailyProfitMetrics(params: {\r\n  startDate: string;\r\n  endDate: string;\r\n  platform?: string;\r\n  campaignId?: string;\r\n  productId?: string;\r\n  groupBy?: string;\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'metrics', 'daily', params],\r\n    queryFn: () => profitApi.getDailyProfitMetrics(params),\r\n    enabled: !!params.startDate && !!params.endDate,\r\n  });\r\n}\r\n\r\nexport function useProfitSummary(params: { startDate: string; endDate: string; groupBy?: string }) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'metrics', 'summary', params],\r\n    queryFn: () => profitApi.getProfitSummary(params),\r\n    enabled: !!params.startDate && !!params.endDate,\r\n  });\r\n}\r\n\r\n// Profit Reports\r\nexport function useGenerateProfitReport() {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: profitApi.generateProfitReport,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['profit', 'reports'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useProfitReports() {\r\n  return useQuery({\r\n    queryKey: ['profit', 'reports'],\r\n    queryFn: profitApi.getProfitReports,\r\n  });\r\n}\r\n\r\nexport function useProfitReport(reportId: string) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'reports', reportId],\r\n    queryFn: () => profitApi.getProfitReport(reportId),\r\n    enabled: !!reportId,\r\n  });\r\n}\r\n\r\n// True ROAS\r\nexport function useTrueROAS(params: { startDate: string; endDate: string; groupBy?: string }) {\r\n  return useQuery({\r\n    queryKey: ['profit', 'true-roas', params],\r\n    queryFn: () => profitApi.calculateTrueROAS(params),\r\n    enabled: !!params.startDate && !!params.endDate,\r\n  });\r\n}\r\n","/**\r\n * Stratum AI - Profit ROAS Page\r\n *\r\n * Manages products, COGS, margins, and profit calculations for True ROAS.\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n  useCOGSUploads,\r\n  useMarginRules,\r\n  useProducts,\r\n  useProfitSummary,\r\n  useTrueROAS,\r\n  useUploadCOGS,\r\n} from '@/api/hooks';\r\nimport {\r\n  ArrowTrendingUpIcon,\r\n  CalculatorIcon,\r\n  CurrencyDollarIcon,\r\n  DocumentArrowUpIcon,\r\n  PlusIcon,\r\n  ShoppingBagIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype TabType = 'overview' | 'products' | 'margins' | 'cogs';\r\n\r\nexport default function ProfitROAS() {\r\n  useParams<{ tenantId: string }>();\r\n  const [activeTab, setActiveTab] = useState<TabType>('overview');\r\n  const [dateRange] = useState({\r\n    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n    endDate: new Date().toISOString().split('T')[0],\r\n  });\r\n\r\n  const { data: products } = useProducts();\r\n  const { data: marginRules } = useMarginRules();\r\n  const { data: profitSummary } = useProfitSummary(dateRange);\r\n  const { data: trueROAS } = useTrueROAS(dateRange);\r\n  const { data: cogsUploads } = useCOGSUploads();\r\n  const uploadCOGS = useUploadCOGS();\r\n\r\n  const tabs = [\r\n    { id: 'overview' as TabType, label: 'Overview' },\r\n    { id: 'products' as TabType, label: 'Products' },\r\n    { id: 'margins' as TabType, label: 'Margin Rules' },\r\n    { id: 'cogs' as TabType, label: 'COGS Upload' },\r\n  ];\r\n\r\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      uploadCOGS.mutate(file);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">Profit ROAS</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            Track true profitability with COGS, margins, and profit-based ROAS\r\n          </p>\r\n        </div>\r\n        <button className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90\">\r\n          <PlusIcon className=\"h-4 w-4\" />\r\n          Add Product\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"border-b\">\r\n        <nav className=\"flex gap-4\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={cn(\r\n                'px-4 py-2 border-b-2 font-medium text-sm transition-colors',\r\n                activeTab === tab.id\r\n                  ? 'border-primary text-primary'\r\n                  : 'border-transparent text-muted-foreground hover:text-foreground'\r\n              )}\r\n            >\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Overview Tab */}\r\n      {activeTab === 'overview' && (\r\n        <div className=\"space-y-6\">\r\n          {/* ROAS Comparison */}\r\n          {trueROAS && (\r\n            <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n              <h2 className=\"text-lg font-semibold mb-4\">ROAS Comparison</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"text-center p-4 rounded-lg bg-muted/50\">\r\n                  <p className=\"text-sm text-muted-foreground mb-1\">Standard ROAS</p>\r\n                  <p className=\"text-4xl font-bold\">{trueROAS.standardRoas.toFixed(2)}x</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">Revenue / Ad Spend</p>\r\n                </div>\r\n                <div className=\"text-center p-4 rounded-lg bg-primary/10 border-2 border-primary\">\r\n                  <p className=\"text-sm text-muted-foreground mb-1\">True ROAS</p>\r\n                  <p className=\"text-4xl font-bold text-primary\">{trueROAS.trueRoas.toFixed(2)}x</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">Gross Profit / Ad Spend</p>\r\n                </div>\r\n                <div className=\"text-center p-4 rounded-lg bg-emerald-50 dark:bg-emerald-900/20\">\r\n                  <p className=\"text-sm text-muted-foreground mb-1\">Profit ROAS</p>\r\n                  <p className=\"text-4xl font-bold text-emerald-600\">\r\n                    {trueROAS.profitRoas.toFixed(2)}x\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">Net Profit / Ad Spend</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Profit Summary */}\r\n          {profitSummary && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/20\">\r\n                    <CurrencyDollarIcon className=\"h-5 w-5 text-blue-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Total Revenue</p>\r\n                    <p className=\"text-2xl font-bold\">\r\n                      ${profitSummary.totalRevenue.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-amber-100 dark:bg-amber-900/20\">\r\n                    <ShoppingBagIcon className=\"h-5 w-5 text-amber-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Total COGS</p>\r\n                    <p className=\"text-2xl font-bold\">\r\n                      ${profitSummary.totalCogs.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/20\">\r\n                    <CalculatorIcon className=\"h-5 w-5 text-purple-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Gross Profit</p>\r\n                    <p className=\"text-2xl font-bold\">\r\n                      ${profitSummary.grossProfit.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/20\">\r\n                    <ArrowTrendingUpIcon className=\"h-5 w-5 text-emerald-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Net Profit</p>\r\n                    <p className=\"text-2xl font-bold\">\r\n                      ${profitSummary.netProfit.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Margin Breakdown */}\r\n          {profitSummary && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <h3 className=\"font-medium mb-4\">Gross Margin</h3>\r\n                <div className=\"flex items-center justify-center\">\r\n                  <div className=\"relative w-32 h-32\">\r\n                    <svg className=\"w-full h-full -rotate-90\">\r\n                      <circle\r\n                        cx=\"64\"\r\n                        cy=\"64\"\r\n                        r=\"56\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"12\"\r\n                        fill=\"none\"\r\n                        className=\"text-muted\"\r\n                      />\r\n                      <circle\r\n                        cx=\"64\"\r\n                        cy=\"64\"\r\n                        r=\"56\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"12\"\r\n                        fill=\"none\"\r\n                        strokeDasharray={`${(profitSummary.grossMarginPct / 100) * 351.86} 351.86`}\r\n                        className=\"text-primary\"\r\n                      />\r\n                    </svg>\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                      <span className=\"text-2xl font-bold\">\r\n                        {profitSummary.grossMarginPct.toFixed(1)}%\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"rounded-xl border bg-card p-6 shadow-card\">\r\n                <h3 className=\"font-medium mb-4\">Net Margin</h3>\r\n                <div className=\"flex items-center justify-center\">\r\n                  <div className=\"relative w-32 h-32\">\r\n                    <svg className=\"w-full h-full -rotate-90\">\r\n                      <circle\r\n                        cx=\"64\"\r\n                        cy=\"64\"\r\n                        r=\"56\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"12\"\r\n                        fill=\"none\"\r\n                        className=\"text-muted\"\r\n                      />\r\n                      <circle\r\n                        cx=\"64\"\r\n                        cy=\"64\"\r\n                        r=\"56\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"12\"\r\n                        fill=\"none\"\r\n                        strokeDasharray={`${(profitSummary.netMarginPct / 100) * 351.86} 351.86`}\r\n                        className=\"text-emerald-500\"\r\n                      />\r\n                    </svg>\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                      <span className=\"text-2xl font-bold\">\r\n                        {profitSummary.netMarginPct.toFixed(1)}%\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Products Tab */}\r\n      {activeTab === 'products' && (\r\n        <div className=\"rounded-xl border bg-card shadow-card overflow-hidden\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-muted/50\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Product</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">SKU</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium\">Category</th>\r\n                <th className=\"px-4 py-3 text-right text-sm font-medium\">COGS</th>\r\n                <th className=\"px-4 py-3 text-right text-sm font-medium\">Margin %</th>\r\n                <th className=\"px-4 py-3 text-center text-sm font-medium\">Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {products?.items.map((product) => (\r\n                <tr key={product.id} className=\"hover:bg-muted/30\">\r\n                  <td className=\"px-4 py-3\">\r\n                    <p className=\"font-medium\">{product.name}</p>\r\n                    {product.brand && (\r\n                      <p className=\"text-sm text-muted-foreground\">{product.brand}</p>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-sm font-mono\">{product.sku}</td>\r\n                  <td className=\"px-4 py-3 text-sm\">{product.category || '-'}</td>\r\n                  <td className=\"px-4 py-3 text-right font-medium\">\r\n                    {product.currency} {product.defaultCogs.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right font-medium\">\r\n                    {product.defaultMarginPct.toFixed(1)}%\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-center\">\r\n                    <span\r\n                      className={cn(\r\n                        'px-2 py-1 rounded-full text-xs',\r\n                        product.status === 'active' &&\r\n                          'bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300',\r\n                        product.status === 'inactive' &&\r\n                          'bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300',\r\n                        product.status === 'discontinued' &&\r\n                          'bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300'\r\n                      )}\r\n                    >\r\n                      {product.status}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {/* Margin Rules Tab */}\r\n      {activeTab === 'margins' && (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex justify-end\">\r\n            <button className=\"flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-muted\">\r\n              <PlusIcon className=\"h-4 w-4\" />\r\n              Add Rule\r\n            </button>\r\n          </div>\r\n          <div className=\"rounded-xl border bg-card shadow-card overflow-hidden\">\r\n            <table className=\"w-full\">\r\n              <thead className=\"bg-muted/50\">\r\n                <tr>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-medium\">Rule Name</th>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-medium\">Applies To</th>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-medium\">Margin Type</th>\r\n                  <th className=\"px-4 py-3 text-right text-sm font-medium\">Value</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-medium\">Priority</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-medium\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y\">\r\n                {marginRules?.map((rule) => (\r\n                  <tr key={rule.id} className=\"hover:bg-muted/30\">\r\n                    <td className=\"px-4 py-3\">\r\n                      <p className=\"font-medium\">{rule.name}</p>\r\n                      {rule.description && (\r\n                        <p className=\"text-sm text-muted-foreground truncate max-w-xs\">\r\n                          {rule.description}\r\n                        </p>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm capitalize\">{rule.appliesTo}</td>\r\n                    <td className=\"px-4 py-3 text-sm capitalize\">{rule.marginType}</td>\r\n                    <td className=\"px-4 py-3 text-right font-medium\">\r\n                      {rule.marginType === 'percentage'\r\n                        ? `${rule.marginValue}%`\r\n                        : `$${rule.marginValue}`}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-center\">{rule.priority}</td>\r\n                    <td className=\"px-4 py-3 text-center\">\r\n                      {rule.isActive ? (\r\n                        <span className=\"px-2 py-1 rounded-full text-xs bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300\">\r\n                          Active\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300\">\r\n                          Inactive\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* COGS Upload Tab */}\r\n      {activeTab === 'cogs' && (\r\n        <div className=\"space-y-6\">\r\n          {/* Upload Area */}\r\n          <div className=\"rounded-xl border border-dashed bg-card p-12 text-center\">\r\n            <DocumentArrowUpIcon className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n            <h3 className=\"font-medium mb-2\">Upload COGS Data</h3>\r\n            <p className=\"text-sm text-muted-foreground mb-4\">\r\n              Upload a CSV file with SKU and COGS columns to update product costs\r\n            </p>\r\n            <label className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 cursor-pointer\">\r\n              <input type=\"file\" accept=\".csv\" onChange={handleFileUpload} className=\"hidden\" />\r\n              Choose File\r\n            </label>\r\n          </div>\r\n\r\n          {/* Upload History */}\r\n          <div className=\"rounded-xl border bg-card shadow-card overflow-hidden\">\r\n            <div className=\"p-4 border-b\">\r\n              <h3 className=\"font-medium\">Upload History</h3>\r\n            </div>\r\n            <table className=\"w-full\">\r\n              <thead className=\"bg-muted/50\">\r\n                <tr>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-medium\">Filename</th>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-medium\">Uploaded</th>\r\n                  <th className=\"px-4 py-3 text-right text-sm font-medium\">Rows</th>\r\n                  <th className=\"px-4 py-3 text-right text-sm font-medium\">Success</th>\r\n                  <th className=\"px-4 py-3 text-right text-sm font-medium\">Errors</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-medium\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y\">\r\n                {cogsUploads?.map((upload) => (\r\n                  <tr key={upload.id} className=\"hover:bg-muted/30\">\r\n                    <td className=\"px-4 py-3 font-medium\">{upload.filename}</td>\r\n                    <td className=\"px-4 py-3 text-sm\">\r\n                      {new Date(upload.uploadedAt).toLocaleString()}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-right\">{upload.rowCount}</td>\r\n                    <td className=\"px-4 py-3 text-right text-emerald-600\">{upload.successCount}</td>\r\n                    <td className=\"px-4 py-3 text-right text-red-600\">{upload.errorCount}</td>\r\n                    <td className=\"px-4 py-3 text-center\">\r\n                      <span\r\n                        className={cn(\r\n                          'px-2 py-1 rounded-full text-xs',\r\n                          upload.status === 'completed' &&\r\n                            'bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300',\r\n                          upload.status === 'processing' &&\r\n                            'bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300',\r\n                          upload.status === 'failed' &&\r\n                            'bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300',\r\n                          upload.status === 'pending' &&\r\n                            'bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300'\r\n                        )}\r\n                      >\r\n                        {upload.status}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["DocumentArrowUpIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","profitApi","params","apiClient","productId","data","file","formData","ruleId","uploadId","reportId","useProducts","useQuery","useMarginRules","useUploadCOGS","queryClient","useQueryClient","useMutation","useCOGSUploads","useProfitSummary","useTrueROAS","ProfitROAS","useParams","activeTab","setActiveTab","useState","dateRange","products","marginRules","profitSummary","trueROAS","cogsUploads","uploadCOGS","tabs","handleFileUpload","e","_a","jsxs","jsx","PlusIcon","tab","cn","CurrencyDollarIcon","ShoppingBagIcon","CalculatorIcon","ArrowTrendingUpIcon","product","rule","upload"],"mappings":"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","x_google_ignoreList":[0]}