{"version":3,"file":"CDPAudienceSync-D35o4N1m.js","sources":["../../node_modules/lucide-react/dist/esm/icons/file-braces.js","../../src/components/cdp/AudienceSync.tsx","../../src/views/cdp/CDPAudienceSync.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\n    \"path\",\n    { d: \"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1\", key: \"1oajmo\" }\n  ],\n  [\n    \"path\",\n    { d: \"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1\", key: \"mpwhp6\" }\n  ]\n];\nconst FileBraces = createLucideIcon(\"file-braces\", __iconNode);\n\nexport { __iconNode, FileBraces as default };\n//# sourceMappingURL=file-braces.js.map\n","/**\r\n * CDP Audience Sync Component\r\n * Manage audience sync to ad platforms (Meta, Google, TikTok, Snapchat)\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  AlertCircle,\r\n  ArrowUpRight,\r\n  CheckCircle2,\r\n  ChevronDown,\r\n  ChevronRight,\r\n  Clock,\r\n  Download,\r\n  FileJson,\r\n  FileSpreadsheet,\r\n  History,\r\n  Link2,\r\n  Loader2,\r\n  Plus,\r\n  RefreshCw,\r\n  Search,\r\n  Trash2,\r\n  Users,\r\n  X,\r\n  XCircle,\r\n  Zap,\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  AudienceExportParams,\r\n  CDPSegment,\r\n  PlatformAudience,\r\n  SyncPlatform,\r\n  SyncStatus,\r\n  useConnectedPlatforms,\r\n  useCreatePlatformAudience,\r\n  useDeletePlatformAudience,\r\n  useExportAudience,\r\n  usePlatformAudiences,\r\n  useSegments,\r\n  useSyncHistory,\r\n  useTriggerSync,\r\n} from '@/api/cdp';\r\n\r\n// Platform configurations\r\nconst PLATFORM_CONFIG: Record<\r\n  SyncPlatform,\r\n  {\r\n    name: string;\r\n    color: string;\r\n    bgColor: string;\r\n    icon: string;\r\n  }\r\n> = {\r\n  meta: {\r\n    name: 'Meta',\r\n    color: 'text-blue-500',\r\n    bgColor: 'bg-blue-500/10',\r\n    icon: 'M',\r\n  },\r\n  google: {\r\n    name: 'Google',\r\n    color: 'text-red-500',\r\n    bgColor: 'bg-red-500/10',\r\n    icon: 'G',\r\n  },\r\n  tiktok: {\r\n    name: 'TikTok',\r\n    color: 'text-gray-900 dark:text-white',\r\n    bgColor: 'bg-gray-900/10 dark:bg-white/10',\r\n    icon: 'T',\r\n  },\r\n  snapchat: {\r\n    name: 'Snapchat',\r\n    color: 'text-yellow-500',\r\n    bgColor: 'bg-yellow-500/10',\r\n    icon: 'S',\r\n  },\r\n};\r\n\r\n// Platform icon component\r\nfunction PlatformIcon({\r\n  platform,\r\n  size = 'md',\r\n}: {\r\n  platform: SyncPlatform;\r\n  size?: 'sm' | 'md' | 'lg';\r\n}) {\r\n  const config = PLATFORM_CONFIG[platform];\r\n  const sizeClasses = {\r\n    sm: 'w-6 h-6 text-xs',\r\n    md: 'w-8 h-8 text-sm',\r\n    lg: 'w-10 h-10 text-base',\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'rounded-lg flex items-center justify-center font-bold',\r\n        config.bgColor,\r\n        config.color,\r\n        sizeClasses[size]\r\n      )}\r\n    >\r\n      {config.icon}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Status badge component\r\nfunction StatusBadge({ status }: { status: SyncStatus | null }) {\r\n  const statusConfig: Record<\r\n    SyncStatus,\r\n    { icon: React.ReactNode; className: string; label: string }\r\n  > = {\r\n    pending: {\r\n      icon: <Clock className=\"w-3 h-3\" />,\r\n      className: 'bg-gray-500/10 text-gray-500',\r\n      label: 'Pending',\r\n    },\r\n    processing: {\r\n      icon: <Loader2 className=\"w-3 h-3 animate-spin\" />,\r\n      className: 'bg-blue-500/10 text-blue-500',\r\n      label: 'Syncing',\r\n    },\r\n    completed: {\r\n      icon: <CheckCircle2 className=\"w-3 h-3\" />,\r\n      className: 'bg-green-500/10 text-green-500',\r\n      label: 'Synced',\r\n    },\r\n    failed: {\r\n      icon: <XCircle className=\"w-3 h-3\" />,\r\n      className: 'bg-red-500/10 text-red-500',\r\n      label: 'Failed',\r\n    },\r\n    partial: {\r\n      icon: <AlertCircle className=\"w-3 h-3\" />,\r\n      className: 'bg-amber-500/10 text-amber-500',\r\n      label: 'Partial',\r\n    },\r\n  };\r\n\r\n  if (!status) {\r\n    return (\r\n      <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/10 text-gray-500\">\r\n        <Clock className=\"w-3 h-3\" />\r\n        Never synced\r\n      </span>\r\n    );\r\n  }\r\n\r\n  const config = statusConfig[status];\r\n  return (\r\n    <span\r\n      className={cn(\r\n        'inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium',\r\n        config.className\r\n      )}\r\n    >\r\n      {config.icon}\r\n      {config.label}\r\n    </span>\r\n  );\r\n}\r\n\r\n// Create audience modal\r\ninterface CreateAudienceModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  segments: CDPSegment[];\r\n  connectedPlatforms: Array<{\r\n    platform: SyncPlatform;\r\n    ad_accounts: Array<{ ad_account_id: string; ad_account_name: string | null }>;\r\n  }>;\r\n}\r\n\r\nfunction CreateAudienceModal({\r\n  isOpen,\r\n  onClose,\r\n  segments,\r\n  connectedPlatforms,\r\n}: CreateAudienceModalProps) {\r\n  const [segmentId, setSegmentId] = useState('');\r\n  const [platform, setPlatform] = useState<SyncPlatform | ''>('');\r\n  const [adAccountId, setAdAccountId] = useState('');\r\n  const [audienceName, setAudienceName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [autoSync, setAutoSync] = useState(true);\r\n  const [syncInterval, setSyncInterval] = useState(24);\r\n\r\n  const createMutation = useCreatePlatformAudience();\r\n\r\n  const selectedPlatform = connectedPlatforms.find((p) => p.platform === platform);\r\n  const adAccounts = selectedPlatform?.ad_accounts || [];\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!segmentId || !platform || !adAccountId || !audienceName) return;\r\n\r\n    try {\r\n      await createMutation.mutateAsync({\r\n        segment_id: segmentId,\r\n        platform: platform,\r\n        ad_account_id: adAccountId,\r\n        audience_name: audienceName,\r\n        description: description || undefined,\r\n        auto_sync: autoSync,\r\n        sync_interval_hours: syncInterval,\r\n      });\r\n      onClose();\r\n      // Reset form\r\n      setSegmentId('');\r\n      setPlatform('');\r\n      setAdAccountId('');\r\n      setAudienceName('');\r\n      setDescription('');\r\n      setAutoSync(true);\r\n      setSyncInterval(24);\r\n    } catch (error) {\r\n      console.error('Failed to create audience:', error);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/50\" onClick={onClose} />\r\n      <div className=\"relative bg-card border rounded-xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-auto\">\r\n        <div className=\"flex items-center justify-between p-4 border-b\">\r\n          <h2 className=\"text-lg font-semibold\">Create Platform Audience</h2>\r\n          <button onClick={onClose} className=\"p-2 rounded-lg hover:bg-muted transition-colors\">\r\n            <X className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\r\n          {/* Segment selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1.5\">CDP Segment</label>\r\n            <select\r\n              value={segmentId}\r\n              onChange={(e) => setSegmentId(e.target.value)}\r\n              className=\"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20\"\r\n              required\r\n            >\r\n              <option value=\"\">Select a segment...</option>\r\n              {segments.map((segment) => (\r\n                <option key={segment.id} value={segment.id}>\r\n                  {segment.name} ({segment.profile_count?.toLocaleString() || 0} profiles)\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Platform selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1.5\">Ad Platform</label>\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              {connectedPlatforms.map((p) => (\r\n                <button\r\n                  key={p.platform}\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setPlatform(p.platform);\r\n                    setAdAccountId('');\r\n                  }}\r\n                  className={cn(\r\n                    'flex items-center gap-2 p-3 rounded-lg border transition-all',\r\n                    platform === p.platform\r\n                      ? 'border-primary bg-primary/5 ring-2 ring-primary/20'\r\n                      : 'hover:border-muted-foreground/20'\r\n                  )}\r\n                >\r\n                  <PlatformIcon platform={p.platform} size=\"sm\" />\r\n                  <span className=\"font-medium\">{PLATFORM_CONFIG[p.platform].name}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n            {connectedPlatforms.length === 0 && (\r\n              <p className=\"mt-2 text-sm text-muted-foreground\">\r\n                No platforms connected. Connect platforms in Settings.\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Ad Account selection */}\r\n          {platform && adAccounts.length > 0 && (\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1.5\">Ad Account</label>\r\n              <select\r\n                value={adAccountId}\r\n                onChange={(e) => setAdAccountId(e.target.value)}\r\n                className=\"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20\"\r\n                required\r\n              >\r\n                <option value=\"\">Select an ad account...</option>\r\n                {adAccounts.map((account) => (\r\n                  <option key={account.ad_account_id} value={account.ad_account_id}>\r\n                    {account.ad_account_name || account.ad_account_id}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n\r\n          {/* Audience name */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1.5\">Audience Name</label>\r\n            <input\r\n              type=\"text\"\r\n              value={audienceName}\r\n              onChange={(e) => setAudienceName(e.target.value)}\r\n              placeholder=\"e.g., High Value Customers\"\r\n              className=\"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Description */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1.5\">Description (optional)</label>\r\n            <textarea\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              placeholder=\"Describe this audience...\"\r\n              rows={2}\r\n              className=\"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20 resize-none\"\r\n            />\r\n          </div>\r\n\r\n          {/* Auto-sync settings */}\r\n          <div className=\"flex items-center gap-4 p-3 rounded-lg bg-muted/30 border\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"autoSync\"\r\n                checked={autoSync}\r\n                onChange={(e) => setAutoSync(e.target.checked)}\r\n                className=\"w-4 h-4 rounded border-gray-300\"\r\n              />\r\n              <label htmlFor=\"autoSync\" className=\"text-sm font-medium\">\r\n                Auto-sync audience\r\n              </label>\r\n            </div>\r\n            {autoSync && (\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-sm text-muted-foreground\">every</span>\r\n                <select\r\n                  value={syncInterval}\r\n                  onChange={(e) => setSyncInterval(Number(e.target.value))}\r\n                  className=\"px-2 py-1 rounded border bg-background text-sm\"\r\n                >\r\n                  <option value={1}>1 hour</option>\r\n                  <option value={6}>6 hours</option>\r\n                  <option value={12}>12 hours</option>\r\n                  <option value={24}>24 hours</option>\r\n                  <option value={48}>48 hours</option>\r\n                  <option value={168}>1 week</option>\r\n                </select>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex items-center justify-end gap-3 pt-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 rounded-lg border hover:bg-muted transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={\r\n                !segmentId || !platform || !adAccountId || !audienceName || createMutation.isPending\r\n              }\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors\"\r\n            >\r\n              {createMutation.isPending ? (\r\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              ) : (\r\n                <Plus className=\"w-4 h-4\" />\r\n              )}\r\n              Create Audience\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Sync history panel\r\ninterface SyncHistoryPanelProps {\r\n  audienceId: string;\r\n  audienceName: string;\r\n  onClose: () => void;\r\n}\r\n\r\nfunction SyncHistoryPanel({ audienceId, audienceName, onClose }: SyncHistoryPanelProps) {\r\n  const { data, isLoading } = useSyncHistory(audienceId, 20);\r\n  const jobs = data?.jobs || [];\r\n\r\n  const formatDuration = (ms: number | null) => {\r\n    if (!ms) return '-';\r\n    if (ms < 1000) return `${ms}ms`;\r\n    if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\r\n    return `${(ms / 60000).toFixed(1)}m`;\r\n  };\r\n\r\n  const formatDate = (date: string | null) => {\r\n    if (!date) return '-';\r\n    return new Date(date).toLocaleString();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-y-0 right-0 w-full max-w-lg bg-card border-l shadow-xl z-50 overflow-hidden flex flex-col\">\r\n      <div className=\"flex items-center justify-between p-4 border-b\">\r\n        <div>\r\n          <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <History className=\"w-5 h-5\" />\r\n            Sync History\r\n          </h2>\r\n          <p className=\"text-sm text-muted-foreground\">{audienceName}</p>\r\n        </div>\r\n        <button onClick={onClose} className=\"p-2 rounded-lg hover:bg-muted transition-colors\">\r\n          <X className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-auto p-4\">\r\n        {isLoading ? (\r\n          <div className=\"flex items-center justify-center py-12\">\r\n            <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n          </div>\r\n        ) : jobs.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <History className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\r\n            <h3 className=\"font-semibold mb-2\">No sync history</h3>\r\n            <p className=\"text-sm text-muted-foreground\">This audience hasn't been synced yet.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {jobs.map((job) => (\r\n              <div key={job.id} className=\"p-4 rounded-lg border bg-muted/20\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <StatusBadge status={job.status} />\r\n                    <span className=\"text-sm text-muted-foreground capitalize\">\r\n                      {job.operation}\r\n                    </span>\r\n                  </div>\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    {formatDate(job.created_at)}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-4 text-sm\">\r\n                  <div>\r\n                    <div className=\"text-muted-foreground\">Profiles</div>\r\n                    <div className=\"font-semibold\">{job.profiles_sent.toLocaleString()}</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-muted-foreground\">Added</div>\r\n                    <div className=\"font-semibold text-green-500\">\r\n                      +{job.profiles_added.toLocaleString()}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-muted-foreground\">Duration</div>\r\n                    <div className=\"font-semibold\">{formatDuration(job.duration_ms)}</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {job.profiles_failed > 0 && (\r\n                  <div className=\"mt-2 text-sm text-red-500\">\r\n                    {job.profiles_failed.toLocaleString()} profiles failed\r\n                  </div>\r\n                )}\r\n\r\n                {job.error_message && (\r\n                  <div className=\"mt-2 p-2 rounded bg-red-500/10 text-red-500 text-sm\">\r\n                    {job.error_message}\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-2 text-xs text-muted-foreground\">\r\n                  Triggered by: {job.triggered_by || 'manual'}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Export audience modal\r\ninterface ExportAudienceModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  segments: CDPSegment[];\r\n}\r\n\r\nfunction ExportAudienceModal({ isOpen, onClose, segments }: ExportAudienceModalProps) {\r\n  const [segmentId, setSegmentId] = useState<string>('');\r\n  const [format, setFormat] = useState<'csv' | 'json'>('csv');\r\n  const [includeTraits, setIncludeTraits] = useState(true);\r\n  const [includeEvents, setIncludeEvents] = useState(false);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n\r\n  const exportMutation = useExportAudience();\r\n\r\n  const handleExport = async () => {\r\n    setIsExporting(true);\r\n    try {\r\n      const params: AudienceExportParams = {\r\n        format,\r\n        segment_id: segmentId || undefined,\r\n        include_traits: includeTraits,\r\n        include_events: includeEvents,\r\n      };\r\n\r\n      const result = await exportMutation.mutateAsync(params);\r\n\r\n      // Handle file download\r\n      if (result instanceof Blob) {\r\n        const url = URL.createObjectURL(result);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `audience-export-${new Date().toISOString().split('T')[0]}.${format}`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n      } else {\r\n        // JSON response - convert to downloadable file\r\n        const blob = new Blob([JSON.stringify(result, null, 2)], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `audience-export-${new Date().toISOString().split('T')[0]}.json`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n      }\r\n\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Export failed:', error);\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/50\" onClick={onClose} />\r\n      <div className=\"relative bg-card border rounded-xl shadow-xl w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between p-4 border-b\">\r\n          <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <Download className=\"w-5 h-5\" />\r\n            Export Custom Audience\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 rounded-lg hover:bg-muted transition-colors\">\r\n            <X className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-4 space-y-4\">\r\n          {/* Segment selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1.5\">Segment (optional)</label>\r\n            <select\r\n              value={segmentId}\r\n              onChange={(e) => setSegmentId(e.target.value)}\r\n              className=\"w-full px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20\"\r\n            >\r\n              <option value=\"\">All profiles</option>\r\n              {segments.map((segment) => (\r\n                <option key={segment.id} value={segment.id}>\r\n                  {segment.name} ({segment.profile_count?.toLocaleString() || 0} profiles)\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <p className=\"mt-1 text-xs text-muted-foreground\">Leave empty to export all profiles</p>\r\n          </div>\r\n\r\n          {/* Format selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1.5\">Export Format</label>\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setFormat('csv')}\r\n                className={cn(\r\n                  'flex items-center justify-center gap-2 p-3 rounded-lg border transition-all',\r\n                  format === 'csv'\r\n                    ? 'border-primary bg-primary/5 ring-2 ring-primary/20'\r\n                    : 'hover:border-muted-foreground/20'\r\n                )}\r\n              >\r\n                <FileSpreadsheet className=\"w-5 h-5\" />\r\n                <span className=\"font-medium\">CSV</span>\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setFormat('json')}\r\n                className={cn(\r\n                  'flex items-center justify-center gap-2 p-3 rounded-lg border transition-all',\r\n                  format === 'json'\r\n                    ? 'border-primary bg-primary/5 ring-2 ring-primary/20'\r\n                    : 'hover:border-muted-foreground/20'\r\n                )}\r\n              >\r\n                <FileJson className=\"w-5 h-5\" />\r\n                <span className=\"font-medium\">JSON</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Include options */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"block text-sm font-medium\">Include Data</label>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={includeTraits}\r\n                  onChange={(e) => setIncludeTraits(e.target.checked)}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <span className=\"text-sm\">Profile traits & attributes</span>\r\n              </label>\r\n              <label className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={includeEvents}\r\n                  onChange={(e) => setIncludeEvents(e.target.checked)}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <span className=\"text-sm\">Recent events (last 30 days)</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Info box */}\r\n          <div className=\"p-3 rounded-lg bg-muted/30 border text-sm\">\r\n            <p className=\"text-muted-foreground\">\r\n              Export includes: email, phone, identifiers, lifecycle stage\r\n              {includeTraits && ', custom traits'}\r\n              {includeEvents && ', event history'}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex items-center justify-end gap-3 pt-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 rounded-lg border hover:bg-muted transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleExport}\r\n              disabled={isExporting}\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors\"\r\n            >\r\n              {isExporting ? (\r\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              ) : (\r\n                <Download className=\"w-4 h-4\" />\r\n              )}\r\n              Export {format.toUpperCase()}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Audience card component\r\ninterface AudienceCardProps {\r\n  audience: PlatformAudience;\r\n  onSync: () => void;\r\n  onDelete: () => void;\r\n  onViewHistory: () => void;\r\n  isSyncing: boolean;\r\n}\r\n\r\nfunction AudienceCard({ audience, onSync, onDelete, onViewHistory, isSyncing }: AudienceCardProps) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const formatDate = (date: string | null) => {\r\n    if (!date) return 'Never';\r\n    return new Date(date).toLocaleDateString();\r\n  };\r\n\r\n  const matchRate = audience.match_rate ? `${audience.match_rate.toFixed(1)}%` : '-';\r\n\r\n  return (\r\n    <div className=\"p-4 rounded-xl border bg-card hover:shadow-md transition-all\">\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <PlatformIcon platform={audience.platform} />\r\n          <div>\r\n            <h3 className=\"font-semibold\">{audience.platform_audience_name}</h3>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {PLATFORM_CONFIG[audience.platform]?.name} â€¢ {audience.ad_account_id}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <StatusBadge status={audience.last_sync_status as SyncStatus} />\r\n      </div>\r\n\r\n      {audience.description && (\r\n        <p className=\"text-sm text-muted-foreground mb-3 line-clamp-2\">{audience.description}</p>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-3 gap-4 text-sm mb-4\">\r\n        <div>\r\n          <div className=\"text-muted-foreground\">Platform Size</div>\r\n          <div className=\"font-semibold\">{audience.platform_size?.toLocaleString() || '-'}</div>\r\n        </div>\r\n        <div>\r\n          <div className=\"text-muted-foreground\">Match Rate</div>\r\n          <div className=\"font-semibold\">{matchRate}</div>\r\n        </div>\r\n        <div>\r\n          <div className=\"text-muted-foreground\">Last Sync</div>\r\n          <div className=\"font-semibold\">{formatDate(audience.last_sync_at)}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Auto-sync indicator */}\r\n      {audience.auto_sync && (\r\n        <div className=\"flex items-center gap-2 text-xs text-muted-foreground mb-3\">\r\n          <RefreshCw className=\"w-3 h-3\" />\r\n          <span>Auto-sync every {audience.sync_interval_hours}h</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex items-center gap-2 pt-3 border-t\">\r\n        <button\r\n          onClick={onSync}\r\n          disabled={isSyncing}\r\n          className=\"flex-1 flex items-center justify-center gap-2 px-3 py-1.5 rounded-md bg-primary/10 text-primary hover:bg-primary/20 text-sm font-medium transition-colors disabled:opacity-50\"\r\n        >\r\n          {isSyncing ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Zap className=\"w-4 h-4\" />}\r\n          Sync Now\r\n        </button>\r\n        <button\r\n          onClick={onViewHistory}\r\n          className=\"px-3 py-1.5 rounded-md bg-muted hover:bg-muted/80 text-sm font-medium transition-colors\"\r\n        >\r\n          <History className=\"w-4 h-4\" />\r\n        </button>\r\n        <button\r\n          onClick={() => setIsExpanded(!isExpanded)}\r\n          className=\"px-3 py-1.5 rounded-md bg-muted hover:bg-muted/80 text-sm font-medium transition-colors\"\r\n        >\r\n          {isExpanded ? <ChevronDown className=\"w-4 h-4\" /> : <ChevronRight className=\"w-4 h-4\" />}\r\n        </button>\r\n        <button\r\n          onClick={onDelete}\r\n          className=\"px-3 py-1.5 rounded-md hover:bg-red-500/10 text-muted-foreground hover:text-red-500 text-sm font-medium transition-colors\"\r\n        >\r\n          <Trash2 className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Expanded details */}\r\n      {isExpanded && (\r\n        <div className=\"mt-4 pt-4 border-t space-y-2 text-sm\">\r\n          <div className=\"flex justify-between\">\r\n            <span className=\"text-muted-foreground\">Segment ID</span>\r\n            <span className=\"font-mono text-xs\">{audience.segment_id}</span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span className=\"text-muted-foreground\">Platform Audience ID</span>\r\n            <span className=\"font-mono text-xs\">\r\n              {audience.platform_audience_id || 'Not created yet'}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span className=\"text-muted-foreground\">Created</span>\r\n            <span>{new Date(audience.created_at).toLocaleDateString()}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Main component\r\nexport function AudienceSync() {\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showExportModal, setShowExportModal] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [platformFilter, setPlatformFilter] = useState<SyncPlatform | ''>('');\r\n  const [historyAudience, setHistoryAudience] = useState<PlatformAudience | null>(null);\r\n  const [syncingIds, setSyncingIds] = useState<Set<string>>(new Set());\r\n\r\n  // Queries\r\n  const { data: platformsData, isLoading: platformsLoading } = useConnectedPlatforms();\r\n  const {\r\n    data: audiencesData,\r\n    isLoading: audiencesLoading,\r\n    refetch,\r\n  } = usePlatformAudiences({\r\n    platform: platformFilter || undefined,\r\n  });\r\n  const { data: segmentsData } = useSegments({ status: 'active' });\r\n\r\n  // Mutations\r\n  const syncMutation = useTriggerSync();\r\n  const deleteMutation = useDeletePlatformAudience();\r\n\r\n  const connectedPlatforms = platformsData || [];\r\n  const audiences = audiencesData?.audiences || [];\r\n  const segments = segmentsData?.segments || [];\r\n\r\n  // Filter audiences by search\r\n  const filteredAudiences = audiences.filter(\r\n    (a) =>\r\n      a.platform_audience_name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      a.description?.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  // Handle sync\r\n  const handleSync = async (audienceId: string) => {\r\n    setSyncingIds((prev) => new Set(prev).add(audienceId));\r\n    try {\r\n      await syncMutation.mutateAsync({ audienceId, operation: 'update' });\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Sync failed:', error);\r\n    } finally {\r\n      setSyncingIds((prev) => {\r\n        const next = new Set(prev);\r\n        next.delete(audienceId);\r\n        return next;\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handle delete\r\n  const handleDelete = async (audienceId: string) => {\r\n    if (\r\n      !confirm(\r\n        'Are you sure you want to delete this audience? This will also remove it from the ad platform.'\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n    try {\r\n      await deleteMutation.mutateAsync({ audienceId, deleteFromPlatform: true });\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Delete failed:', error);\r\n    }\r\n  };\r\n\r\n  const isLoading = platformsLoading || audiencesLoading;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold flex items-center gap-2\">\r\n            <ArrowUpRight className=\"w-6 h-6 text-primary\" />\r\n            Audience Sync\r\n          </h2>\r\n          <p className=\"text-sm text-muted-foreground mt-1\">\r\n            Push CDP segments to ad platforms for targeting\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setShowExportModal(true)}\r\n            disabled={segments.length === 0}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-muted disabled:opacity-50 transition-colors\"\r\n          >\r\n            <Download className=\"w-4 h-4\" />\r\n            Export\r\n          </button>\r\n          <button\r\n            onClick={() => setShowCreateModal(true)}\r\n            disabled={connectedPlatforms.length === 0 || segments.length === 0}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            New Audience\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Connected platforms summary */}\r\n      <div className=\"flex items-center gap-2 flex-wrap\">\r\n        <span className=\"text-sm text-muted-foreground\">Connected:</span>\r\n        {connectedPlatforms.length === 0 ? (\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-sm text-amber-500\">No platforms connected</span>\r\n            <Link\r\n              to=\"/dashboard/settings\"\r\n              className=\"inline-flex items-center gap-1 text-sm text-primary hover:underline\"\r\n            >\r\n              <Link2 className=\"w-3 h-3\" />\r\n              Connect platforms\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          connectedPlatforms.map((p) => (\r\n            <div\r\n              key={p.platform}\r\n              className=\"flex items-center gap-1.5 px-2 py-1 rounded-full bg-muted text-sm\"\r\n            >\r\n              <PlatformIcon platform={p.platform} size=\"sm\" />\r\n              <span>{PLATFORM_CONFIG[p.platform].name}</span>\r\n              <span className=\"text-muted-foreground\">({p.ad_accounts.length})</span>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-col sm:flex-row gap-3\">\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n          <input\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            placeholder=\"Search audiences...\"\r\n            className=\"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20\"\r\n          />\r\n        </div>\r\n        <select\r\n          value={platformFilter}\r\n          onChange={(e) => setPlatformFilter(e.target.value as SyncPlatform | '')}\r\n          className=\"px-3 py-2 rounded-lg border bg-background focus:ring-2 focus:ring-primary/20\"\r\n        >\r\n          <option value=\"\">All Platforms</option>\r\n          {Object.entries(PLATFORM_CONFIG).map(([key, config]) => (\r\n            <option key={key} value={key}>\r\n              {config.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* Audiences grid */}\r\n      {isLoading ? (\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n        </div>\r\n      ) : filteredAudiences.length === 0 ? (\r\n        <div className=\"text-center py-12 bg-card border rounded-xl\">\r\n          <Users className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"font-semibold mb-2\">No audiences yet</h3>\r\n          <p className=\"text-sm text-muted-foreground mb-4 max-w-md mx-auto\">\r\n            {connectedPlatforms.length === 0\r\n              ? 'Connect your ad platforms (Meta, Google, TikTok, Snapchat) to start syncing audiences.'\r\n              : segments.length === 0\r\n                ? 'Create a CDP segment first, then sync it to your ad platforms.'\r\n                : 'Create your first platform audience to start syncing.'}\r\n          </p>\r\n          {connectedPlatforms.length === 0 ? (\r\n            <Link\r\n              to=\"/dashboard/settings\"\r\n              className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n            >\r\n              <Link2 className=\"w-4 h-4\" />\r\n              Connect Platforms\r\n            </Link>\r\n          ) : segments.length === 0 ? (\r\n            <Link\r\n              to=\"/dashboard/cdp/segments\"\r\n              className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Create Segment\r\n            </Link>\r\n          ) : (\r\n            <button\r\n              onClick={() => setShowCreateModal(true)}\r\n              className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Create Audience\r\n            </button>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {filteredAudiences.map((audience) => (\r\n            <AudienceCard\r\n              key={audience.id}\r\n              audience={audience}\r\n              onSync={() => handleSync(audience.id)}\r\n              onDelete={() => handleDelete(audience.id)}\r\n              onViewHistory={() => setHistoryAudience(audience)}\r\n              isSyncing={syncingIds.has(audience.id)}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Create modal */}\r\n      <CreateAudienceModal\r\n        isOpen={showCreateModal}\r\n        onClose={() => setShowCreateModal(false)}\r\n        segments={segments}\r\n        connectedPlatforms={connectedPlatforms}\r\n      />\r\n\r\n      {/* Export modal */}\r\n      <ExportAudienceModal\r\n        isOpen={showExportModal}\r\n        onClose={() => setShowExportModal(false)}\r\n        segments={segments}\r\n      />\r\n\r\n      {/* History panel */}\r\n      {historyAudience && (\r\n        <SyncHistoryPanel\r\n          audienceId={historyAudience.id}\r\n          audienceName={historyAudience.platform_audience_name}\r\n          onClose={() => setHistoryAudience(null)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AudienceSync;\r\n","/**\r\n * CDP Audience Sync View\r\n * Page for managing audience sync to ad platforms\r\n */\r\n\r\nimport { AudienceSync } from '@/components/cdp';\r\n\r\nexport default function CDPAudienceSync() {\r\n  return (\r\n    <div className=\"p-6\">\r\n      <AudienceSync />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["__iconNode","FileBraces","createLucideIcon","PLATFORM_CONFIG","PlatformIcon","platform","size","config","sizeClasses","jsx","cn","StatusBadge","status","statusConfig","Clock","Loader2","CheckCircle2","XCircle","AlertCircle","jsxs","CreateAudienceModal","isOpen","onClose","segments","connectedPlatforms","segmentId","setSegmentId","useState","setPlatform","adAccountId","setAdAccountId","audienceName","setAudienceName","description","setDescription","autoSync","setAutoSync","syncInterval","setSyncInterval","createMutation","useCreatePlatformAudience","selectedPlatform","p","adAccounts","handleSubmit","e","error","X","segment","_a","account","Plus","SyncHistoryPanel","audienceId","data","isLoading","useSyncHistory","jobs","formatDuration","ms","formatDate","date","History","job","ExportAudienceModal","format","setFormat","includeTraits","setIncludeTraits","includeEvents","setIncludeEvents","isExporting","setIsExporting","exportMutation","useExportAudience","handleExport","params","result","url","a","blob","Download","FileSpreadsheet","FileJson","AudienceCard","audience","onSync","onDelete","onViewHistory","isSyncing","isExpanded","setIsExpanded","matchRate","RefreshCw","Zap","ChevronDown","ChevronRight","Trash2","AudienceSync","showCreateModal","setShowCreateModal","showExportModal","setShowExportModal","searchQuery","setSearchQuery","platformFilter","setPlatformFilter","historyAudience","setHistoryAudience","syncingIds","setSyncingIds","platformsData","platformsLoading","useConnectedPlatforms","audiencesData","audiencesLoading","refetch","usePlatformAudiences","segmentsData","useSegments","syncMutation","useTriggerSync","deleteMutation","useDeletePlatformAudience","audiences","filteredAudiences","handleSync","prev","next","handleDelete","ArrowUpRight","Link","Link2","Search","key","Users","CDPAudienceSync"],"mappings":"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","x_google_ignoreList":[0]}