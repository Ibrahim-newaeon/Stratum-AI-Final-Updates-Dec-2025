{"version":3,"file":"CDPEvents-Bf02xgga.js","sources":["../../src/views/cdp/CDPEvents.tsx"],"sourcesContent":["/**\r\n * CDP Events - Event timeline and analytics\r\n */\r\n\r\nimport { useMemo, useState } from 'react';\r\nimport {\r\n  ArrowDownTrayIcon,\r\n  ChartBarIcon,\r\n  CheckCircleIcon,\r\n  ClockIcon,\r\n  ExclamationTriangleIcon,\r\n  MagnifyingGlassIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  type AnomalySeverity,\r\n  type DailyVolume,\r\n  type EventByName,\r\n  useAnomalySummary,\r\n  useEventAnomalies,\r\n  useEventStatistics,\r\n  useEventTrends,\r\n  useExportAudience,\r\n} from '@/api/cdp';\r\n\r\n// Severity Badge\r\nfunction SeverityBadge({ severity }: { severity: AnomalySeverity }) {\r\n  const config = {\r\n    low: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400',\r\n    medium: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400',\r\n    high: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400',\r\n    critical: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400',\r\n  };\r\n\r\n  return (\r\n    <span className={cn('px-2 py-1 rounded-full text-xs font-medium capitalize', config[severity])}>\r\n      {severity}\r\n    </span>\r\n  );\r\n}\r\n\r\n// Daily Volume Chart\r\nfunction VolumeChart({ data, height = 200 }: { data: DailyVolume[]; height?: number }) {\r\n  const maxCount = Math.max(...data.map((d) => d.count), 1);\r\n\r\n  return (\r\n    <div className=\"relative\" style={{ height }}>\r\n      <div className=\"absolute inset-0 flex items-end gap-1\">\r\n        {data.map((day, i) => {\r\n          const heightPercent = (day.count / maxCount) * 100;\r\n          return (\r\n            <div key={i} className=\"flex-1 flex flex-col items-center justify-end h-full group\">\r\n              <div\r\n                className=\"w-full bg-primary/80 rounded-t hover:bg-primary transition-colors cursor-pointer relative\"\r\n                style={{ height: `${heightPercent}%`, minHeight: '4px' }}\r\n              >\r\n                {/* Tooltip */}\r\n                <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-popover border rounded shadow-lg text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10\">\r\n                  <p className=\"font-medium\">{day.count.toLocaleString()} events</p>\r\n                  <p className=\"text-muted-foreground\">{new Date(day.date).toLocaleDateString()}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {/* X-axis labels */}\r\n      <div className=\"absolute -bottom-6 inset-x-0 flex justify-between text-xs text-muted-foreground\">\r\n        <span>\r\n          {data.length > 0\r\n            ? new Date(data[0].date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\r\n            : ''}\r\n        </span>\r\n        <span>\r\n          {data.length > 0\r\n            ? new Date(data[data.length - 1].date).toLocaleDateString('en-US', {\r\n                month: 'short',\r\n                day: 'numeric',\r\n              })\r\n            : ''}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Events by Name Chart (Horizontal Bar)\r\nfunction EventsBarChart({ data }: { data: EventByName[] }) {\r\n  const maxCount = Math.max(...data.map((d) => d.count), 1);\r\n  const topEvents = data.slice(0, 10);\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {topEvents.map((event, i) => {\r\n        const widthPercent = (event.count / maxCount) * 100;\r\n        return (\r\n          <div key={event.event_name}>\r\n            <div className=\"flex justify-between text-sm mb-1\">\r\n              <span className=\"font-medium truncate\">{event.event_name}</span>\r\n              <span className=\"text-muted-foreground ml-2\">{event.count.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\r\n              <div\r\n                className={cn(\r\n                  'h-full rounded-full transition-all duration-500',\r\n                  i === 0 ? 'bg-primary' : i < 3 ? 'bg-primary/70' : 'bg-primary/50'\r\n                )}\r\n                style={{ width: `${widthPercent}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Trend Indicator\r\nfunction TrendIndicator({ trend, change }: { trend: string; change: number }) {\r\n  const isUp = trend === 'up' || change > 0;\r\n  const isDown = trend === 'down' || change < 0;\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      <span\r\n        className={cn(\r\n          'text-2xl font-bold',\r\n          isUp ? 'text-green-500' : isDown ? 'text-red-500' : 'text-muted-foreground'\r\n        )}\r\n      >\r\n        {isUp ? '+' : ''}\r\n        {change.toFixed(1)}%\r\n      </span>\r\n      <span className=\"text-sm text-muted-foreground\">vs last period</span>\r\n    </div>\r\n  );\r\n}\r\n\r\n// EMQ Distribution Chart\r\nfunction EMQDistributionChart({ data }: { data: Array<{ score_range: string; count: number }> }) {\r\n  const total = data.reduce((sum, d) => sum + d.count, 0);\r\n\r\n  const getColor = (range: string) => {\r\n    if (range.includes('90') || range.includes('80-')) return 'bg-green-400';\r\n    if (range.includes('70') || range.includes('60-')) return 'bg-yellow-400';\r\n    if (range.includes('50') || range.includes('40-')) return 'bg-orange-400';\r\n    return 'bg-red-400';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {data.map((bucket) => {\r\n        const percent = total > 0 ? (bucket.count / total) * 100 : 0;\r\n        return (\r\n          <div key={bucket.score_range} className=\"flex items-center gap-3\">\r\n            <span className=\"text-xs w-16 text-muted-foreground\">{bucket.score_range}</span>\r\n            <div className=\"flex-1 h-4 bg-muted rounded-full overflow-hidden\">\r\n              <div\r\n                className={cn('h-full rounded-full transition-all', getColor(bucket.score_range))}\r\n                style={{ width: `${percent}%` }}\r\n              />\r\n            </div>\r\n            <span className=\"text-xs w-12 text-right\">{percent.toFixed(1)}%</span>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function CDPEvents() {\r\n  const [periodDays, setPeriodDays] = useState(30);\r\n  const [eventFilter, setEventFilter] = useState('');\r\n  const [showAnomalies, setShowAnomalies] = useState(false);\r\n\r\n  const { data: stats, isLoading: statsLoading } = useEventStatistics(periodDays);\r\n  const { data: trends, isLoading: trendsLoading } = useEventTrends(periodDays);\r\n  const { data: summary } = useAnomalySummary();\r\n  const { data: anomalies, isLoading: anomaliesLoading } = useEventAnomalies({\r\n    window_days: 7,\r\n    zscore_threshold: 2.0,\r\n  });\r\n  const exportMutation = useExportAudience();\r\n\r\n  const filteredEvents = useMemo(() => {\r\n    if (!stats?.events_by_name) return [];\r\n    if (!eventFilter) return stats.events_by_name;\r\n    return stats.events_by_name.filter((e) =>\r\n      e.event_name.toLowerCase().includes(eventFilter.toLowerCase())\r\n    );\r\n  }, [stats, eventFilter]);\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      const startDate = new Date();\r\n      startDate.setDate(startDate.getDate() - periodDays);\r\n      await exportMutation.mutateAsync({\r\n        format: 'csv',\r\n        first_seen_after: startDate.toISOString().split('T')[0],\r\n        limit: 10000,\r\n      });\r\n    } catch (error) {\r\n      console.error('Export failed:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">Events Timeline</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            {stats?.total_events?.toLocaleString() || 0} events in the last {periodDays} days\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <select\r\n            value={periodDays}\r\n            onChange={(e) => setPeriodDays(Number(e.target.value))}\r\n            className=\"px-3 py-2 border rounded-lg bg-background text-sm\"\r\n          >\r\n            <option value={7}>Last 7 days</option>\r\n            <option value={14}>Last 14 days</option>\r\n            <option value={30}>Last 30 days</option>\r\n            <option value={90}>Last 90 days</option>\r\n          </select>\r\n          <button\r\n            onClick={handleExport}\r\n            disabled={exportMutation.isPending}\r\n            className=\"flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-muted transition-colors disabled:opacity-50\"\r\n          >\r\n            <ArrowDownTrayIcon className=\"h-4 w-4\" />\r\n            Export\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <div className=\"bg-card rounded-xl border p-4\">\r\n          <div className=\"flex items-center gap-2 text-muted-foreground mb-2\">\r\n            <ClockIcon className=\"h-4 w-4\" />\r\n            <span className=\"text-sm\">Total Events</span>\r\n          </div>\r\n          {statsLoading ? (\r\n            <div className=\"h-8 w-24 bg-muted animate-pulse rounded\" />\r\n          ) : (\r\n            <p className=\"text-2xl font-bold\">{stats?.total_events?.toLocaleString() || 0}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"bg-card rounded-xl border p-4\">\r\n          <div className=\"flex items-center gap-2 text-muted-foreground mb-2\">\r\n            <ChartBarIcon className=\"h-4 w-4\" />\r\n            <span className=\"text-sm\">Unique Profiles</span>\r\n          </div>\r\n          {statsLoading ? (\r\n            <div className=\"h-8 w-24 bg-muted animate-pulse rounded\" />\r\n          ) : (\r\n            <p className=\"text-2xl font-bold\">{stats?.unique_profiles?.toLocaleString() || 0}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"bg-card rounded-xl border p-4\">\r\n          <div className=\"flex items-center gap-2 text-muted-foreground mb-2\">\r\n            <CheckCircleIcon className=\"h-4 w-4\" />\r\n            <span className=\"text-sm\">Avg EMQ Score</span>\r\n          </div>\r\n          {statsLoading ? (\r\n            <div className=\"h-8 w-24 bg-muted animate-pulse rounded\" />\r\n          ) : (\r\n            <p className=\"text-2xl font-bold\">{stats?.avg_emq_score?.toFixed(1) || 'N/A'}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"bg-card rounded-xl border p-4\">\r\n          <div className=\"flex items-center gap-2 text-muted-foreground mb-2\">\r\n            <ExclamationTriangleIcon className=\"h-4 w-4\" />\r\n            <span className=\"text-sm\">Week over Week</span>\r\n          </div>\r\n          {trendsLoading ? (\r\n            <div className=\"h-8 w-24 bg-muted animate-pulse rounded\" />\r\n          ) : trends ? (\r\n            <TrendIndicator trend={trends.overall_trend} change={trends.overall_change_pct} />\r\n          ) : (\r\n            <p className=\"text-2xl font-bold\">N/A</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Charts */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Volume Timeline */}\r\n        <div className=\"lg:col-span-2 bg-card rounded-xl border p-6\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Event Volume</h3>\r\n          {statsLoading ? (\r\n            <div className=\"h-48 bg-muted animate-pulse rounded\" />\r\n          ) : stats?.daily_volume && stats.daily_volume.length > 0 ? (\r\n            <div className=\"pb-8\">\r\n              <VolumeChart data={stats.daily_volume} />\r\n            </div>\r\n          ) : (\r\n            <div className=\"h-48 flex items-center justify-center text-muted-foreground\">\r\n              No event data available\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* EMQ Distribution */}\r\n        <div className=\"bg-card rounded-xl border p-6\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">EMQ Score Distribution</h3>\r\n          {statsLoading ? (\r\n            <div className=\"space-y-2\">\r\n              {[1, 2, 3, 4].map((i) => (\r\n                <div key={i} className=\"h-4 bg-muted animate-pulse rounded\" />\r\n              ))}\r\n            </div>\r\n          ) : stats?.emq_distribution && stats.emq_distribution.length > 0 ? (\r\n            <EMQDistributionChart data={stats.emq_distribution} />\r\n          ) : (\r\n            <p className=\"text-muted-foreground text-sm\">No EMQ data available</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Events by Name */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"bg-card rounded-xl border p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-semibold\">Top Events</h3>\r\n            <div className=\"relative\">\r\n              <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n              <input\r\n                type=\"text\"\r\n                value={eventFilter}\r\n                onChange={(e) => setEventFilter(e.target.value)}\r\n                placeholder=\"Filter events...\"\r\n                className=\"pl-9 pr-3 py-1.5 text-sm border rounded-lg bg-background w-40\"\r\n              />\r\n            </div>\r\n          </div>\r\n          {statsLoading ? (\r\n            <div className=\"space-y-3\">\r\n              {[1, 2, 3, 4, 5].map((i) => (\r\n                <div key={i} className=\"h-6 bg-muted animate-pulse rounded\" />\r\n              ))}\r\n            </div>\r\n          ) : filteredEvents.length > 0 ? (\r\n            <EventsBarChart data={filteredEvents} />\r\n          ) : (\r\n            <p className=\"text-muted-foreground text-sm\">No events found</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Events by Source */}\r\n        <div className=\"bg-card rounded-xl border p-6\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Events by Source</h3>\r\n          {statsLoading ? (\r\n            <div className=\"space-y-3\">\r\n              {[1, 2, 3].map((i) => (\r\n                <div key={i} className=\"h-6 bg-muted animate-pulse rounded\" />\r\n              ))}\r\n            </div>\r\n          ) : stats?.events_by_source && stats.events_by_source.length > 0 ? (\r\n            <div className=\"space-y-3\">\r\n              {stats.events_by_source.map((source) => (\r\n                <div\r\n                  key={source.source_name}\r\n                  className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\"\r\n                >\r\n                  <span className=\"font-medium\">{source.source_name}</span>\r\n                  <span className=\"text-muted-foreground\">{source.count.toLocaleString()}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-muted-foreground text-sm\">No source data available</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Anomalies Section */}\r\n      <div className=\"bg-card rounded-xl border p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h3 className=\"text-lg font-semibold\">Anomaly Detection</h3>\r\n            {anomalies && anomalies.anomaly_count > 0 && (\r\n              <span className=\"px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400 rounded-full text-xs font-medium\">\r\n                {anomalies.anomaly_count} detected\r\n              </span>\r\n            )}\r\n          </div>\r\n          <button\r\n            onClick={() => setShowAnomalies(!showAnomalies)}\r\n            className=\"text-sm text-primary hover:underline\"\r\n          >\r\n            {showAnomalies ? 'Hide Details' : 'View Details'}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Health Status */}\r\n        <div className=\"flex items-center gap-4 mb-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            {summary?.health_status === 'healthy' ? (\r\n              <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />\r\n            ) : (\r\n              <ExclamationTriangleIcon className=\"h-5 w-5 text-yellow-500\" />\r\n            )}\r\n            <span className=\"font-medium capitalize\">{summary?.health_status || 'Unknown'}</span>\r\n          </div>\r\n          <span className=\"text-muted-foreground\">|</span>\r\n          <span className=\"text-sm text-muted-foreground\">\r\n            Trend: <span className=\"capitalize\">{summary?.volume_trend || 'N/A'}</span>\r\n          </span>\r\n        </div>\r\n\r\n        {/* Anomaly List */}\r\n        {showAnomalies && (\r\n          <div className=\"space-y-3 mt-4 pt-4 border-t\">\r\n            {anomaliesLoading ? (\r\n              <div className=\"space-y-2\">\r\n                {[1, 2].map((i) => (\r\n                  <div key={i} className=\"h-16 bg-muted animate-pulse rounded\" />\r\n                ))}\r\n              </div>\r\n            ) : anomalies?.anomalies && anomalies.anomalies.length > 0 ? (\r\n              anomalies.anomalies.map((anomaly, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"flex items-center justify-between p-4 bg-muted/50 rounded-lg\"\r\n                >\r\n                  <div>\r\n                    <p className=\"font-medium\">{anomaly.source_name}</p>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      {anomaly.metric}: {anomaly.current_value.toLocaleString()} (\r\n                      {anomaly.pct_change >= 0 ? '+' : ''}\r\n                      {anomaly.pct_change.toFixed(1)}% from baseline)\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <SeverityBadge severity={anomaly.severity} />\r\n                    <span\r\n                      className={cn(\r\n                        'text-sm font-medium',\r\n                        anomaly.direction === 'high' ? 'text-red-500' : 'text-blue-500'\r\n                      )}\r\n                    >\r\n                      {anomaly.direction === 'high' ? 'Spike' : 'Drop'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"text-center py-8 text-muted-foreground\">\r\n                <CheckCircleIcon className=\"h-12 w-12 mx-auto mb-3 text-green-500\" />\r\n                <p>No anomalies detected in the last 7 days</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["SeverityBadge","severity","config","jsx","cn","VolumeChart","data","height","maxCount","d","day","i","heightPercent","jsxs","EventsBarChart","topEvents","event","widthPercent","TrendIndicator","trend","change","isUp","isDown","EMQDistributionChart","total","sum","getColor","range","bucket","percent","CDPEvents","periodDays","setPeriodDays","useState","eventFilter","setEventFilter","showAnomalies","setShowAnomalies","stats","statsLoading","useEventStatistics","trends","trendsLoading","useEventTrends","summary","useAnomalySummary","anomalies","anomaliesLoading","useEventAnomalies","exportMutation","useExportAudience","filteredEvents","useMemo","e","handleExport","startDate","error","_a","ArrowDownTrayIcon","ClockIcon","_b","ChartBarIcon","_c","CheckCircleIcon","_d","ExclamationTriangleIcon","MagnifyingGlassIcon","source","anomaly"],"mappings":"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"}