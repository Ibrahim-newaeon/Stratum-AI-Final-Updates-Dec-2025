import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as i,L as C}from"./vendor-react-Dz7uKsMg.js";import{h as g,f as w,ai as I,c as v,a9 as F,ac as D}from"./index-BQex3859.js";import{C as L}from"./ConfidenceBandBadge-BR4oR-ha.js";import{A as T,B as $}from"./BudgetAtRiskChip-BRCQCK-f.js";import{a as B}from"./hooks-B2vGXtE6.js";import{F as E}from"./BuildingOfficeIcon-Cxa0zVTj.js";import{F as G}from"./MagnifyingGlassIcon-3MUvqIvj.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";import"./XCircleIcon-Dk49lKz_.js";import"./featureFlagsStore-DvEl_DiZ.js";function z({title:l,titleId:d,...o},x){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":d},o),l?i.createElement("title",{id:d},l):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const H=i.forwardRef(z);function se(){var j;const[l,d]=i.useState(""),[o,x]=i.useState("all"),[m,N]=i.useState("all"),[u,b]=i.useState("emq"),[h,y]=i.useState("asc"),{data:p}=B(),S=[{id:"1",name:"Acme Corporation",industry:"E-commerce",emqScore:92,emqStatus:"ok",autopilotMode:"normal",budgetAtRisk:0,activeIncidents:0,totalSpend:85e3,platforms:["Meta","Google","TikTok"],lastActivity:new Date(Date.now()-2*60*60*1e3),accountManager:"Sarah Johnson"},{id:"2",name:"TechStart Inc",industry:"SaaS",emqScore:78,emqStatus:"risk",autopilotMode:"limited",budgetAtRisk:4500,activeIncidents:1,totalSpend:45e3,platforms:["Meta","Google"],lastActivity:new Date(Date.now()-30*60*1e3),accountManager:"Mike Chen"},{id:"3",name:"Fashion Forward",industry:"Retail",emqScore:65,emqStatus:"degraded",autopilotMode:"cuts_only",budgetAtRisk:12e3,activeIncidents:2,totalSpend:12e4,platforms:["Meta","TikTok","Snapchat"],lastActivity:new Date(Date.now()-4*60*60*1e3),accountManager:"Sarah Johnson"},{id:"4",name:"HealthPlus",industry:"Healthcare",emqScore:45,emqStatus:"critical",autopilotMode:"frozen",budgetAtRisk:25e3,activeIncidents:4,totalSpend:65e3,platforms:["Google"],lastActivity:new Date(Date.now()-24*60*60*1e3),accountManager:null},{id:"5",name:"GreenGrow",industry:"Agriculture",emqScore:88,emqStatus:"ok",autopilotMode:"normal",budgetAtRisk:0,activeIncidents:0,totalSpend:32e3,platforms:["Meta","Google"],lastActivity:new Date(Date.now()-1*60*60*1e3),accountManager:"Mike Chen"}],k=t=>t===null?"risk":t>=80?"ok":t>=60?"risk":t>=40?"degraded":"critical",A=t=>t>=.8?"frozen":t>=.6?"cuts_only":t>=.4?"limited":"normal",c=((j=p==null?void 0:p.items)==null?void 0:j.map(t=>({id:String(t.id),name:t.name,industry:"E-commerce",emqScore:t.emqScore??0,emqStatus:k(t.emqScore),autopilotMode:A(t.churnRisk),budgetAtRisk:t.budgetAtRisk,activeIncidents:t.activeIncidents,totalSpend:t.monthlySpend,platforms:["Meta","Google"],lastActivity:t.lastActivityAt?new Date(t.lastActivityAt):new Date,accountManager:null})))??S,f=i.useMemo(()=>{let t=[...c];if(l){const s=l.toLowerCase();t=t.filter(a=>{var r;return a.name.toLowerCase().includes(s)||a.industry.toLowerCase().includes(s)||((r=a.accountManager)==null?void 0:r.toLowerCase().includes(s))})}return o!=="all"&&(t=t.filter(s=>s.emqStatus===o)),m!=="all"&&(t=t.filter(s=>s.autopilotMode===m)),t.sort((s,a)=>{let r=0;switch(u){case"name":r=s.name.localeCompare(a.name);break;case"emq":r=s.emqScore-a.emqScore;break;case"budgetAtRisk":r=s.budgetAtRisk-a.budgetAtRisk;break;case"activeIncidents":r=s.activeIncidents-a.activeIncidents;break;case"lastActivity":r=s.lastActivity.getTime()-a.lastActivity.getTime();break}return h==="asc"?r:-r}),t},[c,l,o,m,u,h]),M=t=>{switch(t){case"ok":return"text-success bg-success/10";case"risk":return"text-warning bg-warning/10";case"degraded":return"text-orange-400 bg-orange-400/10";case"critical":return"text-danger bg-danger/10"}},R=t=>{switch(t){case"ok":return"Healthy";case"risk":return"At Risk";case"degraded":return"Degraded";case"critical":return"Critical"}},q=t=>{const s=Math.floor((Date.now()-t.getTime())/6e4);if(s<60)return`${s}m ago`;const a=Math.floor(s/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`},n={total:c.length,healthy:c.filter(t=>t.emqStatus==="ok").length,atRisk:c.filter(t=>t.emqStatus!=="ok").length,totalBudgetAtRisk:c.reduce((t,s)=>t+s.budgetAtRisk,0),totalIncidents:c.reduce((t,s)=>t+s.activeIncidents,0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Tenant Portfolio"}),e.jsx("p",{className:"text-text-muted",children:"Monitor and manage all tenants"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx(E,{className:"w-5 h-5 text-stratum-400"}),e.jsx("span",{className:"text-white font-semibold",children:n.total}),e.jsx("span",{className:"text-text-muted",children:"Tenants"})]}),n.atRisk>0&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-warning/10 border border-warning/20",children:[e.jsx(g,{className:"w-5 h-5 text-warning"}),e.jsx("span",{className:"text-warning font-semibold",children:n.atRisk}),e.jsx("span",{className:"text-warning/80",children:"Need Attention"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(w,{className:"w-5 h-5 text-success"}),e.jsx("span",{className:"text-text-muted",children:"Healthy"})]}),e.jsx("span",{className:"text-2xl font-bold text-white",children:n.healthy}),e.jsxs("span",{className:"text-text-muted ml-2",children:["/ ",n.total]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(g,{className:"w-5 h-5 text-warning"}),e.jsx("span",{className:"text-text-muted",children:"At Risk"})]}),e.jsx("span",{className:"text-2xl font-bold text-white",children:n.atRisk})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("span",{className:"text-text-muted",children:"Budget at Risk"})}),e.jsxs("span",{className:"text-2xl font-bold text-danger",children:["$",n.totalBudgetAtRisk.toLocaleString()]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surface-secondary border border-white/10",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("span",{className:"text-text-muted",children:"Active Incidents"})}),e.jsx("span",{className:"text-2xl font-bold text-warning",children:n.totalIncidents})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),e.jsx("input",{type:"text",placeholder:"Search tenants...",value:l,onChange:t=>d(t.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-surface-secondary border border-white/10 text-white placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-stratum-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-text-muted"}),e.jsxs("select",{value:o,onChange:t=>x(t.target.value),className:"px-3 py-2 rounded-lg bg-surface-secondary border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-stratum-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ok",children:"Healthy"}),e.jsx("option",{value:"risk",children:"At Risk"}),e.jsx("option",{value:"degraded",children:"Degraded"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("select",{value:m,onChange:t=>N(t.target.value),className:"px-3 py-2 rounded-lg bg-surface-secondary border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-stratum-500",children:[e.jsx("option",{value:"all",children:"All Modes"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"limited",children:"Limited"}),e.jsx("option",{value:"cuts_only",children:"Cuts Only"}),e.jsx("option",{value:"frozen",children:"Frozen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-text-muted"}),e.jsxs("select",{value:u,onChange:t=>b(t.target.value),className:"px-3 py-2 rounded-lg bg-surface-secondary border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-stratum-500",children:[e.jsx("option",{value:"emq",children:"Sort by EMQ"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"budgetAtRisk",children:"Sort by Budget at Risk"}),e.jsx("option",{value:"activeIncidents",children:"Sort by Incidents"}),e.jsx("option",{value:"lastActivity",children:"Sort by Activity"})]}),e.jsx("button",{onClick:()=>y(t=>t==="asc"?"desc":"asc"),className:"p-2 rounded-lg bg-surface-secondary border border-white/10 text-text-muted hover:text-white transition-colors",children:h==="asc"?"↑":"↓"})]})]}),e.jsxs("div",{className:"rounded-2xl bg-surface-secondary border border-white/10 overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left p-4 text-text-muted font-medium",children:"Tenant"}),e.jsx("th",{className:"text-left p-4 text-text-muted font-medium",children:"EMQ"}),e.jsx("th",{className:"text-left p-4 text-text-muted font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-4 text-text-muted font-medium",children:"Mode"}),e.jsx("th",{className:"text-left p-4 text-text-muted font-medium",children:"Budget at Risk"}),e.jsx("th",{className:"text-left p-4 text-text-muted font-medium",children:"Incidents"}),e.jsx("th",{className:"text-left p-4 text-text-muted font-medium",children:"Last Activity"}),e.jsx("th",{className:"text-left p-4 text-text-muted font-medium"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:f.map(t=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:t.name}),e.jsx("div",{className:"text-sm text-text-muted",children:t.industry}),t.accountManager&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["AM: ",t.accountManager]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:v("text-xl font-bold",t.emqScore>=80?"text-success":t.emqScore>=60?"text-warning":"text-danger"),children:t.emqScore}),e.jsx(L,{score:t.emqScore,size:"sm"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:v("px-2 py-1 rounded-full text-xs font-medium",M(t.emqStatus)),children:R(t.emqStatus)})}),e.jsx("td",{className:"p-4",children:e.jsx(T,{mode:t.autopilotMode,compact:!0})}),e.jsx("td",{className:"p-4",children:t.budgetAtRisk>0?e.jsx($,{amount:t.budgetAtRisk}):e.jsx("span",{className:"text-text-muted",children:"-"})}),e.jsx("td",{className:"p-4",children:t.activeIncidents>0?e.jsxs("span",{className:"flex items-center gap-1 text-warning",children:[e.jsx(g,{className:"w-4 h-4"}),t.activeIncidents]}):e.jsxs("span",{className:"flex items-center gap-1 text-success",children:[e.jsx(w,{className:"w-4 h-4"}),"None"]})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"flex items-center gap-1 text-text-muted text-sm",children:[e.jsx(F,{className:"w-4 h-4"}),q(t.lastActivity)]})}),e.jsx("td",{className:"p-4",children:e.jsxs(C,{to:`/dashboard/superadmin/tenants/${t.id}`,className:"flex items-center gap-1 text-stratum-400 hover:text-stratum-300 transition-colors",children:["View",e.jsx(D,{className:"w-4 h-4"})]})})]},t.id))})]}),f.length===0&&e.jsx("div",{className:"p-8 text-center text-text-muted",children:"No tenants found matching your filters."})]})]})}export{se as default};
//# sourceMappingURL=TenantsList-CjCKEKoe.js.map
