import{j as e}from"./vendor-ui-B0DL0VNC.js";import{f as N,r as g}from"./vendor-react-Dz7uKsMg.js";import{t as r,c as m,a6 as v,f as w,h as u,a5 as k}from"./index-BQex3859.js";import"./featureFlagsStore-DvEl_DiZ.js";import{u as o,a as h,b}from"./vendor-query-BPt-n81V.js";import{F as A}from"./PlusIcon-ByQcgXHI.js";import{F}from"./ArrowTrendingDownIcon-DA5nft8Y.js";import{F as S}from"./CalendarIcon-LISB5gLp.js";import{F as T}from"./BellAlertIcon-DdhkZ2ID.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-motion-CR45sdSp.js";const n={getTargets:async s=>(await r.get("/pacing/targets",{params:s})).data.data,getTarget:async s=>(await r.get(`/pacing/targets/${s}`)).data.data,createTarget:async s=>(await r.post("/pacing/targets",s)).data.data,updateTarget:async(s,t)=>(await r.patch(`/pacing/targets/${s}`,t)).data.data,deleteTarget:async s=>(await r.delete(`/pacing/targets/${s}`)).data,getPacingStatus:async s=>(await r.get(`/pacing/targets/${s}/pacing`)).data.data,getAllPacingStatus:async()=>(await r.get("/pacing/status")).data.data,getPacingSummary:async s=>(await r.get("/pacing/summary",{params:{period:s}})).data.data,getDailyKPIs:async s=>(await r.get("/pacing/kpis/daily",{params:s})).data.data,getForecast:async(s,t)=>(await r.get(`/pacing/targets/${s}/forecast`,{params:{horizon:t}})).data.data,getMetricForecast:async s=>(await r.get("/pacing/forecast",{params:s})).data.data,generateForecast:async(s,t)=>(await r.post(`/pacing/targets/${s}/forecast/generate`,{horizon:t})).data.data,getAlerts:async s=>(await r.get("/pacing/alerts",{params:s})).data.data,getAlert:async s=>(await r.get(`/pacing/alerts/${s}`)).data.data,acknowledgeAlert:async(s,t)=>(await r.post(`/pacing/alerts/${s}/acknowledge`,{notes:t})).data.data,resolveAlert:async(s,t)=>(await r.post(`/pacing/alerts/${s}/resolve`,{notes:t})).data.data,dismissAlert:async(s,t)=>(await r.post(`/pacing/alerts/${s}/dismiss`,{notes:t})).data.data,getAlertStats:async()=>(await r.get("/pacing/alerts/stats")).data.data};function $(s){return o({queryKey:["pacing","targets",s],queryFn:()=>n.getTargets(s)})}function P(){return o({queryKey:["pacing","status","all"],queryFn:n.getAllPacingStatus,refetchInterval:6e4})}function q(s){return o({queryKey:["pacing","summary",s],queryFn:()=>n.getPacingSummary(s),refetchInterval:6e4})}function R(s){return o({queryKey:["pacing","alerts",s],queryFn:()=>n.getAlerts(s),refetchInterval:3e4})}function I(){const s=h();return b({mutationFn:({alertId:t,notes:d})=>n.acknowledgeAlert(t,d),onSuccess:()=>{s.invalidateQueries({queryKey:["pacing","alerts"]})}})}function L(){const s=h();return b({mutationFn:({alertId:t,notes:d})=>n.resolveAlert(t,d),onSuccess:()=>{s.invalidateQueries({queryKey:["pacing","alerts"]})}})}function C(){return o({queryKey:["pacing","alerts","stats"],queryFn:n.getAlertStats,refetchInterval:3e4})}const V={on_track:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300",ahead:"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",behind:"bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300",at_risk:"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300",missed:"bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300"};function U(){N();const[s,t]=g.useState("overview"),[,d]=g.useState(!1),{data:c}=$(),{data:x}=P(),{data:i}=q(),{data:l}=R({status:"active"}),{data:p}=C(),f=I(),j=L(),y=[{id:"overview",label:"Overview"},{id:"targets",label:"Targets"},{id:"alerts",label:"Alerts",badge:p==null?void 0:p.active},{id:"forecasts",label:"Forecasts"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Pacing & Forecasting"}),e.jsx("p",{className:"text-muted-foreground",children:"Track campaign targets, pacing, and AI-powered forecasts"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(A,{className:"h-4 w-4"}),"New Target"]})]}),e.jsx("div",{className:"border-b",children:e.jsx("nav",{className:"flex gap-4",children:y.map(a=>e.jsxs("button",{onClick:()=>t(a.id),className:m("px-4 py-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2",s===a.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[a.label,a.badge&&a.badge>0&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300",children:a.badge})]},a.id))})}),s==="overview"&&e.jsxs("div",{className:"space-y-6",children:[i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Health Score"}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[i.overallHealthScore,"%"]})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"On Track"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:i.onTrack})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ahead"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.ahead})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Behind"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:i.behind})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.atRisk})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x==null?void 0:x.map(a=>e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium truncate",children:a.targetName}),e.jsx("span",{className:m("px-2 py-1 rounded-full text-xs",V[a.status]),children:a.status.replace("_"," ")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[a.pacingPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:m("h-2 rounded-full",a.status==="on_track"&&"bg-emerald-500",a.status==="ahead"&&"bg-blue-500",a.status==="behind"&&"bg-amber-500",a.status==="at_risk"&&"bg-red-500",a.status==="missed"&&"bg-gray-500"),style:{width:`${Math.min(a.pacingPct,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Current"}),e.jsx("p",{className:"font-medium",children:a.currentValue.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Target"}),e.jsx("p",{className:"font-medium",children:a.targetValue.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Projected"}),e.jsx("p",{className:"font-medium",children:a.projectedValue.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Days Left"}),e.jsx("p",{className:"font-medium",children:a.daysRemaining})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[a.trend==="improving"?e.jsx(v,{className:"h-4 w-4 text-emerald-500"}):a.trend==="declining"?e.jsx(F,{className:"h-4 w-4 text-red-500"}):null,e.jsx("span",{className:"text-muted-foreground capitalize",children:a.trend})]})]})]},a.targetId))})]}),s==="targets"&&e.jsx("div",{className:"rounded-xl border bg-card shadow-card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Target"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Metric"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y",children:c==null?void 0:c.map(a=>e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium",children:a.name}),a.description&&e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-xs",children:a.description})]}),e.jsx("td",{className:"px-4 py-3 text-sm capitalize",children:a.metricType}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),new Date(a.periodStart).toLocaleDateString()," -"," ",new Date(a.periodEnd).toLocaleDateString()]})}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:a.metricType==="spend"||a.metricType==="revenue"?`$${a.targetValue.toLocaleString()}`:a.metricType==="roas"?`${a.targetValue}x`:a.targetValue.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-center",children:a.isActive?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300",children:"Active"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300",children:"Inactive"})})]},a.id))})]})}),s==="alerts"&&e.jsx("div",{className:"space-y-4",children:(l==null?void 0:l.length)===0?e.jsxs("div",{className:"rounded-xl border bg-card p-12 text-center",children:[e.jsx(w,{className:"h-12 w-12 mx-auto text-emerald-500 mb-3"}),e.jsx("p",{className:"text-lg font-medium",children:"No Active Alerts"}),e.jsx("p",{className:"text-muted-foreground",children:"All targets are on track"})]}):l==null?void 0:l.map(a=>e.jsxs("div",{className:m("rounded-xl border p-4 flex items-start justify-between gap-4",a.severity==="critical"&&"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950/20",a.severity==="warning"&&"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/20",a.severity==="info"&&"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[a.severity==="critical"?e.jsx(u,{className:"h-5 w-5 text-red-500 mt-0.5"}):a.severity==="warning"?e.jsx(u,{className:"h-5 w-5 text-amber-500 mt-0.5"}):e.jsx(T,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.message}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Deviation: ",a.deviationPct.toFixed(1),"% | Expected:"," ",a.expectedValue.toLocaleString()," | Actual:"," ",a.currentValue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(a.triggeredAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f.mutate({alertId:a.id}),className:"px-3 py-1 text-sm rounded-lg border hover:bg-muted",children:"Acknowledge"}),e.jsx("button",{onClick:()=>j.mutate({alertId:a.id}),className:"px-3 py-1 text-sm rounded-lg bg-primary text-primary-foreground hover:bg-primary/90",children:"Resolve"})]})]},a.id))}),s==="forecasts"&&e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(k,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"AI-Powered Forecasts"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Select a target to view its forecast predictions. Forecasts use machine learning models trained on your historical data to predict future performance."}),e.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:c==null?void 0:c.filter(a=>a.isActive).map(a=>e.jsxs("button",{className:"p-4 rounded-lg border text-left hover:bg-muted/50 transition-colors",children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[a.metricType," | ",a.periodType]})]},a.id))})]})]})}export{U as default};
//# sourceMappingURL=Pacing-YRlZFn97.js.map
