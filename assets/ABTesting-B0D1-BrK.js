import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as l}from"./vendor-react-Dz7uKsMg.js";import{u as S,a as R,b as N}from"./vendor-query-BPt-n81V.js";import{t as d,j as H,c as F,a5 as O,f as P,a6 as Z,b as G,dg as J,F as Y,dd as X}from"./index-BQex3859.js";import{F as ee}from"./PlusIcon-ByQcgXHI.js";import{F as M}from"./BeakerIcon-DX6qkZ0w.js";import{F as se}from"./XCircleIcon-Dk49lKz_.js";import{F as te}from"./LightBulbIcon-Bq6eSglt.js";import{F as ae}from"./PauseIcon-B4wMN419.js";import{F as q}from"./PlayIcon-kdWwcgbH.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-motion-CR45sdSp.js";function re({title:t,titleId:r,...o},m){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":r},o),t?l.createElement("title",{id:r},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ne=l.forwardRef(re);function le({title:t,titleId:r,...o},m){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":r},o),t?l.createElement("title",{id:r},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const ie=l.forwardRef(le),j={getTests:async t=>(await d.get("/ab-testing/tests",{params:t})).data.data,getTest:async t=>(await d.get(`/ab-testing/tests/${t}`)).data.data,createTest:async t=>(await d.post("/ab-testing/tests",t)).data.data,updateTest:async(t,r)=>(await d.put(`/ab-testing/tests/${t}`,r)).data.data,deleteTest:async t=>(await d.delete(`/ab-testing/tests/${t}`)).data,startTest:async t=>(await d.post(`/ab-testing/tests/${t}/start`)).data.data,pauseTest:async t=>(await d.post(`/ab-testing/tests/${t}/pause`)).data.data,stopTest:async(t,r)=>(await d.post(`/ab-testing/tests/${t}/stop`,{winnerId:r})).data.data,getResults:async t=>(await d.get(`/ab-testing/tests/${t}/results`)).data.data,getMetrics:async(t,r)=>(await d.get(`/ab-testing/tests/${t}/metrics`,{params:r})).data.data,getPowerAnalysis:async t=>(await d.post("/ab-testing/power-analysis",t)).data.data,getLTVImpact:async t=>(await d.get(`/ab-testing/tests/${t}/ltv-impact`)).data.data};function L(t){return S({queryKey:["ab-testing","tests",t],queryFn:()=>j.getTests(t)})}function de(t){return S({queryKey:["ab-testing","tests",t],queryFn:()=>j.getTest(t),enabled:!!t})}function oe(){const t=R();return N({mutationFn:j.createTest,onSuccess:()=>{t.invalidateQueries({queryKey:["ab-testing","tests"]})}})}function ce(){const t=R();return N({mutationFn:j.startTest,onSuccess:()=>{t.invalidateQueries({queryKey:["ab-testing","tests"]})}})}function me(){const t=R();return N({mutationFn:j.pauseTest,onSuccess:()=>{t.invalidateQueries({queryKey:["ab-testing","tests"]})}})}function ue(){const t=R();return N({mutationFn:({testId:r,winnerId:o})=>j.stopTest(r,o),onSuccess:()=>{t.invalidateQueries({queryKey:["ab-testing","tests"]})}})}function xe(t){return S({queryKey:["ab-testing","tests",t,"results"],queryFn:()=>j.getResults(t),enabled:!!t,refetchInterval:6e4})}function pe(){return N({mutationFn:j.getPowerAnalysis})}function ge(t){return S({queryKey:["ab-testing","tests",t,"ltv-impact"],queryFn:()=>j.getLTVImpact(t),enabled:!!t})}const he={draft:"bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300",running:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300",paused:"bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300",completed:"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",stopped:"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300"},B={campaign:"Campaign",creative:"Creative",audience:"Audience",landing_page:"Landing Page",bid_strategy:"Bid Strategy"};function Le(){const{toast:t}=H(),[r,o]=l.useState("active"),[m,V]=l.useState(null),[E,y]=l.useState(!1),[u,w]=l.useState({baselineConversionRate:2.5,minimumDetectableEffect:10,confidenceLevel:.95,dailyTraffic:1e4}),[n,c]=l.useState({name:"",hypothesis:"",testType:"campaign",primaryMetric:"conversion_rate",confidenceLevel:.95,variants:[{name:"Control",description:"",isControl:!0,trafficAllocation:50},{name:"Variant B",description:"",isControl:!1,trafficAllocation:50}]}),{data:x}=L({status:"running"}),{data:p}=L({status:"completed"}),{data:g}=L({status:"draft"}),{data:be}=de(m||""),{data:h}=xe(m||""),{data:C}=ge(m||""),k=oe(),$=ce(),z=me(),D=ue(),b=pe(),T=l.useCallback(()=>{c({name:"",hypothesis:"",testType:"campaign",primaryMetric:"conversion_rate",confidenceLevel:.95,variants:[{name:"Control",description:"",isControl:!0,trafficAllocation:50},{name:"Variant B",description:"",isControl:!1,trafficAllocation:50}]})},[]),I=l.useCallback(async()=>{if(!n.name.trim()||!n.hypothesis.trim())return;const s={name:n.name,testType:n.testType,hypothesis:n.hypothesis,primaryMetric:n.primaryMetric,confidenceLevel:n.confidenceLevel,variants:n.variants};try{await k.mutateAsync(s),t({title:"Test created",description:`"${n.name}" has been created as a draft.`}),y(!1),T(),o("drafts")}catch{t({title:"Error",description:"Failed to create test.",variant:"destructive"})}},[n,k,t,T]),K=l.useCallback(()=>{const s=n.variants.length,a="BCDEFGHIJ",f=Math.floor(100/(s+1));c(i=>({...i,variants:[...i.variants.map(v=>({...v,trafficAllocation:f})),{name:`Variant ${a[s-1]||s+1}`,description:"",isControl:!1,trafficAllocation:f}]}))},[n.variants.length]),_=l.useCallback(s=>{n.variants.length<=2||c(a=>{const f=a.variants.filter((v,W)=>W!==s),i=Math.floor(100/f.length);return{...a,variants:f.map(v=>({...v,trafficAllocation:i}))}})},[n.variants.length]),Q=[{id:"active",label:"Active Tests",count:(x==null?void 0:x.length)||0},{id:"completed",label:"Completed",count:(p==null?void 0:p.length)||0},{id:"drafts",label:"Drafts",count:(g==null?void 0:g.length)||0},{id:"power-analysis",label:"Power Analysis"}],U=()=>{b.mutate(u)},A=s=>e.jsxs("div",{className:F("rounded-xl border bg-card p-6 shadow-card cursor-pointer transition-all hover:shadow-md",m===s.id&&"ring-2 ring-primary"),onClick:()=>V(s.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[B[s.testType]," Test"]})]}),e.jsx("span",{className:F("px-2 py-1 rounded-full text-xs",he[s.status]),children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.hypothesis}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Variants"}),e.jsx("p",{className:"font-medium",children:s.variants.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Sample Size"}),e.jsxs("p",{className:"font-medium",children:[s.currentSampleSize.toLocaleString()," / ",s.targetSampleSize.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Primary Metric"}),e.jsx("p",{className:"font-medium capitalize",children:s.primaryMetric.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Confidence"}),e.jsxs("p",{className:"font-medium",children:[(s.confidenceLevel*100).toFixed(0),"%"]})]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2 mb-4",children:e.jsx("div",{className:"h-2 rounded-full bg-primary",style:{width:`${Math.min(s.currentSampleSize/s.targetSampleSize*100,100)}%`}})}),s.status==="running"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:a=>{a.stopPropagation(),z.mutate(s.id)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg border hover:bg-muted text-sm",children:[e.jsx(ae,{className:"h-4 w-4"}),"Pause"]}),e.jsxs("button",{onClick:a=>{a.stopPropagation(),D.mutate({testId:s.id})},className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm",children:[e.jsx(ie,{className:"h-4 w-4"}),"Stop"]})]}),s.status==="paused"&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),$.mutate(s.id)},className:"w-full flex items-center justify-center gap-1 px-3 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 text-sm",children:[e.jsx(q,{className:"h-4 w-4"}),"Resume"]}),s.status==="draft"&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),$.mutate(s.id)},className:"w-full flex items-center justify-center gap-1 px-3 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 text-sm",children:[e.jsx(q,{className:"h-4 w-4"}),"Start Test"]})]},s.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"A/B Testing"}),e.jsx("p",{className:"text-muted-foreground",children:"Run experiments to optimize campaigns, creatives, and audiences"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(ee,{className:"h-4 w-4"}),"New Test"]})]}),e.jsx("div",{className:"border-b",children:e.jsx("nav",{className:"flex gap-4",children:Q.map(s=>e.jsxs("button",{onClick:()=>o(s.id),className:F("px-4 py-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2",r===s.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[s.label,s.count!==void 0&&s.count>0&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-muted",children:s.count})]},s.id))})}),r==="active"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:(x==null?void 0:x.length)===0?e.jsxs("div",{className:"rounded-xl border bg-card p-12 text-center",children:[e.jsx(M,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-lg font-medium",children:"No Active Tests"}),e.jsx("p",{className:"text-muted-foreground",children:"Start a new A/B test to begin experimenting"})]}):x==null?void 0:x.map(A)}),m&&h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(O,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Test Results"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.isSignificant?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-5 w-5 text-emerald-500"}),e.jsx("span",{className:"text-emerald-600 font-medium",children:"Statistically Significant"})]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-5 w-5 text-amber-500"}),e.jsx("span",{className:"text-amber-600 font-medium",children:"Not Yet Significant"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(p-value: ",h.pValue.toFixed(4),")"]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Conversion Uplift"})]}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[h.uplift>0?"+":"",h.uplift.toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["95% CI: [",h.upliftRange.lower.toFixed(1),"%,"," ",h.upliftRange.upper.toFixed(1),"%]"]})]}),e.jsx("div",{className:"space-y-3",children:h.variants.map(s=>e.jsxs("div",{className:F("rounded-lg border p-4",s.isWinner&&"border-emerald-500 bg-emerald-50 dark:bg-emerald-950/20"),children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.isControl&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-muted",children:"Control"}),s.isWinner&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700",children:"Winner"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Sample Size"}),e.jsx("p",{className:"font-medium",children:s.sampleSize.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Conversions"}),e.jsx("p",{className:"font-medium",children:s.conversions.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Conv. Rate"}),e.jsxs("p",{className:"font-medium",children:[s.conversionRate.toFixed(2),"%"]})]})]}),s.relativeUplift!==void 0&&!s.isControl&&e.jsxs("p",{className:"text-sm mt-2",children:[e.jsxs("span",{className:s.relativeUplift>0?"text-emerald-600":"text-red-600",children:[s.relativeUplift>0?"+":"",s.relativeUplift.toFixed(1),"%"]}),e.jsx("span",{className:"text-muted-foreground",children:" vs control"})]})]},s.variantId))}),e.jsx("div",{className:"mt-4 rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Recommendation"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:h.recommendation})]})]})})]}),C&&e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(G,{className:"h-6 w-6 text-purple-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Projected LTV Impact"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Control LTV"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",C.controlLTV.toFixed(2)]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Projected Revenue Lift"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:["+$",C.projectedRevenueLift.toLocaleString()]})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-3",children:["Based on ",(C.confidenceLevel*100).toFixed(0),"% confidence level"]})]})]})]}),r==="completed"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(p==null?void 0:p.length)===0?e.jsxs("div",{className:"col-span-full rounded-xl border bg-card p-12 text-center",children:[e.jsx(P,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-lg font-medium",children:"No Completed Tests"}),e.jsx("p",{className:"text-muted-foreground",children:"Completed tests will appear here"})]}):p==null?void 0:p.map(A)}),r==="drafts"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(g==null?void 0:g.length)===0?e.jsxs("div",{className:"col-span-full rounded-xl border bg-card p-12 text-center",children:[e.jsx(M,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-lg font-medium",children:"No Draft Tests"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new test to get started"})]}):g==null?void 0:g.map(A)}),r==="power-analysis"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(J,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Power Analysis Calculator"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Baseline Conversion Rate (%)"}),e.jsx("input",{type:"number",value:u.baselineConversionRate,onChange:s=>w({...u,baselineConversionRate:parseFloat(s.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border bg-background",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Minimum Detectable Effect (%)"}),e.jsx("input",{type:"number",value:u.minimumDetectableEffect,onChange:s=>w({...u,minimumDetectableEffect:parseFloat(s.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border bg-background",step:"1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The minimum improvement you want to detect"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confidence Level"}),e.jsxs("select",{value:u.confidenceLevel,onChange:s=>w({...u,confidenceLevel:parseFloat(s.target.value)}),className:"w-full px-3 py-2 rounded-lg border bg-background",children:[e.jsx("option",{value:.9,children:"90%"}),e.jsx("option",{value:.95,children:"95%"}),e.jsx("option",{value:.99,children:"99%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Daily Traffic"}),e.jsx("input",{type:"number",value:u.dailyTraffic,onChange:s=>w({...u,dailyTraffic:parseInt(s.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border bg-background",step:"100"})]}),e.jsx("button",{onClick:U,disabled:b.isPending,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:b.isPending?"Calculating...":"Calculate Sample Size"})]})]}),b.data&&e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Analysis Results"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-primary/10 p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Required Sample Size (per variant)"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:b.data.requiredSampleSize.toLocaleString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Estimated Duration"}),e.jsxs("p",{className:"text-xl font-bold",children:[b.data.estimatedDuration," days"]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Statistical Power"}),e.jsxs("p",{className:"text-xl font-bold",children:[(b.data.currentPower*100).toFixed(0),"%"]})]})]}),b.data.recommendations.length>0&&e.jsxs("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 p-4",children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Recommendations"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:b.data.recommendations.map((s,a)=>e.jsx("li",{className:"text-sm text-blue-700 dark:text-blue-300",children:s},a))})]})]})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-background rounded-xl w-full max-w-2xl mx-4 max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background p-6 pb-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Create New A/B Test"}),e.jsx("button",{onClick:()=>{y(!1),T()},className:"p-2 rounded-lg hover:bg-muted",children:e.jsx(Y,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Test Name"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>c(a=>({...a,name:s.target.value})),className:"w-full px-3 py-2 rounded-lg border bg-background",placeholder:"e.g., Holiday Campaign Creative Test"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hypothesis"}),e.jsx("textarea",{value:n.hypothesis,onChange:s=>c(a=>({...a,hypothesis:s.target.value})),className:"w-full px-3 py-2 rounded-lg border bg-background",rows:2,placeholder:"e.g., Using video creatives will increase conversion rate by at least 15%"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Test Type"}),e.jsx("select",{value:n.testType,onChange:s=>c(a=>({...a,testType:s.target.value})),className:"w-full px-3 py-2 rounded-lg border bg-background",children:Object.entries(B).map(([s,a])=>e.jsx("option",{value:s,children:a},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Primary Metric"}),e.jsxs("select",{value:n.primaryMetric,onChange:s=>c(a=>({...a,primaryMetric:s.target.value})),className:"w-full px-3 py-2 rounded-lg border bg-background",children:[e.jsx("option",{value:"conversion_rate",children:"Conversion Rate"}),e.jsx("option",{value:"ctr",children:"Click-Through Rate"}),e.jsx("option",{value:"cpa",children:"Cost Per Acquisition"}),e.jsx("option",{value:"roas",children:"ROAS"}),e.jsx("option",{value:"revenue",children:"Revenue"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confidence Level"}),e.jsxs("select",{value:n.confidenceLevel,onChange:s=>c(a=>({...a,confidenceLevel:parseFloat(s.target.value)})),className:"w-full px-3 py-2 rounded-lg border bg-background",children:[e.jsx("option",{value:.9,children:"90%"}),e.jsx("option",{value:.95,children:"95% (Recommended)"}),e.jsx("option",{value:.99,children:"99%"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Variants"}),e.jsxs("button",{onClick:K,disabled:n.variants.length>=5,className:"flex items-center gap-1 text-sm text-primary hover:underline disabled:opacity-50 disabled:no-underline",children:[e.jsx(X,{className:"h-4 w-4"}),"Add Variant"]})]}),e.jsx("div",{className:"space-y-3",children:n.variants.map((s,a)=>e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.isControl?"Control":`Variant ${a}`}),s.isControl&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-muted",children:"Control"})]}),!s.isControl&&n.variants.length>2&&e.jsx("button",{onClick:()=>_(a),className:"p-1 rounded hover:bg-muted text-muted-foreground hover:text-red-500",children:e.jsx(ne,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:s.name,onChange:f=>{const i=[...n.variants];i[a]={...i[a],name:f.target.value},c(v=>({...v,variants:i}))},className:"w-full px-3 py-2 rounded-lg border bg-background text-sm",placeholder:"Variant name"})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:s.trafficAllocation,onChange:f=>{const i=[...n.variants];i[a]={...i[a],trafficAllocation:parseInt(f.target.value)||0},c(v=>({...v,variants:i}))},className:"w-full px-3 py-2 rounded-lg border bg-background text-sm",min:1,max:99}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})})]})]},a))}),n.variants.reduce((s,a)=>s+a.trafficAllocation,0)!==100&&e.jsxs("p",{className:"text-xs text-amber-500 mt-2",children:["Traffic allocation should sum to 100% (currently ",n.variants.reduce((s,a)=>s+a.trafficAllocation,0),"%)"]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-background p-6 pt-4 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{y(!1),T()},className:"px-4 py-2 rounded-lg border hover:bg-muted",children:"Cancel"}),e.jsxs("button",{onClick:I,disabled:k.isPending||!n.name.trim()||!n.hypothesis.trim(),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:[k.isPending&&e.jsx("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Create Test"]})]})]})})]})}export{Le as default};
//# sourceMappingURL=ABTesting-B0D1-BrK.js.map
