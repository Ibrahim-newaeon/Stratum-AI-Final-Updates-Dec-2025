import{j as e}from"./vendor-ui-B0DL0VNC.js";import{r as d}from"./vendor-react-Dz7uKsMg.js";import{i as $,t as r,Q as R,Y as E,$ as V,c as l,V as K,J as S,K as A,a4 as k,w as U,v as W,y as H}from"./index-BQex3859.js";import{u as z,a as P,b as B}from"./vendor-query-BPt-n81V.js";import"./featureFlagsStore-DvEl_DiZ.js";import{U as G}from"./upload-CPGtmIIL.js";import{L as J,I as C}from"./list-Q0W78HSm.js";import{T as O}from"./tag-DoKlR16h.js";import{D as _}from"./download-BBUAq3KN.js";import{L as Y}from"./loader-circle-CJwg01sb.js";import{E as F}from"./eye-Dm_U4nfe.js";import{C as X}from"./copy-CekHEH52.js";import{E as T}from"./ellipsis-9Q2qFKdX.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-motion-CR45sdSp.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ee=$("grid-3x3",Z);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],te=$("video",se),b={getAssets:async(t={})=>(await r.get("/assets",{params:t})).data.data,getAsset:async t=>(await r.get(`/assets/${t}`)).data.data,createAsset:async t=>(await r.post("/assets",t)).data.data,uploadAsset:async(t,a)=>{const n=new FormData;return n.append("file",t),a&&n.append("folder_id",a),(await r.post("/assets/upload",n,{headers:{"Content-Type":"multipart/form-data"}})).data.data},updateAsset:async(t,a)=>(await r.patch(`/assets/${t}`,a)).data.data,deleteAsset:async t=>{await r.delete(`/assets/${t}`)},getFolders:async t=>{const a=t?{parent_id:t}:{};return(await r.get("/assets/folders",{params:a})).data.data},createFolder:async(t,a)=>(await r.post("/assets/folders",{name:t,parent_id:a})).data.data,getFatiguedAssets:async(t=60,a=10)=>(await r.get("/assets/fatigued",{params:{min_score:t,limit:a}})).data.data,calculateFatigue:async t=>(await r.post(`/assets/${t}/fatigue`)).data.data,bulkArchive:async t=>(await r.post("/assets/bulk/archive",{ids:t})).data.data};function ae(t={}){return z({queryKey:["assets",t],queryFn:()=>b.getAssets(t),staleTime:30*1e3})}function re(){const t=P();return B({mutationFn:b.deleteAsset,onSuccess:()=>{t.invalidateQueries({queryKey:["assets"]})}})}function ne(){const t=P();return B({mutationFn:b.bulkArchive,onSuccess:()=>{t.invalidateQueries({queryKey:["assets"]})}})}const ie=[{id:1,name:"Summer_Banner_v3",type:"image",status:"fatigued",thumbnail:"https://placehold.co/300x250/0ea5e9/white?text=Summer+Sale",impressions:23e5,ctr:1.8,fatigueScore:78,campaigns:["Summer Sale 2024","Brand Awareness Q4"],createdAt:"2024-06-15",dimensions:"300x250"},{id:2,name:"Product_Hero_Widget",type:"image",status:"active",thumbnail:"https://placehold.co/1200x628/10b981/white?text=Widget+Pro",impressions:89e4,ctr:3.2,fatigueScore:23,campaigns:["Product Launch - Widget Pro"],createdAt:"2024-09-01",dimensions:"1200x628"},{id:3,name:"Brand_Video_30s",type:"video",status:"active",thumbnail:"https://placehold.co/1920x1080/8b5cf6/white?text=Brand+Video",impressions:156e4,ctr:2.9,fatigueScore:35,campaigns:["Brand Awareness Q4","TikTok Influencer Collab"],createdAt:"2024-08-20",duration:"0:30"},{id:4,name:"Retargeting_Carousel",type:"image",status:"active",thumbnail:"https://placehold.co/1080x1080/f59e0b/white?text=Carousel",impressions:67e4,ctr:4.1,fatigueScore:15,campaigns:["Retargeting - Cart Abandoners"],createdAt:"2024-10-05",dimensions:"1080x1080"},{id:5,name:"Holiday_Promo_Copy",type:"copy",status:"draft",thumbnail:"https://placehold.co/400x200/6b7280/white?text=Ad+Copy",impressions:0,ctr:0,fatigueScore:0,campaigns:[],createdAt:"2024-11-28"},{id:6,name:"Flash_Sale_Banner",type:"image",status:"paused",thumbnail:"https://placehold.co/728x90/ef4444/white?text=Flash+Sale",impressions:45e4,ctr:2.1,fatigueScore:52,campaigns:["Summer Sale 2024"],createdAt:"2024-07-10",dimensions:"728x90"}];function we(){const{t}=R(),[a,n]=d.useState(""),[u,L]=d.useState("all"),[x,Q]=d.useState("all"),[g,y]=d.useState("grid"),[i,p]=d.useState([]);E(s=>s.tenantId);const{data:c}=ae();re();const f=ne(),M=d.useMemo(()=>c!=null&&c.items&&c.items.length>0?c.items.map(s=>({id:Number(s.id)||0,name:s.name||s.filename||"",type:s.type||s.asset_type||"image",status:s.status||"active",thumbnail:s.thumbnail_url||s.url||`https://placehold.co/300x250/0ea5e9/white?text=${encodeURIComponent(s.name||"Asset")}`,impressions:s.impressions||0,ctr:s.ctr||0,fatigueScore:s.fatigue_score||s.fatigueScore||0,campaigns:s.campaigns||[],createdAt:s.created_at||s.createdAt||new Date().toISOString(),dimensions:s.dimensions||s.width&&s.height?`${s.width}x${s.height}`:void 0,duration:s.duration})):ie,[c]),q=async()=>{await f.mutateAsync(i.map(s=>s.toString())),p([])},o=M.filter(s=>!(a&&!s.name.toLowerCase().includes(a.toLowerCase())||u!=="all"&&s.type!==u||x!=="all"&&s.status!==x)),N=s=>{p(m=>m.includes(s)?m.filter(j=>j!==s):[...m,s])},v=s=>{switch(s){case"image":return e.jsx(C,{className:"w-4 h-4"});case"video":return e.jsx(te,{className:"w-4 h-4"});case"copy":return e.jsx(k,{className:"w-4 h-4"})}},w=s=>{const m={active:{color:"bg-green-500/10 text-green-500",icon:H,label:"Active"},paused:{color:"bg-amber-500/10 text-amber-500",icon:W,label:"Paused"},fatigued:{color:"bg-red-500/10 text-red-500",icon:U,label:"Fatigued"},draft:{color:"bg-gray-500/10 text-gray-500",icon:k,label:"Draft"}},{color:j,icon:D,label:I}=m[s];return e.jsxs("span",{className:l("px-2 py-1 rounded-full text-xs font-medium inline-flex items-center gap-1",j),children:[e.jsx(D,{className:"w-3 h-3"}),I]})},h=s=>s>=70?"text-red-500 bg-red-500":s>=40?"text-amber-500 bg-amber-500":"text-green-500 bg-green-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:t("assets.title")}),e.jsx("p",{className:"text-muted-foreground",children:t("assets.subtitle")})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:t("assets.upload")})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:t("assets.searchPlaceholder"),value:a,onChange:s=>n(s.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:u,onChange:s=>L(s.target.value),className:"px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"all",children:t("assets.allTypes")}),e.jsx("option",{value:"image",children:t("assets.images")}),e.jsx("option",{value:"video",children:t("assets.videos")}),e.jsx("option",{value:"copy",children:t("assets.copy")})]}),e.jsxs("select",{value:x,onChange:s=>Q(s.target.value),className:"px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"all",children:t("assets.allStatuses")}),e.jsx("option",{value:"active",children:t("assets.active")}),e.jsx("option",{value:"paused",children:t("assets.paused")}),e.jsx("option",{value:"fatigued",children:t("assets.fatigued")}),e.jsx("option",{value:"draft",children:t("assets.draft")})]}),e.jsxs("div",{className:"flex rounded-lg border overflow-hidden",children:[e.jsx("button",{onClick:()=>y("grid"),className:l("p-2 transition-colors",g==="grid"?"bg-primary text-primary-foreground":"hover:bg-muted"),children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y("list"),className:l("p-2 transition-colors",g==="list"?"bg-primary text-primary-foreground":"hover:bg-muted"),children:e.jsx(J,{className:"w-4 h-4"})})]})]})]}),i.length>0&&e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-primary/10 border border-primary/20",children:[e.jsxs("span",{className:"text-sm font-medium",children:[i.length," ",t("assets.selected")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded-md bg-background border hover:bg-muted transition-colors text-sm",children:[e.jsx(O,{className:"w-4 h-4"}),t("assets.addTags")]}),e.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded-md bg-background border hover:bg-muted transition-colors text-sm",children:[e.jsx(_,{className:"w-4 h-4"}),t("assets.download")]}),e.jsxs("button",{onClick:q,disabled:f.isPending,className:"flex items-center gap-1 px-3 py-1.5 rounded-md bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors text-sm disabled:opacity-50",children:[f.isPending?e.jsx(Y,{className:"w-4 h-4 animate-spin"}):e.jsx(K,{className:"w-4 h-4"}),t("assets.delete")]})]})]}),g==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:o.map(s=>e.jsxs("div",{className:l("rounded-xl border bg-card overflow-hidden hover:shadow-md transition-shadow",i.includes(s.id)&&"ring-2 ring-primary"),children:[e.jsxs("div",{className:"relative aspect-video bg-muted",children:[e.jsx("img",{src:s.thumbnail,alt:s.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>N(s.id),className:"rounded border-white/50 bg-black/30"})}),e.jsx("div",{className:"absolute top-2 right-2",children:w(s.status)}),e.jsxs("div",{className:"absolute bottom-2 left-2 flex items-center gap-1 px-2 py-1 rounded bg-black/50 text-white text-xs",children:[v(s.type),e.jsx("span",{children:s.dimensions||s.duration||"Copy"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-sm truncate mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(F,{className:"w-3 h-3"}),e.jsx("span",{children:S(s.impressions)})]}),e.jsxs("div",{className:"text-muted-foreground",children:["CTR: ",e.jsx("span",{className:"font-medium",children:A(s.ctr)})]})]}),s.status!=="draft"&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:t("assets.fatigueScore")}),e.jsxs("span",{className:l("font-medium",h(s.fatigueScore).split(" ")[0]),children:[s.fatigueScore,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full",h(s.fatigueScore).split(" ")[1]),style:{width:`${s.fatigueScore}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",children:e.jsx(_,{className:"w-4 h-4"})})]}),e.jsx("button",{className:"p-1.5 rounded hover:bg-muted transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]})]})]},s.id))}):e.jsx("div",{className:"rounded-xl border bg-card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left",children:e.jsx("input",{type:"checkbox",onChange:()=>{i.length===o.length?p([]):p(o.map(s=>s.id))},checked:i.length===o.length&&o.length>0,className:"rounded"})}),e.jsx("th",{className:"p-4 text-left text-sm font-medium",children:t("assets.name")}),e.jsx("th",{className:"p-4 text-left text-sm font-medium",children:t("assets.type")}),e.jsx("th",{className:"p-4 text-left text-sm font-medium",children:t("assets.status")}),e.jsx("th",{className:"p-4 text-right text-sm font-medium",children:t("assets.impressions")}),e.jsx("th",{className:"p-4 text-right text-sm font-medium",children:"CTR"}),e.jsx("th",{className:"p-4 text-center text-sm font-medium",children:t("assets.fatigue")}),e.jsx("th",{className:"p-4 text-right text-sm font-medium",children:t("assets.actions")})]})}),e.jsx("tbody",{className:"divide-y",children:o.map(s=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>N(s.id),className:"rounded"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.thumbnail,alt:s.name,className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.campaigns.length>0?`${s.campaigns.length} campaigns`:"Not assigned"})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v(s.type),e.jsx("span",{className:"capitalize",children:s.type})]})}),e.jsx("td",{className:"p-4",children:w(s.status)}),e.jsx("td",{className:"p-4 text-right font-medium",children:S(s.impressions)}),e.jsx("td",{className:"p-4 text-right font-medium",children:A(s.ctr)}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-16 h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full",h(s.fatigueScore).split(" ")[1]),style:{width:`${s.fatigueScore}%`}})}),e.jsxs("span",{className:l("text-sm font-medium",h(s.fatigueScore).split(" ")[0]),children:[s.fatigueScore,"%"]})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{className:"p-2 rounded hover:bg-muted transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})})]},s.id))})]})}),o.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:t("assets.noResults")})]})]})}export{we as Assets,we as default};
//# sourceMappingURL=Assets-GUngVEpF.js.map
