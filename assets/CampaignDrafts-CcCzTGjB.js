import{j as e}from"./vendor-ui-B0DL0VNC.js";import{f as k,r as u,L as o}from"./vendor-react-Dz7uKsMg.js";import{j as R,c as b,f as g,a9 as h,af as m,ae as x}from"./index-BQex3859.js";import{h as S,j as C,k as P}from"./campaignBuilder-B-MzQ-hf.js";import{F as f}from"./XCircleIcon-Dk49lKz_.js";import{F as j}from"./PencilSquareIcon-8mqFv-8U.js";import{F as $}from"./TrashIcon-DR9paOX4.js";import"./vendor-charts-Cj11RBfc.js";import"./vendor-utils-L2YjCnAZ.js";import"./vendor-query-BPt-n81V.js";import"./vendor-motion-CR45sdSp.js";const T=[{id:"1",name:"KSA Prospecting - Q1",platform:"meta",status:"draft",budget:500,currency:"SAR",objective:"sales",createdAt:"2024-01-18T10:00:00Z",updatedAt:"2024-01-20T14:30:00Z",createdBy:"Ahmed Al-Saud"},{id:"2",name:"UAE Retargeting",platform:"google",status:"submitted",budget:1200,currency:"AED",objective:"conversions",createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-19T11:00:00Z",createdBy:"Sara Mohammed"},{id:"3",name:"Brand Awareness - Ramadan",platform:"meta",status:"approved",budget:2500,currency:"SAR",objective:"awareness",createdAt:"2024-01-10T08:00:00Z",updatedAt:"2024-01-18T16:00:00Z",createdBy:"Omar Hassan",approvedBy:"Admin User"},{id:"4",name:"Product Launch - Winter",platform:"tiktok",status:"rejected",budget:800,currency:"SAR",objective:"traffic",createdAt:"2024-01-12T12:00:00Z",updatedAt:"2024-01-17T10:00:00Z",createdBy:"Fatima Al-Ali"}],B={draft:{icon:m,label:"Draft",color:"text-gray-600 bg-gray-100 dark:bg-gray-800"},submitted:{icon:h,label:"Pending Approval",color:"text-amber-600 bg-amber-100 dark:bg-amber-900/30"},approved:{icon:g,label:"Approved",color:"text-emerald-600 bg-emerald-100 dark:bg-emerald-900/30"},rejected:{icon:f,label:"Rejected",color:"text-red-600 bg-red-100 dark:bg-red-900/30"},publishing:{icon:h,label:"Publishing...",color:"text-blue-600 bg-blue-100 dark:bg-blue-900/30"},published:{icon:g,label:"Published",color:"text-emerald-600 bg-emerald-100 dark:bg-emerald-900/30"},failed:{icon:f,label:"Failed",color:"text-red-600 bg-red-100 dark:bg-red-900/30"}};function q(){const{tenantId:r}=k(),[s,l]=u.useState(T),[n,y]=u.useState("all"),{toast:i}=R(),c=r?parseInt(r,10):0,v=S(c),N=C(c),w=P(c),A=async t=>{if(confirm("Are you sure you want to delete this draft?"))try{await w.mutateAsync(t),l(s.filter(a=>a.id!==t)),i({title:"Draft deleted",description:"The campaign draft has been deleted successfully."})}catch(a){i({title:"Delete failed",description:a instanceof Error?a.message:"Failed to delete draft. Please try again.",variant:"destructive"})}},D=async t=>{try{await v.mutateAsync(t),l(s.map(a=>a.id===t?{...a,status:"submitted"}:a)),i({title:"Draft submitted",description:"The campaign draft has been submitted for approval."})}catch(a){i({title:"Submit failed",description:a instanceof Error?a.message:"Failed to submit draft. Please try again.",variant:"destructive"})}},F=async t=>{l(s.map(a=>a.id===t?{...a,status:"publishing"}:a));try{await N.mutateAsync(t),l(s.map(a=>a.id===t?{...a,status:"published"}:a)),i({title:"Campaign published",description:"The campaign has been published successfully."})}catch(a){l(s.map(d=>d.id===t?{...d,status:"failed"}:d)),i({title:"Publish failed",description:a instanceof Error?a.message:"Failed to publish campaign. Please try again.",variant:"destructive"})}},p=s.filter(t=>n==="all"||t.status===n);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Campaign Drafts"}),e.jsxs("p",{className:"text-muted-foreground",children:[s.length," draft",s.length!==1?"s":""," total"]})]}),e.jsx(o,{to:`/app/${r}/campaigns/new`,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity",children:"Create New Draft"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","draft","submitted","approved","rejected","published"].map(t=>e.jsx("button",{onClick:()=>y(t),className:b("px-3 py-1.5 text-sm rounded-lg transition-colors",n===t?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx("div",{className:"space-y-4",children:p.map(t=>{const a=B[t.status],d=a.icon;return e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-card hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-muted",children:e.jsx(m,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-muted-foreground",children:[e.jsx("span",{className:"capitalize",children:t.platform}),e.jsx("span",{children:"-"}),e.jsx("span",{className:"capitalize",children:t.objective}),e.jsx("span",{children:"-"}),e.jsxs("span",{children:[t.currency," ",t.budget,"/day"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:b("inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full",a.color),children:[e.jsx(d,{className:"h-3 w-3"}),a.label]}),t.approvedBy&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Approved by ",t.approvedBy]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{to:`/app/${r}/campaigns/drafts/${t.id}`,className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"Edit",children:e.jsx(j,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>D(t.id),className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"Submit for Approval",children:e.jsx(x,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>A(t.id),className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-950/30 text-red-600 transition-colors",title:"Delete",children:e.jsx($,{className:"h-5 w-5"})})]}),t.status==="approved"&&e.jsxs("button",{onClick:()=>F(t.id),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 transition-colors",children:[e.jsx(x,{className:"h-4 w-4"}),"Publish"]}),t.status==="rejected"&&e.jsxs(o,{to:`/app/${r}/campaigns/drafts/${t.id}`,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border hover:bg-accent transition-colors",children:[e.jsx(j,{className:"h-4 w-4"}),"Edit & Resubmit"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Created by ",t.createdBy]}),e.jsxs("span",{children:["Updated ",new Date(t.updatedAt).toLocaleDateString()]})]})]},t.id)})}),p.length===0&&e.jsxs("div",{className:"rounded-xl border bg-muted/30 p-12 text-center",children:[e.jsx(m,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"mt-4 font-semibold",children:"No Drafts Found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:n==="all"?"Create your first campaign draft to get started":`No drafts with status "${n}"`}),e.jsx(o,{to:`/app/${r}/campaigns/new`,className:"inline-block mt-4 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity",children:"Create Draft"})]})]})}export{q as default};
//# sourceMappingURL=CampaignDrafts-CcCzTGjB.js.map
