{"version":3,"file":"TenantCampaigns-DSS6yYX4.js","sources":["../../src/views/tenant/TenantCampaigns.tsx"],"sourcesContent":["/**\r\n * Stratum AI - Tenant Campaigns List\r\n *\r\n * Lists all campaigns for the tenant with filtering and actions.\r\n */\r\n\r\nimport { useMemo, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { FunnelIcon, MagnifyingGlassIcon, PlusIcon } from '@heroicons/react/24/outline';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCampaigns } from '@/api/hooks';\r\n\r\ninterface Campaign {\r\n  id: string;\r\n  name: string;\r\n  platform: string;\r\n  status: 'active' | 'paused' | 'draft' | 'ended';\r\n  spend: number;\r\n  roas: number;\r\n  conversions: number;\r\n  lastUpdated: string;\r\n}\r\n\r\n// Mock data for demo\r\nconst mockCampaigns: Campaign[] = [\r\n  {\r\n    id: '1',\r\n    name: 'Summer Sale 2024',\r\n    platform: 'Meta',\r\n    status: 'active',\r\n    spend: 5420,\r\n    roas: 4.2,\r\n    conversions: 234,\r\n    lastUpdated: '2h ago',\r\n  },\r\n  {\r\n    id: '2',\r\n    name: 'Retargeting - Cart Abandoners',\r\n    platform: 'Google',\r\n    status: 'active',\r\n    spend: 3200,\r\n    roas: 5.8,\r\n    conversions: 156,\r\n    lastUpdated: '4h ago',\r\n  },\r\n  {\r\n    id: '3',\r\n    name: 'Brand Awareness Q1',\r\n    platform: 'Meta',\r\n    status: 'paused',\r\n    spend: 8900,\r\n    roas: 2.1,\r\n    conversions: 89,\r\n    lastUpdated: '1d ago',\r\n  },\r\n  {\r\n    id: '4',\r\n    name: 'Product Launch - Winter Collection',\r\n    platform: 'TikTok',\r\n    status: 'draft',\r\n    spend: 0,\r\n    roas: 0,\r\n    conversions: 0,\r\n    lastUpdated: '2d ago',\r\n  },\r\n];\r\n\r\nconst statusColors = {\r\n  active: 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400',\r\n  paused: 'bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400',\r\n  draft: 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400',\r\n  ended: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400',\r\n};\r\n\r\nexport default function TenantCampaigns() {\r\n  const { tenantId } = useParams<{ tenantId: string }>();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n\r\n  // Fetch campaigns from API\r\n  const { data: campaignsData } = useCampaigns();\r\n\r\n  // Transform API data or fall back to mock\r\n  const campaigns = useMemo((): Campaign[] => {\r\n    if (campaignsData?.items && campaignsData.items.length > 0) {\r\n      return campaignsData.items.map((c: any) => ({\r\n        id: c.id?.toString() || c.campaign_id?.toString() || '',\r\n        name: c.name || c.campaign_name || '',\r\n        platform: c.platform || 'Unknown',\r\n        status: c.status?.toLowerCase() || 'active',\r\n        spend: c.spend || 0,\r\n        roas: c.roas || (c.spend > 0 ? c.revenue / c.spend : 0),\r\n        conversions: c.conversions || 0,\r\n        lastUpdated: c.updated_at ? getRelativeTime(c.updated_at) : 'â€”',\r\n      }));\r\n    }\r\n    return mockCampaigns;\r\n  }, [campaignsData]);\r\n\r\n  // Helper function to get relative time\r\n  function getRelativeTime(dateStr: string): string {\r\n    const date = new Date(dateStr);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n    if (diffHours < 1) return 'just now';\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    const diffDays = Math.floor(diffHours / 24);\r\n    return `${diffDays}d ago`;\r\n  }\r\n\r\n  const filteredCampaigns = campaigns.filter((campaign) => {\r\n    const matchesSearch = campaign.name.toLowerCase().includes(searchQuery.toLowerCase());\r\n    const matchesStatus = statusFilter === 'all' || campaign.status === statusFilter;\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">Campaigns</h1>\r\n          <p className=\"text-muted-foreground\">Manage your advertising campaigns</p>\r\n        </div>\r\n        <Link\r\n          to={`/app/${tenantId}/campaigns/new`}\r\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:opacity-90 transition-opacity\"\r\n        >\r\n          <PlusIcon className=\"h-5 w-5\" />\r\n          Create Campaign\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4\">\r\n        <div className=\"relative flex-1\">\r\n          <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search campaigns...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n          />\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <FunnelIcon className=\"h-5 w-5 text-muted-foreground\" />\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n          >\r\n            <option value=\"all\">All Status</option>\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"paused\">Paused</option>\r\n            <option value=\"draft\">Draft</option>\r\n            <option value=\"ended\">Ended</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Campaigns Table */}\r\n      <div className=\"rounded-xl border bg-card shadow-card overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-muted/50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                  Campaign\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                  Platform\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                  Spend\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                  ROAS\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                  Conversions\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                  Updated\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-border\">\r\n              {filteredCampaigns.map((campaign) => (\r\n                <tr key={campaign.id} className=\"hover:bg-muted/30 transition-colors\">\r\n                  <td className=\"px-6 py-4\">\r\n                    <Link\r\n                      to={`/app/${tenantId}/campaigns/drafts/${campaign.id}`}\r\n                      className=\"font-medium hover:text-primary transition-colors\"\r\n                    >\r\n                      {campaign.name}\r\n                    </Link>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm text-muted-foreground\">{campaign.platform}</td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <span\r\n                      className={cn(\r\n                        'px-2 py-1 text-xs font-medium rounded-full',\r\n                        statusColors[campaign.status]\r\n                      )}\r\n                    >\r\n                      {campaign.status.charAt(0).toUpperCase() + campaign.status.slice(1)}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm\">\r\n                    ${campaign.spend.toLocaleString()}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm\">\r\n                    <span\r\n                      className={\r\n                        campaign.roas >= 3\r\n                          ? 'text-emerald-600 dark:text-emerald-400'\r\n                          : campaign.roas < 2\r\n                            ? 'text-red-600 dark:text-red-400'\r\n                            : ''\r\n                      }\r\n                    >\r\n                      {campaign.roas > 0 ? `${campaign.roas}x` : '-'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm\">\r\n                    {campaign.conversions > 0 ? campaign.conversions.toLocaleString() : '-'}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm text-muted-foreground\">\r\n                    {campaign.lastUpdated}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {filteredCampaigns.length === 0 && (\r\n          <div className=\"px-6 py-12 text-center\">\r\n            <p className=\"text-muted-foreground\">No campaigns found</p>\r\n            <Link\r\n              to={`/app/${tenantId}/campaigns/new`}\r\n              className=\"inline-flex items-center gap-2 mt-4 text-primary hover:underline\"\r\n            >\r\n              <PlusIcon className=\"h-4 w-4\" />\r\n              Create your first campaign\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["mockCampaigns","statusColors","TenantCampaigns","tenantId","useParams","searchQuery","setSearchQuery","useState","statusFilter","setStatusFilter","campaignsData","useCampaigns","campaigns","useMemo","c","_a","_b","_c","getRelativeTime","dateStr","date","diffMs","diffHours","filteredCampaigns","campaign","matchesSearch","matchesStatus","jsxs","jsx","Link","PlusIcon","MagnifyingGlassIcon","e","FunnelIcon","cn"],"mappings":"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"}