{"version":3,"file":"CustomAutopilotRules-De4f8KUK.js","sources":["../../src/components/autopilot/CustomAutopilotRulesBuilder.tsx","../../src/views/CustomAutopilotRules.tsx"],"sourcesContent":["/**\r\n * Custom Autopilot Rules Builder - Enterprise Feature\r\n *\r\n * Advanced rule builder allowing Enterprise users to create\r\n * complex automation rules with multi-condition logic,\r\n * trust-gated execution, and advanced actions.\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n  Bell,\r\n  ChevronDown,\r\n  ChevronRight,\r\n  Clock,\r\n  DollarSign,\r\n  Info,\r\n  Loader2,\r\n  MessageCircle,\r\n  Pause,\r\n  Play,\r\n  Plus,\r\n  Save,\r\n  Settings,\r\n  Shield,\r\n  Tag,\r\n  Target,\r\n  Trash2,\r\n  TrendingUp,\r\n  X,\r\n  Zap,\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\n// Types\r\ninterface RuleCondition {\r\n  id: string;\r\n  field: string;\r\n  operator: string;\r\n  value: string;\r\n  valueType: 'number' | 'percentage' | 'currency';\r\n}\r\n\r\ninterface ConditionGroup {\r\n  id: string;\r\n  logic: 'AND' | 'OR';\r\n  conditions: RuleCondition[];\r\n}\r\n\r\ninterface RuleAction {\r\n  id: string;\r\n  type: string;\r\n  config: Record<string, any>;\r\n  priority: number;\r\n}\r\n\r\ninterface RuleSchedule {\r\n  enabled: boolean;\r\n  frequency: 'hourly' | 'daily' | 'weekly' | 'custom';\r\n  daysOfWeek?: number[];\r\n  hoursOfDay?: number[];\r\n  timezone: string;\r\n}\r\n\r\ninterface TrustGateConfig {\r\n  enabled: boolean;\r\n  minSignalHealth: number;\r\n  requireApproval: boolean;\r\n  dryRunFirst: boolean;\r\n}\r\n\r\ninterface CustomRule {\r\n  id?: string;\r\n  name: string;\r\n  description: string;\r\n  status: 'active' | 'paused' | 'draft';\r\n  conditionGroups: ConditionGroup[];\r\n  conditionLogic: 'AND' | 'OR';\r\n  actions: RuleAction[];\r\n  targeting: {\r\n    platforms: string[];\r\n    campaignTypes: string[];\r\n    specificCampaigns: string[];\r\n  };\r\n  schedule: RuleSchedule;\r\n  trustGate: TrustGateConfig;\r\n  cooldownHours: number;\r\n  maxExecutionsPerDay: number;\r\n  createdAt?: string;\r\n  lastModifiedAt?: string;\r\n}\r\n\r\n// Available fields for conditions\r\nconst CONDITION_FIELDS = [\r\n  { value: 'roas', label: 'ROAS', category: 'Performance', valueType: 'number' as const },\r\n  { value: 'cpa', label: 'CPA', category: 'Performance', valueType: 'currency' as const },\r\n  { value: 'cpc', label: 'CPC', category: 'Performance', valueType: 'currency' as const },\r\n  { value: 'cpm', label: 'CPM', category: 'Performance', valueType: 'currency' as const },\r\n  { value: 'ctr', label: 'CTR', category: 'Performance', valueType: 'percentage' as const },\r\n  {\r\n    value: 'conversion_rate',\r\n    label: 'Conversion Rate',\r\n    category: 'Performance',\r\n    valueType: 'percentage' as const,\r\n  },\r\n  { value: 'spend', label: 'Spend', category: 'Budget', valueType: 'currency' as const },\r\n  {\r\n    value: 'spend_pct',\r\n    label: 'Budget Spent %',\r\n    category: 'Budget',\r\n    valueType: 'percentage' as const,\r\n  },\r\n  {\r\n    value: 'daily_budget',\r\n    label: 'Daily Budget',\r\n    category: 'Budget',\r\n    valueType: 'currency' as const,\r\n  },\r\n  { value: 'impressions', label: 'Impressions', category: 'Volume', valueType: 'number' as const },\r\n  { value: 'clicks', label: 'Clicks', category: 'Volume', valueType: 'number' as const },\r\n  { value: 'conversions', label: 'Conversions', category: 'Volume', valueType: 'number' as const },\r\n  { value: 'frequency', label: 'Frequency', category: 'Delivery', valueType: 'number' as const },\r\n  { value: 'reach', label: 'Reach', category: 'Delivery', valueType: 'number' as const },\r\n  {\r\n    value: 'fatigue_score',\r\n    label: 'Creative Fatigue Score',\r\n    category: 'Health',\r\n    valueType: 'percentage' as const,\r\n  },\r\n  {\r\n    value: 'signal_health',\r\n    label: 'Signal Health Score',\r\n    category: 'Health',\r\n    valueType: 'number' as const,\r\n  },\r\n  { value: 'days_running', label: 'Days Running', category: 'Time', valueType: 'number' as const },\r\n  {\r\n    value: 'hours_since_change',\r\n    label: 'Hours Since Last Change',\r\n    category: 'Time',\r\n    valueType: 'number' as const,\r\n  },\r\n];\r\n\r\nconst OPERATORS = [\r\n  { value: 'gt', label: '>', description: 'Greater than' },\r\n  { value: 'gte', label: '>=', description: 'Greater than or equal' },\r\n  { value: 'lt', label: '<', description: 'Less than' },\r\n  { value: 'lte', label: '<=', description: 'Less than or equal' },\r\n  { value: 'eq', label: '=', description: 'Equal to' },\r\n  { value: 'neq', label: '!=', description: 'Not equal to' },\r\n  { value: 'between', label: 'Between', description: 'Between two values' },\r\n  { value: 'change_gt', label: 'Changed by >', description: 'Changed by more than' },\r\n  { value: 'change_lt', label: 'Changed by <', description: 'Changed by less than' },\r\n];\r\n\r\nconst ACTION_TYPES = [\r\n  { value: 'adjust_budget', label: 'Adjust Budget', icon: DollarSign, category: 'Budget' },\r\n  { value: 'scale_budget', label: 'Scale Budget %', icon: TrendingUp, category: 'Budget' },\r\n  { value: 'set_budget', label: 'Set Budget To', icon: Target, category: 'Budget' },\r\n  { value: 'adjust_bid', label: 'Adjust Bid', icon: TrendingUp, category: 'Bidding' },\r\n  { value: 'pause_campaign', label: 'Pause Campaign', icon: Pause, category: 'Status' },\r\n  { value: 'pause_adset', label: 'Pause Ad Set', icon: Pause, category: 'Status' },\r\n  { value: 'pause_ad', label: 'Pause Ad', icon: Pause, category: 'Status' },\r\n  { value: 'enable_campaign', label: 'Enable Campaign', icon: Play, category: 'Status' },\r\n  { value: 'apply_label', label: 'Apply Label', icon: Tag, category: 'Organization' },\r\n  { value: 'send_alert', label: 'Send Alert', icon: Bell, category: 'Notification' },\r\n  { value: 'notify_slack', label: 'Notify Slack', icon: MessageCircle, category: 'Notification' },\r\n  {\r\n    value: 'notify_whatsapp',\r\n    label: 'Notify WhatsApp',\r\n    icon: MessageCircle,\r\n    category: 'Notification',\r\n  },\r\n];\r\n\r\nconst PLATFORMS = [\r\n  { value: 'meta', label: 'Meta (Facebook/Instagram)' },\r\n  { value: 'google', label: 'Google Ads' },\r\n  { value: 'tiktok', label: 'TikTok' },\r\n  { value: 'snapchat', label: 'Snapchat' },\r\n];\r\n\r\nconst CAMPAIGN_TYPES = [\r\n  { value: 'prospecting', label: 'Prospecting' },\r\n  { value: 'retargeting', label: 'Retargeting' },\r\n  { value: 'brand', label: 'Brand Awareness' },\r\n  { value: 'conversion', label: 'Conversion' },\r\n  { value: 'engagement', label: 'Engagement' },\r\n];\r\n\r\ninterface Props {\r\n  rule?: CustomRule;\r\n  onSave: (rule: CustomRule) => Promise<void>;\r\n  onCancel: () => void;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport function CustomAutopilotRulesBuilder({ rule, onSave, onCancel, isLoading }: Props) {\r\n  const [formData, setFormData] = useState<CustomRule>(\r\n    rule || {\r\n      name: '',\r\n      description: '',\r\n      status: 'draft',\r\n      conditionGroups: [\r\n        {\r\n          id: crypto.randomUUID(),\r\n          logic: 'AND',\r\n          conditions: [\r\n            {\r\n              id: crypto.randomUUID(),\r\n              field: 'roas',\r\n              operator: 'lt',\r\n              value: '2.0',\r\n              valueType: 'number',\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      conditionLogic: 'AND',\r\n      actions: [{ id: crypto.randomUUID(), type: 'pause_campaign', config: {}, priority: 1 }],\r\n      targeting: {\r\n        platforms: [],\r\n        campaignTypes: [],\r\n        specificCampaigns: [],\r\n      },\r\n      schedule: {\r\n        enabled: false,\r\n        frequency: 'hourly',\r\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n      },\r\n      trustGate: {\r\n        enabled: true,\r\n        minSignalHealth: 70,\r\n        requireApproval: false,\r\n        dryRunFirst: true,\r\n      },\r\n      cooldownHours: 24,\r\n      maxExecutionsPerDay: 10,\r\n    }\r\n  );\r\n\r\n  const [activeTab, setActiveTab] = useState<\r\n    'conditions' | 'actions' | 'targeting' | 'schedule' | 'safety'\r\n  >('conditions');\r\n  const [expandedGroups, setExpandedGroups] = useState<Set<string>>(\r\n    new Set([formData.conditionGroups[0]?.id])\r\n  );\r\n\r\n  // Condition Group Management\r\n  const addConditionGroup = () => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      conditionGroups: [\r\n        ...prev.conditionGroups,\r\n        {\r\n          id: crypto.randomUUID(),\r\n          logic: 'AND',\r\n          conditions: [\r\n            {\r\n              id: crypto.randomUUID(),\r\n              field: 'roas',\r\n              operator: 'lt',\r\n              value: '',\r\n              valueType: 'number',\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const removeConditionGroup = (groupId: string) => {\r\n    if (formData.conditionGroups.length <= 1) return;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      conditionGroups: prev.conditionGroups.filter((g) => g.id !== groupId),\r\n    }));\r\n  };\r\n\r\n  const addCondition = (groupId: string) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      conditionGroups: prev.conditionGroups.map((g) =>\r\n        g.id === groupId\r\n          ? {\r\n              ...g,\r\n              conditions: [\r\n                ...g.conditions,\r\n                {\r\n                  id: crypto.randomUUID(),\r\n                  field: 'roas',\r\n                  operator: 'lt',\r\n                  value: '',\r\n                  valueType: 'number',\r\n                },\r\n              ],\r\n            }\r\n          : g\r\n      ),\r\n    }));\r\n  };\r\n\r\n  const removeCondition = (groupId: string, conditionId: string) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      conditionGroups: prev.conditionGroups.map((g) =>\r\n        g.id === groupId\r\n          ? { ...g, conditions: g.conditions.filter((c) => c.id !== conditionId) }\r\n          : g\r\n      ),\r\n    }));\r\n  };\r\n\r\n  const updateCondition = (\r\n    groupId: string,\r\n    conditionId: string,\r\n    updates: Partial<RuleCondition>\r\n  ) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      conditionGroups: prev.conditionGroups.map((g) =>\r\n        g.id === groupId\r\n          ? {\r\n              ...g,\r\n              conditions: g.conditions.map((c) =>\r\n                c.id === conditionId ? { ...c, ...updates } : c\r\n              ),\r\n            }\r\n          : g\r\n      ),\r\n    }));\r\n  };\r\n\r\n  // Action Management\r\n  const addAction = () => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      actions: [\r\n        ...prev.actions,\r\n        {\r\n          id: crypto.randomUUID(),\r\n          type: 'send_alert',\r\n          config: {},\r\n          priority: prev.actions.length + 1,\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const removeAction = (actionId: string) => {\r\n    if (formData.actions.length <= 1) return;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      actions: prev.actions.filter((a) => a.id !== actionId),\r\n    }));\r\n  };\r\n\r\n  const updateAction = (actionId: string, updates: Partial<RuleAction>) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      actions: prev.actions.map((a) => (a.id === actionId ? { ...a, ...updates } : a)),\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    await onSave(formData);\r\n  };\r\n\r\n  const toggleGroup = (groupId: string) => {\r\n    setExpandedGroups((prev) => {\r\n      const next = new Set(prev);\r\n      if (next.has(groupId)) {\r\n        next.delete(groupId);\r\n      } else {\r\n        next.add(groupId);\r\n      }\r\n      return next;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-xl border\">\r\n      {/* Header */}\r\n      <div className=\"p-6 border-b\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 rounded-lg bg-primary/10\">\r\n              <Zap className=\"w-6 h-6 text-primary\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-bold\">\r\n                {rule ? 'Edit Custom Rule' : 'Create Custom Autopilot Rule'}\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Enterprise feature for advanced automation\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"px-2 py-1 rounded-full bg-gradient-to-r from-purple-500/20 to-primary/20 text-primary text-xs font-medium\">\r\n              Enterprise\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Rule Name *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData((prev) => ({ ...prev, name: e.target.value }))}\r\n              placeholder=\"e.g., Scale High Performers\"\r\n              className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Description</label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData((prev) => ({ ...prev, description: e.target.value }))}\r\n              placeholder=\"Describe what this rule does and when it should trigger...\"\r\n              rows={2}\r\n              className=\"w-full px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b\">\r\n        {[\r\n          { id: 'conditions', label: 'Conditions', icon: Settings },\r\n          { id: 'actions', label: 'Actions', icon: Zap },\r\n          { id: 'targeting', label: 'Targeting', icon: Target },\r\n          { id: 'schedule', label: 'Schedule', icon: Clock },\r\n          { id: 'safety', label: 'Safety & Trust', icon: Shield },\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id as typeof activeTab)}\r\n            className={cn(\r\n              'flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors',\r\n              activeTab === tab.id\r\n                ? 'border-primary text-primary'\r\n                : 'border-transparent text-muted-foreground hover:text-foreground'\r\n            )}\r\n          >\r\n            <tab.icon className=\"w-4 h-4\" />\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"p-6\">\r\n        {/* Conditions Tab */}\r\n        {activeTab === 'conditions' && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h3 className=\"font-semibold\">Trigger Conditions</h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Define when this rule should trigger\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={addConditionGroup}\r\n                className=\"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg border hover:bg-muted transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                Add Group\r\n              </button>\r\n            </div>\r\n\r\n            {/* Condition Groups */}\r\n            {formData.conditionGroups.map((group, groupIndex) => (\r\n              <div key={group.id} className=\"rounded-lg border\">\r\n                {groupIndex > 0 && (\r\n                  <div className=\"flex items-center justify-center -mt-3 mb-2\">\r\n                    <select\r\n                      value={formData.conditionLogic}\r\n                      onChange={(e) =>\r\n                        setFormData((prev) => ({\r\n                          ...prev,\r\n                          conditionLogic: e.target.value as 'AND' | 'OR',\r\n                        }))\r\n                      }\r\n                      className=\"px-3 py-1 text-sm rounded-full bg-primary/10 text-primary font-medium border-0\"\r\n                    >\r\n                      <option value=\"AND\">AND</option>\r\n                      <option value=\"OR\">OR</option>\r\n                    </select>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Group Header */}\r\n                <div\r\n                  className=\"flex items-center justify-between p-3 bg-muted/50 cursor-pointer\"\r\n                  onClick={() => toggleGroup(group.id)}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {expandedGroups.has(group.id) ? (\r\n                      <ChevronDown className=\"w-4 h-4\" />\r\n                    ) : (\r\n                      <ChevronRight className=\"w-4 h-4\" />\r\n                    )}\r\n                    <span className=\"font-medium\">Condition Group {groupIndex + 1}</span>\r\n                    <span className=\"text-sm text-muted-foreground\">\r\n                      ({group.conditions.length} condition{group.conditions.length !== 1 ? 's' : ''}\r\n                      )\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <select\r\n                      value={group.logic}\r\n                      onChange={(e) => {\r\n                        e.stopPropagation();\r\n                        setFormData((prev) => ({\r\n                          ...prev,\r\n                          conditionGroups: prev.conditionGroups.map((g) =>\r\n                            g.id === group.id ? { ...g, logic: e.target.value as 'AND' | 'OR' } : g\r\n                          ),\r\n                        }));\r\n                      }}\r\n                      onClick={(e) => e.stopPropagation()}\r\n                      className=\"px-2 py-1 text-xs rounded border bg-background\"\r\n                    >\r\n                      <option value=\"AND\">Match ALL</option>\r\n                      <option value=\"OR\">Match ANY</option>\r\n                    </select>\r\n                    {formData.conditionGroups.length > 1 && (\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          removeConditionGroup(group.id);\r\n                        }}\r\n                        className=\"p-1 rounded hover:bg-destructive/10 text-destructive\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Group Conditions */}\r\n                {expandedGroups.has(group.id) && (\r\n                  <div className=\"p-4 space-y-3\">\r\n                    {group.conditions.map((condition, condIndex) => (\r\n                      <div key={condition.id} className=\"flex items-center gap-2\">\r\n                        {condIndex > 0 && (\r\n                          <span className=\"text-xs font-medium text-primary px-2\">\r\n                            {group.logic}\r\n                          </span>\r\n                        )}\r\n                        <select\r\n                          value={condition.field}\r\n                          onChange={(e) => {\r\n                            const field = CONDITION_FIELDS.find((f) => f.value === e.target.value);\r\n                            updateCondition(group.id, condition.id, {\r\n                              field: e.target.value,\r\n                              valueType: field?.valueType || 'number',\r\n                            });\r\n                          }}\r\n                          className=\"flex-1 px-3 py-2 rounded-lg border bg-background text-sm\"\r\n                        >\r\n                          {Object.entries(\r\n                            CONDITION_FIELDS.reduce(\r\n                              (acc, f) => {\r\n                                acc[f.category] = acc[f.category] || [];\r\n                                acc[f.category].push(f);\r\n                                return acc;\r\n                              },\r\n                              {} as Record<string, typeof CONDITION_FIELDS>\r\n                            )\r\n                          ).map(([category, fields]) => (\r\n                            <optgroup key={category} label={category}>\r\n                              {fields.map((f) => (\r\n                                <option key={f.value} value={f.value}>\r\n                                  {f.label}\r\n                                </option>\r\n                              ))}\r\n                            </optgroup>\r\n                          ))}\r\n                        </select>\r\n                        <select\r\n                          value={condition.operator}\r\n                          onChange={(e) =>\r\n                            updateCondition(group.id, condition.id, { operator: e.target.value })\r\n                          }\r\n                          className=\"w-28 px-3 py-2 rounded-lg border bg-background text-sm\"\r\n                        >\r\n                          {OPERATORS.map((op) => (\r\n                            <option key={op.value} value={op.value}>\r\n                              {op.label}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                        <div className=\"relative\">\r\n                          {condition.valueType === 'currency' && (\r\n                            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">\r\n                              $\r\n                            </span>\r\n                          )}\r\n                          <input\r\n                            type=\"text\"\r\n                            value={condition.value}\r\n                            onChange={(e) =>\r\n                              updateCondition(group.id, condition.id, { value: e.target.value })\r\n                            }\r\n                            placeholder=\"Value\"\r\n                            className={cn(\r\n                              'w-28 px-3 py-2 rounded-lg border bg-background text-sm',\r\n                              condition.valueType === 'currency' && 'pl-7'\r\n                            )}\r\n                          />\r\n                          {condition.valueType === 'percentage' && (\r\n                            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground\">\r\n                              %\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        {group.conditions.length > 1 && (\r\n                          <button\r\n                            onClick={() => removeCondition(group.id, condition.id)}\r\n                            className=\"p-1.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive\"\r\n                          >\r\n                            <X className=\"w-4 h-4\" />\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                    <button\r\n                      onClick={() => addCondition(group.id)}\r\n                      className=\"flex items-center gap-1 text-sm text-primary hover:underline\"\r\n                    >\r\n                      <Plus className=\"w-4 h-4\" />\r\n                      Add Condition\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions Tab */}\r\n        {activeTab === 'actions' && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h3 className=\"font-semibold\">Actions</h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  What should happen when conditions are met\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={addAction}\r\n                className=\"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg border hover:bg-muted transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                Add Action\r\n              </button>\r\n            </div>\r\n\r\n            {formData.actions.map((action, index) => {\r\n              return (\r\n                <div key={action.id} className=\"rounded-lg border p-4\">\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-medium text-sm\">\r\n                      {index + 1}\r\n                    </div>\r\n                    <div className=\"flex-1 space-y-3\">\r\n                      <select\r\n                        value={action.type}\r\n                        onChange={(e) =>\r\n                          updateAction(action.id, { type: e.target.value, config: {} })\r\n                        }\r\n                        className=\"w-full px-3 py-2 rounded-lg border bg-background text-sm\"\r\n                      >\r\n                        {Object.entries(\r\n                          ACTION_TYPES.reduce(\r\n                            (acc, a) => {\r\n                              acc[a.category] = acc[a.category] || [];\r\n                              acc[a.category].push(a);\r\n                              return acc;\r\n                            },\r\n                            {} as Record<string, typeof ACTION_TYPES>\r\n                          )\r\n                        ).map(([category, actions]) => (\r\n                          <optgroup key={category} label={category}>\r\n                            {actions.map((a) => (\r\n                              <option key={a.value} value={a.value}>\r\n                                {a.label}\r\n                              </option>\r\n                            ))}\r\n                          </optgroup>\r\n                        ))}\r\n                      </select>\r\n\r\n                      {/* Action Config */}\r\n                      {(action.type === 'adjust_budget' || action.type === 'scale_budget') && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <label className=\"text-sm text-muted-foreground\">Adjustment:</label>\r\n                          <select\r\n                            value={action.config.direction || 'increase'}\r\n                            onChange={(e) =>\r\n                              updateAction(action.id, {\r\n                                config: { ...action.config, direction: e.target.value },\r\n                              })\r\n                            }\r\n                            className=\"px-2 py-1 rounded border bg-background text-sm\"\r\n                          >\r\n                            <option value=\"increase\">Increase by</option>\r\n                            <option value=\"decrease\">Decrease by</option>\r\n                          </select>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={action.config.amount || ''}\r\n                            onChange={(e) =>\r\n                              updateAction(action.id, {\r\n                                config: { ...action.config, amount: e.target.value },\r\n                              })\r\n                            }\r\n                            placeholder=\"10\"\r\n                            className=\"w-20 px-2 py-1 rounded border bg-background text-sm\"\r\n                          />\r\n                          <span className=\"text-sm text-muted-foreground\">%</span>\r\n                        </div>\r\n                      )}\r\n\r\n                      {action.type === 'set_budget' && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <label className=\"text-sm text-muted-foreground\">Set to:</label>\r\n                          <span className=\"text-muted-foreground\">$</span>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={action.config.amount || ''}\r\n                            onChange={(e) =>\r\n                              updateAction(action.id, {\r\n                                config: { ...action.config, amount: e.target.value },\r\n                              })\r\n                            }\r\n                            placeholder=\"100\"\r\n                            className=\"w-28 px-2 py-1 rounded border bg-background text-sm\"\r\n                          />\r\n                        </div>\r\n                      )}\r\n\r\n                      {action.type === 'apply_label' && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <label className=\"text-sm text-muted-foreground\">Label:</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={action.config.label || ''}\r\n                            onChange={(e) =>\r\n                              updateAction(action.id, {\r\n                                config: { ...action.config, label: e.target.value },\r\n                              })\r\n                            }\r\n                            placeholder=\"e.g., high-performer\"\r\n                            className=\"flex-1 px-2 py-1 rounded border bg-background text-sm\"\r\n                          />\r\n                        </div>\r\n                      )}\r\n\r\n                      {action.type === 'notify_slack' && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <label className=\"text-sm text-muted-foreground\">Channel:</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={action.config.channel || ''}\r\n                            onChange={(e) =>\r\n                              updateAction(action.id, {\r\n                                config: { ...action.config, channel: e.target.value },\r\n                              })\r\n                            }\r\n                            placeholder=\"#marketing-alerts\"\r\n                            className=\"flex-1 px-2 py-1 rounded border bg-background text-sm\"\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {formData.actions.length > 1 && (\r\n                      <button\r\n                        onClick={() => removeAction(action.id)}\r\n                        className=\"p-1.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        {/* Targeting Tab */}\r\n        {activeTab === 'targeting' && (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <h3 className=\"font-semibold mb-2\">Platforms</h3>\r\n              <p className=\"text-sm text-muted-foreground mb-3\">\r\n                Select which ad platforms this rule applies to\r\n              </p>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {PLATFORMS.map((platform) => (\r\n                  <button\r\n                    key={platform.value}\r\n                    onClick={() => {\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        targeting: {\r\n                          ...prev.targeting,\r\n                          platforms: prev.targeting.platforms.includes(platform.value)\r\n                            ? prev.targeting.platforms.filter((p) => p !== platform.value)\r\n                            : [...prev.targeting.platforms, platform.value],\r\n                        },\r\n                      }));\r\n                    }}\r\n                    className={cn(\r\n                      'px-3 py-2 rounded-lg border text-sm transition-colors',\r\n                      formData.targeting.platforms.includes(platform.value)\r\n                        ? 'bg-primary text-primary-foreground border-primary'\r\n                        : 'hover:bg-muted'\r\n                    )}\r\n                  >\r\n                    {platform.label}\r\n                  </button>\r\n                ))}\r\n                {formData.targeting.platforms.length === 0 && (\r\n                  <span className=\"text-sm text-muted-foreground italic\">\r\n                    All platforms (no filter)\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"font-semibold mb-2\">Campaign Types</h3>\r\n              <p className=\"text-sm text-muted-foreground mb-3\">\r\n                Filter by campaign objective/type\r\n              </p>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {CAMPAIGN_TYPES.map((type) => (\r\n                  <button\r\n                    key={type.value}\r\n                    onClick={() => {\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        targeting: {\r\n                          ...prev.targeting,\r\n                          campaignTypes: prev.targeting.campaignTypes.includes(type.value)\r\n                            ? prev.targeting.campaignTypes.filter((t) => t !== type.value)\r\n                            : [...prev.targeting.campaignTypes, type.value],\r\n                        },\r\n                      }));\r\n                    }}\r\n                    className={cn(\r\n                      'px-3 py-2 rounded-lg border text-sm transition-colors',\r\n                      formData.targeting.campaignTypes.includes(type.value)\r\n                        ? 'bg-primary text-primary-foreground border-primary'\r\n                        : 'hover:bg-muted'\r\n                    )}\r\n                  >\r\n                    {type.label}\r\n                  </button>\r\n                ))}\r\n                {formData.targeting.campaignTypes.length === 0 && (\r\n                  <span className=\"text-sm text-muted-foreground italic\">\r\n                    All types (no filter)\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Schedule Tab */}\r\n        {activeTab === 'schedule' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h3 className=\"font-semibold\">Enable Schedule</h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Run this rule on a schedule instead of continuously\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() =>\r\n                  setFormData((prev) => ({\r\n                    ...prev,\r\n                    schedule: { ...prev.schedule, enabled: !prev.schedule.enabled },\r\n                  }))\r\n                }\r\n                className={cn(\r\n                  'w-12 h-6 rounded-full transition-colors relative',\r\n                  formData.schedule.enabled ? 'bg-primary' : 'bg-muted'\r\n                )}\r\n              >\r\n                <div\r\n                  className={cn(\r\n                    'absolute w-5 h-5 rounded-full bg-white top-0.5 transition-all',\r\n                    formData.schedule.enabled ? 'left-6' : 'left-0.5'\r\n                  )}\r\n                />\r\n              </button>\r\n            </div>\r\n\r\n            {formData.schedule.enabled && (\r\n              <div className=\"space-y-4 p-4 rounded-lg bg-muted/50\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-1 block\">Frequency</label>\r\n                  <select\r\n                    value={formData.schedule.frequency}\r\n                    onChange={(e) =>\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        schedule: { ...prev.schedule, frequency: e.target.value as any },\r\n                      }))\r\n                    }\r\n                    className=\"w-full px-3 py-2 rounded-lg border bg-background text-sm\"\r\n                  >\r\n                    <option value=\"hourly\">Every Hour</option>\r\n                    <option value=\"daily\">Daily</option>\r\n                    <option value=\"weekly\">Weekly</option>\r\n                    <option value=\"custom\">Custom</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-1 block\">Timezone</label>\r\n                  <select\r\n                    value={formData.schedule.timezone}\r\n                    onChange={(e) =>\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        schedule: { ...prev.schedule, timezone: e.target.value },\r\n                      }))\r\n                    }\r\n                    className=\"w-full px-3 py-2 rounded-lg border bg-background text-sm\"\r\n                  >\r\n                    <option value=\"UTC\">UTC</option>\r\n                    <option value=\"America/New_York\">Eastern Time</option>\r\n                    <option value=\"America/Los_Angeles\">Pacific Time</option>\r\n                    <option value=\"Europe/London\">London</option>\r\n                    <option value=\"Asia/Dubai\">Dubai</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"text-sm font-medium mb-1 block\">Cooldown Period</label>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.cooldownHours}\r\n                    onChange={(e) =>\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        cooldownHours: parseInt(e.target.value) || 0,\r\n                      }))\r\n                    }\r\n                    className=\"w-20 px-3 py-2 rounded-lg border bg-background text-sm\"\r\n                  />\r\n                  <span className=\"text-sm text-muted-foreground\">hours</span>\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  Minimum time between rule executions\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <label className=\"text-sm font-medium mb-1 block\">Max Executions/Day</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.maxExecutionsPerDay}\r\n                  onChange={(e) =>\r\n                    setFormData((prev) => ({\r\n                      ...prev,\r\n                      maxExecutionsPerDay: parseInt(e.target.value) || 1,\r\n                    }))\r\n                  }\r\n                  className=\"w-20 px-3 py-2 rounded-lg border bg-background text-sm\"\r\n                />\r\n                <p className=\"text-xs text-muted-foreground mt-1\">Limit executions per 24 hours</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Safety & Trust Tab */}\r\n        {activeTab === 'safety' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <Shield className=\"w-5 h-5 text-amber-500 mt-0.5\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-amber-700 dark:text-amber-400\">\r\n                    Trust-Gated Execution\r\n                  </h4>\r\n                  <p className=\"text-sm text-amber-600 dark:text-amber-300 mt-1\">\r\n                    Actions are only executed when signal health meets the threshold. This protects\r\n                    against automation during data quality issues.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h3 className=\"font-semibold\">Enable Trust Gate</h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Check signal health before executing actions\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() =>\r\n                  setFormData((prev) => ({\r\n                    ...prev,\r\n                    trustGate: { ...prev.trustGate, enabled: !prev.trustGate.enabled },\r\n                  }))\r\n                }\r\n                className={cn(\r\n                  'w-12 h-6 rounded-full transition-colors relative',\r\n                  formData.trustGate.enabled ? 'bg-primary' : 'bg-muted'\r\n                )}\r\n              >\r\n                <div\r\n                  className={cn(\r\n                    'absolute w-5 h-5 rounded-full bg-white top-0.5 transition-all',\r\n                    formData.trustGate.enabled ? 'left-6' : 'left-0.5'\r\n                  )}\r\n                />\r\n              </button>\r\n            </div>\r\n\r\n            {formData.trustGate.enabled && (\r\n              <div className=\"space-y-4 p-4 rounded-lg bg-muted/50\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-2 block\">\r\n                    Minimum Signal Health Score: {formData.trustGate.minSignalHealth}\r\n                  </label>\r\n                  <input\r\n                    type=\"range\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    value={formData.trustGate.minSignalHealth}\r\n                    onChange={(e) =>\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        trustGate: {\r\n                          ...prev.trustGate,\r\n                          minSignalHealth: parseInt(e.target.value),\r\n                        },\r\n                      }))\r\n                    }\r\n                    className=\"w-full\"\r\n                  />\r\n                  <div className=\"flex justify-between text-xs text-muted-foreground mt-1\">\r\n                    <span>0 (No check)</span>\r\n                    <span className=\"text-amber-500\">40 (Hold)</span>\r\n                    <span className=\"text-green-500\">70 (Pass)</span>\r\n                    <span>100</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium\">Require Manual Approval</h4>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Queue actions for review before execution\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() =>\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        trustGate: {\r\n                          ...prev.trustGate,\r\n                          requireApproval: !prev.trustGate.requireApproval,\r\n                        },\r\n                      }))\r\n                    }\r\n                    className={cn(\r\n                      'w-10 h-5 rounded-full transition-colors relative',\r\n                      formData.trustGate.requireApproval ? 'bg-primary' : 'bg-muted'\r\n                    )}\r\n                  >\r\n                    <div\r\n                      className={cn(\r\n                        'absolute w-4 h-4 rounded-full bg-white top-0.5 transition-all',\r\n                        formData.trustGate.requireApproval ? 'left-5' : 'left-0.5'\r\n                      )}\r\n                    />\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium\">Dry Run First</h4>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Simulate action before first real execution\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() =>\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        trustGate: {\r\n                          ...prev.trustGate,\r\n                          dryRunFirst: !prev.trustGate.dryRunFirst,\r\n                        },\r\n                      }))\r\n                    }\r\n                    className={cn(\r\n                      'w-10 h-5 rounded-full transition-colors relative',\r\n                      formData.trustGate.dryRunFirst ? 'bg-primary' : 'bg-muted'\r\n                    )}\r\n                  >\r\n                    <div\r\n                      className={cn(\r\n                        'absolute w-4 h-4 rounded-full bg-white top-0.5 transition-all',\r\n                        formData.trustGate.dryRunFirst ? 'left-5' : 'left-0.5'\r\n                      )}\r\n                    />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"flex items-center justify-between p-6 border-t bg-muted/30\">\r\n        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n          <Info className=\"w-4 h-4\" />\r\n          <span>Rules are evaluated continuously unless scheduled</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"px-4 py-2 rounded-lg border hover:bg-muted transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={() => setFormData((prev) => ({ ...prev, status: 'draft' }))}\r\n            className=\"px-4 py-2 rounded-lg border hover:bg-muted transition-colors\"\r\n          >\r\n            Save as Draft\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isLoading || !formData.name}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50\"\r\n          >\r\n            {isLoading ? (\r\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n            ) : (\r\n              <Save className=\"w-4 h-4\" />\r\n            )}\r\n            {rule ? 'Update Rule' : 'Create Rule'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CustomAutopilotRulesBuilder;\r\n","/**\r\n * Custom Autopilot Rules View - Enterprise Feature\r\n *\r\n * Page for managing custom autopilot automation rules.\r\n * Enterprise tier only.\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n  CheckCircle2,\r\n  Clock,\r\n  Copy,\r\n  Edit,\r\n  Pause,\r\n  Play,\r\n  Plus,\r\n  Search,\r\n  Shield,\r\n  Trash2,\r\n  Zap,\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { CustomAutopilotRulesBuilder } from '@/components/autopilot/CustomAutopilotRulesBuilder';\r\n\r\ntype RuleStatus = 'active' | 'paused' | 'draft';\r\n\r\ninterface AutopilotRule {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  status: RuleStatus;\r\n  conditionGroups: {\r\n    id: string;\r\n    logic: 'AND' | 'OR';\r\n    conditions: {\r\n      id: string;\r\n      field: string;\r\n      operator: string;\r\n      value: string;\r\n      valueType: 'number' | 'percentage' | 'currency';\r\n    }[];\r\n  }[];\r\n  conditionLogic: 'AND' | 'OR';\r\n  actions: {\r\n    id: string;\r\n    type: string;\r\n    config: Record<string, any>;\r\n    priority: number;\r\n  }[];\r\n  targeting: {\r\n    platforms: string[];\r\n    campaignTypes: string[];\r\n    specificCampaigns: string[];\r\n  };\r\n  schedule: {\r\n    enabled: boolean;\r\n    frequency: 'hourly' | 'daily' | 'weekly' | 'custom';\r\n    timezone: string;\r\n  };\r\n  trustGate: {\r\n    enabled: boolean;\r\n    minSignalHealth: number;\r\n    requireApproval: boolean;\r\n    dryRunFirst: boolean;\r\n  };\r\n  cooldownHours: number;\r\n  maxExecutionsPerDay: number;\r\n  triggerCount: number;\r\n  lastTriggered: string | null;\r\n  createdAt: string;\r\n}\r\n\r\n// Mock data for existing rules\r\nconst mockRules: AutopilotRule[] = [\r\n  {\r\n    id: '1',\r\n    name: 'Scale High ROAS Campaigns',\r\n    description: 'Automatically increase budget by 20% when ROAS exceeds 4x for 3 consecutive days',\r\n    status: 'active' as const,\r\n    conditionGroups: [\r\n      {\r\n        id: '1',\r\n        logic: 'AND' as const,\r\n        conditions: [\r\n          { id: '1', field: 'roas', operator: 'gt', value: '4.0', valueType: 'number' as const },\r\n          {\r\n            id: '2',\r\n            field: 'days_running',\r\n            operator: 'gte',\r\n            value: '3',\r\n            valueType: 'number' as const,\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n    conditionLogic: 'AND' as const,\r\n    actions: [\r\n      {\r\n        id: '1',\r\n        type: 'scale_budget',\r\n        config: { direction: 'increase', amount: '20' },\r\n        priority: 1,\r\n      },\r\n    ],\r\n    targeting: { platforms: ['meta', 'google'], campaignTypes: [], specificCampaigns: [] },\r\n    schedule: { enabled: false, frequency: 'hourly' as const, timezone: 'UTC' },\r\n    trustGate: { enabled: true, minSignalHealth: 70, requireApproval: false, dryRunFirst: true },\r\n    cooldownHours: 48,\r\n    maxExecutionsPerDay: 5,\r\n    triggerCount: 23,\r\n    lastTriggered: '2024-12-10T14:30:00Z',\r\n    createdAt: '2024-11-01',\r\n  },\r\n  {\r\n    id: '2',\r\n    name: 'Pause Underperformers',\r\n    description: 'Pause campaigns with CPA > $50 and less than 10 conversions after 7 days',\r\n    status: 'active' as const,\r\n    conditionGroups: [\r\n      {\r\n        id: '1',\r\n        logic: 'AND' as const,\r\n        conditions: [\r\n          { id: '1', field: 'cpa', operator: 'gt', value: '50', valueType: 'currency' as const },\r\n          {\r\n            id: '2',\r\n            field: 'conversions',\r\n            operator: 'lt',\r\n            value: '10',\r\n            valueType: 'number' as const,\r\n          },\r\n          {\r\n            id: '3',\r\n            field: 'days_running',\r\n            operator: 'gte',\r\n            value: '7',\r\n            valueType: 'number' as const,\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n    conditionLogic: 'AND' as const,\r\n    actions: [{ id: '1', type: 'pause_campaign', config: {}, priority: 1 }],\r\n    targeting: { platforms: [], campaignTypes: ['prospecting'], specificCampaigns: [] },\r\n    schedule: { enabled: false, frequency: 'hourly' as const, timezone: 'UTC' },\r\n    trustGate: { enabled: true, minSignalHealth: 70, requireApproval: true, dryRunFirst: false },\r\n    cooldownHours: 24,\r\n    maxExecutionsPerDay: 10,\r\n    triggerCount: 8,\r\n    lastTriggered: '2024-12-08T09:15:00Z',\r\n    createdAt: '2024-10-15',\r\n  },\r\n  {\r\n    id: '3',\r\n    name: 'Creative Fatigue Alert',\r\n    description: 'Send Slack notification when creative fatigue score exceeds 70%',\r\n    status: 'paused' as const,\r\n    conditionGroups: [\r\n      {\r\n        id: '1',\r\n        logic: 'AND' as const,\r\n        conditions: [\r\n          {\r\n            id: '1',\r\n            field: 'fatigue_score',\r\n            operator: 'gt',\r\n            value: '70',\r\n            valueType: 'percentage' as const,\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n    conditionLogic: 'AND' as const,\r\n    actions: [\r\n      { id: '1', type: 'notify_slack', config: { channel: '#creative-alerts' }, priority: 1 },\r\n    ],\r\n    targeting: { platforms: ['meta'], campaignTypes: [], specificCampaigns: [] },\r\n    schedule: { enabled: true, frequency: 'daily' as const, timezone: 'America/New_York' },\r\n    trustGate: { enabled: false, minSignalHealth: 0, requireApproval: false, dryRunFirst: false },\r\n    cooldownHours: 24,\r\n    maxExecutionsPerDay: 3,\r\n    triggerCount: 15,\r\n    lastTriggered: '2024-12-05T10:00:00Z',\r\n    createdAt: '2024-09-20',\r\n  },\r\n];\r\n\r\nexport default function CustomAutopilotRules() {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [showBuilder, setShowBuilder] = useState(false);\r\n  const [editingRule, setEditingRule] = useState<AutopilotRule | null>(null);\r\n  const [rules, setRules] = useState(mockRules);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  const filteredRules = rules.filter((rule) => {\r\n    if (searchQuery && !rule.name.toLowerCase().includes(searchQuery.toLowerCase())) {\r\n      return false;\r\n    }\r\n    if (statusFilter !== 'all' && rule.status !== statusFilter) {\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const handleSaveRule = async (rule: any) => {\r\n    setIsSaving(true);\r\n    // Simulate API call\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n\r\n    if (editingRule) {\r\n      setRules((prev) =>\r\n        prev.map((r) => (r.id === editingRule.id ? { ...rule, id: editingRule.id } : r))\r\n      );\r\n    } else {\r\n      setRules((prev) => [\r\n        ...prev,\r\n        { ...rule, id: crypto.randomUUID(), triggerCount: 0, lastTriggered: null },\r\n      ]);\r\n    }\r\n\r\n    setIsSaving(false);\r\n    setShowBuilder(false);\r\n    setEditingRule(null);\r\n  };\r\n\r\n  const handleToggleRule = (ruleId: string) => {\r\n    setRules((prev) =>\r\n      prev.map((r) =>\r\n        r.id === ruleId ? { ...r, status: (r.status === 'active' ? 'paused' : 'active') as RuleStatus } : r\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleDeleteRule = (ruleId: string) => {\r\n    if (confirm('Are you sure you want to delete this rule?')) {\r\n      setRules((prev) => prev.filter((r) => r.id !== ruleId));\r\n    }\r\n  };\r\n\r\n  const handleDuplicateRule = (rule: AutopilotRule) => {\r\n    setRules((prev) => [\r\n      ...prev,\r\n      {\r\n        ...rule,\r\n        id: crypto.randomUUID(),\r\n        name: `${rule.name} (Copy)`,\r\n        status: 'draft' as const,\r\n        triggerCount: 0,\r\n        lastTriggered: null as any,\r\n        createdAt: new Date().toISOString().split('T')[0],\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const config = {\r\n      active: { color: 'bg-green-500/10 text-green-500', icon: CheckCircle2, label: 'Active' },\r\n      paused: { color: 'bg-amber-500/10 text-amber-500', icon: Pause, label: 'Paused' },\r\n      draft: { color: 'bg-gray-500/10 text-gray-500', icon: Edit, label: 'Draft' },\r\n    };\r\n    const { color, icon: Icon, label } = config[status as keyof typeof config] || config.draft;\r\n    return (\r\n      <span\r\n        className={cn(\r\n          'px-2 py-1 rounded-full text-xs font-medium inline-flex items-center gap-1',\r\n          color\r\n        )}\r\n      >\r\n        <Icon className=\"w-3 h-3\" />\r\n        {label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const formatLastTriggered = (date: string | null) => {\r\n    if (!date) return 'Never';\r\n    const d = new Date(date);\r\n    const now = new Date();\r\n    const diffHours = Math.floor((now.getTime() - d.getTime()) / (1000 * 60 * 60));\r\n\r\n    if (diffHours < 1) return 'Just now';\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    if (diffHours < 48) return 'Yesterday';\r\n    return d.toLocaleDateString();\r\n  };\r\n\r\n  if (showBuilder || editingRule) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <CustomAutopilotRulesBuilder\r\n          rule={editingRule || undefined}\r\n          onSave={handleSaveRule}\r\n          onCancel={() => {\r\n            setShowBuilder(false);\r\n            setEditingRule(null);\r\n          }}\r\n          isLoading={isSaving}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Page Header */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n        <div>\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <h1 className=\"text-2xl font-bold flex items-center gap-2\">\r\n              <Zap className=\"w-7 h-7 text-primary\" />\r\n              Custom Autopilot Rules\r\n            </h1>\r\n            <span className=\"px-2 py-0.5 rounded-full bg-gradient-to-r from-purple-500/20 to-primary/20 text-primary text-xs font-medium\">\r\n              Enterprise\r\n            </span>\r\n          </div>\r\n          <p className=\"text-muted-foreground\">\r\n            Create advanced automation rules with multi-condition logic and trust-gated execution\r\n          </p>\r\n        </div>\r\n\r\n        <button\r\n          onClick={() => setShowBuilder(true)}\r\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          <span>Create Rule</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-sm text-muted-foreground mb-1\">Total Rules</p>\r\n          <p className=\"text-2xl font-bold\">{rules.length}</p>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-sm text-muted-foreground mb-1\">Active</p>\r\n          <p className=\"text-2xl font-bold text-green-500\">\r\n            {rules.filter((r) => r.status === 'active').length}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-sm text-muted-foreground mb-1\">Paused</p>\r\n          <p className=\"text-2xl font-bold text-amber-500\">\r\n            {rules.filter((r) => r.status === 'paused').length}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-sm text-muted-foreground mb-1\">Executions (7d)</p>\r\n          <p className=\"text-2xl font-bold text-primary\">\r\n            {rules.reduce((acc, r) => acc + r.triggerCount, 0)}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-sm text-muted-foreground mb-1\">Trust-Gated</p>\r\n          <p className=\"text-2xl font-bold\">{rules.filter((r) => r.trustGate.enabled).length}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Info Banner */}\r\n      <div className=\"p-4 rounded-lg bg-primary/5 border border-primary/20\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <Shield className=\"w-5 h-5 text-primary mt-0.5\" />\r\n          <div>\r\n            <h4 className=\"font-medium\">Trust-Gated Automation</h4>\r\n            <p className=\"text-sm text-muted-foreground mt-1\">\r\n              Custom rules respect Stratum's Trust Gate. Actions are only executed when signal\r\n              health meets your configured threshold, protecting against automation during data\r\n              quality issues.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-col md:flex-row gap-4\">\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search rules...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20\"\r\n          />\r\n        </div>\r\n\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value)}\r\n          className=\"px-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/20\"\r\n        >\r\n          <option value=\"all\">All Statuses</option>\r\n          <option value=\"active\">Active</option>\r\n          <option value=\"paused\">Paused</option>\r\n          <option value=\"draft\">Draft</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Rules List */}\r\n      <div className=\"space-y-4\">\r\n        {filteredRules.map((rule) => (\r\n          <div\r\n            key={rule.id}\r\n            className=\"rounded-xl border bg-card p-5 hover:shadow-md transition-shadow\"\r\n          >\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n              <div className=\"flex items-start gap-4\">\r\n                <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                  <Zap className=\"w-5 h-5 text-primary\" />\r\n                </div>\r\n                <div>\r\n                  <div className=\"flex items-center gap-2 mb-1\">\r\n                    <h3 className=\"font-semibold\">{rule.name}</h3>\r\n                    {getStatusBadge(rule.status)}\r\n                    {rule.trustGate.enabled && (\r\n                      <span className=\"px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-500 text-xs font-medium inline-flex items-center gap-1\">\r\n                        <Shield className=\"w-3 h-3\" />\r\n                        Trust-Gated\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground\">{rule.description}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                {rule.status === 'active' ? (\r\n                  <button\r\n                    onClick={() => handleToggleRule(rule.id)}\r\n                    className=\"p-2 rounded-lg hover:bg-muted transition-colors\"\r\n                    title=\"Pause\"\r\n                  >\r\n                    <Pause className=\"w-4 h-4\" />\r\n                  </button>\r\n                ) : (\r\n                  <button\r\n                    onClick={() => handleToggleRule(rule.id)}\r\n                    className=\"p-2 rounded-lg hover:bg-muted transition-colors\"\r\n                    title=\"Activate\"\r\n                  >\r\n                    <Play className=\"w-4 h-4\" />\r\n                  </button>\r\n                )}\r\n                <button\r\n                  onClick={() => setEditingRule(rule)}\r\n                  className=\"p-2 rounded-lg hover:bg-muted transition-colors\"\r\n                  title=\"Edit\"\r\n                >\r\n                  <Edit className=\"w-4 h-4\" />\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDuplicateRule(rule)}\r\n                  className=\"p-2 rounded-lg hover:bg-muted transition-colors\"\r\n                  title=\"Duplicate\"\r\n                >\r\n                  <Copy className=\"w-4 h-4\" />\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDeleteRule(rule.id)}\r\n                  className=\"p-2 rounded-lg hover:bg-destructive/10 hover:text-destructive transition-colors\"\r\n                  title=\"Delete\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Conditions Summary */}\r\n            <div className=\"mb-4 p-3 rounded-lg bg-muted/50\">\r\n              <div className=\"flex flex-wrap items-center gap-2 text-sm\">\r\n                <span className=\"font-medium text-primary\">IF</span>\r\n                {rule.conditionGroups.map((group, gIdx) => (\r\n                  <span key={group.id} className=\"flex items-center gap-2\">\r\n                    {gIdx > 0 && (\r\n                      <span className=\"text-primary font-medium\">{rule.conditionLogic}</span>\r\n                    )}\r\n                    <span className=\"text-muted-foreground\">(</span>\r\n                    {group.conditions.map((cond, cIdx) => (\r\n                      <span key={cond.id} className=\"flex items-center gap-1\">\r\n                        {cIdx > 0 && <span className=\"text-xs text-primary\">{group.logic}</span>}\r\n                        <code className=\"px-1.5 py-0.5 rounded bg-background text-xs\">\r\n                          {cond.field}\r\n                        </code>\r\n                        <span className=\"font-mono text-xs\">\r\n                          {cond.operator === 'gt'\r\n                            ? '>'\r\n                            : cond.operator === 'lt'\r\n                              ? '<'\r\n                              : cond.operator}\r\n                        </span>\r\n                        <code className=\"px-1.5 py-0.5 rounded bg-background text-xs\">\r\n                          {cond.valueType === 'currency'\r\n                            ? `$${cond.value}`\r\n                            : cond.valueType === 'percentage'\r\n                              ? `${cond.value}%`\r\n                              : cond.value}\r\n                        </code>\r\n                      </span>\r\n                    ))}\r\n                    <span className=\"text-muted-foreground\">)</span>\r\n                  </span>\r\n                ))}\r\n                <span className=\"font-medium text-primary\">THEN</span>\r\n                {rule.actions.map((action) => (\r\n                  <code\r\n                    key={action.id}\r\n                    className=\"px-1.5 py-0.5 rounded bg-primary/10 text-primary text-xs\"\r\n                  >\r\n                    {action.type.replace('_', ' ')}\r\n                    {(action.config as any).amount &&\r\n                      ` ${(action.config as any).direction === 'decrease' ? '-' : '+'}${(action.config as any).amount}%`}\r\n                  </code>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Metadata */}\r\n            <div className=\"flex flex-wrap items-center gap-6 text-sm\">\r\n              {rule.targeting.platforms.length > 0 && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-muted-foreground\">Platforms:</span>\r\n                  <span className=\"font-medium\">{rule.targeting.platforms.join(', ')}</span>\r\n                </div>\r\n              )}\r\n              <div className=\"flex items-center gap-2\">\r\n                <Clock className=\"w-4 h-4 text-muted-foreground\" />\r\n                <span className=\"text-muted-foreground\">Cooldown:</span>\r\n                <span className=\"font-medium\">{rule.cooldownHours}h</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Zap className=\"w-4 h-4 text-muted-foreground\" />\r\n                <span className=\"text-muted-foreground\">Triggered:</span>\r\n                <span className=\"font-medium\">{rule.triggerCount} times</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-muted-foreground\">Last:</span>\r\n                <span className=\"font-medium\">{formatLastTriggered(rule.lastTriggered)}</span>\r\n              </div>\r\n              {rule.trustGate.enabled && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Shield className=\"w-4 h-4 text-blue-500\" />\r\n                  <span className=\"text-muted-foreground\">Min Health:</span>\r\n                  <span className=\"font-medium\">{rule.trustGate.minSignalHealth}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {filteredRules.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <Zap className=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\r\n          <p className=\"text-muted-foreground\">No rules found</p>\r\n          <button\r\n            onClick={() => setShowBuilder(true)}\r\n            className=\"mt-4 text-primary hover:underline\"\r\n          >\r\n            Create your first custom rule\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CONDITION_FIELDS","OPERATORS","ACTION_TYPES","DollarSign","TrendingUp","Target","Pause","Play","Tag","Bell","MessageCircle","PLATFORMS","CAMPAIGN_TYPES","CustomAutopilotRulesBuilder","rule","onSave","onCancel","isLoading","formData","setFormData","useState","activeTab","setActiveTab","expandedGroups","setExpandedGroups","_a","addConditionGroup","prev","removeConditionGroup","groupId","g","addCondition","removeCondition","conditionId","c","updateCondition","updates","addAction","removeAction","actionId","a","updateAction","handleSubmit","toggleGroup","next","jsxs","jsx","Zap","e","Settings","Clock","Shield","tab","cn","Plus","group","groupIndex","ChevronDown","ChevronRight","Trash2","condition","condIndex","field","f","acc","category","fields","op","X","action","index","actions","platform","p","type","t","Info","Loader2","Save","mockRules","CustomAutopilotRules","searchQuery","setSearchQuery","statusFilter","setStatusFilter","showBuilder","setShowBuilder","editingRule","setEditingRule","rules","setRules","isSaving","setIsSaving","filteredRules","handleSaveRule","resolve","r","handleToggleRule","ruleId","handleDeleteRule","handleDuplicateRule","getStatusBadge","status","config","CheckCircle2","Edit","color","Icon","label","formatLastTriggered","date","d","diffHours","Search","Copy","gIdx","cond","cIdx"],"mappings":"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"}