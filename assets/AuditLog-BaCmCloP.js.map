{"version":3,"file":"AuditLog-BaCmCloP.js","sources":["../../src/api/audit.ts","../../src/components/shared/ActivityVolumeChart.tsx","../../src/views/tenant/AuditLog.tsx"],"sourcesContent":["/**\r\n * Stratum AI - Audit Log API Hooks\r\n *\r\n * React Query hooks for tenant audit log features:\r\n * - Paginated audit log entries\r\n * - Daily volume + action type distribution\r\n * - CSV export\r\n */\r\n\r\nimport { useMutation, useQuery } from '@tanstack/react-query';\r\nimport { apiClient } from './client';\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\nexport type AuditAction =\r\n  | 'create'\r\n  | 'update'\r\n  | 'delete'\r\n  | 'login'\r\n  | 'logout'\r\n  | 'export'\r\n  | 'sync'\r\n  | 'invite';\r\n\r\nexport interface AuditLogEntry {\r\n  id: string;\r\n  timestamp: string;\r\n  userId: number;\r\n  userName: string;\r\n  userAvatar?: string;\r\n  action: AuditAction;\r\n  resource: string;\r\n  details: string;\r\n  status: 'success' | 'failure';\r\n  ipAddress: string;\r\n}\r\n\r\nexport interface AuditLogParams {\r\n  page?: number;\r\n  limit?: number;\r\n  action?: AuditAction;\r\n  userId?: number;\r\n  search?: string;\r\n  startDate?: string;\r\n  endDate?: string;\r\n}\r\n\r\nexport interface AuditLogResponse {\r\n  entries: AuditLogEntry[];\r\n  total: number;\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nexport interface AuditStats {\r\n  totalEvents: number;\r\n  successful: number;\r\n  failed: number;\r\n  activeUsers: number;\r\n  dailyVolume: { date: string; count: number }[];\r\n  byAction: { action: AuditAction; count: number }[];\r\n}\r\n\r\n// =============================================================================\r\n// Hooks\r\n// =============================================================================\r\n\r\nexport function useTenantAuditLogs(tenantId: number, params: AuditLogParams = {}) {\r\n  return useQuery({\r\n    queryKey: ['audit', 'logs', tenantId, params],\r\n    queryFn: async () => {\r\n      const searchParams = new URLSearchParams();\r\n      if (params.page) searchParams.append('page', params.page.toString());\r\n      if (params.limit) searchParams.append('limit', params.limit.toString());\r\n      if (params.action) searchParams.append('action', params.action);\r\n      if (params.userId) searchParams.append('user_id', params.userId.toString());\r\n      if (params.search) searchParams.append('search', params.search);\r\n\r\n      const response = await apiClient.get<{ data: AuditLogResponse }>(\r\n        `/tenants/${tenantId}/audit?${searchParams}`\r\n      );\r\n      return response.data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    staleTime: 30 * 1000,\r\n    placeholderData: {\r\n      entries: [\r\n        {\r\n          id: '1',\r\n          timestamp: '2024-12-10T14:32:00Z',\r\n          userId: 1,\r\n          userName: 'Sarah Miller',\r\n          action: 'update' as const,\r\n          resource: 'Campaign \"Holiday Sale\"',\r\n          details: 'Updated budget from $500 to $750',\r\n          status: 'success' as const,\r\n          ipAddress: '192.168.1.42',\r\n        },\r\n        {\r\n          id: '2',\r\n          timestamp: '2024-12-10T13:15:00Z',\r\n          userId: 2,\r\n          userName: 'Ahmed Hassan',\r\n          action: 'create' as const,\r\n          resource: 'Ad Set \"Lookalike US\"',\r\n          details: 'Created new ad set targeting US lookalike audience',\r\n          status: 'success' as const,\r\n          ipAddress: '10.0.0.15',\r\n        },\r\n        {\r\n          id: '3',\r\n          timestamp: '2024-12-10T12:45:00Z',\r\n          userId: 1,\r\n          userName: 'Sarah Miller',\r\n          action: 'sync' as const,\r\n          resource: 'Meta Ads',\r\n          details: 'Manual sync triggered for all campaigns',\r\n          status: 'success' as const,\r\n          ipAddress: '192.168.1.42',\r\n        },\r\n        {\r\n          id: '4',\r\n          timestamp: '2024-12-10T11:20:00Z',\r\n          userId: 3,\r\n          userName: 'Carlos Rivera',\r\n          action: 'export' as const,\r\n          resource: 'Performance Report',\r\n          details: 'Exported 30-day performance report as CSV',\r\n          status: 'success' as const,\r\n          ipAddress: '172.16.0.8',\r\n        },\r\n        {\r\n          id: '5',\r\n          timestamp: '2024-12-10T10:05:00Z',\r\n          userId: 2,\r\n          userName: 'Ahmed Hassan',\r\n          action: 'delete' as const,\r\n          resource: 'Draft \"Test Campaign Q1\"',\r\n          details: 'Deleted campaign draft',\r\n          status: 'success' as const,\r\n          ipAddress: '10.0.0.15',\r\n        },\r\n        {\r\n          id: '6',\r\n          timestamp: '2024-12-10T09:30:00Z',\r\n          userId: 4,\r\n          userName: 'Emily Chen',\r\n          action: 'login' as const,\r\n          resource: 'Dashboard',\r\n          details: 'Logged in via SSO',\r\n          status: 'success' as const,\r\n          ipAddress: '203.0.113.50',\r\n        },\r\n        {\r\n          id: '7',\r\n          timestamp: '2024-12-09T16:45:00Z',\r\n          userId: 1,\r\n          userName: 'Sarah Miller',\r\n          action: 'invite' as const,\r\n          resource: 'Team',\r\n          details: 'Invited newuser@company.com as Analyst',\r\n          status: 'success' as const,\r\n          ipAddress: '192.168.1.42',\r\n        },\r\n        {\r\n          id: '8',\r\n          timestamp: '2024-12-09T15:10:00Z',\r\n          userId: 3,\r\n          userName: 'Carlos Rivera',\r\n          action: 'update' as const,\r\n          resource: 'Campaign \"Brand Awareness\"',\r\n          details: 'Paused campaign due to high CPA',\r\n          status: 'failure' as const,\r\n          ipAddress: '172.16.0.8',\r\n        },\r\n      ],\r\n      total: 156,\r\n      page: 1,\r\n      limit: 20,\r\n    },\r\n  });\r\n}\r\n\r\nexport function useTenantAuditStats(tenantId: number, period: string = '14d') {\r\n  return useQuery({\r\n    queryKey: ['audit', 'stats', tenantId, period],\r\n    queryFn: async () => {\r\n      const response = await apiClient.get<{ data: AuditStats }>(\r\n        `/tenants/${tenantId}/audit/stats?period=${period}`\r\n      );\r\n      return response.data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    staleTime: 60 * 1000,\r\n    placeholderData: {\r\n      totalEvents: 1284,\r\n      successful: 1247,\r\n      failed: 37,\r\n      activeUsers: 8,\r\n      dailyVolume: Array.from({ length: 14 }, (_, i) => ({\r\n        date: new Date(Date.now() - (13 - i) * 86400000).toISOString().split('T')[0],\r\n        count: Math.floor(60 + Math.random() * 80),\r\n      })),\r\n      byAction: [\r\n        { action: 'update' as const, count: 456 },\r\n        { action: 'create' as const, count: 312 },\r\n        { action: 'login' as const, count: 248 },\r\n        { action: 'sync' as const, count: 128 },\r\n        { action: 'export' as const, count: 76 },\r\n        { action: 'delete' as const, count: 42 },\r\n        { action: 'invite' as const, count: 14 },\r\n        { action: 'logout' as const, count: 8 },\r\n      ],\r\n    },\r\n  });\r\n}\r\n\r\nexport function useExportAuditLogs(tenantId: number) {\r\n  return useMutation({\r\n    mutationFn: async (params?: { startDate?: string; endDate?: string }) => {\r\n      const response = await apiClient.post(\r\n        `/tenants/${tenantId}/audit/export`,\r\n        params,\r\n        { responseType: 'blob' }\r\n      );\r\n      // Trigger download\r\n      const url = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `audit-log-${tenantId}-${new Date().toISOString().split('T')[0]}.csv`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      window.URL.revokeObjectURL(url);\r\n    },\r\n  });\r\n}\r\n","/**\r\n * ActivityVolumeChart - Bar/Area chart for activity volume over time\r\n *\r\n * Uses Recharts BarChart with gradient fill.\r\n * Used in Tenant Audit Log for daily activity visualization.\r\n */\r\n\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  CartesianGrid,\r\n} from 'recharts';\r\n\r\ninterface ActivityVolumeChartProps {\r\n  data: { date: string; count: number }[];\r\n  height?: number;\r\n  color?: string;\r\n}\r\n\r\nexport function ActivityVolumeChart({\r\n  data,\r\n  height = 200,\r\n  color = '#00c7be',\r\n}: ActivityVolumeChartProps) {\r\n  const formatDate = (date: string) => {\r\n    const d = new Date(date);\r\n    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n  };\r\n\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={height}>\r\n      <BarChart data={data} margin={{ top: 4, right: 4, bottom: 0, left: -20 }}>\r\n        <defs>\r\n          <linearGradient id=\"activityGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n            <stop offset=\"0%\" stopColor={color} stopOpacity={0.8} />\r\n            <stop offset=\"100%\" stopColor={color} stopOpacity={0.3} />\r\n          </linearGradient>\r\n        </defs>\r\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" vertical={false} />\r\n        <XAxis\r\n          dataKey=\"date\"\r\n          tickFormatter={formatDate}\r\n          tick={{ fontSize: 11, fill: 'rgba(245,245,247,0.4)' }}\r\n          axisLine={false}\r\n          tickLine={false}\r\n        />\r\n        <YAxis\r\n          tick={{ fontSize: 11, fill: 'rgba(245,245,247,0.4)' }}\r\n          axisLine={false}\r\n          tickLine={false}\r\n        />\r\n        <Tooltip\r\n          contentStyle={{\r\n            background: 'rgba(11, 18, 21, 0.95)',\r\n            border: '1px solid rgba(255,255,255,0.1)',\r\n            borderRadius: '8px',\r\n            fontSize: 12,\r\n            color: 'rgba(245,245,247,0.92)',\r\n          }}\r\n          labelFormatter={(label) => formatDate(String(label))}\r\n          formatter={(value) => [String(value), 'Events']}\r\n        />\r\n        <Bar dataKey=\"count\" fill=\"url(#activityGradient)\" radius={[4, 4, 0, 0]} />\r\n      </BarChart>\r\n    </ResponsiveContainer>\r\n  );\r\n}\r\n\r\nexport default ActivityVolumeChart;\r\n","/**\r\n * Tenant Audit Log\r\n *\r\n * Activity log with search, filters, pagination, and CSV export.\r\n * Shows all user actions within the tenant.\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { useParams } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n  MagnifyingGlassIcon,\r\n  ArrowDownTrayIcon,\r\n  ChevronLeftIcon,\r\n  ChevronRightIcon,\r\n  CheckCircleIcon,\r\n  XCircleIcon,\r\n  ClockIcon,\r\n  UsersIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  useTenantAuditLogs,\r\n  useTenantAuditStats,\r\n  useExportAuditLogs,\r\n  type AuditAction,\r\n} from '@/api/audit';\r\nimport { ActivityVolumeChart } from '@/components/shared/ActivityVolumeChart';\r\n\r\nconst fadeIn = {\r\n  initial: { opacity: 0, y: 12 },\r\n  animate: { opacity: 1, y: 0 },\r\n  transition: { duration: 0.3 },\r\n};\r\n\r\nconst actionConfig: Record<AuditAction, { color: string; bg: string }> = {\r\n  create: { color: 'text-green-400', bg: 'bg-green-500/10' },\r\n  update: { color: 'text-blue-400', bg: 'bg-blue-500/10' },\r\n  delete: { color: 'text-red-400', bg: 'bg-red-500/10' },\r\n  login: { color: 'text-purple-400', bg: 'bg-purple-500/10' },\r\n  logout: { color: 'text-gray-400', bg: 'bg-gray-500/10' },\r\n  export: { color: 'text-amber-400', bg: 'bg-amber-500/10' },\r\n  sync: { color: 'text-cyan-400', bg: 'bg-cyan-500/10' },\r\n  invite: { color: 'text-indigo-400', bg: 'bg-indigo-500/10' },\r\n};\r\n\r\nexport default function TenantAuditLog() {\r\n  const { tenantId } = useParams<{ tenantId: string }>();\r\n  const tenantIdNum = tenantId ? parseInt(tenantId, 10) : 0;\r\n\r\n  const [search, setSearch] = useState('');\r\n  const [actionFilter, setActionFilter] = useState<AuditAction | ''>('');\r\n  const [page, setPage] = useState(1);\r\n  const limit = 20;\r\n\r\n  const { data: logs, isLoading: logsLoading } = useTenantAuditLogs(tenantIdNum, {\r\n    page,\r\n    limit,\r\n    action: actionFilter || undefined,\r\n    search: search || undefined,\r\n  });\r\n\r\n  const { data: stats } = useTenantAuditStats(tenantIdNum);\r\n  const exportMutation = useExportAuditLogs(tenantIdNum);\r\n\r\n  const totalPages = logs ? Math.ceil(logs.total / limit) : 1;\r\n\r\n  const formatTimestamp = (ts: string) => {\r\n    const d = new Date(ts);\r\n    return d.toLocaleString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  const metricCards = [\r\n    {\r\n      label: 'Total Events',\r\n      value: stats?.totalEvents?.toLocaleString() ?? '0',\r\n      icon: ClockIcon,\r\n      color: 'text-blue-500',\r\n    },\r\n    {\r\n      label: 'Successful',\r\n      value: stats?.successful?.toLocaleString() ?? '0',\r\n      icon: CheckCircleIcon,\r\n      color: 'text-green-500',\r\n    },\r\n    {\r\n      label: 'Failed',\r\n      value: stats?.failed?.toLocaleString() ?? '0',\r\n      icon: XCircleIcon,\r\n      color: 'text-red-500',\r\n    },\r\n    {\r\n      label: 'Active Users',\r\n      value: stats?.activeUsers?.toString() ?? '0',\r\n      icon: UsersIcon,\r\n      color: 'text-purple-500',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Audit Log | Stratum AI</title>\r\n      </Helmet>\r\n\r\n      <div className=\"space-y-6 max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <motion.div className=\"flex items-center justify-between\" {...fadeIn}>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold\">Audit Log</h1>\r\n            <p className=\"text-muted-foreground\">Track all user activity and system events</p>\r\n          </div>\r\n          <button\r\n            onClick={() => exportMutation.mutate({})}\r\n            disabled={exportMutation.isPending}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg border border-white/10 hover:bg-white/5 transition-colors text-sm\"\r\n          >\r\n            <ArrowDownTrayIcon className=\"h-4 w-4\" />\r\n            {exportMutation.isPending ? 'Exporting...' : 'Export CSV'}\r\n          </button>\r\n        </motion.div>\r\n\r\n        {/* Metric Cards */}\r\n        <motion.div\r\n          className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\"\r\n          {...fadeIn}\r\n          transition={{ delay: 0.1 }}\r\n        >\r\n          {metricCards.map((card) => (\r\n            <div\r\n              key={card.label}\r\n              className=\"rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-4\"\r\n            >\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 rounded-lg bg-white/5\">\r\n                  <card.icon className={cn('h-5 w-5', card.color)} />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-muted-foreground\">{card.label}</p>\r\n                  <p className=\"text-xl font-bold\">{card.value}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </motion.div>\r\n\r\n        {/* Activity by Day Chart */}\r\n        {stats?.dailyVolume && stats.dailyVolume.length > 0 && (\r\n          <motion.div\r\n            className=\"rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-6\"\r\n            {...fadeIn}\r\n            transition={{ delay: 0.15 }}\r\n          >\r\n            <h3 className=\"font-semibold mb-4\">Activity by Day</h3>\r\n            <ActivityVolumeChart data={stats.dailyVolume} height={180} />\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Search + Filter */}\r\n        <motion.div\r\n          className=\"flex items-center gap-3\"\r\n          {...fadeIn}\r\n          transition={{ delay: 0.2 }}\r\n        >\r\n          <div className=\"relative flex-1\">\r\n            <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by user, resource, or details...\"\r\n              value={search}\r\n              onChange={(e) => { setSearch(e.target.value); setPage(1); }}\r\n              className=\"w-full pl-9 pr-4 py-2 rounded-lg border border-white/10 bg-white/5 focus:outline-none focus:ring-2 focus:ring-primary/20 text-sm\"\r\n            />\r\n          </div>\r\n          <select\r\n            value={actionFilter}\r\n            onChange={(e) => { setActionFilter(e.target.value as AuditAction | ''); setPage(1); }}\r\n            className=\"px-3 py-2 rounded-lg border border-white/10 bg-white/5 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20\"\r\n          >\r\n            <option value=\"\">All Actions</option>\r\n            {Object.keys(actionConfig).map((action) => (\r\n              <option key={action} value={action} className=\"capitalize\">\r\n                {action}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </motion.div>\r\n\r\n        {/* Audit Log Table */}\r\n        <motion.div\r\n          className=\"rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm overflow-hidden\"\r\n          {...fadeIn}\r\n          transition={{ delay: 0.25 }}\r\n        >\r\n          {logsLoading ? (\r\n            <div className=\"flex items-center justify-center py-16\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-white/10 bg-white/5\">\r\n                    {['Timestamp', 'User', 'Action', 'Resource', 'Details', 'Status', 'IP'].map(\r\n                      (h) => (\r\n                        <th\r\n                          key={h}\r\n                          className=\"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider\"\r\n                        >\r\n                          {h}\r\n                        </th>\r\n                      )\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {(logs?.entries || []).length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={7} className=\"py-12 text-center text-muted-foreground text-sm\">\r\n                        No audit log entries found\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    (logs?.entries || []).map((entry) => {\r\n                      const ac = actionConfig[entry.action] || actionConfig.update;\r\n                      return (\r\n                        <tr\r\n                          key={entry.id}\r\n                          className=\"border-b border-white/5 hover:bg-white/5 transition-colors\"\r\n                        >\r\n                          <td className=\"py-3 px-4 text-xs text-muted-foreground whitespace-nowrap\">\r\n                            {formatTimestamp(entry.timestamp)}\r\n                          </td>\r\n                          <td className=\"py-3 px-4\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <div className=\"h-7 w-7 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                                <span className=\"text-[10px] font-medium text-primary\">\r\n                                  {entry.userName\r\n                                    .split(' ')\r\n                                    .map((n) => n[0])\r\n                                    .join('')\r\n                                    .toUpperCase()}\r\n                                </span>\r\n                              </div>\r\n                              <span className=\"text-sm\">{entry.userName}</span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-3 px-4\">\r\n                            <span\r\n                              className={cn(\r\n                                'px-2 py-0.5 rounded-full text-xs font-medium capitalize',\r\n                                ac.bg,\r\n                                ac.color\r\n                              )}\r\n                            >\r\n                              {entry.action}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"py-3 px-4 text-sm max-w-[200px] truncate\">\r\n                            {entry.resource}\r\n                          </td>\r\n                          <td className=\"py-3 px-4 text-sm text-muted-foreground max-w-[250px] truncate\">\r\n                            {entry.details}\r\n                          </td>\r\n                          <td className=\"py-3 px-4\">\r\n                            {entry.status === 'success' ? (\r\n                              <CheckCircleIcon className=\"h-4 w-4 text-green-500\" />\r\n                            ) : (\r\n                              <XCircleIcon className=\"h-4 w-4 text-red-500\" />\r\n                            )}\r\n                          </td>\r\n                          <td className=\"py-3 px-4 text-xs text-muted-foreground font-mono\">\r\n                            {entry.ipAddress}\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n\r\n          {/* Pagination */}\r\n          {logs && logs.total > limit && (\r\n            <div className=\"flex items-center justify-between px-4 py-3 border-t border-white/10\">\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                Showing {(page - 1) * limit + 1}-{Math.min(page * limit, logs.total)} of{' '}\r\n                {logs.total}\r\n              </span>\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n                  disabled={page === 1}\r\n                  className=\"p-1.5 rounded-lg hover:bg-white/5 disabled:opacity-30 transition-colors\"\r\n                >\r\n                  <ChevronLeftIcon className=\"h-4 w-4\" />\r\n                </button>\r\n                <span className=\"text-sm px-3\">\r\n                  {page} / {totalPages}\r\n                </span>\r\n                <button\r\n                  onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\r\n                  disabled={page === totalPages}\r\n                  className=\"p-1.5 rounded-lg hover:bg-white/5 disabled:opacity-30 transition-colors\"\r\n                >\r\n                  <ChevronRightIcon className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":["useTenantAuditLogs","tenantId","params","useQuery","searchParams","apiClient","useTenantAuditStats","period","_","i","useExportAuditLogs","useMutation","response","url","link","ActivityVolumeChart","data","height","color","formatDate","date","ResponsiveContainer","jsxs","BarChart","jsx","CartesianGrid","XAxis","YAxis","Tooltip","label","value","Bar","fadeIn","actionConfig","TenantAuditLog","useParams","tenantIdNum","search","setSearch","useState","actionFilter","setActionFilter","page","setPage","limit","logs","logsLoading","stats","exportMutation","totalPages","formatTimestamp","ts","metricCards","_a","ClockIcon","_b","CheckCircleIcon","_c","XCircleIcon","_d","UsersIcon","Fragment","Helmet","motion","ArrowDownTrayIcon","card","cn","MagnifyingGlassIcon","e","action","h","entry","ac","n","p","ChevronLeftIcon","ChevronRightIcon"],"mappings":"+lBAqEO,SAASA,EAAmBC,EAAkBC,EAAyB,GAAI,CAChF,OAAOC,EAAS,CACd,SAAU,CAAC,QAAS,OAAQF,EAAUC,CAAM,EAC5C,QAAS,SAAY,CACnB,MAAME,EAAe,IAAI,gBACzB,OAAIF,EAAO,MAAME,EAAa,OAAO,OAAQF,EAAO,KAAK,UAAU,EAC/DA,EAAO,OAAOE,EAAa,OAAO,QAASF,EAAO,MAAM,UAAU,EAClEA,EAAO,QAAQE,EAAa,OAAO,SAAUF,EAAO,MAAM,EAC1DA,EAAO,QAAQE,EAAa,OAAO,UAAWF,EAAO,OAAO,UAAU,EACtEA,EAAO,QAAQE,EAAa,OAAO,SAAUF,EAAO,MAAM,GAE7C,MAAMG,EAAU,IAC/B,YAAYJ,CAAQ,UAAUG,CAAY,EAAA,GAE5B,KAAK,IACvB,EACA,QAAS,CAAC,CAACH,EACX,UAAW,GAAK,IAChB,gBAAiB,CACf,QAAS,CACP,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,eACV,OAAQ,SACR,SAAU,0BACV,QAAS,mCACT,OAAQ,UACR,UAAW,cAAA,EAEb,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,eACV,OAAQ,SACR,SAAU,wBACV,QAAS,qDACT,OAAQ,UACR,UAAW,WAAA,EAEb,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,eACV,OAAQ,OACR,SAAU,WACV,QAAS,0CACT,OAAQ,UACR,UAAW,cAAA,EAEb,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,gBACV,OAAQ,SACR,SAAU,qBACV,QAAS,4CACT,OAAQ,UACR,UAAW,YAAA,EAEb,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,eACV,OAAQ,SACR,SAAU,2BACV,QAAS,yBACT,OAAQ,UACR,UAAW,WAAA,EAEb,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,aACV,OAAQ,QACR,SAAU,YACV,QAAS,oBACT,OAAQ,UACR,UAAW,cAAA,EAEb,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,eACV,OAAQ,SACR,SAAU,OACV,QAAS,yCACT,OAAQ,UACR,UAAW,cAAA,EAEb,CACE,GAAI,IACJ,UAAW,uBACX,OAAQ,EACR,SAAU,gBACV,OAAQ,SACR,SAAU,6BACV,QAAS,kCACT,OAAQ,UACR,UAAW,YAAA,CACb,EAEF,MAAO,IACP,KAAM,EACN,MAAO,EAAA,CACT,CACD,CACH,CAEO,SAASK,EAAoBL,EAAkBM,EAAiB,MAAO,CAC5E,OAAOJ,EAAS,CACd,SAAU,CAAC,QAAS,QAASF,EAAUM,CAAM,EAC7C,QAAS,UACU,MAAMF,EAAU,IAC/B,YAAYJ,CAAQ,uBAAuBM,CAAM,EAAA,GAEnC,KAAK,KAEvB,QAAS,CAAC,CAACN,EACX,UAAW,GAAK,IAChB,gBAAiB,CACf,YAAa,KACb,WAAY,KACZ,OAAQ,GACR,YAAa,EACb,YAAa,MAAM,KAAK,CAAE,OAAQ,IAAM,CAACO,EAAGC,KAAO,CACjD,KAAM,IAAI,KAAK,KAAK,OAAS,GAAKA,GAAK,KAAQ,EAAE,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,EAC3E,MAAO,KAAK,MAAM,GAAK,KAAK,OAAA,EAAW,EAAE,CAAA,EACzC,EACF,SAAU,CACR,CAAE,OAAQ,SAAmB,MAAO,GAAA,EACpC,CAAE,OAAQ,SAAmB,MAAO,GAAA,EACpC,CAAE,OAAQ,QAAkB,MAAO,GAAA,EACnC,CAAE,OAAQ,OAAiB,MAAO,GAAA,EAClC,CAAE,OAAQ,SAAmB,MAAO,EAAA,EACpC,CAAE,OAAQ,SAAmB,MAAO,EAAA,EACpC,CAAE,OAAQ,SAAmB,MAAO,EAAA,EACpC,CAAE,OAAQ,SAAmB,MAAO,CAAA,CAAE,CACxC,CACF,CACD,CACH,CAEO,SAASC,EAAmBT,EAAkB,CACnD,OAAOU,EAAY,CACjB,WAAY,MAAOT,GAAsD,CACvE,MAAMU,EAAW,MAAMP,EAAU,KAC/B,YAAYJ,CAAQ,gBACpBC,EACA,CAAE,aAAc,MAAA,CAAO,EAGnBW,EAAM,OAAO,IAAI,gBAAgB,IAAI,KAAK,CAACD,EAAS,IAAI,CAAC,CAAC,EAC1DE,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EACZC,EAAK,SAAW,aAAab,CAAQ,IAAI,IAAI,KAAA,EAAO,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,CAAC,OAC/E,SAAS,KAAK,YAAYa,CAAI,EAC9BA,EAAK,MAAA,EACLA,EAAK,OAAA,EACL,OAAO,IAAI,gBAAgBD,CAAG,CAChC,CAAA,CACD,CACH,CCvNO,SAASE,EAAoB,CAClC,KAAAC,EACA,OAAAC,EAAS,IACT,MAAAC,EAAQ,SACV,EAA6B,CAC3B,MAAMC,EAAcC,GACR,IAAI,KAAKA,CAAI,EACd,mBAAmB,QAAS,CAAE,MAAO,QAAS,IAAK,UAAW,EAGzE,aACGC,EAAA,CAAoB,MAAM,OAAO,OAAAJ,EAChC,SAAAK,EAAAA,KAACC,GAAS,KAAAP,EAAY,OAAQ,CAAE,IAAK,EAAG,MAAO,EAAG,OAAQ,EAAG,KAAM,KACjE,SAAA,CAAAQ,EAAAA,IAAC,OAAA,CACC,SAAAF,EAAAA,KAAC,iBAAA,CAAe,GAAG,mBAAmB,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAC5D,SAAA,CAAAE,MAAC,QAAK,OAAO,KAAK,UAAWN,EAAO,YAAa,GAAK,QACrD,OAAA,CAAK,OAAO,OAAO,UAAWA,EAAO,YAAa,EAAA,CAAK,CAAA,CAAA,CAC1D,CAAA,CACF,QACCO,EAAA,CAAc,gBAAgB,MAAM,OAAO,yBAAyB,SAAU,GAAO,EACtFD,EAAAA,IAACE,EAAA,CACC,QAAQ,OACR,cAAeP,EACf,KAAM,CAAE,SAAU,GAAI,KAAM,uBAAA,EAC5B,SAAU,GACV,SAAU,EAAA,CAAA,EAEZK,EAAAA,IAACG,EAAA,CACC,KAAM,CAAE,SAAU,GAAI,KAAM,uBAAA,EAC5B,SAAU,GACV,SAAU,EAAA,CAAA,EAEZH,EAAAA,IAACI,EAAA,CACC,aAAc,CACZ,WAAY,yBACZ,OAAQ,kCACR,aAAc,MACd,SAAU,GACV,MAAO,wBAAA,EAET,eAAiBC,GAAUV,EAAW,OAAOU,CAAK,CAAC,EACnD,UAAYC,GAAU,CAAC,OAAOA,CAAK,EAAG,QAAQ,CAAA,CAAA,EAEhDN,EAAAA,IAACO,EAAA,CAAI,QAAQ,QAAQ,KAAK,yBAAyB,OAAQ,CAAC,EAAG,EAAG,EAAG,CAAC,CAAA,CAAG,CAAA,CAAA,CAC3E,CAAA,CACF,CAEJ,CCxCA,MAAMC,EAAS,CACb,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,WAAY,CAAE,SAAU,EAAA,CAC1B,EAEMC,EAAmE,CACvE,OAAQ,CAAE,MAAO,iBAAkB,GAAI,iBAAA,EACvC,OAAQ,CAAE,MAAO,gBAAiB,GAAI,gBAAA,EACtC,OAAQ,CAAE,MAAO,eAAgB,GAAI,eAAA,EACrC,MAAO,CAAE,MAAO,kBAAmB,GAAI,kBAAA,EACvC,OAAQ,CAAE,MAAO,gBAAiB,GAAI,gBAAA,EACtC,OAAQ,CAAE,MAAO,iBAAkB,GAAI,iBAAA,EACvC,KAAM,CAAE,MAAO,gBAAiB,GAAI,gBAAA,EACpC,OAAQ,CAAE,MAAO,kBAAmB,GAAI,kBAAA,CAC1C,EAEA,SAAwBC,IAAiB,aACvC,KAAM,CAAE,SAAAjC,CAAA,EAAakC,EAAA,EACfC,EAAcnC,EAAW,SAASA,EAAU,EAAE,EAAI,EAElD,CAACoC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAE,EACjC,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAA2B,EAAE,EAC/D,CAACG,EAAMC,CAAO,EAAIJ,EAAAA,SAAS,CAAC,EAC5BK,EAAQ,GAER,CAAE,KAAMC,EAAM,UAAWC,CAAA,EAAgB9C,EAAmBoC,EAAa,CAC7E,KAAAM,EACA,MAAAE,EACA,OAAQJ,GAAgB,OACxB,OAAQH,GAAU,MAAA,CACnB,EAEK,CAAE,KAAMU,GAAUzC,EAAoB8B,CAAW,EACjDY,EAAiBtC,EAAmB0B,CAAW,EAE/Ca,EAAaJ,EAAO,KAAK,KAAKA,EAAK,MAAQD,CAAK,EAAI,EAEpDM,EAAmBC,GACb,IAAI,KAAKA,CAAE,EACZ,eAAe,QAAS,CAC/B,MAAO,QACP,IAAK,UACL,KAAM,UACN,OAAQ,SAAA,CACT,EAGGC,EAAc,CAClB,CACE,MAAO,eACP,QAAOC,EAAAN,GAAA,YAAAA,EAAO,cAAP,YAAAM,EAAoB,mBAAoB,IAC/C,KAAMC,EACN,MAAO,eAAA,EAET,CACE,MAAO,aACP,QAAOC,EAAAR,GAAA,YAAAA,EAAO,aAAP,YAAAQ,EAAmB,mBAAoB,IAC9C,KAAMC,EACN,MAAO,gBAAA,EAET,CACE,MAAO,SACP,QAAOC,EAAAV,GAAA,YAAAA,EAAO,SAAP,YAAAU,EAAe,mBAAoB,IAC1C,KAAMC,EACN,MAAO,cAAA,EAET,CACE,MAAO,eACP,QAAOC,EAAAZ,GAAA,YAAAA,EAAO,cAAP,YAAAY,EAAoB,aAAc,IACzC,KAAMC,EACN,MAAO,iBAAA,CACT,EAGF,OACEtC,EAAAA,KAAAuC,WAAA,CACE,SAAA,CAAArC,MAACsC,EAAA,CACC,SAAAtC,EAAAA,IAAC,QAAA,CAAM,SAAA,wBAAA,CAAsB,EAC/B,EAEAF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEb,SAAA,CAAAA,EAAAA,KAACyC,EAAO,IAAP,CAAW,UAAU,oCAAqC,GAAG/B,EAC5D,SAAA,CAAAV,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,YAAS,EAC5CA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,2CAAA,CAAyC,CAAA,EAChF,EACAF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM0B,EAAe,OAAO,EAAE,EACvC,SAAUA,EAAe,UACzB,UAAU,iHAEV,SAAA,CAAAxB,EAAAA,IAACwC,EAAA,CAAkB,UAAU,SAAA,CAAU,EACtChB,EAAe,UAAY,eAAiB,YAAA,CAAA,CAAA,CAC/C,EACF,EAGAxB,EAAAA,IAACuC,EAAO,IAAP,CACC,UAAU,uDACT,GAAG/B,EACJ,WAAY,CAAE,MAAO,EAAA,EAEpB,SAAAoB,EAAY,IAAKa,GAChBzC,EAAAA,IAAC,MAAA,CAEC,UAAU,oEAEV,SAAAF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,4BACb,SAAAA,EAAAA,IAACyC,EAAK,KAAL,CAAU,UAAWC,EAAG,UAAWD,EAAK,KAAK,EAAG,EACnD,SACC,MAAA,CACC,SAAA,CAAAzC,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,SAAAyC,EAAK,MAAM,EACzDzC,EAAAA,IAAC,IAAA,CAAE,UAAU,oBAAqB,WAAK,KAAA,CAAM,CAAA,CAAA,CAC/C,CAAA,CAAA,CACF,CAAA,EAXKyC,EAAK,KAAA,CAab,CAAA,CAAA,GAIFlB,GAAA,YAAAA,EAAO,cAAeA,EAAM,YAAY,OAAS,GAChDzB,EAAAA,KAACyC,EAAO,IAAP,CACC,UAAU,oEACT,GAAG/B,EACJ,WAAY,CAAE,MAAO,GAAA,EAErB,SAAA,CAAAR,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,kBAAe,QACjDT,EAAA,CAAoB,KAAMgC,EAAM,YAAa,OAAQ,GAAA,CAAK,CAAA,CAAA,CAAA,EAK/DzB,EAAAA,KAACyC,EAAO,IAAP,CACC,UAAU,0BACT,GAAG/B,EACJ,WAAY,CAAE,MAAO,EAAA,EAErB,SAAA,CAAAV,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAE,EAAAA,IAAC2C,EAAA,CAAoB,UAAU,wEAAA,CAAyE,EACxG3C,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,0CACZ,MAAOa,EACP,SAAW+B,GAAM,CAAE9B,EAAU8B,EAAE,OAAO,KAAK,EAAGzB,EAAQ,CAAC,CAAG,EAC1D,UAAU,kIAAA,CAAA,CACZ,EACF,EACArB,EAAAA,KAAC,SAAA,CACC,MAAOkB,EACP,SAAW4B,GAAM,CAAE3B,EAAgB2B,EAAE,OAAO,KAAyB,EAAGzB,EAAQ,CAAC,CAAG,EACpF,UAAU,uHAEV,SAAA,CAAAnB,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,cAAW,EAC3B,OAAO,KAAKS,CAAY,EAAE,IAAKoC,GAC9B7C,MAAC,SAAA,CAAoB,MAAO6C,EAAQ,UAAU,aAC3C,SAAAA,CAAA,EADUA,CAEb,CACD,CAAA,CAAA,CAAA,CACH,CAAA,CAAA,EAIF/C,EAAAA,KAACyC,EAAO,IAAP,CACC,UAAU,gFACT,GAAG/B,EACJ,WAAY,CAAE,MAAO,GAAA,EAEpB,SAAA,CAAAc,QACE,MAAA,CAAI,UAAU,yCACb,SAAAtB,MAAC,OAAI,UAAU,6DAAA,CAA8D,EAC/E,QAEC,MAAA,CAAI,UAAU,kBACb,SAAAF,EAAAA,KAAC,QAAA,CAAM,UAAU,SACf,SAAA,CAAAE,EAAAA,IAAC,QAAA,CACC,SAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,sCACX,SAAA,CAAC,YAAa,OAAQ,SAAU,WAAY,UAAW,SAAU,IAAI,EAAE,IACrE8C,GACC9C,EAAAA,IAAC,KAAA,CAEC,UAAU,yFAET,SAAA8C,CAAA,EAHIA,CAAA,CAIP,EAGN,CAAA,CACF,EACA9C,EAAAA,IAAC,QAAA,CACG,WAAAqB,GAAA,YAAAA,EAAM,UAAW,CAAA,GAAI,SAAW,EAChCrB,EAAAA,IAAC,KAAA,CACC,SAAAA,EAAAA,IAAC,KAAA,CAAG,QAAS,EAAG,UAAU,kDAAkD,SAAA,4BAAA,CAE5E,CAAA,CACF,IAECqB,GAAA,YAAAA,EAAM,UAAW,CAAA,GAAI,IAAK0B,GAAU,CACnC,MAAMC,EAAKvC,EAAasC,EAAM,MAAM,GAAKtC,EAAa,OACtD,OACEX,EAAAA,KAAC,KAAA,CAEC,UAAU,6DAEV,SAAA,CAAAE,MAAC,MAAG,UAAU,4DACX,SAAA0B,EAAgBqB,EAAM,SAAS,EAClC,QACC,KAAA,CAAG,UAAU,YACZ,SAAAjD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,sEACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,uCACb,SAAA+C,EAAM,SACJ,MAAM,GAAG,EACT,IAAKE,GAAMA,EAAE,CAAC,CAAC,EACf,KAAK,EAAE,EACP,YAAA,CAAY,CACjB,CAAA,CACF,EACAjD,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAW,WAAM,QAAA,CAAS,CAAA,CAAA,CAC5C,CAAA,CACF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,YACZ,SAAAA,EAAAA,IAAC,OAAA,CACC,UAAW0C,EACT,0DACAM,EAAG,GACHA,EAAG,KAAA,EAGJ,SAAAD,EAAM,MAAA,CAAA,EAEX,EACA/C,EAAAA,IAAC,KAAA,CAAG,UAAU,2CACX,WAAM,SACT,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iEACX,WAAM,QACT,QACC,KAAA,CAAG,UAAU,YACX,SAAA+C,EAAM,SAAW,UAChB/C,EAAAA,IAACgC,EAAA,CAAgB,UAAU,yBAAyB,EAEpDhC,EAAAA,IAACkC,EAAA,CAAY,UAAU,uBAAuB,EAElD,EACAlC,EAAAA,IAAC,KAAA,CAAG,UAAU,oDACX,WAAM,SAAA,CACT,CAAA,CAAA,EA9CK+C,EAAM,EAAA,CAiDjB,CAAC,CAAA,CAEL,CAAA,CAAA,CACF,CAAA,CACF,EAID1B,GAAQA,EAAK,MAAQD,GACpBtB,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,CAAA,YACpCoB,EAAO,GAAKE,EAAQ,EAAE,IAAE,KAAK,IAAIF,EAAOE,EAAOC,EAAK,KAAK,EAAE,MAAI,IACxEA,EAAK,KAAA,EACR,EACAvB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmB,EAAS+B,GAAM,KAAK,IAAI,EAAGA,EAAI,CAAC,CAAC,EAChD,SAAUhC,IAAS,EACnB,UAAU,0EAEV,SAAAlB,EAAAA,IAACmD,EAAA,CAAgB,UAAU,SAAA,CAAU,CAAA,CAAA,EAEvCrD,EAAAA,KAAC,OAAA,CAAK,UAAU,eACb,SAAA,CAAAoB,EAAK,MAAIO,CAAA,EACZ,EACAzB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmB,EAAS+B,GAAM,KAAK,IAAIzB,EAAYyB,EAAI,CAAC,CAAC,EACzD,SAAUhC,IAASO,EACnB,UAAU,0EAEV,SAAAzB,EAAAA,IAACoD,EAAA,CAAiB,UAAU,SAAA,CAAU,CAAA,CAAA,CACxC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,CAEJ"}