{"version":3,"file":"Overview-LDuLNHwJ.js","sources":["../../src/api/autopilot.ts","../../src/components/shared/ActionsPanel.tsx","../../src/views/tenant/Overview.tsx"],"sourcesContent":["/**\r\n * Stratum AI - Autopilot API Hooks\r\n *\r\n * React Query hooks for autopilot action management:\r\n * - Action queue\r\n * - Approval workflow\r\n * - Status monitoring\r\n */\r\n\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient } from './client';\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\nexport type ActionStatus = 'queued' | 'approved' | 'applied' | 'failed' | 'dismissed';\r\n\r\nexport type ActionType =\r\n  | 'budget_increase'\r\n  | 'budget_decrease'\r\n  | 'pause_campaign'\r\n  | 'pause_adset'\r\n  | 'pause_creative'\r\n  | 'enable_campaign'\r\n  | 'enable_adset'\r\n  | 'enable_creative'\r\n  | 'bid_increase'\r\n  | 'bid_decrease';\r\n\r\nexport interface AutopilotAction {\r\n  id: string;\r\n  date: string;\r\n  action_type: ActionType;\r\n  entity_type: 'campaign' | 'adset' | 'creative';\r\n  entity_id: string;\r\n  entity_name: string | null;\r\n  platform: string;\r\n  action_json: Record<string, unknown>;\r\n  before_value: Record<string, unknown> | null;\r\n  after_value: Record<string, unknown> | null;\r\n  status: ActionStatus;\r\n  created_at: string;\r\n  approved_at: string | null;\r\n  applied_at: string | null;\r\n  error: string | null;\r\n}\r\n\r\nexport interface AutopilotStatus {\r\n  autopilot_level: number;\r\n  autopilot_level_name: string;\r\n  pending_actions: number;\r\n  caps: {\r\n    max_daily_budget_change: number;\r\n    max_budget_pct_change: number;\r\n    max_actions_per_day: number;\r\n  };\r\n  enabled: boolean;\r\n}\r\n\r\nexport interface ActionsSummary {\r\n  days: number;\r\n  start_date: string;\r\n  status_counts: Record<ActionStatus, number>;\r\n  type_counts: Record<ActionType, number>;\r\n  platform_counts: Record<string, number>;\r\n  total: number;\r\n  pending_approval: number;\r\n  success_rate: number;\r\n}\r\n\r\nexport interface QueueActionRequest {\r\n  action_type: ActionType;\r\n  entity_type: 'campaign' | 'adset' | 'creative';\r\n  entity_id: string;\r\n  entity_name: string;\r\n  platform: string;\r\n  action_json: Record<string, unknown>;\r\n  before_value?: Record<string, unknown>;\r\n}\r\n\r\nexport interface DryRunRequest {\r\n  action_type: string;\r\n  entity_type: 'campaign' | 'adset' | 'creative';\r\n  entity_id: string;\r\n  entity_name?: string;\r\n  platform: string;\r\n  action_json: Record<string, unknown>;\r\n}\r\n\r\nexport interface DryRunResult {\r\n  would_execute: boolean;\r\n  decision_type: 'execute' | 'hold' | 'block';\r\n  signal_health_score: number | null;\r\n  signal_health_status: string | null;\r\n  gate_passed: boolean;\r\n  gate_reasons: string[];\r\n  healthy_threshold: number;\r\n  degraded_threshold: number;\r\n  action_preview: Record<string, unknown>;\r\n  warnings: string[];\r\n  audit_log_id: string;\r\n  message: string;\r\n}\r\n\r\n// =============================================================================\r\n// Query Hooks\r\n// =============================================================================\r\n\r\n/**\r\n * Get current autopilot status for a tenant.\r\n */\r\nexport function useAutopilotStatus(tenantId: number) {\r\n  return useQuery({\r\n    queryKey: ['autopilot-status', tenantId],\r\n    queryFn: async () => {\r\n      const response = await apiClient.get<{ data: AutopilotStatus }>(\r\n        `/autopilot/tenant/${tenantId}/autopilot/status`\r\n      );\r\n      return response.data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    staleTime: 60 * 1000, // 1 minute\r\n    refetchInterval: 30 * 1000, // Refetch every 30 seconds\r\n  });\r\n}\r\n\r\n/**\r\n * Get actions for a tenant.\r\n */\r\nexport function useAutopilotActions(\r\n  tenantId: number,\r\n  filters?: {\r\n    date?: string;\r\n    status?: ActionStatus;\r\n    platform?: string;\r\n    limit?: number;\r\n  }\r\n) {\r\n  return useQuery({\r\n    queryKey: ['autopilot-actions', tenantId, filters],\r\n    queryFn: async () => {\r\n      const params = new URLSearchParams();\r\n      if (filters?.date) params.append('date', filters.date);\r\n      if (filters?.status) params.append('status', filters.status);\r\n      if (filters?.platform) params.append('platform', filters.platform);\r\n      if (filters?.limit) params.append('limit', filters.limit.toString());\r\n\r\n      const response = await apiClient.get<{\r\n        data: { actions: AutopilotAction[]; count: number };\r\n      }>(`/autopilot/tenant/${tenantId}/autopilot/actions?${params}`);\r\n      return response.data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    staleTime: 30 * 1000, // 30 seconds\r\n    refetchInterval: 60 * 1000, // Refetch every minute\r\n  });\r\n}\r\n\r\n/**\r\n * Get actions summary for a tenant.\r\n */\r\nexport function useActionsSummary(tenantId: number, days: number = 7) {\r\n  return useQuery({\r\n    queryKey: ['autopilot-summary', tenantId, days],\r\n    queryFn: async () => {\r\n      const response = await apiClient.get<{ data: ActionsSummary }>(\r\n        `/autopilot/tenant/${tenantId}/autopilot/actions/summary?days=${days}`\r\n      );\r\n      return response.data.data;\r\n    },\r\n    enabled: !!tenantId,\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n  });\r\n}\r\n\r\n/**\r\n * Get a specific action by ID.\r\n */\r\nexport function useAutopilotAction(tenantId: number, actionId: string) {\r\n  return useQuery({\r\n    queryKey: ['autopilot-action', tenantId, actionId],\r\n    queryFn: async () => {\r\n      const response = await apiClient.get<{ data: { action: AutopilotAction } }>(\r\n        `/autopilot/tenant/${tenantId}/autopilot/actions/${actionId}`\r\n      );\r\n      return response.data.data.action;\r\n    },\r\n    enabled: !!tenantId && !!actionId,\r\n  });\r\n}\r\n\r\n// =============================================================================\r\n// Mutation Hooks\r\n// =============================================================================\r\n\r\n/**\r\n * Queue a new action.\r\n */\r\nexport function useQueueAction(tenantId: number) {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (request: QueueActionRequest) => {\r\n      const response = await apiClient.post<{\r\n        data: {\r\n          action: AutopilotAction;\r\n          auto_approved: boolean;\r\n          requires_approval: boolean;\r\n          reason: string | null;\r\n        };\r\n      }>(`/autopilot/tenant/${tenantId}/autopilot/actions`, request);\r\n      return response.data.data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-actions', tenantId] });\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-status', tenantId] });\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-summary', tenantId] });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Approve an action.\r\n */\r\nexport function useApproveAction(tenantId: number) {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (actionId: string) => {\r\n      const response = await apiClient.post<{ data: { action: AutopilotAction } }>(\r\n        `/autopilot/tenant/${tenantId}/autopilot/actions/${actionId}/approve`\r\n      );\r\n      return response.data.data.action;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-actions', tenantId] });\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-status', tenantId] });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Approve multiple actions at once.\r\n */\r\nexport function useApproveAllActions(tenantId: number) {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (actionIds?: string[]) => {\r\n      const response = await apiClient.post<{ data: { approved_count: number } }>(\r\n        `/autopilot/tenant/${tenantId}/autopilot/actions/approve-all`,\r\n        actionIds ? { action_ids: actionIds } : undefined\r\n      );\r\n      return response.data.data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-actions', tenantId] });\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-status', tenantId] });\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-summary', tenantId] });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Dismiss an action.\r\n */\r\nexport function useDismissAction(tenantId: number) {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (actionId: string) => {\r\n      const response = await apiClient.post<{ data: { action: AutopilotAction } }>(\r\n        `/autopilot/tenant/${tenantId}/autopilot/actions/${actionId}/dismiss`\r\n      );\r\n      return response.data.data.action;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-actions', tenantId] });\r\n      queryClient.invalidateQueries({ queryKey: ['autopilot-status', tenantId] });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Dry-run an action to simulate execution without making changes.\r\n */\r\nexport function useDryRunAction(tenantId: number) {\r\n  return useMutation({\r\n    mutationFn: async (request: DryRunRequest) => {\r\n      const response = await apiClient.post<{ data: DryRunResult }>(\r\n        `/autopilot/tenant/${tenantId}/autopilot/actions/dry-run`,\r\n        request\r\n      );\r\n      return response.data.data;\r\n    },\r\n  });\r\n}\r\n\r\n// =============================================================================\r\n// Utility Functions\r\n// =============================================================================\r\n\r\n/**\r\n * Get human-readable action type label.\r\n */\r\nexport function getActionTypeLabel(type: ActionType): string {\r\n  const labels: Record<ActionType, string> = {\r\n    budget_increase: 'Budget Increase',\r\n    budget_decrease: 'Budget Decrease',\r\n    pause_campaign: 'Pause Campaign',\r\n    pause_adset: 'Pause Ad Set',\r\n    pause_creative: 'Pause Creative',\r\n    enable_campaign: 'Enable Campaign',\r\n    enable_adset: 'Enable Ad Set',\r\n    enable_creative: 'Enable Creative',\r\n    bid_increase: 'Bid Increase',\r\n    bid_decrease: 'Bid Decrease',\r\n  };\r\n  return labels[type] || type;\r\n}\r\n\r\n/**\r\n * Get status color for UI.\r\n */\r\nexport function getActionStatusColor(status: ActionStatus): string {\r\n  const colors: Record<ActionStatus, string> = {\r\n    queued: 'yellow',\r\n    approved: 'blue',\r\n    applied: 'green',\r\n    failed: 'red',\r\n    dismissed: 'gray',\r\n  };\r\n  return colors[status] || 'gray';\r\n}\r\n\r\n/**\r\n * Get status label.\r\n */\r\nexport function getActionStatusLabel(status: ActionStatus): string {\r\n  const labels: Record<ActionStatus, string> = {\r\n    queued: 'Pending Approval',\r\n    approved: 'Approved',\r\n    applied: 'Applied',\r\n    failed: 'Failed',\r\n    dismissed: 'Dismissed',\r\n  };\r\n  return labels[status] || status;\r\n}\r\n\r\n/**\r\n * Get platform icon.\r\n */\r\nexport function getPlatformIcon(platform: string): string {\r\n  const icons: Record<string, string> = {\r\n    meta: 'ðŸ“˜',\r\n    google: 'ðŸ”´',\r\n    tiktok: 'ðŸŽµ',\r\n    snapchat: 'ðŸ‘»',\r\n  };\r\n  return icons[platform] || 'ðŸ“Š';\r\n}\r\n","/**\r\n * Actions Panel\r\n * Aggregates actions with filters and bulk operations\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { type Action, ActionCard, type ActionType } from './ActionCard';\r\nimport { AutopilotMode } from './AutopilotModeBanner';\r\nimport {\r\n  ArrowTrendingUpIcon,\r\n  ExclamationTriangleIcon,\r\n  FunnelIcon,\r\n  SparklesIcon,\r\n  WrenchScrewdriverIcon,\r\n} from '@heroicons/react/24/outline';\r\n\r\ninterface ActionsPanelProps {\r\n  actions: Action[];\r\n  autopilotMode?: AutopilotMode;\r\n  onApply?: (action: Action) => void;\r\n  onDismiss?: (action: Action) => void;\r\n  onQueue?: (action: Action) => void;\r\n  onApplyAll?: (actions: Action[]) => void;\r\n  maxActions?: number;\r\n  className?: string;\r\n}\r\n\r\nconst filterTabs: { type: ActionType | 'all'; label: string; icon: typeof SparklesIcon }[] = [\r\n  { type: 'all', label: 'All', icon: FunnelIcon },\r\n  { type: 'opportunity', label: 'Opportunities', icon: ArrowTrendingUpIcon },\r\n  { type: 'risk', label: 'Risks', icon: ExclamationTriangleIcon },\r\n  { type: 'recommendation', label: 'Recommendations', icon: SparklesIcon },\r\n  { type: 'fix', label: 'Fixes', icon: WrenchScrewdriverIcon },\r\n];\r\n\r\nfunction getAutopilotRestrictionMessage(mode: AutopilotMode): string | null {\r\n  switch (mode) {\r\n    case 'limited':\r\n      return 'Scaling capped at +10%. Some actions may be restricted.';\r\n    case 'cuts_only':\r\n      return 'Only pause and reduction actions are allowed.';\r\n    case 'frozen':\r\n      return 'All automation is paused. Fix data issues first.';\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nexport function ActionsPanel({\r\n  actions,\r\n  autopilotMode = 'normal',\r\n  onApply,\r\n  onDismiss,\r\n  onQueue,\r\n  onApplyAll,\r\n  maxActions = 10,\r\n  className,\r\n}: ActionsPanelProps) {\r\n  const [activeFilter, setActiveFilter] = useState<ActionType | 'all'>('all');\r\n\r\n  const filteredActions =\r\n    activeFilter === 'all' ? actions : actions.filter((a) => a.type === activeFilter);\r\n\r\n  const pendingActions = filteredActions.filter((a) => a.status === 'pending');\r\n  const displayActions = pendingActions.slice(0, maxActions);\r\n\r\n  const restrictionMessage = getAutopilotRestrictionMessage(autopilotMode);\r\n  const isActionsDisabled = autopilotMode === 'frozen';\r\n\r\n  // Count by type\r\n  const countByType = actions.reduce(\r\n    (acc, a) => {\r\n      if (a.status === 'pending') {\r\n        acc[a.type] = (acc[a.type] || 0) + 1;\r\n      }\r\n      return acc;\r\n    },\r\n    {} as Record<ActionType, number>\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'rounded-2xl bg-surface-secondary border border-white/10 overflow-hidden',\r\n        className\r\n      )}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-white/10\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h3 className=\"font-semibold text-white\">Actions</h3>\r\n            <p className=\"text-sm text-text-muted\">{pendingActions.length} actions pending</p>\r\n          </div>\r\n          {onApplyAll && pendingActions.length > 0 && !isActionsDisabled && (\r\n            <button\r\n              onClick={() => onApplyAll(pendingActions)}\r\n              className=\"text-sm text-stratum-400 hover:text-stratum-300 transition-colors\"\r\n            >\r\n              Apply all ({pendingActions.length})\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Restriction warning */}\r\n        {restrictionMessage && (\r\n          <div\r\n            className={cn(\r\n              'flex items-center gap-2 mt-3 p-2 rounded-lg text-sm',\r\n              autopilotMode === 'frozen' ? 'bg-danger/10 text-danger' : 'bg-warning/10 text-warning'\r\n            )}\r\n          >\r\n            <ExclamationTriangleIcon className=\"w-4 h-4 flex-shrink-0\" />\r\n            {restrictionMessage}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Filter tabs */}\r\n      <div className=\"flex items-center gap-1 p-2 overflow-x-auto border-b border-white/10\">\r\n        {filterTabs.map((tab) => {\r\n          const count =\r\n            tab.type === 'all'\r\n              ? Object.values(countByType).reduce((a, b) => a + b, 0)\r\n              : countByType[tab.type] || 0;\r\n          const Icon = tab.icon;\r\n\r\n          return (\r\n            <button\r\n              key={tab.type}\r\n              onClick={() => setActiveFilter(tab.type)}\r\n              className={cn(\r\n                'flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-colors whitespace-nowrap',\r\n                activeFilter === tab.type\r\n                  ? 'bg-stratum-500/10 text-stratum-400'\r\n                  : 'text-text-muted hover:text-white'\r\n              )}\r\n            >\r\n              <Icon className=\"w-4 h-4\" />\r\n              {tab.label}\r\n              {count > 0 && (\r\n                <span\r\n                  className={cn(\r\n                    'text-xs px-1.5 py-0.5 rounded-full',\r\n                    activeFilter === tab.type ? 'bg-stratum-500/20' : 'bg-surface-tertiary'\r\n                  )}\r\n                >\r\n                  {count}\r\n                </span>\r\n              )}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Actions list */}\r\n      <div className=\"p-4 space-y-3\">\r\n        {displayActions.length > 0 ? (\r\n          displayActions.map((action) => (\r\n            <ActionCard\r\n              key={action.id}\r\n              action={action}\r\n              onApply={onApply}\r\n              onDismiss={onDismiss}\r\n              onQueue={onQueue}\r\n              disabled={isActionsDisabled}\r\n              compact\r\n            />\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"w-12 h-12 rounded-full bg-surface-tertiary flex items-center justify-center mx-auto mb-3\">\r\n              <SparklesIcon className=\"w-6 h-6 text-text-muted\" />\r\n            </div>\r\n            <p className=\"text-text-muted\">No pending actions</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      {pendingActions.length > maxActions && (\r\n        <div className=\"p-4 border-t border-white/10\">\r\n          <button className=\"text-sm text-stratum-400 hover:text-stratum-300 transition-colors\">\r\n            View all {pendingActions.length} actions\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ActionsPanel;\r\n","/**\r\n * Tenant Overview (Head of Marketing View)\r\n *\r\n * Primary goal: Trust, control, decisions, reporting\r\n * Shows EMQ + Confidence + Autopilot Mode + Budget at Risk\r\n */\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n  type Action,\r\n  ActionsPanel,\r\n  EmqFixPlaybookPanel,\r\n  EmqScoreCard,\r\n  EmqTimeline,\r\n  type Kpi,\r\n  KpiStrip,\r\n  type PlaybookItem,\r\n  type TimelineEvent,\r\n  TrustStatusHeader,\r\n} from '@/components/shared';\r\nimport {\r\n  useAutopilotState,\r\n  useEmqIncidents,\r\n  useEmqPlaybook,\r\n  useEmqScore,\r\n  useUpdatePlaybookItem,\r\n} from '@/api/hooks';\r\nimport { useTenantOverview, useTenantRecommendations } from '@/api/hooks';\r\nimport { useApproveAction, useDismissAction, useQueueAction } from '@/api/autopilot';\r\nimport { useToast } from '@/components/ui/use-toast';\r\nimport {\r\n  CalendarIcon,\r\n  DocumentArrowDownIcon,\r\n  XMarkIcon,\r\n  UserIcon,\r\n} from '@heroicons/react/24/outline';\r\n\r\nexport default function TenantOverview() {\r\n  const { tenantId } = useParams<{ tenantId: string }>();\r\n  const navigate = useNavigate();\r\n  const { toast } = useToast();\r\n  const tid = parseInt(tenantId || '1', 10);\r\n\r\n  // Assignment modal state\r\n  const [showAssignModal, setShowAssignModal] = useState(false);\r\n  const [assigningItem, setAssigningItem] = useState<PlaybookItem | null>(null);\r\n  const [assignee, setAssignee] = useState('');\r\n  const [assignNotes, setAssignNotes] = useState('');\r\n\r\n  // Export state\r\n  const [isExporting, setIsExporting] = useState(false);\r\n\r\n  // Date range state\r\n  const [dateRange, setDateRange] = useState({\r\n    start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n    end: new Date().toISOString().split('T')[0],\r\n  });\r\n  const [dateRangeLabel, setDateRangeLabel] = useState('Last 30 days');\r\n\r\n  // Mutation hooks for autopilot actions\r\n  const approveAction = useApproveAction(tid);\r\n  const dismissAction = useDismissAction(tid);\r\n  const queueAction = useQueueAction(tid);\r\n  const updatePlaybookItem = useUpdatePlaybookItem(tid);\r\n\r\n  // Fetch data\r\n  const { data: emqData } = useEmqScore(tid);\r\n  const { data: autopilotData } = useAutopilotState(tid);\r\n  const { data: playbookData } = useEmqPlaybook(tid);\r\n  const { data: incidentsData } = useEmqIncidents(tid, dateRange.start, dateRange.end);\r\n  const { data: overviewData } = useTenantOverview(tid);\r\n  const { data: recommendationsData } = useTenantRecommendations(tid);\r\n\r\n  // Transform data for components\r\n  const emqScore = emqData?.score ?? 85;\r\n  const autopilotMode = autopilotData?.mode ?? 'normal';\r\n  const budgetAtRisk = autopilotData?.budgetAtRisk ?? 0;\r\n\r\n  const kpis: Kpi[] = [\r\n    {\r\n      id: 'spend',\r\n      label: 'Spend',\r\n      value: overviewData?.kpis?.total_spend ?? 45000,\r\n      format: 'currency',\r\n      previousValue: 42000,\r\n      confidence: emqScore,\r\n    },\r\n    {\r\n      id: 'revenue',\r\n      label: 'Revenue',\r\n      value: overviewData?.kpis?.total_revenue ?? 180000,\r\n      format: 'currency',\r\n      previousValue: 165000,\r\n      confidence: emqScore,\r\n    },\r\n    {\r\n      id: 'roas',\r\n      label: 'ROAS',\r\n      value: overviewData?.kpis.roas ?? 4.0,\r\n      format: 'multiplier',\r\n      previousValue: 3.9,\r\n      confidence: emqScore,\r\n    },\r\n    {\r\n      id: 'cpa',\r\n      label: 'CPA',\r\n      value: overviewData?.kpis.cpa ?? 25,\r\n      format: 'currency',\r\n      previousValue: 28,\r\n      trendIsPositive: false,\r\n      confidence: emqScore,\r\n    },\r\n  ];\r\n\r\n  const playbook: PlaybookItem[] = playbookData ?? [\r\n    {\r\n      id: '1',\r\n      title: 'Fix Meta pixel data loss',\r\n      description: 'Meta is reporting 15% lower conversions than GA4. Verify pixel implementation.',\r\n      priority: 'critical',\r\n      owner: null,\r\n      estimatedImpact: 8,\r\n      estimatedTime: '30 min',\r\n      platform: 'Meta',\r\n      status: 'pending',\r\n      actionUrl: null,\r\n    },\r\n    {\r\n      id: '2',\r\n      title: 'Resolve Google Ads API timeout',\r\n      description: 'Intermittent connection issues causing data freshness delays.',\r\n      priority: 'high',\r\n      owner: 'Data Team',\r\n      estimatedImpact: 5,\r\n      estimatedTime: '1 hour',\r\n      platform: 'Google',\r\n      status: 'in_progress',\r\n      actionUrl: null,\r\n    },\r\n  ];\r\n\r\n  const timeline: TimelineEvent[] = incidentsData?.map((i) => ({\r\n    id: i.id,\r\n    type: i.type,\r\n    title: i.title,\r\n    description: i.description ?? undefined,\r\n    timestamp: new Date(i.timestamp),\r\n    platform: i.platform ?? undefined,\r\n    severity: i.severity,\r\n    recoveryHours: i.recoveryHours ?? undefined,\r\n    emqImpact: i.emqImpact ?? undefined,\r\n  })) ?? [\r\n    {\r\n      id: '1',\r\n      type: 'incident_opened',\r\n      title: 'Meta conversion tracking degraded',\r\n      description: 'Conversion attribution showing 20% variance from GA4',\r\n      timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),\r\n      platform: 'Meta',\r\n      severity: 'high',\r\n    },\r\n    {\r\n      id: '2',\r\n      type: 'recovery',\r\n      title: 'Google Ads sync restored',\r\n      description: 'API connection stable after maintenance',\r\n      timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000),\r\n      platform: 'Google',\r\n      severity: 'medium',\r\n      recoveryHours: 3,\r\n      emqImpact: 5,\r\n    },\r\n  ];\r\n\r\n  // Handle both array and object response shapes\r\n  const recommendationsList = Array.isArray(recommendationsData)\r\n    ? recommendationsData\r\n    : (recommendationsData as { recommendations?: unknown[] } | undefined)?.recommendations || [];\r\n  const actions: Action[] = ((\r\n    recommendationsList as {\r\n      id: string;\r\n      priority: string;\r\n      title: string;\r\n      description: string;\r\n      platform?: string;\r\n      expectedImpact: number;\r\n      status: string;\r\n      createdAt?: string;\r\n    }[]\r\n  ).map((r) => ({\r\n    id: r.id,\r\n    type: r.priority === 'high' ? 'opportunity' : 'recommendation',\r\n    title: r.title,\r\n    description: r.description,\r\n    platform: r.platform ?? undefined,\r\n    confidence: 85,\r\n    estimatedImpact: {\r\n      metric: 'ROAS',\r\n      value: r.expectedImpact,\r\n      unit: '%',\r\n    },\r\n    status: r.status === 'approved' ? 'applied' : 'pending',\r\n    priority: r.priority === 'high' ? 1 : 2,\r\n    createdAt: r.createdAt ? new Date(r.createdAt) : new Date(),\r\n  })) as Action[]) ?? [\r\n    {\r\n      id: '1',\r\n      type: 'opportunity',\r\n      title: 'Increase budget on high-performing campaign',\r\n      description: 'Campaign \"Summer Sale\" has 5.2x ROAS, recommend 20% budget increase.',\r\n      platform: 'Meta',\r\n      confidence: 92,\r\n      estimatedImpact: { metric: 'Revenue', value: 15, unit: '%' },\r\n      status: 'pending',\r\n      priority: 1,\r\n      createdAt: new Date(),\r\n    },\r\n    {\r\n      id: '2',\r\n      type: 'risk',\r\n      title: 'Pause underperforming ad set',\r\n      description: 'Ad set \"Broad Targeting\" has 0.8x ROAS over last 7 days.',\r\n      platform: 'Meta',\r\n      confidence: 88,\r\n      estimatedImpact: { metric: 'Waste', value: -2500, unit: '$' },\r\n      status: 'pending',\r\n      priority: 2,\r\n      createdAt: new Date(),\r\n    },\r\n  ];\r\n\r\n  // Handler: View EMQ details in signal hub\r\n  const handleViewDetails = () => {\r\n    navigate(`/tenant/${tid}/signal-hub`);\r\n  };\r\n\r\n  // Handler: Playbook item click - navigate to fix page or show details\r\n  const handlePlaybookItemClick = (item: PlaybookItem) => {\r\n    if (item.actionUrl) {\r\n      navigate(item.actionUrl);\r\n    } else {\r\n      // Navigate to signal-hub with item context\r\n      navigate(`/tenant/${tid}/signal-hub?issue=${item.id}`);\r\n    }\r\n  };\r\n\r\n  // Handler: Assign playbook item\r\n  const handlePlaybookAssign = (item: PlaybookItem) => {\r\n    setAssigningItem(item);\r\n    setAssignee(item.owner || '');\r\n    setAssignNotes('');\r\n    setShowAssignModal(true);\r\n  };\r\n\r\n  // Handler: Confirm assignment\r\n  const handleConfirmAssign = useCallback(async () => {\r\n    if (!assigningItem || !assignee.trim()) return;\r\n    try {\r\n      await updatePlaybookItem.mutateAsync({\r\n        itemId: assigningItem.id,\r\n        updates: { owner: assignee.trim(), status: 'in_progress' },\r\n      });\r\n      toast({\r\n        title: 'Assigned',\r\n        description: `\"${assigningItem.title}\" assigned to ${assignee.trim()}.`,\r\n      });\r\n      setShowAssignModal(false);\r\n      setAssigningItem(null);\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Error',\r\n        description: error instanceof Error ? error.message : 'Failed to assign item',\r\n        variant: 'destructive',\r\n      });\r\n    }\r\n  }, [assigningItem, assignee, updatePlaybookItem, toast]);\r\n\r\n  // Handler: Apply playbook fix\r\n  const handlePlaybookApply = async (item: PlaybookItem) => {\r\n    try {\r\n      await updatePlaybookItem.mutateAsync({\r\n        itemId: item.id,\r\n        updates: { status: 'completed' },\r\n      });\r\n      toast({\r\n        title: 'Fix Applied',\r\n        description: `Successfully applied: ${item.title}. Expected EMQ improvement: +${item.estimatedImpact}`,\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Error',\r\n        description: error instanceof Error ? error.message : 'Failed to apply fix',\r\n        variant: 'destructive',\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handler: Apply action\r\n  const handleApplyAction = async (action: Action) => {\r\n    try {\r\n      await approveAction.mutateAsync(action.id);\r\n      toast({\r\n        title: 'Action Applied',\r\n        description: `Successfully applied: ${action.title}`,\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Error',\r\n        description: error instanceof Error ? error.message : 'Failed to apply action',\r\n        variant: 'destructive',\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handler: Dismiss action\r\n  const handleDismissAction = async (action: Action) => {\r\n    try {\r\n      await dismissAction.mutateAsync(action.id);\r\n      toast({\r\n        title: 'Action Dismissed',\r\n        description: `Dismissed: ${action.title}`,\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Error',\r\n        description: error instanceof Error ? error.message : 'Failed to dismiss action',\r\n        variant: 'destructive',\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handler: Queue action\r\n  const handleQueueAction = async (action: Action) => {\r\n    try {\r\n      await queueAction.mutateAsync({\r\n        action_type: 'budget_increase', // Default type, would be determined by action\r\n        entity_type: 'campaign',\r\n        entity_id: action.id,\r\n        entity_name: action.title,\r\n        platform: action.platform || 'unknown',\r\n        action_json: { description: action.description },\r\n      });\r\n      toast({\r\n        title: 'Action Queued',\r\n        description: `Queued for later: ${action.title}`,\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Error',\r\n        description: error instanceof Error ? error.message : 'Failed to queue action',\r\n        variant: 'destructive',\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handler: Date range change\r\n  const handleDateRangeChange = () => {\r\n    // Cycle through common date ranges\r\n    const ranges = [\r\n      { days: 7, label: 'Last 7 days' },\r\n      { days: 14, label: 'Last 14 days' },\r\n      { days: 30, label: 'Last 30 days' },\r\n      { days: 90, label: 'Last 90 days' },\r\n    ];\r\n    const currentIndex = ranges.findIndex((r) => r.label === dateRangeLabel);\r\n    const nextIndex = (currentIndex + 1) % ranges.length;\r\n    const nextRange = ranges[nextIndex];\r\n\r\n    const end = new Date();\r\n    const start = new Date(Date.now() - nextRange.days * 24 * 60 * 60 * 1000);\r\n\r\n    setDateRange({\r\n      start: start.toISOString().split('T')[0],\r\n      end: end.toISOString().split('T')[0],\r\n    });\r\n    setDateRangeLabel(nextRange.label);\r\n  };\r\n\r\n  // Handler: Export report\r\n  const handleExportReport = useCallback(() => {\r\n    setIsExporting(true);\r\n    try {\r\n      const reportData = {\r\n        generatedAt: new Date().toISOString(),\r\n        dateRange,\r\n        emqScore,\r\n        autopilotMode,\r\n        budgetAtRisk,\r\n        kpis: kpis.map((k) => ({ label: k.label, value: k.value, confidence: k.confidence })),\r\n        playbook: playbook.map((p) => ({\r\n          title: p.title,\r\n          priority: p.priority,\r\n          owner: p.owner || 'Unassigned',\r\n          status: p.status,\r\n          estimatedImpact: p.estimatedImpact,\r\n          platform: p.platform || '-',\r\n        })),\r\n        actions: actions.map((a) => ({\r\n          title: a.title,\r\n          type: a.type,\r\n          platform: a.platform || '-',\r\n          confidence: a.confidence,\r\n          status: a.status,\r\n          impact: `${a.estimatedImpact.value}${a.estimatedImpact.unit} ${a.estimatedImpact.metric}`,\r\n        })),\r\n      };\r\n\r\n      // Build CSV\r\n      const lines: string[] = [];\r\n      lines.push('Stratum AI - Overview Report');\r\n      lines.push(`Generated: ${new Date().toLocaleString()}`);\r\n      lines.push(`Date Range: ${dateRange.start} to ${dateRange.end}`);\r\n      lines.push('');\r\n      lines.push(`EMQ Score: ${emqScore}`);\r\n      lines.push(`Autopilot Mode: ${autopilotMode}`);\r\n      lines.push(`Budget at Risk: $${budgetAtRisk.toLocaleString()}`);\r\n      lines.push('');\r\n\r\n      // KPIs\r\n      lines.push('--- KPIs ---');\r\n      lines.push('Metric,Value,Confidence');\r\n      reportData.kpis.forEach((k) => lines.push(`${k.label},${k.value},${k.confidence}%`));\r\n      lines.push('');\r\n\r\n      // Playbook\r\n      lines.push('--- Fix Playbook ---');\r\n      lines.push('Title,Priority,Owner,Status,EMQ Impact,Platform');\r\n      reportData.playbook.forEach((p) =>\r\n        lines.push(`\"${p.title}\",${p.priority},${p.owner},${p.status},+${p.estimatedImpact},${p.platform}`)\r\n      );\r\n      lines.push('');\r\n\r\n      // Actions\r\n      lines.push('--- Actions ---');\r\n      lines.push('Title,Type,Platform,Confidence,Status,Impact');\r\n      reportData.actions.forEach((a) =>\r\n        lines.push(`\"${a.title}\",${a.type},${a.platform},${a.confidence}%,${a.status},${a.impact}`)\r\n      );\r\n\r\n      const csvContent = lines.join('\\n');\r\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `stratum-overview-report-${dateRange.start}-to-${dateRange.end}.csv`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n\r\n      toast({\r\n        title: 'Report Exported',\r\n        description: 'CSV report downloaded successfully.',\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Export Failed',\r\n        description: error instanceof Error ? error.message : 'Could not generate report',\r\n        variant: 'destructive',\r\n      });\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  }, [dateRange, emqScore, autopilotMode, budgetAtRisk, kpis, playbook, actions, toast]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Page Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-white\">Overview</h1>\r\n          <p className=\"text-text-muted\">Trust & Performance Dashboard</p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={handleDateRangeChange}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-surface-secondary border border-white/10 text-text-secondary hover:text-white transition-colors\"\r\n          >\r\n            <CalendarIcon className=\"w-4 h-4\" />\r\n            {dateRangeLabel}\r\n          </button>\r\n          <button\r\n            onClick={handleExportReport}\r\n            disabled={isExporting}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-stratum text-white font-medium hover:shadow-glow transition-all disabled:opacity-50\"\r\n          >\r\n            <DocumentArrowDownIcon className=\"w-4 h-4\" />\r\n            {isExporting ? 'Exporting...' : 'Export Report'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Trust Status Header - Always visible */}\r\n      <div data-tour=\"trust-header\">\r\n        <TrustStatusHeader\r\n          emqScore={emqScore}\r\n          autopilotMode={autopilotMode}\r\n          budgetAtRisk={budgetAtRisk}\r\n          svi={25}\r\n          onViewDetails={handleViewDetails}\r\n        />\r\n      </div>\r\n\r\n      {/* KPI Strip with confidence stamp */}\r\n      <div data-tour=\"kpi-strip\">\r\n        <KpiStrip kpis={kpis} emqScore={emqScore} />\r\n      </div>\r\n\r\n      {/* Main content grid */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Left column - EMQ Details */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* EMQ Score Card */}\r\n          <EmqScoreCard score={emqScore} previousScore={emqData?.previousScore ?? 82} showDrivers />\r\n\r\n          {/* Fix Playbook */}\r\n          <div data-tour=\"fix-playbook\">\r\n            <EmqFixPlaybookPanel\r\n              items={playbook}\r\n              onItemClick={handlePlaybookItemClick}\r\n              onAssign={handlePlaybookAssign}\r\n              onApply={handlePlaybookApply}\r\n              maxItems={5}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right column - Actions & Timeline */}\r\n        <div className=\"space-y-6\">\r\n          {/* Actions Panel */}\r\n          <ActionsPanel\r\n            actions={actions}\r\n            autopilotMode={autopilotMode}\r\n            onApply={handleApplyAction}\r\n            onDismiss={handleDismissAction}\r\n            onQueue={handleQueueAction}\r\n            maxActions={5}\r\n          />\r\n\r\n          {/* Incident Timeline */}\r\n          <EmqTimeline events={timeline} maxEvents={5} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Assignment Modal */}\r\n      {showAssignModal && assigningItem && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4\">\r\n          <div className=\"bg-neutral-900 border border-white/10 rounded-xl w-full max-w-md\">\r\n            <div className=\"flex items-center justify-between p-4 border-b border-white/10\">\r\n              <h3 className=\"text-lg font-semibold text-white\">Assign Task</h3>\r\n              <button\r\n                onClick={() => setShowAssignModal(false)}\r\n                className=\"p-2 text-white/40 hover:text-white\"\r\n              >\r\n                <XMarkIcon className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-4\">\r\n              {/* Item being assigned */}\r\n              <div className=\"p-3 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-white font-medium text-sm\">{assigningItem.title}</p>\r\n                <div className=\"flex items-center gap-3 mt-1.5 text-xs text-white/50\">\r\n                  <span className={`px-1.5 py-0.5 rounded text-xs font-medium ${\r\n                    assigningItem.priority === 'critical' ? 'bg-red-500/20 text-red-400' :\r\n                    assigningItem.priority === 'high' ? 'bg-orange-500/20 text-orange-400' :\r\n                    'bg-yellow-500/20 text-yellow-400'\r\n                  }`}>\r\n                    {assigningItem.priority}\r\n                  </span>\r\n                  {assigningItem.platform && <span>{assigningItem.platform}</span>}\r\n                  {assigningItem.estimatedTime && <span>{assigningItem.estimatedTime}</span>}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Assignee */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-white/70 mb-1.5\">\r\n                  <UserIcon className=\"w-4 h-4 inline mr-1\" />\r\n                  Assign to *\r\n                </label>\r\n                <select\r\n                  value={assignee}\r\n                  onChange={(e) => setAssignee(e.target.value)}\r\n                  className=\"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500/50\"\r\n                >\r\n                  <option value=\"\" className=\"bg-neutral-900\">Select team member...</option>\r\n                  <option value=\"Data Team\" className=\"bg-neutral-900\">Data Team</option>\r\n                  <option value=\"Engineering\" className=\"bg-neutral-900\">Engineering</option>\r\n                  <option value=\"Marketing Ops\" className=\"bg-neutral-900\">Marketing Ops</option>\r\n                  <option value=\"Platform Lead\" className=\"bg-neutral-900\">Platform Lead</option>\r\n                  <option value=\"Analytics Team\" className=\"bg-neutral-900\">Analytics Team</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Notes */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-white/70 mb-1.5\">Notes (optional)</label>\r\n                <textarea\r\n                  value={assignNotes}\r\n                  onChange={(e) => setAssignNotes(e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/30 focus:outline-none focus:border-purple-500/50 resize-none\"\r\n                  placeholder=\"Additional context or instructions...\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-3 p-4 border-t border-white/10\">\r\n              <button\r\n                onClick={() => setShowAssignModal(false)}\r\n                className=\"px-4 py-2 text-white/60 hover:text-white\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleConfirmAssign}\r\n                disabled={!assignee.trim() || updatePlaybookItem.isPending}\r\n                className=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium disabled:opacity-50 transition-colors\"\r\n              >\r\n                {updatePlaybookItem.isPending ? 'Assigning...' : 'Assign'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useQueueAction","tenantId","queryClient","useQueryClient","useMutation","request","apiClient","useApproveAction","actionId","useDismissAction","filterTabs","FunnelIcon","ArrowTrendingUpIcon","ExclamationTriangleIcon","SparklesIcon","WrenchScrewdriverIcon","getAutopilotRestrictionMessage","mode","ActionsPanel","actions","autopilotMode","onApply","onDismiss","onQueue","onApplyAll","maxActions","className","activeFilter","setActiveFilter","useState","pendingActions","a","displayActions","restrictionMessage","isActionsDisabled","countByType","acc","jsxs","cn","jsx","tab","count","b","Icon","action","ActionCard","TenantOverview","useParams","navigate","useNavigate","toast","useToast","tid","showAssignModal","setShowAssignModal","assigningItem","setAssigningItem","assignee","setAssignee","assignNotes","setAssignNotes","isExporting","setIsExporting","dateRange","setDateRange","dateRangeLabel","setDateRangeLabel","approveAction","dismissAction","queueAction","updatePlaybookItem","useUpdatePlaybookItem","emqData","useEmqScore","autopilotData","useAutopilotState","playbookData","useEmqPlaybook","incidentsData","useEmqIncidents","overviewData","useTenantOverview","recommendationsData","useTenantRecommendations","emqScore","budgetAtRisk","kpis","_a","_b","playbook","timeline","i","r","handleViewDetails","handlePlaybookItemClick","item","handlePlaybookAssign","handleConfirmAssign","useCallback","error","handlePlaybookApply","handleApplyAction","handleDismissAction","handleQueueAction","handleDateRangeChange","ranges","nextIndex","nextRange","end","start","handleExportReport","reportData","k","p","lines","csvContent","blob","url","link","CalendarIcon","DocumentArrowDownIcon","TrustStatusHeader","KpiStrip","EmqScoreCard","EmqFixPlaybookPanel","EmqTimeline","XMarkIcon","UserIcon","e"],"mappings":"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"}