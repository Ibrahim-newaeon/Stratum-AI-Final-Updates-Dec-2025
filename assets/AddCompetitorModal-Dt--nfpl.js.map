{"version":3,"file":"AddCompetitorModal-Dt--nfpl.js","sources":["../../src/api/competitors.ts","../../src/components/competitors/AddCompetitorModal.tsx"],"sourcesContent":["/**\r\n * Stratum AI - Competitor Intelligence API\r\n *\r\n * Competitor monitoring and share of voice tracking\r\n */\r\n\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient, ApiResponse, PaginatedResponse } from './client';\r\n\r\n// Types\r\nexport interface Competitor {\r\n  id: string;\r\n  tenantId: number;\r\n  name: string;\r\n  domain: string;\r\n  country: string;\r\n  platforms: string[];\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  lastRefreshedAt: string | null;\r\n  isActive?: boolean;\r\n  estimatedSpend?: number;\r\n  shareOfVoice?: number;\r\n  activeCreatives?: number;\r\n  lastUpdated?: string;\r\n}\r\n\r\nexport interface CompetitorMetrics {\r\n  competitorId: string;\r\n  date: string;\r\n  platform: string;\r\n  shareOfVoice: number;\r\n  estimatedSpend: number;\r\n  impressionShare: number;\r\n  adCount: number;\r\n  topKeywords: string[];\r\n  sentiment: number; // -1 to 1\r\n}\r\n\r\nexport interface ShareOfVoice {\r\n  date: string;\r\n  data: {\r\n    competitorId: string;\r\n    competitorName: string;\r\n    share: number;\r\n    trend: 'up' | 'down' | 'flat';\r\n  }[];\r\n  tenantShare: number;\r\n}\r\n\r\nexport interface KeywordOverlap {\r\n  keyword: string;\r\n  competitorId: string;\r\n  competitorName: string;\r\n  yourPosition: number | null;\r\n  competitorPosition: number;\r\n  searchVolume: number;\r\n  competitionLevel: 'low' | 'medium' | 'high';\r\n}\r\n\r\nexport interface CompetitorFilters {\r\n  platform?: string;\r\n  search?: string;\r\n  skip?: number;\r\n  limit?: number;\r\n}\r\n\r\nexport interface CreateCompetitorRequest {\r\n  name: string;\r\n  domain: string;\r\n  country?: string;\r\n  platforms?: string[];\r\n}\r\n\r\n// API Functions\r\nexport const competitorsApi = {\r\n  /**\r\n   * Get all competitors\r\n   */\r\n  getCompetitors: async (\r\n    filters: CompetitorFilters = {}\r\n  ): Promise<PaginatedResponse<Competitor>> => {\r\n    const response = await apiClient.get<ApiResponse<PaginatedResponse<Competitor>>>(\r\n      '/competitors',\r\n      { params: filters }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Get a single competitor\r\n   */\r\n  getCompetitor: async (id: string): Promise<Competitor> => {\r\n    const response = await apiClient.get<ApiResponse<Competitor>>(`/competitors/${id}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Create a competitor\r\n   */\r\n  createCompetitor: async (data: CreateCompetitorRequest): Promise<Competitor> => {\r\n    const response = await apiClient.post<ApiResponse<Competitor>>('/competitors', data);\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Update a competitor\r\n   */\r\n  updateCompetitor: async (\r\n    id: string,\r\n    data: Partial<CreateCompetitorRequest>\r\n  ): Promise<Competitor> => {\r\n    const response = await apiClient.patch<ApiResponse<Competitor>>(`/competitors/${id}`, data);\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Delete a competitor\r\n   */\r\n  deleteCompetitor: async (id: string): Promise<void> => {\r\n    await apiClient.delete(`/competitors/${id}`);\r\n  },\r\n\r\n  /**\r\n   * Get share of voice data\r\n   */\r\n  getShareOfVoice: async (\r\n    startDate: string,\r\n    endDate: string,\r\n    platform?: string\r\n  ): Promise<ShareOfVoice[]> => {\r\n    const params: Record<string, string> = { start_date: startDate, end_date: endDate };\r\n    if (platform) params.platform = platform;\r\n    const response = await apiClient.get<ApiResponse<ShareOfVoice[]>>(\r\n      '/competitors/share-of-voice',\r\n      { params }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Get competitor keywords\r\n   */\r\n  getCompetitorKeywords: async (id: string): Promise<KeywordOverlap[]> => {\r\n    const response = await apiClient.get<ApiResponse<KeywordOverlap[]>>(\r\n      `/competitors/${id}/keywords`\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Get competitor metrics\r\n   */\r\n  getCompetitorMetrics: async (\r\n    id: string,\r\n    startDate: string,\r\n    endDate: string\r\n  ): Promise<CompetitorMetrics[]> => {\r\n    const response = await apiClient.get<ApiResponse<CompetitorMetrics[]>>(\r\n      `/competitors/${id}/metrics`,\r\n      { params: { start_date: startDate, end_date: endDate } }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Refresh competitor data\r\n   */\r\n  refreshCompetitor: async (id: string): Promise<Competitor> => {\r\n    const response = await apiClient.post<ApiResponse<Competitor>>(`/competitors/${id}/refresh`);\r\n    return response.data.data;\r\n  },\r\n};\r\n\r\n// React Query Hooks\r\n\r\nexport function useCompetitors(filters: CompetitorFilters = {}) {\r\n  return useQuery({\r\n    queryKey: ['competitors', filters],\r\n    queryFn: () => competitorsApi.getCompetitors(filters),\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\nexport function useCompetitor(id: string) {\r\n  return useQuery({\r\n    queryKey: ['competitors', id],\r\n    queryFn: () => competitorsApi.getCompetitor(id),\r\n    enabled: !!id,\r\n  });\r\n}\r\n\r\nexport function useCreateCompetitor() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: competitorsApi.createCompetitor,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['competitors'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useUpdateCompetitor() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<CreateCompetitorRequest> }) =>\r\n      competitorsApi.updateCompetitor(id, data),\r\n    onSuccess: (_, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: ['competitors'] });\r\n      queryClient.invalidateQueries({ queryKey: ['competitors', variables.id] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useDeleteCompetitor() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: competitorsApi.deleteCompetitor,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['competitors'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useShareOfVoice(startDate: string, endDate: string, platform?: string) {\r\n  return useQuery({\r\n    queryKey: ['competitors', 'sov', startDate, endDate, platform],\r\n    queryFn: () => competitorsApi.getShareOfVoice(startDate, endDate, platform),\r\n    enabled: !!startDate && !!endDate,\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\nexport function useCompetitorKeywords(id: string) {\r\n  return useQuery({\r\n    queryKey: ['competitors', id, 'keywords'],\r\n    queryFn: () => competitorsApi.getCompetitorKeywords(id),\r\n    enabled: !!id,\r\n  });\r\n}\r\n\r\nexport function useCompetitorMetrics(id: string, startDate: string, endDate: string) {\r\n  return useQuery({\r\n    queryKey: ['competitors', id, 'metrics', startDate, endDate],\r\n    queryFn: () => competitorsApi.getCompetitorMetrics(id, startDate, endDate),\r\n    enabled: !!id && !!startDate && !!endDate,\r\n  });\r\n}\r\n\r\nexport function useRefreshCompetitor() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: competitorsApi.refreshCompetitor,\r\n    onSuccess: (_, id) => {\r\n      queryClient.invalidateQueries({ queryKey: ['competitors', id] });\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Add Competitor Modal - Shared Component\r\n * Used by both Benchmarks and Competitors pages\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { useCreateCompetitor, useCompetitors } from '@/api/hooks';\r\nimport {\r\n  ArrowPathIcon,\r\n  ArrowTopRightOnSquareIcon,\r\n  CheckIcon,\r\n  PlusIcon,\r\n  XMarkIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { cn } from '@/lib/utils';\r\n\r\n// Countries for Meta Ads Library and Google Transparency\r\nconst COUNTRIES = [\r\n  { code: 'SA', name: 'Saudi Arabia', flag: 'ðŸ‡¸ðŸ‡¦' },\r\n  { code: 'AE', name: 'United Arab Emirates', flag: 'ðŸ‡¦ðŸ‡ª' },\r\n  { code: 'EG', name: 'Egypt', flag: 'ðŸ‡ªðŸ‡¬' },\r\n  { code: 'KW', name: 'Kuwait', flag: 'ðŸ‡°ðŸ‡¼' },\r\n  { code: 'QA', name: 'Qatar', flag: 'ðŸ‡¶ðŸ‡¦' },\r\n  { code: 'BH', name: 'Bahrain', flag: 'ðŸ‡§ðŸ‡­' },\r\n  { code: 'OM', name: 'Oman', flag: 'ðŸ‡´ðŸ‡²' },\r\n  { code: 'JO', name: 'Jordan', flag: 'ðŸ‡¯ðŸ‡´' },\r\n  { code: 'LB', name: 'Lebanon', flag: 'ðŸ‡±ðŸ‡§' },\r\n  { code: 'US', name: 'United States', flag: 'ðŸ‡ºðŸ‡¸' },\r\n  { code: 'GB', name: 'United Kingdom', flag: 'ðŸ‡¬ðŸ‡§' },\r\n  { code: 'DE', name: 'Germany', flag: 'ðŸ‡©ðŸ‡ª' },\r\n  { code: 'FR', name: 'France', flag: 'ðŸ‡«ðŸ‡·' },\r\n  { code: 'IN', name: 'India', flag: 'ðŸ‡®ðŸ‡³' },\r\n  { code: 'PK', name: 'Pakistan', flag: 'ðŸ‡µðŸ‡°' },\r\n  { code: 'TR', name: 'Turkey', flag: 'ðŸ‡¹ðŸ‡·' },\r\n];\r\n\r\nconst PLATFORMS = [\r\n  { id: 'meta', name: 'Meta (Facebook/Instagram)', icon: 'M' },\r\n  { id: 'google', name: 'Google Ads', icon: 'G' },\r\n  { id: 'tiktok', name: 'TikTok', icon: 'T' },\r\n  { id: 'snapchat', name: 'Snapchat', icon: 'S' },\r\n];\r\n\r\ninterface AddCompetitorModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nexport function AddCompetitorModal({ isOpen, onClose, onSuccess }: AddCompetitorModalProps) {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [newCompetitor, setNewCompetitor] = useState({\r\n    name: '',\r\n    domain: '',\r\n    country: 'SA',\r\n    platforms: ['meta', 'google'] as string[],\r\n  });\r\n\r\n  const createCompetitor = useCreateCompetitor();\r\n  const { refetch: refetchCompetitors } = useCompetitors();\r\n\r\n  // Generate Meta Ads Library URL\r\n  const getMetaAdsLibraryUrl = (name: string, country: string) => {\r\n    return `https://www.facebook.com/ads/library/?active_status=active&ad_type=all&country=${country}&q=${encodeURIComponent(name)}&search_type=keyword_unordered`;\r\n  };\r\n\r\n  // Generate Google Ads Transparency URL\r\n  const getGoogleTransparencyUrl = (name: string) => {\r\n    return `https://adstransparency.google.com/?query=${encodeURIComponent(name)}`;\r\n  };\r\n\r\n  // Toggle platform selection\r\n  const togglePlatform = (platformId: string) => {\r\n    setNewCompetitor((prev) => ({\r\n      ...prev,\r\n      platforms: prev.platforms.includes(platformId)\r\n        ? prev.platforms.filter((p) => p !== platformId)\r\n        : [...prev.platforms, platformId],\r\n    }));\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleAddCompetitor = async () => {\r\n    if (!newCompetitor.name || !newCompetitor.domain) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      await createCompetitor.mutateAsync({\r\n        name: newCompetitor.name,\r\n        domain: newCompetitor.domain,\r\n        country: newCompetitor.country,\r\n        platforms: newCompetitor.platforms,\r\n      });\r\n      setNewCompetitor({ name: '', domain: '', country: 'SA', platforms: ['meta', 'google'] });\r\n      refetchCompetitors();\r\n      onSuccess?.();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Failed to add competitor:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Handle close and reset form\r\n  const handleClose = () => {\r\n    setNewCompetitor({ name: '', domain: '', country: 'SA', platforms: ['meta', 'google'] });\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\r\n        onClick={handleClose}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative w-full max-w-lg mx-4 bg-card rounded-2xl shadow-2xl border overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold\">Add Competitor</h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Track competitor ads via Meta Ads Library & Google Transparency\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 rounded-lg hover:bg-muted transition-colors\"\r\n          >\r\n            <XMarkIcon className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <div className=\"p-6 space-y-5\">\r\n          {/* Competitor Name */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Competitor Name *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={newCompetitor.name}\r\n              onChange={(e) => setNewCompetitor((prev) => ({ ...prev, name: e.target.value }))}\r\n              placeholder=\"e.g., Competitor Inc\"\r\n              className=\"w-full px-4 py-2.5 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n            />\r\n          </div>\r\n\r\n          {/* Domain/Website */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Website / Domain *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={newCompetitor.domain}\r\n              onChange={(e) =>\r\n                setNewCompetitor((prev) => ({ ...prev, domain: e.target.value }))\r\n              }\r\n              placeholder=\"e.g., competitor.com\"\r\n              className=\"w-full px-4 py-2.5 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n            />\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Used to search ads in Meta Ads Library and Google Transparency\r\n            </p>\r\n          </div>\r\n\r\n          {/* Country Selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Competitor's Country *</label>\r\n            <select\r\n              value={newCompetitor.country}\r\n              onChange={(e) =>\r\n                setNewCompetitor((prev) => ({ ...prev, country: e.target.value }))\r\n              }\r\n              className=\"w-full px-4 py-2.5 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n            >\r\n              {COUNTRIES.map((country) => (\r\n                <option key={country.code} value={country.code}>\r\n                  {country.flag} {country.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Select the country where competitor runs ads (for Meta Ads Library filter)\r\n            </p>\r\n          </div>\r\n\r\n          {/* Platform Selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Platforms to Track</label>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {PLATFORMS.map((platform) => (\r\n                <button\r\n                  key={platform.id}\r\n                  type=\"button\"\r\n                  onClick={() => togglePlatform(platform.id)}\r\n                  className={cn(\r\n                    'flex items-center gap-2 px-3 py-2 rounded-lg border transition-all',\r\n                    newCompetitor.platforms.includes(platform.id)\r\n                      ? 'border-primary bg-primary/10 text-primary'\r\n                      : 'border-border hover:border-primary/50'\r\n                  )}\r\n                >\r\n                  <span className=\"w-5 h-5 rounded bg-muted flex items-center justify-center text-xs font-bold\">\r\n                    {platform.icon}\r\n                  </span>\r\n                  <span className=\"text-sm\">{platform.name}</span>\r\n                  {newCompetitor.platforms.includes(platform.id) && (\r\n                    <CheckIcon className=\"w-4 h-4\" />\r\n                  )}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quick Links Preview */}\r\n          {newCompetitor.name && (\r\n            <div className=\"p-4 rounded-lg bg-muted/50 space-y-3\">\r\n              <p className=\"text-sm font-medium\">\r\n                Preview Ad Library Links for \"{newCompetitor.name}\":\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <a\r\n                  href={getMetaAdsLibraryUrl(newCompetitor.name, newCompetitor.country)}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"flex items-center gap-2 text-sm text-primary hover:underline\"\r\n                >\r\n                  <ArrowTopRightOnSquareIcon className=\"w-4 h-4\" />\r\n                  Search \"{newCompetitor.name}\" in Meta Ads Library (\r\n                  {COUNTRIES.find((c) => c.code === newCompetitor.country)?.name})\r\n                </a>\r\n                <a\r\n                  href={getGoogleTransparencyUrl(newCompetitor.name)}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"flex items-center gap-2 text-sm text-primary hover:underline\"\r\n                >\r\n                  <ArrowTopRightOnSquareIcon className=\"w-4 h-4\" />\r\n                  Search \"{newCompetitor.name}\" in Google Ads Transparency\r\n                </a>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-end gap-3 p-6 border-t bg-muted/30\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 rounded-lg border hover:bg-muted transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleAddCompetitor}\r\n            disabled={!newCompetitor.name || !newCompetitor.domain || isSubmitting}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <ArrowPathIcon className=\"w-4 h-4 animate-spin\" />\r\n                Adding...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <PlusIcon className=\"w-4 h-4\" />\r\n                Add Competitor\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddCompetitorModal;\r\n"],"names":["competitorsApi","filters","apiClient","id","data","startDate","endDate","platform","params","useCompetitors","useQuery","useCreateCompetitor","queryClient","useQueryClient","useMutation","useDeleteCompetitor","useShareOfVoice","COUNTRIES","PLATFORMS","AddCompetitorModal","isOpen","onClose","onSuccess","isSubmitting","setIsSubmitting","useState","newCompetitor","setNewCompetitor","createCompetitor","refetchCompetitors","getMetaAdsLibraryUrl","name","country","getGoogleTransparencyUrl","togglePlatform","platformId","prev","p","handleAddCompetitor","error","handleClose","jsxs","jsx","XMarkIcon","e","cn","CheckIcon","ArrowTopRightOnSquareIcon","_a","c","Fragment","ArrowPathIcon","PlusIcon"],"mappings":"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"}